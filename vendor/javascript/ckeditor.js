var i="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;(function(){window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var o=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,s={timestamp:"J5S9",version:"4.12.1 (Standard)",revision:"64749bb245",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:o},status:"unloaded",basePath:function(){var i=window.CKEDITOR_BASEPATH||"";if(!i)for(var s=document.getElementsByTagName("script"),T=0;T<s.length;T++){var _=s[T].src.match(o);if(_){i=_[1];break}}-1==i.indexOf(":/")&&"//"!=i.slice(0,2)&&(i=0===i.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+i:location.href.match(/^[^\?]*\/(?:)/)[0]+i);if(!i)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return i}(),getUrl:function(o){-1==o.indexOf(":/")&&0!==o.indexOf("/")&&(o=(this||i).basePath+o);(this||i).timestamp&&"/"!=o.charAt(o.length-1)&&!/[&?]t=/.test(o)&&(o+=(0<=o.indexOf("?")?"&":"?")+"t="+(this||i).timestamp);return o},domReady:function(){function a(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",a,!1),b()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",a),b())}catch(i){}}function b(){for(var o;o=i.shift();)o()}var i=[];return function(o){function h(){try{document.documentElement.doScroll("left")}catch(i){setTimeout(h,1);return}a()}i.push(o);"complete"===document.readyState&&setTimeout(a,1);if(1==i.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",a);window.attachEvent("onload",a);o=!1;try{o=!window.frameElement}catch(i){}document.documentElement.doScroll&&o&&h()}}}()},T=window.CKEDITOR_GETURL;if(T){var _=s.getUrl;s.getUrl=function(i){return T.call(s,i)||_.call(s,i)}}return s}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(i){var o=CKEDITOR.event.prototype,s;for(s in o)null==i[s]&&(i[s]=o[s])},CKEDITOR.event.prototype=function(){function a(o){var s=f(this||i);return s[o]||(s[o]=new b(o))}var f=function(i){i=i.getPrivate&&i.getPrivate()||i._||(i._={});return i.events||(i.events={})},b=function(o){(this||i).name=o;(this||i).listeners=[]};b.prototype={getListenerIndex:function(o){for(var s=0,T=(this||i).listeners;s<T.length;s++)if(T[s].fn==o)return s;return-1}};return{define:function(o,s){var T=a.call(this||i,o);CKEDITOR.tools.extend(T,s,!0)},on:function(o,s,T,_,S){function h(S,P,$,V){S={name:o,sender:this||i,editor:S,data:P,listenerData:_,stop:$,cancel:V,removeListener:m};return!1!==s.call(T,S)&&S.data}function m(){$.removeListener(o,s)}var P=a.call(this||i,o);if(0>P.getListenerIndex(s)){P=P.listeners;T||(T=this||i);isNaN(S)&&(S=10);var $=this||i;h.fn=s;h.priority=S;for(var V=P.length-1;0<=V;V--)if(P[V].priority<=S)return P.splice(V+1,0,h),{removeListener:m};P.unshift(h)}return{removeListener:m}},once:function(){var o=Array.prototype.slice.call(arguments),s=o[1];o[1]=function(o){o.removeListener();return s.apply(this||i,arguments)};return(this||i).on.apply(this||i,o)},capture:function(){CKEDITOR.event.useCapture=1;var o=(this||i).on.apply(this||i,arguments);CKEDITOR.event.useCapture=0;return o},fire:function(){var o=0,b=function(){o=1},s=0,k=function(){s=1};return function(T,_,S){var P=f(this||i)[T];T=o;var $=s;o=s=0;if(P){var V=P.listeners;if(V.length)for(var V=V.slice(0),j,Y=0;Y<V.length;Y++){if(P.errorProof)try{j=V[Y].call(this||i,S,_,b,k)}catch(i){}else j=V[Y].call(this||i,S,_,b,k);!1===j?s=1:"undefined"!=typeof j&&(_=j);if(o||s)break}}_=!s&&("undefined"==typeof _||_);o=T;s=$;return _}}(),fireOnce:function(o,s,T){s=this.fire(o,s,T);delete f(this||i)[o];return s},removeListener:function(o,s){var T=f(this||i)[o];if(T){var _=T.getListenerIndex(s);0<=_&&T.listeners.splice(_,1)}},removeAllListeners:function(){var o=f(this||i),s;for(s in o)delete o[s]},hasListeners:function(o){return(o=f(this||i)[o])&&0<o.listeners.length}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this||i,arguments]);CKEDITOR.event.call(this||i)},CKEDITOR.editor.prototype.fire=function(o,s){o in{instanceReady:1,loaded:1}&&((this||i)[o]=!0);return CKEDITOR.event.prototype.fire.call(this||i,o,s,this||i)},CKEDITOR.editor.prototype.fireOnce=function(o,s){o in{instanceReady:1,loaded:1}&&((this||i)[o]=!0);return CKEDITOR.event.prototype.fireOnce.call(this||i,o,s,this||i)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var o=navigator.userAgent.toLowerCase(),s=o.match(/edge[ \/](\d+.?\d*)/),T=-1<o.indexOf("trident/"),T=!(!s&&!T),T={ie:T,edge:!!s,webkit:!T&&-1<o.indexOf(" applewebkit/"),air:-1<o.indexOf(" adobeair/"),mac:-1<o.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<o.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(o),isCustomDomain:function(){if(!(this||i).ie)return!1;var o=document.domain,s=window.location.hostname;return o!=s&&o!="["+s+"]"},secure:"https:"==location.protocol};T.gecko="Gecko"==navigator.product&&!T.webkit&&!T.ie;T.webkit&&(-1<o.indexOf("chrome")?T.chrome=!0:T.safari=!0);var _=0;T.ie&&(_=s?parseFloat(s[1]):T.quirks||!document.documentMode?parseFloat(o.match(/msie (\d+)/)[1]):document.documentMode,T.ie9Compat=9==_,T.ie8Compat=8==_,T.ie7Compat=7==_,T.ie6Compat=7>_||T.quirks);T.gecko&&(s=o.match(/rv:([\d\.]+)/))&&(s=s[1].split("."),_=1e4*s[0]+100*(s[1]||0)+1*(s[2]||0));T.air&&(_=parseFloat(o.match(/ adobeair\/(\d+)/)[1]));T.webkit&&(_=parseFloat(o.match(/ applewebkit\/(\d+)/)[1]));T.version=_;T.isCompatible=!(T.ie&&7>_)&&!(T.gecko&&4e4>_)&&!(T.webkit&&534>_);T.hidpi=2<=window.devicePixelRatio;T.needsBrFiller=T.gecko||T.webkit||T.ie&&10<_;T.needsNbspFiller=T.ie&&11>_;T.cssClass="cke_browser_"+(T.ie?"ie":T.gecko?"gecko":T.webkit?"webkit":"unknown");T.quirks&&(T.cssClass+=" cke_browser_quirks");T.ie&&(T.cssClass+=" cke_browser_ie"+(T.quirks?"6 cke_browser_iequirks":T.version));T.air&&(T.cssClass+=" cke_browser_air");T.iOS&&(T.cssClass+=" cke_browser_ios");T.hidpi&&(T.cssClass+=" cke_hidpi");return T}()),"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR);CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var i=document.createElement("script");i.type="text/javascript";i.src=CKEDITOR.basePath+"ckeditor.js";document.getElementsByTagName("head")[0].appendChild(i)}};CKEDITOR.loadFullCoreTimeout=0;CKEDITOR.add=function(o){((this||i)._.pending||((this||i)._.pending=[])).push(o)};(function(){CKEDITOR.domReady((function(){var i=CKEDITOR.loadFullCore,o=CKEDITOR.loadFullCoreTimeout;i&&(CKEDITOR.status="basic_ready",i&&i._load?i():o&&setTimeout((function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()}),1e3*o))}))})();CKEDITOR.status="basic_loaded"}(),"use strict",CKEDITOR.VERBOSITY_WARN=1,CKEDITOR.VERBOSITY_ERROR=2,CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR,CKEDITOR.warn=function(i,o){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:i,additionalData:o})},CKEDITOR.error=function(i,o){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:i,additionalData:o})},CKEDITOR.on("log",(function(i){if(window.console&&window.console.log){var o=console[i.data.type]?i.data.type:"log",s=i.data.errorCode;(i=i.data.additionalData)?console[o]("[CKEDITOR] Error code: "+s+".",i):console[o]("[CKEDITOR] Error code: "+s+".");console[o]("[CKEDITOR] For more information about this error go to https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#"+s)}}),null,null,999),CKEDITOR.dom={},function(){function a(o,s,T){(this||i)._minInterval=o;(this||i)._context=T;(this||i)._lastOutput=(this||i)._scheduledTimer=0;(this||i)._output=CKEDITOR.tools.bind(s,T||{});var _=this||i;(this||i).input=function(){function a(){_._lastOutput=(new Date).getTime();_._scheduledTimer=0;_._call()}if(!_._scheduledTimer||!1!==_._reschedule()){var i=(new Date).getTime()-_._lastOutput;i<_._minInterval?_._scheduledTimer=setTimeout(a,_._minInterval-i):a()}}}function f(o,s,T){a.call(this||i,o,s,T);(this||i)._args=[];var _=this||i;(this||i).input=CKEDITOR.tools.override((this||i).input,(function(o){return function(){_._args=Array.prototype.slice.call(arguments);o.call(this||i)}}))}var o=[],s=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",T=/&/g,_=/>/g,S=/</g,P=/"/g,$=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,V={lt:"<",gt:">",amp:"&",quot:'"',nbsp:" ",shy:"­"},e=function(i,o){return"#"==o[0]?String.fromCharCode(parseInt(o.slice(1),10)):V[o]};CKEDITOR.on("reset",(function(){o=[]}));CKEDITOR.tools={arrayCompare:function(i,o){if(!i&&!o)return!0;if(!i||!o||i.length!=o.length)return!1;for(var s=0;s<i.length;s++)if(i[s]!=o[s])return!1;return!0},getIndex:function(i,o){for(var s=0;s<i.length;++s)if(o(i[s]))return s;return-1},clone:function(i){var o;if(i&&i instanceof Array){o=[];for(var s=0;s<i.length;s++)o[s]=CKEDITOR.tools.clone(i[s]);return o}if(null===i||"object"!=typeof i||i instanceof String||i instanceof Number||i instanceof Boolean||i instanceof Date||i instanceof RegExp||i.nodeType||i.window===i)return i;o=new i.constructor;for(s in i)o[s]=CKEDITOR.tools.clone(i[s]);return o},capitalize:function(i,o){return i.charAt(0).toUpperCase()+(o?i.slice(1):i.slice(1).toLowerCase())},extend:function(i){var o=arguments.length,s,T;"boolean"==typeof(s=arguments[o-1])?o--:"boolean"==typeof(s=arguments[o-2])&&(T=arguments[o-1],o-=2);for(var _=1;_<o;_++){var S=arguments[_]||{};CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(S),(function(o){!0!==s&&null!=i[o]||T&&!(o in T)||(i[o]=S[o])}))}return i},prototypedCopy:function(i){var e=function(){};e.prototype=i;return new e},copy:function(i){var o={},s;for(s in i)o[s]=i[s];return o},isArray:function(i){return"[object Array]"==Object.prototype.toString.call(i)},isEmpty:function(i){for(var o in i)if(i.hasOwnProperty(o))return!1;return!0},cssVendorPrefix:function(i,o,T){if(T)return s+i+":"+o+";"+i+":"+o;T={};T[i]=o;T[s+i]=o;return T},cssStyleToDomStyle:function(){var i=document.createElement("div").style,o="undefined"!=typeof i.cssFloat?"cssFloat":"undefined"!=typeof i.styleFloat?"styleFloat":"float";return function(i){return"float"==i?o:i.replace(/-./g,(function(i){return i.substr(1).toUpperCase()}))}}(),buildStyleHtml:function(i){i=[].concat(i);for(var o,s=[],T=0;T<i.length;T++)(o=i[T])&&(/@import|[{}]/.test(o)?s.push("<style>"+o+"</style>"):s.push('<link type="text/css" rel=stylesheet href="'+o+'">'));return s.join("")},htmlEncode:function(i){return void 0===i||null===i?"":String(i).replace(T,"&amp;").replace(_,"&gt;").replace(S,"&lt;")},htmlDecode:function(i){return i.replace($,e)},htmlEncodeAttr:function(i){return CKEDITOR.tools.htmlEncode(i).replace(P,"&quot;")},htmlDecodeAttr:function(i){return CKEDITOR.tools.htmlDecode(i)},transformPlainTextToHtml:function(i,o){var s=o==CKEDITOR.ENTER_BR,T=this.htmlEncode(i.replace(/\r\n/g,"\n")),T=T.replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),_=o==CKEDITOR.ENTER_P?"p":"div";if(!s){var S=/\n{2}/g;if(S.test(T))var P="<"+_+">",$="</"+_+">",T=P+T.replace(S,(function(){return $+P}))+$}T=T.replace(/\n/g,"<br>");s||(T=T.replace(new RegExp("<br>(?=</"+_+">)"),(function(i){return CKEDITOR.tools.repeat(i,2)})));T=T.replace(/^ | $/g,"&nbsp;");return T=T.replace(/(>|\s) /g,(function(i,o){return o+"&nbsp;"})).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:function(){var i=0;return function(){return++i}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var i="e",o=0;8>o;o++)i+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return i},override:function(i,o){var s=o(i);s.prototype=i.prototype;return s},setTimeout:function(i,o,s,T,_){_||(_=window);s||(s=_);return _.setTimeout((function(){T?i.apply(s,[].concat(T)):i.apply(s)}),o||0)},throttle:function(o,s,T){return new(this||i).buffers.throttle(o,s,T)},trim:function(){var i=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(o){return o.replace(i,"")}}(),ltrim:function(){var i=/^[ \t\n\r]+/g;return function(o){return o.replace(i,"")}}(),rtrim:function(){var i=/[ \t\n\r]+$/g;return function(o){return o.replace(i,"")}}(),indexOf:function(i,o){if("function"==typeof o){for(var s=0,T=i.length;s<T;s++)if(o(i[s]))return s}else{if(i.indexOf)return i.indexOf(o);s=0;for(T=i.length;s<T;s++)if(i[s]===o)return s}return-1},search:function(i,o){var s=CKEDITOR.tools.indexOf(i,o);return 0<=s?i[s]:null},bind:function(i,o){return function(){return i.apply(o,arguments)}},createClass:function(o){var e=o.$,s=o.base,T=o.privates||o._,_=o.proto;o=o.statics;!e&&(e=function(){s&&(this||i).base.apply(this||i,arguments)});if(T)var S=e,e=function(){var o=(this||i)._||((this||i)._={}),s;for(s in T){var _=T[s];o[s]="function"==typeof _?CKEDITOR.tools.bind(_,this||i):_}S.apply(this||i,arguments)};s&&(e.prototype=this.prototypedCopy(s.prototype),e.prototype.constructor=e,e.base=s,e.baseProto=s.prototype,e.prototype.base=function r(){(this||i).base=s.prototype.base;s.apply(this||i,arguments);(this||i).base=r});_&&this.extend(e.prototype,_,!0);o&&this.extend(e,o,!0);return e},addFunction:function(s,T){return o.push((function(){return s.apply(T||this||i,arguments)}))-1},removeFunction:function(i){o[i]=null},callFunction:function(i){var s=o[i];return s&&s.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var i=/^-?\d+\.?\d*px$/,o;return function(s){o=CKEDITOR.tools.trim(s+"")+"px";return i.test(o)?o:s||""}}(),convertToPx:function(){var i;return function(o){i||(i=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(i));if(!/%$/.test(o)){var s=0>parseFloat(o);s&&(o=o.replace("-",""));i.setStyle("width",o);o=i.$.clientWidth;return s?-o:o}return o}}(),repeat:function(i,o){return Array(o+1).join(i)},tryThese:function(){for(var i,o=0,s=arguments.length;o<s;o++){var T=arguments[o];try{i=T();break}catch(i){}}return i},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(o){return function(){var s=arguments,T=this||i;window.setTimeout((function(){o.apply(T,s)}),0)}},normalizeCssText:function(i,o){var s=[],T,_=CKEDITOR.tools.parseCssText(i,!0,o);for(T in _)s.push(T+":"+_[T]);s.sort();return s.length?s.join(";")+";":""},convertRgbToHex:function(i){return i.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,(function(i,o,s,T){i=[o,s,T];for(o=0;3>o;o++)i[o]=("0"+parseInt(i[o],10).toString(16)).slice(-2);return"#"+i.join("")}))},normalizeHex:function(i){return i.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,(function(i,o,s,T){i=o.toLowerCase();3==i.length&&(i=i.split(""),i=[i[0],i[0],i[1],i[1],i[2],i[2]].join(""));return"#"+i+T}))},parseCssText:function(i,o,s){var T={};s&&(i=new CKEDITOR.dom.element("span").setAttribute("style",i).getAttribute("style")||"");i&&(i=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(i)));if(!i||";"==i)return T;i.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,(function(i,s,_){o&&(s=s.toLowerCase(),"font-family"==s&&(_=_.replace(/\s*,\s*/g,",")),_=CKEDITOR.tools.trim(_));T[s]=_}));return T},writeCssText:function(i,o){var s,T=[];for(s in i)T.push(s+":"+i[s]);o&&T.sort();return T.join("; ")},objectCompare:function(i,o,s){var T;if(!i&&!o)return!0;if(!i||!o)return!1;for(T in i)if(i[T]!=o[T])return!1;if(!s)for(T in o)if(i[T]!=o[T])return!1;return!0},objectKeys:function(i){return CKEDITOR.tools.object.keys(i)},convertArrayToObject:function(i,o){var s={};1==arguments.length&&(o=!0);for(var T=0,_=i.length;T<_;++T)s[i[T]]=o;return s},fixDomain:function(){for(var i;;)try{i=window.parent.document.domain;break}catch(o){i=i?i.replace(/.+?(?:\.|$)/,""):document.domain;if(!i)break;document.domain=i}return!!i},eventsBuffer:function(o,s,T){return new(this||i).buffers.event(o,s,T)},enableHtml5Elements:function(i,o){for(var s="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),T=s.length,_;T--;)_=i.createElement(s[T]),o&&i.appendChild(_)},checkIfAnyArrayItemMatches:function(i,o){for(var s=0,T=i.length;s<T;++s)if(i[s].match(o))return!0;return!1},checkIfAnyObjectPropertyMatches:function(i,o){for(var s in i)if(s.match(o))return!0;return!1},keystrokeToString:function(i,o){var s=this.keystrokeToArray(i,o);s.display=s.display.join("+");s.aria=s.aria.join("+");return s},keystrokeToArray:function(i,o){var s=16711680&o,T=65535&o,_=CKEDITOR.env.mac,S=[],P=[];s&CKEDITOR.CTRL&&(S.push(_?"⌘":i[17]),P.push(_?i[224]:i[17]));s&CKEDITOR.ALT&&(S.push(_?"⌥":i[18]),P.push(i[18]));s&CKEDITOR.SHIFT&&(S.push(_?"⇧":i[16]),P.push(i[16]));T&&(i[T]?(S.push(i[T]),P.push(i[T])):(S.push(String.fromCharCode(T)),P.push(String.fromCharCode(T))));return{display:S,aria:P}},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==",getCookie:function(i){i=i.toLowerCase();for(var o=document.cookie.split(";"),s,T,_=0;_<o.length;_++)if(s=o[_].split("="),T=decodeURIComponent(CKEDITOR.tools.trim(s[0]).toLowerCase()),T===i)return decodeURIComponent(1<s.length?s[1]:"");return null},setCookie:function(i,o){document.cookie=encodeURIComponent(i)+"="+encodeURIComponent(o)+";path=/"},getCsrfToken:function(){var i=CKEDITOR.tools.getCookie("ckCsrfToken");if(!i||40!=i.length){var i=[],o="";if(window.crypto&&window.crypto.getRandomValues)i=new Uint8Array(40),window.crypto.getRandomValues(i);else for(var s=0;40>s;s++)i.push(Math.floor(256*Math.random()));for(s=0;s<i.length;s++)var T="abcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%36),o=o+(.5<Math.random()?T.toUpperCase():T);i=o;CKEDITOR.tools.setCookie("ckCsrfToken",i)}return i},escapeCss:function(i){return i?window.CSS&&CSS.escape?CSS.escape(i):isNaN(parseInt(i.charAt(0),10))?i:"\\3"+i.charAt(0)+" "+i.substring(1,i.length):""},getMouseButton:function(i){return!!(i=i.data?i.data.$:i)&&(CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.ie6Compat)?4===i.button?CKEDITOR.MOUSE_BUTTON_MIDDLE:1===i.button?CKEDITOR.MOUSE_BUTTON_LEFT:CKEDITOR.MOUSE_BUTTON_RIGHT:i.button)},convertHexStringToBytes:function(i){var o=[],s=i.length/2,T;for(T=0;T<s;T++)o.push(parseInt(i.substr(2*T,2),16));return o},convertBytesToBase64:function(i){var o="",s=i.length,T;for(T=0;T<s;T+=3){var _=i.slice(T,T+3),S=_.length,P=[],$;if(3>S)for($=S;3>$;$++)_[$]=0;P[0]=(252&_[0])>>2;P[1]=(3&_[0])<<4|_[1]>>4;P[2]=(15&_[1])<<2|(192&_[2])>>6;P[3]=63&_[2];for($=0;4>$;$++)o=$<=S?o+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(P[$]):o+"="}return o},style:{parse:{_colors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",windowtext:"windowtext",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},_borderStyle:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),_widthRegExp:/^(thin|medium|thick|[\+-]?\d+(\.\d+)?[a-z%]+|[\+-]?0+(\.0+)?|\.\d+[a-z%]+)$/,_rgbaRegExp:/rgba?\(\s*\d+%?\s*,\s*\d+%?\s*,\s*\d+%?\s*(?:,\s*[0-9.]+\s*)?\)/gi,_hslaRegExp:/hsla?\(\s*[0-9.]+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[0-9.]+\s*)?\)/gi,background:function(i){var o={},s=this._findColor(i);s.length&&(o.color=s[0],CKEDITOR.tools.array.forEach(s,(function(o){i=i.replace(o,"")})));(i=CKEDITOR.tools.trim(i))&&(o.unprocessed=i);return o},margin:function(i){return CKEDITOR.tools.style.parse.sideShorthand(i,(function(i){return i.match(/(?:\-?[\.\d]+(?:%|\w*)|auto|inherit|initial|unset|revert)/g)||["0px"]}))},sideShorthand:function(i,o){function g(i){s.top=T[i[0]];s.right=T[i[1]];s.bottom=T[i[2]];s.left=T[i[3]]}var s={},T=o?o(i):i.split(/\s+/);switch(T.length){case 1:g([0,0,0,0]);break;case 2:g([0,1,0,1]);break;case 3:g([0,1,2,1]);break;case 4:g([0,1,2,3])}return s},border:function(i){return CKEDITOR.tools.style.border.fromCssRule(i)},_findColor:function(o){var s=[],T=CKEDITOR.tools.array,s=s.concat(o.match((this||i)._rgbaRegExp)||[]),s=s.concat(o.match((this||i)._hslaRegExp)||[]);return s=s.concat(T.filter(o.split(/\s+/),(function(i){return!!i.match(/^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/gi)||i.toLowerCase()in CKEDITOR.tools.style.parse._colors})))}}},array:{filter:function(i,o,s){var T=[];this.forEach(i,(function(_,S){o.call(s,_,S,i)&&T.push(_)}));return T},find:function(i,o,s){for(var T=i.length,_=0;_<T;){if(o.call(s,i[_],_,i))return i[_];_++}},forEach:function(i,o,s){var T=i.length,_;for(_=0;_<T;_++)o.call(s,i[_],_,i)},map:function(i,o,s){for(var T=[],_=0;_<i.length;_++)T.push(o.call(s,i[_],_,i));return T},reduce:function(i,o,s,T){for(var _=0;_<i.length;_++)s=o.call(T,s,i[_],_,i);return s},every:function(i,o,s){if(!i.length)return!0;o=this.filter(i,o,s);return i.length===o.length}},object:{DONT_ENUMS:"toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),entries:function(i){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(i),(function(o){return[o,i[o]]}))},values:function(i){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(i),(function(o){return i[o]}))},keys:function(i){var o=Object.prototype.hasOwnProperty,s=[],T=CKEDITOR.tools.object.DONT_ENUMS,_;for(_ in i)s.push(_);if(CKEDITOR.env.ie&&9>CKEDITOR.env.version)for(_=0;_<T.length;_++)o.call(i,T[_])&&s.push(T[_]);return s},findKey:function(i,o){if("object"!==typeof i)return null;for(var s in i)if(i[s]===o)return s;return null},merge:function(i,o){var s=CKEDITOR.tools,T=s.clone(i),_=s.clone(o);s.array.forEach(s.object.keys(_),(function(i){T[i]="object"===typeof _[i]&&"object"===typeof T[i]?s.object.merge(T[i],_[i]):_[i]}));return T}},getAbsoluteRectPosition:function(i,o){function g(i){if(i){var o=i.getClientRect();s.top+=o.top;s.left+=o.left;"x"in s&&"y"in s&&(s.x+=o.x,s.y+=o.y);g(i.getWindow().getFrame())}}var s=CKEDITOR.tools.copy(o);g(i.getFrame());var T=CKEDITOR.document.getWindow().getScrollPosition();s.top+=T.y;s.left+=T.x;"x"in s&&"y"in s&&(s.y+=T.y,s.x+=T.x);s.right=s.left+s.width;s.bottom=s.top+s.height;return s}};a.prototype={reset:function(){(this||i)._lastOutput=0;this._clearTimer()},_reschedule:function(){return!1},_call:function(){this._output()},_clearTimer:function(){(this||i)._scheduledTimer&&clearTimeout((this||i)._scheduledTimer);(this||i)._scheduledTimer=0}};f.prototype=CKEDITOR.tools.prototypedCopy(a.prototype);f.prototype._reschedule=function(){(this||i)._scheduledTimer&&this._clearTimer()};f.prototype._call=function(){(this||i)._output.apply((this||i)._context,(this||i)._args)};CKEDITOR.tools.buffers={};CKEDITOR.tools.buffers.event=a;CKEDITOR.tools.buffers.throttle=f;CKEDITOR.tools.style.border=CKEDITOR.tools.createClass({$:function(o){o=o||{};(this||i).width=o.width;(this||i).style=o.style;(this||i).color=o.color;(this||i)._.normalize()},_:{normalizeMap:{color:[[/windowtext/g,"black"]]},normalize:function(){for(var o in(this||i)._.normalizeMap){var s=(this||i)[o];s&&((this||i)[o]=CKEDITOR.tools.array.reduce((this||i)._.normalizeMap[o],(function(i,o){return i.replace(o[0],o[1])}),s))}}},proto:{toString:function(){return CKEDITOR.tools.array.filter([(this||i).width,(this||i).style,(this||i).color],(function(i){return!!i})).join(" ")}},statics:{fromCssRule:function(i){var o={},s=i.split(/\s+/g);i=CKEDITOR.tools.style.parse._findColor(i);i.length&&(o.color=i[0]);CKEDITOR.tools.array.forEach(s,(function(i){o.style||-1===CKEDITOR.tools.indexOf(CKEDITOR.tools.style.parse._borderStyle,i)?!o.width&&CKEDITOR.tools.style.parse._widthRegExp.test(i)&&(o.width=i):o.style=i}));return new CKEDITOR.tools.style.border(o)},splitCssValues:function(i,o){o=o||{};var s=CKEDITOR.tools.array.reduce(["width","style","color"],(function(s,T){var _=i["border-"+T]||o[T];s[T]=_?CKEDITOR.tools.style.parse.sideShorthand(_):null;return s}),{});return CKEDITOR.tools.array.reduce(["top","right","bottom","left"],(function(o,T){var _={},S;for(S in s){var P=i["border-"+T+"-"+S];_[S]=P||s[S]&&s[S][T]}o["border-"+T]=new CKEDITOR.tools.style.border(_);return o}),{})}}});CKEDITOR.tools.array.indexOf=CKEDITOR.tools.indexOf;CKEDITOR.tools.array.isArray=CKEDITOR.tools.isArray;CKEDITOR.MOUSE_BUTTON_LEFT=0;CKEDITOR.MOUSE_BUTTON_MIDDLE=1;CKEDITOR.MOUSE_BUTTON_RIGHT=2}(),CKEDITOR.dtd=function(){var i=CKEDITOR.tools.extend,f=function(i,o){for(var s=CKEDITOR.tools.clone(i),T=1;T<arguments.length;T++){o=arguments[T];for(var _ in o)delete s[_]}return s},o={},s={},T={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},_={command:1,link:1,meta:1,noscript:1,script:1,style:1},S={},P={"#":1},$={center:1,dir:1,noframes:1};i(o,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},P,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1});i(s,T,o,$);f={a:f(o,{a:1,button:1}),abbr:o,address:s,area:S,article:s,aside:s,audio:i({source:1,track:1},s),b:o,base:S,bdi:o,bdo:o,blockquote:s,body:s,br:S,button:f(o,{a:1,button:1}),canvas:o,caption:s,cite:o,code:o,col:S,colgroup:{col:1},command:S,datalist:i({option:1},o),dd:s,del:o,details:i({summary:1},s),dfn:o,div:s,dl:{dt:1,dd:1},dt:s,em:o,embed:S,fieldset:i({legend:1},s),figcaption:s,figure:i({figcaption:1},s),footer:s,form:s,h1:o,h2:o,h3:o,h4:o,h5:o,h6:o,head:i({title:1,base:1},_),header:s,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:S,html:i({head:1,body:1},s,_),i:o,iframe:P,img:S,input:S,ins:o,kbd:o,keygen:S,label:o,legend:o,li:s,link:S,main:s,map:s,mark:o,menu:i({li:1},s),meta:S,meter:f(o,{meter:1}),nav:s,noscript:i({link:1,meta:1,style:1},o),object:i({param:1},o),ol:{li:1},optgroup:{option:1},option:P,output:o,p:o,param:S,pre:o,progress:f(o,{progress:1}),q:o,rp:o,rt:o,ruby:i({rp:1,rt:1},o),s:o,samp:o,script:P,section:s,select:{optgroup:1,option:1},small:o,source:S,span:o,strong:o,style:P,sub:o,summary:i({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},o),sup:o,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:s,textarea:P,tfoot:{tr:1},th:s,thead:{tr:1},time:f(o,{time:1}),title:P,tr:{th:1,td:1},track:S,u:o,ul:{li:1},var:o,video:i({source:1,track:1},s),wbr:S,acronym:o,applet:i({param:1},s),basefont:S,big:o,center:s,dialog:S,dir:{li:1},font:o,isindex:S,noframes:s,strike:o,tt:o};i(f,{$block:i({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},T,$),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:o,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:i({body:1,head:1,html:1},f.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}});return f}(),CKEDITOR.dom.event=function(o){(this||i).$=o},CKEDITOR.dom.event.prototype={getKey:function(){return(this||i).$.keyCode||(this||i).$.which},getKeystroke:function(){var o=this.getKey();((this||i).$.ctrlKey||(this||i).$.metaKey)&&(o+=CKEDITOR.CTRL);(this||i).$.shiftKey&&(o+=CKEDITOR.SHIFT);(this||i).$.altKey&&(o+=CKEDITOR.ALT);return o},preventDefault:function(o){var s=(this||i).$;s.preventDefault?s.preventDefault():s.returnValue=!1;o&&this.stopPropagation()},stopPropagation:function(){var o=(this||i).$;o.stopPropagation?o.stopPropagation():o.cancelBubble=!0},getTarget:function(){var o=(this||i).$.target||(this||i).$.srcElement;return o?new CKEDITOR.dom.node(o):null},getPhase:function(){return(this||i).$.eventPhase||2},getPageOffset:function(){var o=this.getTarget().getDocument().$;return{x:(this||i).$.pageX||(this||i).$.clientX+(o.documentElement.scrollLeft||o.body.scrollLeft),y:(this||i).$.pageY||(this||i).$.clientY+(o.documentElement.scrollTop||o.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(o){o&&((this||i).$=o)},CKEDITOR.dom.domObject.prototype=function(){var a=function(i,o){return function(s){"undefined"!=typeof CKEDITOR&&i.fire(o,new CKEDITOR.dom.event(s))}};return{getPrivate:function(){var i;(i=this.getCustomData("_"))||this.setCustomData("_",i={});return i},on:function(o){var s=this.getCustomData("_cke_nativeListeners");s||(s={},this.setCustomData("_cke_nativeListeners",s));s[o]||(s=s[o]=a(this||i,o),(this||i).$.addEventListener?(this||i).$.addEventListener(o,s,!!CKEDITOR.event.useCapture):(this||i).$.attachEvent&&(this||i).$.attachEvent("on"+o,s));return CKEDITOR.event.prototype.on.apply(this||i,arguments)},removeListener:function(o){CKEDITOR.event.prototype.removeListener.apply(this||i,arguments);if(!this.hasListeners(o)){var s=this.getCustomData("_cke_nativeListeners"),T=s&&s[o];T&&((this||i).$.removeEventListener?(this||i).$.removeEventListener(o,T,!1):(this||i).$.detachEvent&&(this||i).$.detachEvent("on"+o,T),delete s[o])}},removeAllListeners:function(){var o=this.getCustomData("_cke_nativeListeners"),s;for(s in o){var T=o[s];(this||i).$.detachEvent?(this||i).$.detachEvent("on"+s,T):(this||i).$.removeEventListener&&(this||i).$.removeEventListener(s,T,!1);delete o[s]}CKEDITOR.event.prototype.removeAllListeners.call(this||i)}}}(),function(o){var s={};CKEDITOR.on("reset",(function(){s={}}));o.equals=function(o){try{return o&&o.$===(this||i).$}catch(i){return!1}};o.setCustomData=function(o,T){var _=this.getUniqueId();(s[_]||(s[_]={}))[o]=T;return this||i};o.getCustomData=function(o){var T=(this||i).$["data-cke-expando"];return(T=T&&s[T])&&o in T?T[o]:null};o.removeCustomData=function(o){var T=(this||i).$["data-cke-expando"],T=T&&s[T],_,S;T&&(_=T[o],S=o in T,delete T[o]);return S?_:null};o.clearCustomData=function(){this.removeAllListeners();var o=(this||i).$["data-cke-expando"];o&&delete s[o]};o.getUniqueId=function(){return(this||i).$["data-cke-expando"]||((this||i).$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())};CKEDITOR.event.implementOn(o)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(o){return o?new CKEDITOR.dom[o.nodeType==CKEDITOR.NODE_DOCUMENT?"document":o.nodeType==CKEDITOR.NODE_ELEMENT?"element":o.nodeType==CKEDITOR.NODE_TEXT?"text":o.nodeType==CKEDITOR.NODE_COMMENT?"comment":o.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](o):this||i},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(o,s){o.append(this||i,s);return o},clone:function(o,s){function b(i){i["data-cke-expando"]&&(i["data-cke-expando"]=!1);if((i.nodeType==CKEDITOR.NODE_ELEMENT||i.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(s||i.nodeType!=CKEDITOR.NODE_ELEMENT||i.removeAttribute("id",!1),o)){i=i.childNodes;for(var T=0;T<i.length;T++)b(i[T])}}function c(i){if(i.type==CKEDITOR.NODE_ELEMENT||i.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(i.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var s=i.getName();":"==s[0]&&i.renameNode(s.substring(1))}if(o)for(s=0;s<i.getChildCount();s++)c(i.getChild(s))}}var T=(this||i).$.cloneNode(o);b(T);T=new CKEDITOR.dom.node(T);CKEDITOR.env.ie&&9>CKEDITOR.env.version&&((this||i).type==CKEDITOR.NODE_ELEMENT||(this||i).type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&c(T);return T},hasPrevious:function(){return!!(this||i).$.previousSibling},hasNext:function(){return!!(this||i).$.nextSibling},insertAfter:function(o){o.$.parentNode.insertBefore((this||i).$,o.$.nextSibling);return o},insertBefore:function(o){o.$.parentNode.insertBefore((this||i).$,o.$);return o},insertBeforeMe:function(o){(this||i).$.parentNode.insertBefore(o.$,(this||i).$);return o},getAddress:function(o){for(var s=[],T=this.getDocument().$.documentElement,_=(this||i).$;_&&_!=T;){var S=_.parentNode;S&&s.unshift((this||i).getIndex.call({$:_},o));_=S}return s},getDocument:function(){return new CKEDITOR.dom.document((this||i).$.ownerDocument||(this||i).$.parentNode.ownerDocument)},getIndex:function(o){function f(i,o){var s=o?i.nextSibling:i.previousSibling;return s&&s.nodeType==CKEDITOR.NODE_TEXT?b(s)?f(s,o):s:null}function b(i){return!i.nodeValue||i.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE}var s=(this||i).$,T=-1,_;if(!(this||i).$.parentNode||o&&s.nodeType==CKEDITOR.NODE_TEXT&&b(s)&&!f(s)&&!f(s,!0))return-1;do{o&&s!=(this||i).$&&s.nodeType==CKEDITOR.NODE_TEXT&&(_||b(s))||(T++,_=s.nodeType==CKEDITOR.NODE_TEXT)}while(s=s.previousSibling);return T},getNextSourceNode:function(o,s,T){if(T&&!T.call){var _=T;T=function(i){return!i.equals(_)}}o=!o&&(this||i).getFirst&&this.getFirst();var S;if(!o){if((this||i).type==CKEDITOR.NODE_ELEMENT&&T&&!1===T(this||i,!0))return null;o=this.getNext()}for(;!o&&(S=(S||this||i).getParent());){if(T&&!1===T(S,!0))return null;o=S.getNext()}return!o||T&&!1===T(o)?null:s&&s!=o.type?o.getNextSourceNode(!1,s,T):o},getPreviousSourceNode:function(o,s,T){if(T&&!T.call){var _=T;T=function(i){return!i.equals(_)}}o=!o&&(this||i).getLast&&this.getLast();var S;if(!o){if((this||i).type==CKEDITOR.NODE_ELEMENT&&T&&!1===T(this||i,!0))return null;o=this.getPrevious()}for(;!o&&(S=(S||this||i).getParent());){if(T&&!1===T(S,!0))return null;o=S.getPrevious()}return!o||T&&!1===T(o)?null:s&&o.type!=s?o.getPreviousSourceNode(!1,s,T):o},getPrevious:function(o){var s=(this||i).$,T;do{T=(s=s.previousSibling)&&10!=s.nodeType&&new CKEDITOR.dom.node(s)}while(T&&o&&!o(T));return T},getNext:function(o){var s=(this||i).$,T;do{T=(s=s.nextSibling)&&new CKEDITOR.dom.node(s)}while(T&&o&&!o(T));return T},getParent:function(o){var s=(this||i).$.parentNode;return s&&(s.nodeType==CKEDITOR.NODE_ELEMENT||o&&s.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(s):null},getParents:function(o){var s=this||i,T=[];do{T[o?"push":"unshift"](s)}while(s=s.getParent());return T},getCommonAncestor:function(o){if(o.equals(this||i))return this||i;if(o.contains&&o.contains(this||i))return o;var s=(this||i).contains?this||i:this.getParent();do{if(s.contains(o))return s}while(s=s.getParent());return null},getPosition:function(o){var s=(this||i).$,T=o.$;if(s.compareDocumentPosition)return s.compareDocumentPosition(T);if(s==T)return CKEDITOR.POSITION_IDENTICAL;if((this||i).type==CKEDITOR.NODE_ELEMENT&&o.type==CKEDITOR.NODE_ELEMENT){if(s.contains){if(s.contains(T))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(T.contains(s))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in s)return 0>s.sourceIndex||0>T.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:s.sourceIndex<T.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}s=this.getAddress();o=o.getAddress();for(var T=Math.min(s.length,o.length),_=0;_<T;_++)if(s[_]!=o[_])return s[_]<o[_]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return s.length<o.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(o,s){var T=(this||i).$,_,S;s||(T=T.parentNode);"function"==typeof o?(S=!0,_=o):(S=!1,_=function(i){i="string"==typeof i.nodeName?i.nodeName.toLowerCase():"";return"string"==typeof o?i==o:i in o});for(;T;){if(_(S?new CKEDITOR.dom.node(T):T))return new CKEDITOR.dom.node(T);try{T=T.parentNode}catch(i){T=null}}return null},hasAscendant:function(o,s){var T=(this||i).$;s||(T=T.parentNode);for(;T;){if(T.nodeName&&T.nodeName.toLowerCase()==o)return!0;T=T.parentNode}return!1},move:function(i,o){i.append(this.remove(),o)},remove:function(o){var s=(this||i).$,T=s.parentNode;if(T){if(o)for(;o=s.firstChild;)T.insertBefore(s.removeChild(o),s);T.removeChild(s)}return this||i},replace:function(i){this.insertBefore(i);i.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){for(var o;(this||i).getFirst&&(o=this.getFirst());){if(o.type==CKEDITOR.NODE_TEXT){var s=CKEDITOR.tools.ltrim(o.getText()),T=o.getLength();if(!s){o.remove();continue}s.length<T&&(o.split(T-s.length),(this||i).$.removeChild((this||i).$.firstChild))}break}},rtrim:function(){for(var o;(this||i).getLast&&(o=this.getLast());){if(o.type==CKEDITOR.NODE_TEXT){var s=CKEDITOR.tools.rtrim(o.getText()),T=o.getLength();if(!s){o.remove();continue}s.length<T&&(o.split(s.length),(this||i).$.lastChild.parentNode.removeChild((this||i).$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(o=(this||i).$.lastChild)&&1==o.type&&"br"==o.nodeName.toLowerCase()&&o.parentNode.removeChild(o)},isReadOnly:function(o){var s=this||i;(this||i).type!=CKEDITOR.NODE_ELEMENT&&(s=this.getParent());CKEDITOR.env.edge&&s&&s.is("textarea","input")&&(o=!0);if(!o&&s&&"undefined"!=typeof s.$.isContentEditable)return!(s.$.isContentEditable||s.data("cke-editable"));for(;s;){if(s.data("cke-editable"))return!1;if(s.hasAttribute("contenteditable"))return"false"==s.getAttribute("contenteditable");s=s.getParent()}return!0}}),CKEDITOR.dom.window=function(o){CKEDITOR.dom.domObject.call(this||i,o)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){(this||i).$.focus()},getViewPaneSize:function(){var o=(this||i).$.document,s="CSS1Compat"==o.compatMode;return{width:(s?o.documentElement.clientWidth:o.body.clientWidth)||0,height:(s?o.documentElement.clientHeight:o.body.clientHeight)||0}},getScrollPosition:function(){var o=(this||i).$;if("pageXOffset"in o)return{x:o.pageXOffset||0,y:o.pageYOffset||0};o=o.document;return{x:o.documentElement.scrollLeft||o.body.scrollLeft||0,y:o.documentElement.scrollTop||o.body.scrollTop||0}},getFrame:function(){var o=(this||i).$.frameElement;return o?new CKEDITOR.dom.element.get(o):null}}),CKEDITOR.dom.document=function(o){CKEDITOR.dom.domObject.call(this||i,o)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(o){if((this||i).$.createStyleSheet)(this||i).$.createStyleSheet(o);else{var s=new CKEDITOR.dom.element("link");s.setAttributes({rel:"stylesheet",type:"text/css",href:o});this.getHead().append(s)}},appendStyleText:function(o){if((this||i).$.createStyleSheet){var s=(this||i).$.createStyleSheet("");s.cssText=o}else{var T=new CKEDITOR.dom.element("style",this||i);T.append(new CKEDITOR.dom.text(o,this||i));this.getHead().append(T)}return s||T.$.sheet},createElement:function(o,s){var T=new CKEDITOR.dom.element(o,this||i);s&&(s.attributes&&T.setAttributes(s.attributes),s.styles&&T.setStyles(s.styles));return T},createText:function(o){return new CKEDITOR.dom.text(o,this||i)},focus:function(){this.getWindow().focus()},getActive:function(){var o;try{o=(this||i).$.activeElement}catch(i){return null}return new CKEDITOR.dom.element(o)},getById:function(o){return(o=(this||i).$.getElementById(o))?new CKEDITOR.dom.element(o):null},getByAddress:function(o,s){for(var T=(this||i).$.documentElement,_=0;T&&_<o.length;_++){var S=o[_];if(s)for(var P=-1,$=0;$<T.childNodes.length;$++){var V=T.childNodes[$];if((!0!==s||3!=V.nodeType||!V.previousSibling||3!=V.previousSibling.nodeType)&&(P++,P==S)){T=V;break}}else T=T.childNodes[S]}return T?new CKEDITOR.dom.node(T):null},getElementsByTag:function(o,s){CKEDITOR.env.ie&&8>=document.documentMode||!s||(o=s+":"+o);return new CKEDITOR.dom.nodeList((this||i).$.getElementsByTagName(o))},getHead:function(){var o=(this||i).$.getElementsByTagName("head")[0];return o=o?new CKEDITOR.dom.element(o):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element((this||i).$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element((this||i).$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window((this||i).$.parentWindow||(this||i).$.defaultView)},write:function(o){(this||i).$.open("text/html","replace");CKEDITOR.env.ie&&(o=o.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();<\/script>"));(this||i).$.write(o);(this||i).$.close()},find:function(o){return new CKEDITOR.dom.nodeList((this||i).$.querySelectorAll(o))},findOne:function(o){return(o=(this||i).$.querySelector(o))?new CKEDITOR.dom.element(o):null},_getHtml5ShivFrag:function(){var o=this.getCustomData("html5ShivFrag");o||(o=(this||i).$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(o,!0),this.setCustomData("html5ShivFrag",o));return o}}),CKEDITOR.dom.nodeList=function(o){(this||i).$=o},CKEDITOR.dom.nodeList.prototype={count:function(){return(this||i).$.length},getItem:function(o){return 0>o||o>=(this||i).$.length?null:(o=(this||i).$[o])?new CKEDITOR.dom.node(o):null},toArray:function(){return CKEDITOR.tools.array.map((this||i).$,(function(i){return new CKEDITOR.dom.node(i)}))}},CKEDITOR.dom.element=function(o,s){"string"==typeof o&&(o=(s?s.$:document).createElement(o));CKEDITOR.dom.domObject.call(this||i,o)},CKEDITOR.dom.element.get=function(i){return(i="string"==typeof i?document.getElementById(i)||document.getElementsByName(i)[0]:i)&&(i.$?i:new CKEDITOR.dom.element(i))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(i,o){var s=new CKEDITOR.dom.element("div",o);s.setHtml(i);return s.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(i,o,s,T){var _=o.getCustomData("list_marker_id")||o.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),S=o.getCustomData("list_marker_names")||o.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");i[_]=o;S[s]=1;return o.setCustomData(s,T)},CKEDITOR.dom.element.clearAllMarkers=function(i){for(var o in i)CKEDITOR.dom.element.clearMarkers(i,i[o],1)},CKEDITOR.dom.element.clearMarkers=function(i,o,s){var T=o.getCustomData("list_marker_names"),_=o.getCustomData("list_marker_id"),S;for(S in T)o.removeCustomData(S);o.removeCustomData("list_marker_names");s&&(o.removeCustomData("list_marker_id"),delete i[_])},function(){function a(i,o){return-1<(" "+i+" ").replace(s," ").indexOf(" "+o+" ")}function f(i){var o=!0;i.$.id||(i.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),o=!1);return function(){o||i.removeAttribute("id")}}function b(i,o){var s=CKEDITOR.tools.escapeCss(i.$.id);return"#"+s+" "+o.split(/,\s*/).join(", #"+s+" ")}function c(i){for(var o=0,s=0,_=T[i].length;s<_;s++)o+=parseFloat(this.getComputedStyle(T[i][s])||0,10)||0;return o}var o=document.createElement("_").classList,o="undefined"!==typeof o&&null!==String(o.add).match(/\[Native code\]/gi),s=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:o?function(o){(this||i).$.classList.add(o);return this||i}:function(o){var s=(this||i).$.className;s&&(a(s,o)||(s+=" "+o));(this||i).$.className=s||o;return this||i},removeClass:o?function(o){var s=(this||i).$;s.classList.remove(o);s.className||s.removeAttribute("class");return this||i}:function(o){var s=this.getAttribute("class");s&&a(s,o)&&((s=s.replace(new RegExp("(?:^|\\s+)"+o+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",s):this.removeAttribute("class"));return this||i},hasClass:function(o){return a((this||i).$.className,o)},append:function(o,s){"string"==typeof o&&(o=this.getDocument().createElement(o));s?(this||i).$.insertBefore(o.$,(this||i).$.firstChild):(this||i).$.appendChild(o.$);return o},appendHtml:function(o){if((this||i).$.childNodes.length){var s=new CKEDITOR.dom.element("div",this.getDocument());s.setHtml(o);s.moveChildren(this||i)}else this.setHtml(o)},appendText:function(o){null!=(this||i).$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?(this||i).$.text+=o:this.append(new CKEDITOR.dom.text(o))},appendBogus:function(i){if(i||CKEDITOR.env.needsBrFiller){for(i=this.getLast();i&&i.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(i.getText());)i=i.getPrevious();i&&i.is&&i.is("br")||(i=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&i.setAttribute("type","_moz"),this.append(i))}},breakParent:function(o,s){var T=new CKEDITOR.dom.range(this.getDocument());T.setStartAfter(this||i);T.setEndAfter(o);var _=T.extractContents(!1,s||!1),S;T.insertNode(this.remove());if(CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(T=new CKEDITOR.dom.element("div");S=_.getFirst();)S.$.style.backgroundColor&&(S.$.style.backgroundColor=S.$.style.backgroundColor),T.append(S);T.insertAfter(this||i);T.remove(!0)}else _.insertAfterNode(this||i)},contains:document.compareDocumentPosition?function(o){return!!(16&(this||i).$.compareDocumentPosition(o.$))}:function(o){var s=(this||i).$;return o.type!=CKEDITOR.NODE_ELEMENT?s.contains(o.getParent().$):s!=o.$&&s.contains(o.$)},focus:function(){function a(){try{(this||i).$.focus()}catch(i){}}return function(o){o?CKEDITOR.tools.setTimeout(a,100,this||i):a.call(this||i)}}(),getHtml:function(){var o=(this||i).$.innerHTML;return CKEDITOR.env.ie?o.replace(/<\?[^>]*>/g,""):o},getOuterHtml:function(){if((this||i).$.outerHTML)return(this||i).$.outerHTML.replace(/<\?[^>]*>/,"");var o=(this||i).$.ownerDocument.createElement("div");o.appendChild((this||i).$.cloneNode(!0));return o.innerHTML},getClientRect:function(o){var s=CKEDITOR.tools.extend({},(this||i).$.getBoundingClientRect());!s.width&&(s.width=s.right-s.left);!s.height&&(s.height=s.bottom-s.top);return o?CKEDITOR.tools.getAbsoluteRectPosition(this.getWindow(),s):s},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(o){try{var s=(this||i).$;if(this.getParent())return s.innerHTML=o;var T=this.getDocument()._getHtml5ShivFrag();T.appendChild(s);s.innerHTML=o;T.removeChild(s);return o}catch(T){(this||i).$.innerHTML="";s=new CKEDITOR.dom.element("body",this.getDocument());s.$.innerHTML=o;for(s=s.getChildren();s.count();)this.append(s.getItem(0));return o}}:function(o){return(this||i).$.innerHTML=o},setText:function(){var o=document.createElement("p");o.innerHTML="x";o=o.textContent;return function(s){(this||i).$[o?"textContent":"innerText"]=s}}(),getAttribute:function(){var a=function(o){return(this||i).$.getAttribute(o,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(o){switch(o){case"class":o="className";break;case"http-equiv":o="httpEquiv";break;case"name":return(this||i).$.name;case"tabindex":return o=(this||i).$.getAttribute(o,2),0!==o&&0===(this||i).$.tabIndex&&(o=null),o;case"checked":return o=(this||i).$.attributes.getNamedItem(o),(o.specified?o.nodeValue:(this||i).$.checked)?"checked":null;case"hspace":case"value":return(this||i).$[o];case"style":return(this||i).$.style.cssText;case"contenteditable":case"contentEditable":return(this||i).$.attributes.getNamedItem("contentEditable").specified?(this||i).$.getAttribute("contentEditable"):null}return(this||i).$.getAttribute(o,2)}:a}(),getAttributes:function(o){var s={},T=(this||i).$.attributes,_;o=CKEDITOR.tools.isArray(o)?o:[];for(_=0;_<T.length;_++)-1===CKEDITOR.tools.indexOf(o,T[_].name)&&(s[T[_].name]=T[_].value);return s},getChildren:function(){return new CKEDITOR.dom.nodeList((this||i).$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(o){var s=this.getWindow().$.getComputedStyle((this||i).$,null);return s?s.getPropertyValue(o):""}:function(o){return(this||i).$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(o)]},getDtd:function(){var o=CKEDITOR.dtd[this.getName()];(this||i).getDtd=function(){return o};return o},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var o=(this||i).$.tabIndex;return 0!==o||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?o:-1},getText:function(){return(this||i).$.textContent||(this||i).$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return(this||i).$.id||null},getNameAtt:function(){return(this||i).$.name||null},getName:function(){var o=(this||i).$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var s=(this||i).$.scopeName;"HTML"!=s&&(o=s.toLowerCase()+":"+o)}(this||i).getName=function(){return o};return this.getName()},getValue:function(){return(this||i).$.value},getFirst:function(o){var s=(this||i).$.firstChild;(s=s&&new CKEDITOR.dom.node(s))&&o&&!o(s)&&(s=s.getNext(o));return s},getLast:function(o){var s=(this||i).$.lastChild;(s=s&&new CKEDITOR.dom.node(s))&&o&&!o(s)&&(s=s.getPrevious(o));return s},getStyle:function(o){return(this||i).$.style[CKEDITOR.tools.cssStyleToDomStyle(o)]},is:function(){var i=this.getName();if("object"==typeof arguments[0])return!!arguments[0][i];for(var o=0;o<arguments.length;o++)if(arguments[o]==i)return!0;return!1},isEditable:function(i){var o=this.getName();return!(this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[o]||CKEDITOR.dtd.$empty[o]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount())&&(!1===i||(i=CKEDITOR.dtd[o]||CKEDITOR.dtd.span,!(!i||!i["#"])))},isIdentical:function(i){var o=this.clone(0,1);i=i.clone(0,1);o.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);i.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);if(o.$.isEqualNode)return o.$.style.cssText=CKEDITOR.tools.normalizeCssText(o.$.style.cssText),i.$.style.cssText=CKEDITOR.tools.normalizeCssText(i.$.style.cssText),o.$.isEqualNode(i.$);o=o.getOuterHtml();i=i.getOuterHtml();if(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var s=this.getParent();s.type==CKEDITOR.NODE_ELEMENT&&(s=s.clone(),s.setHtml(o),o=s.getHtml(),s.setHtml(i),i=s.getHtml())}return o==i},isVisible:function(){var o=((this||i).$.offsetHeight||(this||i).$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility"),s,T;o&&CKEDITOR.env.webkit&&(s=this.getWindow(),!s.equals(CKEDITOR.document.getWindow())&&(T=s.$.frameElement)&&(o=new CKEDITOR.dom.element(T).isVisible()));return!!o},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var i=this.getChildren(),o=0,s=i.count();o<s;o++){var T=i.getItem(o);if((T.type!=CKEDITOR.NODE_ELEMENT||!T.data("cke-bookmark"))&&(T.type==CKEDITOR.NODE_ELEMENT&&!T.isEmptyInlineRemoveable()||T.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(T.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var o=(this||i).$.attributes,s=0;s<o.length;s++){var T=o[s];switch(T.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(T.specified)return!0}}return!1}:function(){var o=(this||i).$.attributes,s=o.length,T={"data-cke-expando":1,_moz_dirty:1};return 0<s&&(2<s||!T[o[0].nodeName]||2==s&&!T[o[1].nodeName])},hasAttribute:function(){function a(o){var s=(this||i).$.attributes.getNamedItem(o);if("input"==this.getName())switch(o){case"class":return 0<(this||i).$.className.length;case"checked":return!!(this||i).$.checked;case"value":return o=this.getAttribute("type"),"checkbox"==o||"radio"==o?"on"!=(this||i).$.value:!!(this||i).$.value}return!!s&&s.specified}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(o){return"name"==o?!!(this||i).$.name:a.call(this||i,o)}:a:function(o){return!!(this||i).$.attributes.getNamedItem(o)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(o,s){var T=(this||i).$;o=o.$;if(T!=o){var _;if(s)for(;_=T.lastChild;)o.insertBefore(T.removeChild(_),o.firstChild);else for(;_=T.firstChild;)o.appendChild(T.removeChild(_))}},mergeSiblings:function(){function a(i,o,s){if(o&&o.type==CKEDITOR.NODE_ELEMENT){for(var T=[];o.data("cke-bookmark")||o.isEmptyInlineRemoveable();)if(T.push(o),o=s?o.getNext():o.getPrevious(),!o||o.type!=CKEDITOR.NODE_ELEMENT)return;if(i.isIdentical(o)){for(var _=s?i.getLast():i.getFirst();T.length;)T.shift().move(i,!s);o.moveChildren(i,!s);o.remove();_&&_.type==CKEDITOR.NODE_ELEMENT&&_.mergeSiblings()}}}return function(o){(!1===o||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(a(this||i,this.getNext(),!0),a(this||i,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var a=function(o,s){(this||i).$.setAttribute(o,s);return this||i};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(o,s){"class"==o?(this||i).$.className=s:"style"==o?(this||i).$.style.cssText=s:"tabindex"==o?(this||i).$.tabIndex=s:"checked"==o?(this||i).$.checked=s:"contenteditable"==o?a.call(this||i,"contentEditable",s):a.apply(this||i,arguments);return this||i}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(o,s){if("src"==o&&s.match(/^http:\/\//))try{a.apply(this||i,arguments)}catch(i){}else a.apply(this||i,arguments);return this||i}:a}(),setAttributes:function(o){for(var s in o)this.setAttribute(s,o[s]);return this||i},setValue:function(o){(this||i).$.value=o;return this||i},removeAttribute:function(){var a=function(o){(this||i).$.removeAttribute(o)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(o){"class"==o?o="className":"tabindex"==o?o="tabIndex":"contenteditable"==o&&(o="contentEditable");(this||i).$.removeAttribute(o)}:a}(),removeAttributes:function(i){if(CKEDITOR.tools.isArray(i))for(var o=0;o<i.length;o++)this.removeAttribute(i[o]);else for(o in i=i||this.getAttributes(),i)i.hasOwnProperty(o)&&this.removeAttribute(o)},removeStyle:function(o){var s=(this||i).$.style;if(s.removeProperty||"border"!=o&&"margin"!=o&&"padding"!=o)s.removeProperty?s.removeProperty(o):s.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(o)),(this||i).$.style.cssText||this.removeAttribute("style");else{var T=["top","left","right","bottom"],_;"border"==o&&(_=["color","style","width"]);for(var s=[],S=0;S<T.length;S++)if(_)for(var P=0;P<_.length;P++)s.push([o,T[S],_[P]].join("-"));else s.push([o,T[S]].join("-"));for(o=0;o<s.length;o++)this.removeStyle(s[o])}},setStyle:function(o,s){(this||i).$.style[CKEDITOR.tools.cssStyleToDomStyle(o)]=s;return this||i},setStyles:function(o){for(var s in o)this.setStyle(s,o[s]);return this||i},setOpacity:function(i){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(i=Math.round(100*i),this.setStyle("filter",100<=i?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+i+")")):this.setStyle("opacity",i)},unselectable:function(){this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none"));if(CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var i,o=this.getElementsByTag("*"),s=0,T=o.count();s<T;s++)i=o.getItem(s),i.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var o=this||i;"html"!=o.getName();){if("static"!=o.getComputedStyle("position"))return o;o=o.getParent()}return null},getDocumentPosition:function(o){var s=0,T=0,_=this.getDocument(),S=_.getBody(),P="BackCompat"==_.$.compatMode;if(document.documentElement.getBoundingClientRect&&(CKEDITOR.env.ie?8!==CKEDITOR.env.version:1)){var $=(this||i).$.getBoundingClientRect(),V=_.$.documentElement,j=V.clientTop||S.$.clientTop||0,Y=V.clientLeft||S.$.clientLeft||0,ee=!0;CKEDITOR.env.ie&&(ee=_.getDocumentElement().contains(this||i),_=_.getBody().contains(this||i),ee=P&&_||!P&&ee);ee&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(s=S.$.scrollLeft||V.scrollLeft,T=S.$.scrollTop||V.scrollTop):(T=P?S.$:V,s=T.scrollLeft,T=T.scrollTop),s=$.left+s-Y,T=$.top+T-j)}else for(j=this||i,Y=null;j&&"body"!=j.getName()&&"html"!=j.getName();){s+=j.$.offsetLeft-j.$.scrollLeft;T+=j.$.offsetTop-j.$.scrollTop;j.equals(this||i)||(s+=j.$.clientLeft||0,T+=j.$.clientTop||0);for(;Y&&!Y.equals(j);)s-=Y.$.scrollLeft,T-=Y.$.scrollTop,Y=Y.getParent();Y=j;j=($=j.$.offsetParent)?new CKEDITOR.dom.element($):null}o&&($=this.getWindow(),j=o.getWindow(),!$.equals(j)&&$.$.frameElement&&(o=new CKEDITOR.dom.element($.$.frameElement).getDocumentPosition(o),s+=o.x,T+=o.y));document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||P||(s+=(this||i).$.clientLeft?1:0,T+=(this||i).$.clientTop?1:0);return{x:s,y:T}},scrollIntoView:function(i){var o=this.getParent();if(o)do{if((o.$.clientWidth&&o.$.clientWidth<o.$.scrollWidth||o.$.clientHeight&&o.$.clientHeight<o.$.scrollHeight)&&!o.is("body")&&this.scrollIntoParent(o,i,1),o.is("html")){var s=o.getWindow();try{var T=s.$.frameElement;T&&(o=new CKEDITOR.dom.element(T))}catch(i){}}}while(o=o.getParent())},scrollIntoParent:function(o,s,T){var _,S,P,$;function k(i,s){/body|html/.test(o.getName())?o.getWindow().$.scrollBy(i,s):(o.$.scrollLeft+=i,o.$.scrollTop+=s)}function p(i,o){var s={x:0,y:0};if(!i.is(V?"body":"html")){var T=i.$.getBoundingClientRect();s.x=T.left;s.y=T.top}T=i.getWindow();T.equals(o)||(T=p(CKEDITOR.dom.element.get(T.$.frameElement),o),s.x+=T.x,s.y+=T.y);return s}function v(i,o){return parseInt(i.getComputedStyle("margin-"+o)||0,10)||0}!o&&(o=this.getWindow());P=o.getDocument();var V="BackCompat"==P.$.compatMode;o instanceof CKEDITOR.dom.window&&(o=V?P.getBody():P.getDocumentElement());CKEDITOR.env.webkit&&(P=this.getEditor(!1))&&(P._.previousScrollTop=null);P=o.getWindow();S=p(this||i,P);var j=p(o,P),Y=(this||i).$.offsetHeight;_=(this||i).$.offsetWidth;var ee=o.$.clientHeight,te=o.$.clientWidth;P=S.x-v(this||i,"left")-j.x||0;$=S.y-v(this||i,"top")-j.y||0;_=S.x+_+v(this||i,"right")-(j.x+te)||0;S=S.y+Y+v(this||i,"bottom")-(j.y+ee)||0;(0>$||0<S)&&k(0,!0===s?$:!1===s?S:0>$?$:S);T&&(0>P||0<_)&&k(0>P?P:_,0)},setState:function(i,o,s){o=o||"cke";switch(i){case CKEDITOR.TRISTATE_ON:this.addClass(o+"_on");this.removeClass(o+"_off");this.removeClass(o+"_disabled");s&&this.setAttribute("aria-pressed",!0);s&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(o+"_disabled");this.removeClass(o+"_off");this.removeClass(o+"_on");s&&this.setAttribute("aria-disabled",!0);s&&this.removeAttribute("aria-pressed");break;default:this.addClass(o+"_off"),this.removeClass(o+"_on"),this.removeClass(o+"_disabled"),s&&this.removeAttribute("aria-pressed"),s&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var o=(this||i).$;try{o.contentWindow.document}catch(i){o.src=o.src}return o&&new CKEDITOR.dom.document(o.contentWindow.document)},copyAttributes:function(o,s){var T=(this||i).$.attributes;s=s||{};for(var _=0;_<T.length;_++){var S=T[_],P=S.nodeName.toLowerCase(),$;P in s||("checked"==P&&($=this.getAttribute(P))?o.setAttribute(P,$):CKEDITOR.env.ie&&!this.hasAttribute(P)||($=this.getAttribute(P),null===$&&($=S.nodeValue),o.setAttribute(P,$)))}""!==(this||i).$.style.cssText&&(o.$.style.cssText=(this||i).$.style.cssText)},renameNode:function(o){if(this.getName()!=o){var s=this.getDocument();o=new CKEDITOR.dom.element(o,s);this.copyAttributes(o);this.moveChildren(o);this.getParent(!0)&&(this||i).$.parentNode.replaceChild(o.$,(this||i).$);o.$["data-cke-expando"]=(this||i).$["data-cke-expando"];(this||i).$=o.$;delete(this||i).getName}},getChild:function(){function a(i,o){var s=i.childNodes;if(0<=o&&o<s.length)return s[o]}return function(o){var s=(this||i).$;if(o.slice)for(o=o.slice();0<o.length&&s;)s=a(s,o.shift());else s=a(s,o);return s?new CKEDITOR.dom.node(s):null}}(),getChildCount:function(){return(this||i).$.childNodes.length},disableContextMenu:function(){function a(i){return i.type==CKEDITOR.NODE_ELEMENT&&i.hasClass("cke_enable_context_menu")}this.on("contextmenu",(function(i){i.data.getTarget().getAscendant(a,!0)||i.data.preventDefault()}))},getDirection:function(i){return i?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(i,o){i="data-"+i;if(void 0===o)return this.getAttribute(i);!1===o?this.removeAttribute(i):this.setAttribute(i,o);return null},getEditor:function(o){var s=CKEDITOR.instances,T,_,S;o=o||void 0===o;for(T in s)if(_=s[T],_.element.equals(this||i)&&_.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!o&&(S=_.editable())&&(S.equals(this||i)||S.contains(this||i)))return _;return null},find:function(o){var s=f(this||i);o=new CKEDITOR.dom.nodeList((this||i).$.querySelectorAll(b(this||i,o)));s();return o},findOne:function(o){var s=f(this||i);o=(this||i).$.querySelector(b(this||i,o));s();return o?new CKEDITOR.dom.element(o):null},forEach:function(o,s,T){if(!(T||s&&(this||i).type!=s))var _=o(this||i);if(!1!==_){T=this.getChildren();for(var S=0;S<T.count();S++)_=T.getItem(S),_.type==CKEDITOR.NODE_ELEMENT?_.forEach(o,s):s&&_.type!=s||o(_)}}});var T={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(o,s,T){"number"==typeof s&&(!T||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(s-=c.call(this||i,o)),this.setStyle(o,s+"px"))};CKEDITOR.dom.element.prototype.getSize=function(o,s){var T=Math.max((this||i).$["offset"+CKEDITOR.tools.capitalize(o)],(this||i).$["client"+CKEDITOR.tools.capitalize(o)])||0;s&&(T-=c.call(this||i,o));return T}}(),CKEDITOR.dom.documentFragment=function(o){o=o||CKEDITOR.document;(this||i).$=o.type==CKEDITOR.NODE_DOCUMENT?o.$.createDocumentFragment():o},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(o){o=o.$;o.parentNode.insertBefore((this||i).$,o.nextSibling)},getHtml:function(){var i=new CKEDITOR.dom.element("div");this.clone(1,1).appendTo(i);return i.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.document.prototype,!0,{find:1,findOne:1}),function(){function a(o,s){var T=(this||i).range;if((this||i)._.end)return null;if(!(this||i)._.start){(this||i)._.start=1;if(T.collapsed)return this.end(),null;T.optimize()}var _,S=T.startContainer;_=T.endContainer;var P=T.startOffset,$=T.endOffset,V,j=(this||i).guard,Y=(this||i).type,ee=o?"getPreviousSourceNode":"getNextSourceNode";if(!o&&!(this||i)._.guardLTR){var te=_.type==CKEDITOR.NODE_ELEMENT?_:_.getParent(),ne=_.type==CKEDITOR.NODE_ELEMENT?_.getChild($):_.getNext();(this||i)._.guardLTR=function(i,o){return(!o||!te.equals(i))&&(!ne||!i.equals(ne))&&(i.type!=CKEDITOR.NODE_ELEMENT||!o||!i.equals(T.root))}}if(o&&!(this||i)._.guardRTL){var ie=S.type==CKEDITOR.NODE_ELEMENT?S:S.getParent(),oe=S.type==CKEDITOR.NODE_ELEMENT?P?S.getChild(P-1):null:S.getPrevious();(this||i)._.guardRTL=function(i,o){return(!o||!ie.equals(i))&&(!oe||!i.equals(oe))&&(i.type!=CKEDITOR.NODE_ELEMENT||!o||!i.equals(T.root))}}var ae=o?(this||i)._.guardRTL:(this||i)._.guardLTR;V=j?function(i,o){return!1!==ae(i,o)&&j(i,o)}:ae;(this||i).current?_=(this||i).current[ee](!1,Y,V):(o?_.type==CKEDITOR.NODE_ELEMENT&&(_=0<$?_.getChild($-1):!1===V(_,!0)?null:_.getPreviousSourceNode(!0,Y,V)):(_=S,_.type==CKEDITOR.NODE_ELEMENT&&((_=_.getChild(P))||(_=!1===V(S,!0)?null:S.getNextSourceNode(!0,Y,V)))),_&&!1===V(_)&&(_=null));for(;_&&!(this||i)._.end;){(this||i).current=_;if((this||i).evaluator&&!1===this.evaluator(_)){if(s&&(this||i).evaluator)return!1}else if(!s)return _;_=_[ee](!1,Y,V)}this.end();return(this||i).current=null}function f(o){for(var s,T=null;s=a.call(this||i,o);)T=s;return T}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(o){(this||i).range=o;(this||i)._={}},proto:{end:function(){(this||i)._.end=1},next:function(){return a.call(this||i)},previous:function(){return a.call(this||i,1)},checkForward:function(){return!1!==a.call(this||i,0,1)},checkBackward:function(){return!1!==a.call(this||i,1,1)},lastForward:function(){return f.call(this||i)},lastBackward:function(){return f.call(this||i,1)},reset:function(){delete(this||i).current;(this||i)._={}}}});var o={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},s={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(i){return!("none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in s||!o[this.getComputedStyle("display")])||!!(this.is(CKEDITOR.dtd.$block)||i&&this.is(i))};CKEDITOR.dom.walker.blockBoundary=function(i){return function(o){return!(o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary(i))}};CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})};CKEDITOR.dom.walker.bookmark=function(i,o){function e(i){return i&&i.getName&&"span"==i.getName()&&i.data("cke-bookmark")}return function(s){var T,_;T=s&&s.type!=CKEDITOR.NODE_ELEMENT&&(_=s.getParent())&&e(_);T=i?T:T||e(s);return!!(o^T)}};CKEDITOR.dom.walker.whitespaces=function(i){return function(o){var s;o&&o.type==CKEDITOR.NODE_TEXT&&(s=!CKEDITOR.tools.trim(o.getText())||CKEDITOR.env.webkit&&o.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE);return!!(i^s)}};CKEDITOR.dom.walker.invisible=function(i){var o=CKEDITOR.dom.walker.whitespaces(),s=CKEDITOR.env.webkit?1:0;return function(T){o(T)?T=1:(T.type==CKEDITOR.NODE_TEXT&&(T=T.getParent()),T=T.$.offsetWidth<=s);return!!(i^T)}};CKEDITOR.dom.walker.nodeType=function(i,o){return function(s){return!!(o^s.type==i)}};CKEDITOR.dom.walker.bogus=function(i){function b(i){return!_(i)&&!S(i)}return function(o){var s=CKEDITOR.env.needsBrFiller?o.is&&o.is("br"):o.getText&&T.test(o.getText());s&&(s=o.getParent(),o=o.getNext(b),s=s.isBlockBoundary()&&(!o||o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()));return!!(i^s)}};CKEDITOR.dom.walker.temp=function(i){return function(o){o.type!=CKEDITOR.NODE_ELEMENT&&(o=o.getParent());o=o&&o.hasAttribute("data-cke-temp");return!!(i^o)}};var T=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,_=CKEDITOR.dom.walker.whitespaces(),S=CKEDITOR.dom.walker.bookmark(),P=CKEDITOR.dom.walker.temp(),h=function(i){return S(i)||_(i)||i.type==CKEDITOR.NODE_ELEMENT&&i.is(CKEDITOR.dtd.$inline)&&!i.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(i){return function(o){o=_(o)||S(o)||P(o);return!!(i^o)}};var $=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(i){return function(o){for(var s=0,T=o.getChildCount();s<T;++s)if(!$(o.getChild(s)))return!!i;return!i}};var V=CKEDITOR.dom.walker.empty(),j=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(i){var o={},s;for(s in i)CKEDITOR.dtd[s]["#"]&&(o[s]=1);return o}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(i){return function(o){o=!$(o)&&!!(o.type==CKEDITOR.NODE_TEXT||o.type==CKEDITOR.NODE_ELEMENT&&(o.is(CKEDITOR.dtd.$inline)||o.is("hr")||"false"==o.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&o.is(j)&&V(o)));return!!(i^o)}};CKEDITOR.dom.element.prototype.getBogus=function(){var o=this||i;do{o=o.getPreviousSourceNode()}while(h(o));return!(!o||!(CKEDITOR.env.needsBrFiller?o.is&&o.is("br"):o.getText&&T.test(o.getText())))&&o}}(),CKEDITOR.dom.range=function(o){(this||i).endOffset=(this||i).endContainer=(this||i).startOffset=(this||i).startContainer=null;(this||i).collapsed=!0;var s=o instanceof CKEDITOR.dom.document;(this||i).document=s?o:o.getDocument();(this||i).root=s?o.getBody():o},function(){function a(i){i.collapsed=i.startContainer&&i.endContainer&&i.startContainer.equals(i.endContainer)&&i.startOffset==i.endOffset}function f(i,o,s,T,_){function h(i,o,s,T){var V=s?i.getPrevious():i.getNext();if(T&&S)return V;$||T?o.append(i.clone(!0,_),s):(i.remove(),P&&o.append(i,s));return V}function f(){var i,o,s,T=Math.min(se.length,le.length);for(i=0;i<T;i++)if(o=se[i],s=le[i],!o.equals(s))return i;return i-1}function m(){var o=ce-1,s=ie&&oe&&!V.equals(j);o<de-1||o<ue-1||s?(s?i.moveToPosition(j,CKEDITOR.POSITION_BEFORE_START):ue==o+1&&ne?i.moveToPosition(le[o],CKEDITOR.POSITION_BEFORE_END):i.moveToPosition(le[o+1],CKEDITOR.POSITION_BEFORE_START),T&&(o=se[o+1])&&o.type==CKEDITOR.NODE_ELEMENT&&(s=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',i.document),s.insertAfter(o),o.mergeSiblings(!1),i.moveToBookmark({startNode:s}))):i.collapse(!0)}i.optimizeBookmark();var S=0===o,P=1==o,$=2==o;o=$||P;var V=i.startContainer,j=i.endContainer,Y=i.startOffset,ee=i.endOffset,te,ne,ie,oe,ae,re;if($&&j.type==CKEDITOR.NODE_TEXT&&(V.equals(j)||V.type===CKEDITOR.NODE_ELEMENT&&V.getFirst().equals(j)))s.append(i.document.createText(j.substring(Y,ee)));else{j.type==CKEDITOR.NODE_TEXT?$?re=!0:j=j.split(ee):0<j.getChildCount()?ee>=j.getChildCount()?(j=j.getChild(ee-1),ne=!0):j=j.getChild(ee):oe=ne=!0;V.type==CKEDITOR.NODE_TEXT?$?ae=!0:V.split(Y):0<V.getChildCount()?0===Y?(V=V.getChild(Y),te=!0):V=V.getChild(Y-1):ie=te=!0;for(var se=V.getParents(),le=j.getParents(),ce=f(),de=se.length-1,ue=le.length-1,he=s,fe,ge,me,Ee=-1,pe=ce;pe<=de;pe++){ge=se[pe];me=ge.getNext();for(pe!=de||ge.equals(le[pe])&&de<ue?o&&(fe=he.append(ge.clone(0,_))):te?h(ge,he,!1,ie):ae&&he.append(i.document.createText(ge.substring(Y)));me;){if(me.equals(le[pe])){Ee=pe;break}me=h(me,he)}he=fe}he=s;for(pe=ce;pe<=ue;pe++)if(s=le[pe],me=s.getPrevious(),s.equals(se[pe]))o&&(he=he.getChild(0));else{pe!=ue||s.equals(se[pe])&&ue<de?o&&(fe=he.append(s.clone(0,_))):ne?h(s,he,!1,oe):re&&he.append(i.document.createText(s.substring(0,ee)));if(pe>Ee)for(;me;)me=h(me,he,!0);he=fe}$||m()}}function b(){var i=!1,s=CKEDITOR.dom.walker.whitespaces(),T=CKEDITOR.dom.walker.bookmark(!0),_=CKEDITOR.dom.walker.bogus();return function(S){return!(!T(S)&&!s(S))||(_(S)&&!i?i=!0:!(S.type==CKEDITOR.NODE_TEXT&&(S.hasAscendant("pre")||CKEDITOR.tools.trim(S.getText()).length)||S.type==CKEDITOR.NODE_ELEMENT&&!S.is(o)))}}function c(i){var o=CKEDITOR.dom.walker.whitespaces(),T=CKEDITOR.dom.walker.bookmark(1);return function(_){return!(!T(_)&&!o(_))||(!i&&s(_)||_.type==CKEDITOR.NODE_ELEMENT&&_.is(CKEDITOR.dtd.$removeEmpty))}}function d(i){return function(){var o;return this[i?"getPreviousNode":"getNextNode"]((function(i){!o&&S(i)&&(o=i);return _(i)&&!(s(i)&&i.equals(o))}))}}var o={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1},s=CKEDITOR.dom.walker.bogus(),T=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,_=CKEDITOR.dom.walker.editable(),S=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var o=new CKEDITOR.dom.range((this||i).root);o._setStartContainer((this||i).startContainer);o.startOffset=(this||i).startOffset;o._setEndContainer((this||i).endContainer);o.endOffset=(this||i).endOffset;o.collapsed=(this||i).collapsed;return o},collapse:function(o){o?(this._setEndContainer((this||i).startContainer),(this||i).endOffset=(this||i).startOffset):(this._setStartContainer((this||i).endContainer),(this||i).startOffset=(this||i).endOffset);(this||i).collapsed=!0},cloneContents:function(o){var s=new CKEDITOR.dom.documentFragment((this||i).document);(this||i).collapsed||f(this||i,2,s,!1,"undefined"==typeof o||o);return s},deleteContents:function(o){(this||i).collapsed||f(this||i,0,null,o)},extractContents:function(o,s){var T=new CKEDITOR.dom.documentFragment((this||i).document);(this||i).collapsed||f(this||i,1,T,o,"undefined"==typeof s||s);return T},createBookmark:function(o){var s,T,_,S,P=(this||i).collapsed;s=(this||i).document.createElement("span");s.data("cke-bookmark",1);s.setStyle("display","none");s.setHtml("&nbsp;");o&&(_="cke_bm_"+CKEDITOR.tools.getNextNumber(),s.setAttribute("id",_+(P?"C":"S")));P||(T=s.clone(),T.setHtml("&nbsp;"),o&&T.setAttribute("id",_+"E"),S=this.clone(),S.collapse(),S.insertNode(T));S=this.clone();S.collapse(!0);S.insertNode(s);T?(this.setStartAfter(s),this.setEndBefore(T)):this.moveToPosition(s,CKEDITOR.POSITION_AFTER_END);return{startNode:o?_+(P?"C":"S"):s,endNode:o?_+"E":T,serializable:o,collapsed:P}},createBookmark2:function(){function a(i){var s=i.container,T=i.offset,_;_=s;var S=T;_=_.type!=CKEDITOR.NODE_ELEMENT||0===S||S==_.getChildCount()?0:_.getChild(S-1).type==CKEDITOR.NODE_TEXT&&_.getChild(S).type==CKEDITOR.NODE_TEXT;_&&(s=s.getChild(T-1),T=s.getLength());if(s.type==CKEDITOR.NODE_ELEMENT&&0<T){e:{for(_=s;T--;)if(S=_.getChild(T).getIndex(!0),0<=S){T=S;break e}T=-1}T+=1}if(s.type==CKEDITOR.NODE_TEXT){_=s;for(S=0;(_=_.getPrevious())&&_.type==CKEDITOR.NODE_TEXT;)S+=_.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;_=S;s.getText()?T+=_:(S=s.getPrevious(o),_?(T=_,s=S?S.getNext():s.getParent().getFirst()):(s=s.getParent(),T=S?S.getIndex(!0)+1:0))}i.container=s;i.offset=T}function b(i,o){var s=o.getCustomData("cke-fillingChar");if(s){var T=i.container;s.equals(T)&&(i.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=i.offset&&(i.offset=T.getIndex(),i.container=T.getParent()))}}var o=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(o){var s=(this||i).collapsed,T={container:(this||i).startContainer,offset:(this||i).startOffset},_={container:(this||i).endContainer,offset:(this||i).endOffset};o&&(a(T),b(T,(this||i).root),s||(a(_),b(_,(this||i).root)));return{start:T.container.getAddress(o),end:s?null:_.container.getAddress(o),startOffset:T.offset,endOffset:_.offset,normalized:o,collapsed:s,is2:!0}}}(),moveToBookmark:function(o){if(o.is2){var s=(this||i).document.getByAddress(o.start,o.normalized),T=o.startOffset,_=o.end&&(this||i).document.getByAddress(o.end,o.normalized);o=o.endOffset;this.setStart(s,T);_?this.setEnd(_,o):this.collapse(!0)}else s=(T=o.serializable)?(this||i).document.getById(o.startNode):o.startNode,o=T?(this||i).document.getById(o.endNode):o.endNode,this.setStartBefore(s),s.remove(),o?(this.setEndBefore(o),o.remove()):this.collapse(!0)},getBoundaryNodes:function(){var o=(this||i).startContainer,s=(this||i).endContainer,T=(this||i).startOffset,_=(this||i).endOffset,S;if(o.type==CKEDITOR.NODE_ELEMENT)if(S=o.getChildCount(),S>T)o=o.getChild(T);else if(1>S)o=o.getPreviousSourceNode();else{for(o=o.$;o.lastChild;)o=o.lastChild;o=new CKEDITOR.dom.node(o);o=o.getNextSourceNode()||o}if(s.type==CKEDITOR.NODE_ELEMENT)if(S=s.getChildCount(),S>_)s=s.getChild(_).getPreviousSourceNode(!0);else if(1>S)s=s.getPreviousSourceNode();else{for(s=s.$;s.lastChild;)s=s.lastChild;s=new CKEDITOR.dom.node(s)}o.getPosition(s)&CKEDITOR.POSITION_FOLLOWING&&(o=s);return{startNode:o,endNode:s}},getCommonAncestor:function(o,s){var T=(this||i).startContainer,_=(this||i).endContainer,T=T.equals(_)?o&&T.type==CKEDITOR.NODE_ELEMENT&&(this||i).startOffset==(this||i).endOffset-1?T.getChild((this||i).startOffset):T:T.getCommonAncestor(_);return s&&!T.is?T.getParent():T},optimize:function(){var o=(this||i).startContainer,s=(this||i).startOffset;o.type!=CKEDITOR.NODE_ELEMENT&&(s?s>=o.getLength()&&this.setStartAfter(o):this.setStartBefore(o));o=(this||i).endContainer;s=(this||i).endOffset;o.type!=CKEDITOR.NODE_ELEMENT&&(s?s>=o.getLength()&&this.setEndAfter(o):this.setEndBefore(o))},optimizeBookmark:function(){var o=(this||i).startContainer,s=(this||i).endContainer;o.is&&o.is("span")&&o.data("cke-bookmark")&&this.setStartAt(o,CKEDITOR.POSITION_BEFORE_START);s&&s.is&&s.is("span")&&s.data("cke-bookmark")&&this.setEndAt(s,CKEDITOR.POSITION_AFTER_END)},trim:function(o,s){var T=(this||i).startContainer,_=(this||i).startOffset,S=(this||i).collapsed;if((!o||S)&&T&&T.type==CKEDITOR.NODE_TEXT){if(_)if(_>=T.getLength())_=T.getIndex()+1,T=T.getParent();else{var P=T.split(_),_=T.getIndex()+1,T=T.getParent();(this||i).startContainer.equals((this||i).endContainer)?this.setEnd(P,(this||i).endOffset-(this||i).startOffset):T.equals((this||i).endContainer)&&((this||i).endOffset+=1)}else _=T.getIndex(),T=T.getParent();this.setStart(T,_);if(S){this.collapse(!0);return}}T=(this||i).endContainer;_=(this||i).endOffset;s||S||!T||T.type!=CKEDITOR.NODE_TEXT||(_?(_>=T.getLength()||T.split(_),_=T.getIndex()+1):_=T.getIndex(),T=T.getParent(),this.setEnd(T,_))},enlarge:function(o,s){function c(i){return i&&i.type==CKEDITOR.NODE_ELEMENT&&i.hasAttribute("contenteditable")?null:i}var T=new RegExp(/[^\s\ufeff]/);switch(o){case CKEDITOR.ENLARGE_INLINE:var g=1;case CKEDITOR.ENLARGE_ELEMENT:var h=function(i,o){var s=new CKEDITOR.dom.range(S);s.setStart(i,o);s.setEndAt(S,CKEDITOR.POSITION_BEFORE_END);var s=new CKEDITOR.dom.walker(s),_;for(s.guard=function(i){return!(i.type==CKEDITOR.NODE_ELEMENT&&i.isBlockBoundary())};_=s.next();){if(_.type!=CKEDITOR.NODE_TEXT)return!1;ne=_!=i?_.getText():_.substring(o);if(T.test(ne))return!1}return!0};if((this||i).collapsed)break;var _=this.getCommonAncestor(),S=(this||i).root,P,$,V,j,Y,ee=!1,te,ne;te=(this||i).startContainer;var ie=(this||i).startOffset;te.type==CKEDITOR.NODE_TEXT?(ie&&(te=!CKEDITOR.tools.trim(te.substring(0,ie)).length&&te,ee=!!te),te&&((j=te.getPrevious())||(V=te.getParent()))):(ie&&(j=te.getChild(ie-1)||te.getLast()),j||(V=te));for(V=c(V);V||j;){if(V&&!j){!Y&&V.equals(_)&&(Y=!0);if(g?V.isBlockBoundary():!S.contains(V))break;ee&&"inline"==V.getComputedStyle("display")||(ee=!1,Y?P=V:this.setStartBefore(V));j=V.getPrevious()}for(;j;)if(te=!1,j.type==CKEDITOR.NODE_COMMENT)j=j.getPrevious();else{if(j.type==CKEDITOR.NODE_TEXT)ne=j.getText(),T.test(ne)&&(j=null),te=/[\s\ufeff]$/.test(ne);else if((j.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||s&&j.is("br"))&&!j.data("cke-bookmark"))if(ee&&CKEDITOR.dtd.$removeEmpty[j.getName()]){ne=j.getText();if(T.test(ne))j=null;else for(var ie=j.$.getElementsByTagName("*"),oe=0,ae;ae=ie[oe++];)if(!CKEDITOR.dtd.$removeEmpty[ae.nodeName.toLowerCase()]){j=null;break}j&&(te=!!ne.length)}else j=null;te&&(ee?Y?P=V:V&&this.setStartBefore(V):ee=!0);if(j){te=j.getPrevious();if(!V&&!te){V=j;j=null;break}j=te}else V=null}V&&(V=c(V.getParent()))}te=(this||i).endContainer;ie=(this||i).endOffset;V=j=null;Y=ee=!1;te.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(te.substring(ie)).length?ee=!0:(ee=!te.getLength(),ie==te.getLength()?(j=te.getNext())||(V=te.getParent()):h(te,ie)&&(V=te.getParent())):(j=te.getChild(ie))||(V=te);for(;V||j;){if(V&&!j){!Y&&V.equals(_)&&(Y=!0);if(g?V.isBlockBoundary():!S.contains(V))break;ee&&"inline"==V.getComputedStyle("display")||(ee=!1,Y?$=V:V&&this.setEndAfter(V));j=V.getNext()}for(;j;){te=!1;if(j.type==CKEDITOR.NODE_TEXT)ne=j.getText(),h(j,0)||(j=null),te=/^[\s\ufeff]/.test(ne);else if(j.type==CKEDITOR.NODE_ELEMENT){if((0<j.$.offsetWidth||s&&j.is("br"))&&!j.data("cke-bookmark"))if(ee&&CKEDITOR.dtd.$removeEmpty[j.getName()]){ne=j.getText();if(T.test(ne))j=null;else for(ie=j.$.getElementsByTagName("*"),oe=0;ae=ie[oe++];)if(!CKEDITOR.dtd.$removeEmpty[ae.nodeName.toLowerCase()]){j=null;break}j&&(te=!!ne.length)}else j=null}else te=1;te&&ee&&(Y?$=V:this.setEndAfter(V));if(j){te=j.getNext();if(!V&&!te){V=j;j=null;break}j=te}else V=null}V&&(V=c(V.getParent()))}P&&$&&(_=P.contains($)?$:P,this.setStartBefore(_),this.setEndAfter(_));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:V=new CKEDITOR.dom.range((this||i).root);S=(this||i).root;V.setStartAt(S,CKEDITOR.POSITION_AFTER_START);V.setEnd((this||i).startContainer,(this||i).startOffset);V=new CKEDITOR.dom.walker(V);var re,se,le=CKEDITOR.dom.walker.blockBoundary(o==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),ce=null,N=function(i){if(i.type==CKEDITOR.NODE_ELEMENT&&"false"==i.getAttribute("contenteditable"))if(ce){if(ce.equals(i)){ce=null;return}}else ce=i;else if(ce)return;var o=le(i);o||(re=i);return o},g=function(i){var o=N(i);!o&&i.is&&i.is("br")&&(se=i);return o};V.guard=N;V=V.lastBackward();re=re||S;this.setStartAt(re,!re.is("br")&&(!V&&this.checkStartOfBlock()||V&&re.contains(V))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);if(o==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){V=this.clone();V=new CKEDITOR.dom.walker(V);var de=CKEDITOR.dom.walker.whitespaces(),ue=CKEDITOR.dom.walker.bookmark();V.evaluator=function(i){return!de(i)&&!ue(i)};if((V=V.previous())&&V.type==CKEDITOR.NODE_ELEMENT&&V.is("br"))break}V=this.clone();V.collapse();V.setEndAt(S,CKEDITOR.POSITION_BEFORE_END);V=new CKEDITOR.dom.walker(V);V.guard=o==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?g:N;re=ce=se=null;V=V.lastForward();re=re||S;this.setEndAt(re,!V&&this.checkEndOfBlock()||V&&re.contains(V)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START);se&&this.setEndAfter(se)}},shrink:function(o,s,T){var _="boolean"===typeof T?T:!T||"boolean"!==typeof T.shrinkOnBlockBoundary||T.shrinkOnBlockBoundary,S=T&&T.skipBogus;if(!(this||i).collapsed){o=o||CKEDITOR.SHRINK_TEXT;var P=this.clone(),$=(this||i).startContainer,V=(this||i).endContainer,j=(this||i).startOffset,Y=(this||i).endOffset,ee=T=1;$&&$.type==CKEDITOR.NODE_TEXT&&(j?j>=$.getLength()?P.setStartAfter($):(P.setStartBefore($),T=0):P.setStartBefore($));V&&V.type==CKEDITOR.NODE_TEXT&&(Y?Y>=V.getLength()?P.setEndAfter(V):(P.setEndAfter(V),ee=0):P.setEndBefore(V));var P=new CKEDITOR.dom.walker(P),te=CKEDITOR.dom.walker.bookmark(),ne=CKEDITOR.dom.walker.bogus();P.evaluator=function(i){return i.type==(o==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var ie;P.guard=function(i,s){if(S&&ne(i)||te(i))return!0;if(o==CKEDITOR.SHRINK_ELEMENT&&i.type==CKEDITOR.NODE_TEXT||s&&i.equals(ie)||!1===_&&i.type==CKEDITOR.NODE_ELEMENT&&i.isBlockBoundary()||i.type==CKEDITOR.NODE_ELEMENT&&i.hasAttribute("contenteditable"))return!1;s||i.type!=CKEDITOR.NODE_ELEMENT||(ie=i);return!0};T&&($=P[o==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt($,s?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START);ee&&(P.reset(),(P=P[o==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(P,s?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END));return!(!T&&!ee)}},insertNode:function(o){this.optimizeBookmark();this.trim(!1,!0);var s=(this||i).startContainer,T=s.getChild((this||i).startOffset);T?o.insertBefore(T):s.append(o);o.getParent()&&o.getParent().equals((this||i).endContainer)&&(this||i).endOffset++;this.setStartBefore(o)},moveToPosition:function(i,o){this.setStartAt(i,o);this.collapse(!0)},moveToRange:function(i){this.setStart(i.startContainer,i.startOffset);this.setEnd(i.endContainer,i.endOffset)},selectNodeContents:function(i){this.setStart(i,0);this.setEnd(i,i.type==CKEDITOR.NODE_TEXT?i.getLength():i.getChildCount())},setStart:function(o,s){o.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[o.getName()]&&(s=o.getIndex(),o=o.getParent());this._setStartContainer(o);(this||i).startOffset=s;(this||i).endContainer||(this._setEndContainer(o),(this||i).endOffset=s);a(this||i)},setEnd:function(o,s){o.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[o.getName()]&&(s=o.getIndex()+1,o=o.getParent());this._setEndContainer(o);(this||i).endOffset=s;(this||i).startContainer||(this._setStartContainer(o),(this||i).startOffset=s);a(this||i)},setStartAfter:function(i){this.setStart(i.getParent(),i.getIndex()+1)},setStartBefore:function(i){this.setStart(i.getParent(),i.getIndex())},setEndAfter:function(i){this.setEnd(i.getParent(),i.getIndex()+1)},setEndBefore:function(i){this.setEnd(i.getParent(),i.getIndex())},setStartAt:function(o,s){switch(s){case CKEDITOR.POSITION_AFTER_START:this.setStart(o,0);break;case CKEDITOR.POSITION_BEFORE_END:o.type==CKEDITOR.NODE_TEXT?this.setStart(o,o.getLength()):this.setStart(o,o.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(o);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(o)}a(this||i)},setEndAt:function(o,s){switch(s){case CKEDITOR.POSITION_AFTER_START:this.setEnd(o,0);break;case CKEDITOR.POSITION_BEFORE_END:o.type==CKEDITOR.NODE_TEXT?this.setEnd(o,o.getLength()):this.setEnd(o,o.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(o);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(o)}a(this||i)},fixBlock:function(o,s){var T=this.createBookmark(),_=(this||i).document.createElement(s);this.collapse(o);this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);this.extractContents().appendTo(_);_.trim();this.insertNode(_);var S=_.getBogus();S&&S.remove();_.appendBogus();this.moveToBookmark(T);return _},splitBlock:function(o,s){var T=new CKEDITOR.dom.elementPath((this||i).startContainer,(this||i).root),_=new CKEDITOR.dom.elementPath((this||i).endContainer,(this||i).root),S=T.block,P=_.block,$=null;if(!T.blockLimit.equals(_.blockLimit))return null;"br"!=o&&(S||(S=this.fixBlock(!0,o),P=new CKEDITOR.dom.elementPath((this||i).endContainer,(this||i).root).block),P||(P=this.fixBlock(!1,o)));T=S&&this.checkStartOfBlock();_=P&&this.checkEndOfBlock();this.deleteContents();S&&S.equals(P)&&(_?($=new CKEDITOR.dom.elementPath((this||i).startContainer,(this||i).root),this.moveToPosition(P,CKEDITOR.POSITION_AFTER_END),P=null):T?($=new CKEDITOR.dom.elementPath((this||i).startContainer,(this||i).root),this.moveToPosition(S,CKEDITOR.POSITION_BEFORE_START),S=null):(P=this.splitElement(S,s||!1),S.is("ul","ol")||S.appendBogus()));return{previousBlock:S,nextBlock:P,wasStartOfBlock:T,wasEndOfBlock:_,elementPath:$}},splitElement:function(o,s){if(!(this||i).collapsed)return null;this.setEndAt(o,CKEDITOR.POSITION_BEFORE_END);var T=this.extractContents(!1,s||!1),_=o.clone(!1,s||!1);T.appendTo(_);_.insertAfter(o);this.moveToPosition(o,CKEDITOR.POSITION_AFTER_END);return _},removeEmptyBlocksAtEnd:function(){function a(s){return function(T){return!(i(T)||o(T)||T.type==CKEDITOR.NODE_ELEMENT&&T.isEmptyInlineRemoveable()||s.is("table")&&T.is("caption"))}}var i=CKEDITOR.dom.walker.whitespaces(),o=CKEDITOR.dom.walker.bookmark(!1);return function(i){for(var o=this.createBookmark(),s=this[i?"endPath":"startPath"](),T=s.block||s.blockLimit,_;T&&!T.equals(s.root)&&!T.getFirst(a(T));)_=T.getParent(),this[i?"setEndAt":"setStartAt"](T,CKEDITOR.POSITION_AFTER_END),T.remove(1),T=_;this.moveToBookmark(o)}}(),startPath:function(){return new CKEDITOR.dom.elementPath((this||i).startContainer,(this||i).root)},endPath:function(){return new CKEDITOR.dom.elementPath((this||i).endContainer,(this||i).root)},checkBoundaryOfElement:function(i,o){var s=o==CKEDITOR.START,T=this.clone();T.collapse(s);T[s?"setStartAt":"setEndAt"](i,s?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END);T=new CKEDITOR.dom.walker(T);T.evaluator=c(s);return T[s?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var o=(this||i).startContainer,s=(this||i).startOffset;CKEDITOR.env.ie&&s&&o.type==CKEDITOR.NODE_TEXT&&(o=CKEDITOR.tools.ltrim(o.substring(0,s)),T.test(o)&&this.trim(0,1));this.trim();o=new CKEDITOR.dom.elementPath((this||i).startContainer,(this||i).root);s=this.clone();s.collapse(!0);s.setStartAt(o.block||o.blockLimit,CKEDITOR.POSITION_AFTER_START);o=new CKEDITOR.dom.walker(s);o.evaluator=b();return o.checkBackward()},checkEndOfBlock:function(){var o=(this||i).endContainer,s=(this||i).endOffset;CKEDITOR.env.ie&&o.type==CKEDITOR.NODE_TEXT&&(o=CKEDITOR.tools.rtrim(o.substring(s)),T.test(o)&&this.trim(1,0));this.trim();o=new CKEDITOR.dom.elementPath((this||i).endContainer,(this||i).root);s=this.clone();s.collapse(!1);s.setEndAt(o.block||o.blockLimit,CKEDITOR.POSITION_BEFORE_END);o=new CKEDITOR.dom.walker(s);o.evaluator=b();return o.checkForward()},getPreviousNode:function(o,s,T){var _=this.clone();_.collapse(1);_.setStartAt(T||(this||i).root,CKEDITOR.POSITION_AFTER_START);T=new CKEDITOR.dom.walker(_);T.evaluator=o;T.guard=s;return T.previous()},getNextNode:function(o,s,T){var _=this.clone();_.collapse();_.setEndAt(T||(this||i).root,CKEDITOR.POSITION_BEFORE_END);T=new CKEDITOR.dom.walker(_);T.evaluator=o;T.guard=s;return T.next()},checkReadOnly:function(){function a(i,o){for(;i;){if(i.type==CKEDITOR.NODE_ELEMENT){if("false"==i.getAttribute("contentEditable")&&!i.data("cke-editable"))return 0;if(i.is("html")||"true"==i.getAttribute("contentEditable")&&(i.contains(o)||i.equals(o)))break}i=i.getParent()}return 1}return function(){var o=(this||i).startContainer,s=(this||i).endContainer;return!(a(o,s)&&a(s,o))}}(),moveToElementEditablePosition:function(o,s){if(o.type==CKEDITOR.NODE_ELEMENT&&!o.isEditable(!1))return this.moveToPosition(o,s?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var _=0;o;){if(o.type==CKEDITOR.NODE_TEXT){s&&(this||i).endContainer&&this.checkEndOfBlock()&&T.test(o.getText())?this.moveToPosition(o,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(o,s?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);_=1;break}if(o.type==CKEDITOR.NODE_ELEMENT)if(o.isEditable())this.moveToPosition(o,s?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),_=1;else if(s&&o.is("br")&&(this||i).endContainer&&this.checkEndOfBlock())this.moveToPosition(o,CKEDITOR.POSITION_BEFORE_START);else if("false"==o.getAttribute("contenteditable")&&o.is(CKEDITOR.dtd.$block))return this.setStartBefore(o),this.setEndAfter(o),!0;var P=o,$=_,V=void 0;P.type==CKEDITOR.NODE_ELEMENT&&P.isEditable(!1)&&(V=P[s?"getLast":"getFirst"](S));$||V||(V=P[s?"getPrevious":"getNext"](S));o=V}return!!_},moveToClosestEditablePosition:function(o,s){var T,_=0,S,P,$=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];o?(T=new CKEDITOR.dom.range((this||i).root),T.moveToPosition(o,$[s?0:1])):T=this.clone();o&&!o.is(CKEDITOR.dtd.$block)?_=1:(S=T[s?"getNextEditableNode":"getPreviousEditableNode"]())&&(_=1,(P=S.type==CKEDITOR.NODE_ELEMENT)&&S.is(CKEDITOR.dtd.$block)&&"false"==S.getAttribute("contenteditable")?(T.setStartAt(S,CKEDITOR.POSITION_BEFORE_START),T.setEndAt(S,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&P&&S.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(T.setEnd(S,0),T.collapse()):T.moveToPosition(S,$[s?1:0]));_&&this.moveToRange(T);return!!_},moveToElementEditStart:function(i){return this.moveToElementEditablePosition(i)},moveToElementEditEnd:function(i){return this.moveToElementEditablePosition(i,!0)},getEnclosedNode:function(){var i=this.clone();i.optimize();if(i.startContainer.type!=CKEDITOR.NODE_ELEMENT||i.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var i=new CKEDITOR.dom.walker(i),o=CKEDITOR.dom.walker.bookmark(!1,!0),s=CKEDITOR.dom.walker.whitespaces(!0);i.evaluator=function(i){return s(i)&&o(i)};var T=i.next();i.reset();return T&&T.equals(i.previous())?T:null},getTouchedStartNode:function(){var o=(this||i).startContainer;return(this||i).collapsed||o.type!=CKEDITOR.NODE_ELEMENT?o:o.getChild((this||i).startOffset)||o},getTouchedEndNode:function(){var o=(this||i).endContainer;return(this||i).collapsed||o.type!=CKEDITOR.NODE_ELEMENT?o:o.getChild((this||i).endOffset-1)||o},getNextEditableNode:d(),getPreviousEditableNode:d(1),_getTableElement:function(o){o=o||{td:1,th:1,tr:1,tbody:1,thead:1,tfoot:1,table:1};var s=(this||i).startContainer,T=(this||i).endContainer,_=s.getAscendant("table",!0),S=T.getAscendant("table",!0);return _&&!(this||i).root.contains(_)?null:CKEDITOR.env.safari&&_&&T.equals((this||i).root)?s.getAscendant(o,!0):this.getEnclosedNode()?this.getEnclosedNode().getAscendant(o,!0):_&&S&&(_.equals(S)||_.contains(S)||S.contains(_))?s.getAscendant(o,!0):null},scrollIntoView:function(){var o=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",(this||i).document),s,T,_,S=this.clone();S.optimize();(_=S.startContainer.type==CKEDITOR.NODE_TEXT)?(T=S.startContainer.getText(),s=S.startContainer.split(S.startOffset),o.insertAfter(S.startContainer)):S.insertNode(o);o.scrollIntoView();_&&(S.startContainer.setText(T),s.remove());o.remove()},getClientRects:function(){function a(o,s){var T=CKEDITOR.tools.array.map(o,(function(i){return i})),_=new CKEDITOR.dom.range(s.root),S,P,$;s.startContainer instanceof CKEDITOR.dom.element&&(P=0===s.startOffset&&s.startContainer.hasAttribute("data-widget"));s.endContainer instanceof CKEDITOR.dom.element&&($=($=s.endOffset===(s.endContainer.getChildCount?s.endContainer.getChildCount():s.endContainer.length))&&s.endContainer.hasAttribute("data-widget"));P&&_.setStart(s.startContainer.getParent(),s.startContainer.getIndex());$&&_.setEnd(s.endContainer.getParent(),s.endContainer.getIndex()+1);(P||$)&&(s=_);_=s.cloneContents().find("[data-cke-widget-id]").toArray();if(_=CKEDITOR.tools.array.map(_,(function(i){var o=s.root.editor;i=i.getAttribute("data-cke-widget-id");return o.widgets.instances[i].element})))return _=CKEDITOR.tools.array.map(_,(function(o){var s;s=o.getParent().hasClass("cke_widget_wrapper")?o.getParent():o;S=(this||i).root.getDocument().$.createRange();S.setStart(s.getParent().$,s.getIndex());S.setEnd(s.getParent().$,s.getIndex()+1);s=S.getClientRects();s.widgetRect=o.getClientRect();return s}),s),CKEDITOR.tools.array.forEach(_,(function(i){function b(s){CKEDITOR.tools.array.forEach(T,(function(_,S){var P=CKEDITOR.tools.objectCompare(i[s],_);P||(P=CKEDITOR.tools.objectCompare(i.widgetRect,_));P&&(Array.prototype.splice.call(T,S,i.length-s,i.widgetRect),o=!0)}));o||(s<T.length-1?b(s+1):T.push(i.widgetRect))}var o;b(0)})),T}function b(i,o,s){var T;o.collapsed?s.startContainer instanceof CKEDITOR.dom.element?(i=s.checkStartOfBlock(),T=new CKEDITOR.dom.text("​"),i?s.startContainer.append(T,!0):0===s.startOffset?T.insertBefore(s.startContainer.getFirst()):(s=s.startContainer.getChildren().getItem(s.startOffset-1),T.insertAfter(s)),o.setStart(T.$,0),o.setEnd(T.$,0),i=o.getClientRects(),T.remove()):s.startContainer instanceof CKEDITOR.dom.text&&(""===s.startContainer.getText()?(s.startContainer.setText("​"),i=o.getClientRects(),s.startContainer.setText("")):i=[d(s.createBookmark())]):i=[d(s.createBookmark())];return i}function c(i,o,s){i=CKEDITOR.tools.extend({},i);o&&(i=CKEDITOR.tools.getAbsoluteRectPosition(s.document.getWindow(),i));!i.width&&(i.width=i.right-i.left);!i.height&&(i.height=i.bottom-i.top);return i}function d(i){var o=i.startNode;i=i.endNode;var s;o.setText("​");o.removeStyle("display");i?(i.setText("​"),i.removeStyle("display"),s=[o.getClientRect(),i.getClientRect()],i.remove()):s=[o.getClientRect(),o.getClientRect()];o.remove();return{right:Math.max(s[0].right,s[1].right),bottom:Math.max(s[0].bottom,s[1].bottom),left:Math.min(s[0].left,s[1].left),top:Math.min(s[0].top,s[1].top),width:Math.abs(s[0].left-s[1].left),height:Math.max(s[0].bottom,s[1].bottom)-Math.min(s[0].top,s[1].top)}}return void 0!==(this||i).document.getSelection?function(o){var s=(this||i).root.getDocument().$.createRange(),T;s.setStart((this||i).startContainer.$,(this||i).startOffset);s.setEnd((this||i).endContainer.$,(this||i).endOffset);T=s.getClientRects();T=a(T,this||i);T.length||(T=b(T,s,this||i));return CKEDITOR.tools.array.map(T,(function(s){return c(s,o,this||i)}),this||i)}:function(o){return[c(d(this.createBookmark()),o,this||i)]}}(),_setStartContainer:function(o){(this||i).startContainer=o},_setEndContainer:function(o){(this||i).endContainer=o},_find:function(i,o){var s=this.getCommonAncestor(),T=this.getBoundaryNodes(),_=[],S,P,$,V;if(s&&s.find)for(P=s.find(i),S=0;S<P.count();S++)(s=P.getItem(S),o||!s.isReadOnly())&&($=s.getPosition(T.startNode)&CKEDITOR.POSITION_FOLLOWING||T.startNode.equals(s),V=s.getPosition(T.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED||T.endNode.equals(s),$&&V&&_.push(s));return _}};CKEDITOR.dom.range.mergeRanges=function(i){return CKEDITOR.tools.array.reduce(i,(function(i,o){var s=i[i.length-1],T=!1;o=o.clone();o.enlarge(CKEDITOR.ENLARGE_ELEMENT);if(s){var _=new CKEDITOR.dom.range(o.root),T=new CKEDITOR.dom.walker(_),S=CKEDITOR.dom.walker.whitespaces();_.setStart(s.endContainer,s.endOffset);_.setEnd(o.startContainer,o.startOffset);for(_=T.next();S(_)||o.endContainer.equals(_);)_=T.next();T=!_}T?s.setEnd(o.endContainer,o.endOffset):i.push(o);return i}),[])}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,"use strict",function(){function a(o){1>arguments.length||((this||i).range=o,(this||i).forceBrBreak=0,(this||i).enlargeBr=1,(this||i).enforceRealBlocks=0,(this||i)._||((this||i)._={}))}function f(i){var o=[];i.forEach((function(i){if("true"==i.getAttribute("contenteditable"))return o.push(i),!1}),CKEDITOR.NODE_ELEMENT,!0);return o}function b(i,o,s,T){e:{null==T&&(T=f(s));for(var _;_=T.shift();)if(_.getDtd().p){T={element:_,remaining:T};break e}T=null}if(!T)return 0;if((_=CKEDITOR.filter.instances[T.element.data("cke-filter")])&&!_.check(o))return b(i,o,s,T.remaining);o=new CKEDITOR.dom.range(T.element);o.selectNodeContents(T.element);o=o.createIterator();o.enlargeBr=i.enlargeBr;o.enforceRealBlocks=i.enforceRealBlocks;o.activeFilter=o.filter=_;i._.nestedEditable={element:T.element,container:s,remaining:T.remaining,iterator:o};return 1}function c(i,o,s){if(!o)return!1;i=i.clone();i.collapse(!s);return i.checkBoundaryOfElement(o,s?CKEDITOR.START:CKEDITOR.END)}var o=/^[\r\n\t ]+$/,s=CKEDITOR.dom.walker.bookmark(!1,!0),T=CKEDITOR.dom.walker.whitespaces(!0),g=function(i){return s(i)&&T(i)},_={dd:1,dt:1,li:1};a.prototype={getNextParagraph:function(T){var S,P,$,V,j;T=T||"p";if((this||i)._.nestedEditable){if(S=(this||i)._.nestedEditable.iterator.getNextParagraph(T))return(this||i).activeFilter=(this||i)._.nestedEditable.iterator.activeFilter,S;(this||i).activeFilter=(this||i).filter;if(b(this||i,T,(this||i)._.nestedEditable.container,(this||i)._.nestedEditable.remaining))return(this||i).activeFilter=(this||i)._.nestedEditable.iterator.activeFilter,(this||i)._.nestedEditable.iterator.getNextParagraph(T);(this||i)._.nestedEditable=null}if(!(this||i).range.root.getDtd()[T])return null;if(!(this||i)._.started){var Y=(this||i).range.clone();P=Y.startPath();var ee=Y.endPath(),te=!Y.collapsed&&c(Y,P.block),ne=!Y.collapsed&&c(Y,ee.block,1);Y.shrink(CKEDITOR.SHRINK_ELEMENT,!0);te&&Y.setStartAt(P.block,CKEDITOR.POSITION_BEFORE_END);ne&&Y.setEndAt(ee.block,CKEDITOR.POSITION_AFTER_START);P=Y.endContainer.hasAscendant("pre",!0)||Y.startContainer.hasAscendant("pre",!0);Y.enlarge((this||i).forceBrBreak&&!P||!(this||i).enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);Y.collapsed||(P=new CKEDITOR.dom.walker(Y.clone()),ee=CKEDITOR.dom.walker.bookmark(!0,!0),P.evaluator=ee,(this||i)._.nextNode=P.next(),P=new CKEDITOR.dom.walker(Y.clone()),P.evaluator=ee,P=P.previous(),(this||i)._.lastNode=P.getNextSourceNode(!0,null,Y.root),(this||i)._.lastNode&&(this||i)._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim((this||i)._.lastNode.getText())&&(this||i)._.lastNode.getParent().isBlockBoundary()&&(ee=(this||i).range.clone(),ee.moveToPosition((this||i)._.lastNode,CKEDITOR.POSITION_AFTER_END),ee.checkEndOfBlock()&&(ee=new CKEDITOR.dom.elementPath(ee.endContainer,ee.root),(this||i)._.lastNode=(ee.block||ee.blockLimit).getNextSourceNode(!0))),(this||i)._.lastNode&&Y.root.contains((this||i)._.lastNode)||((this||i)._.lastNode=(this||i)._.docEndMarker=Y.document.createText(""),(this||i)._.lastNode.insertAfter(P)),Y=null);(this||i)._.started=1;P=Y}ee=(this||i)._.nextNode;Y=(this||i)._.lastNode;for((this||i)._.nextNode=null;ee;){var te=0,ne=ee.hasAscendant("pre"),ie=ee.type!=CKEDITOR.NODE_ELEMENT,oe=0;if(ie)ee.type==CKEDITOR.NODE_TEXT&&o.test(ee.getText())&&(ie=0);else{var ae=ee.getName();if(CKEDITOR.dtd.$block[ae]&&"false"==ee.getAttribute("contenteditable")){S=ee;b(this||i,T,S);break}if(ee.isBlockBoundary((this||i).forceBrBreak&&!ne&&{br:1})){if("br"==ae)ie=1;else if(!P&&!ee.getChildCount()&&"hr"!=ae){S=ee;$=ee.equals(Y);break}P&&(P.setEndAt(ee,CKEDITOR.POSITION_BEFORE_START),"br"!=ae&&((this||i)._.nextNode=ee));te=1}else{if(ee.getFirst()){P||(P=(this||i).range.clone(),P.setStartAt(ee,CKEDITOR.POSITION_BEFORE_START));ee=ee.getFirst();continue}ie=1}}ie&&!P&&(P=(this||i).range.clone(),P.setStartAt(ee,CKEDITOR.POSITION_BEFORE_START));$=(!te||ie)&&ee.equals(Y);if(P&&!te)for(;!ee.getNext(g)&&!$;){ae=ee.getParent();if(ae.isBlockBoundary((this||i).forceBrBreak&&!ne&&{br:1})){te=1;ie=0;$||ae.equals(Y);P.setEndAt(ae,CKEDITOR.POSITION_BEFORE_END);break}ee=ae;ie=1;$=ee.equals(Y);oe=1}ie&&P.setEndAt(ee,CKEDITOR.POSITION_AFTER_END);ee=this._getNextSourceNode(ee,oe,Y);if(($=!ee)||te&&P)break}if(!S){if(!P)return(this||i)._.docEndMarker&&(this||i)._.docEndMarker.remove(),(this||i)._.nextNode=null;S=new CKEDITOR.dom.elementPath(P.startContainer,P.root);ee=S.blockLimit;te={div:1,th:1,td:1};S=S.block;!S&&ee&&!(this||i).enforceRealBlocks&&te[ee.getName()]&&P.checkStartOfBlock()&&P.checkEndOfBlock()&&!ee.equals(P.root)?S=ee:!S||(this||i).enforceRealBlocks&&S.is(_)?(S=(this||i).range.document.createElement(T),P.extractContents().appendTo(S),S.trim(),P.insertNode(S),V=j=!0):"li"!=S.getName()?P.checkStartOfBlock()&&P.checkEndOfBlock()||(S=S.clone(!1),P.extractContents().appendTo(S),S.trim(),j=P.splitBlock(),V=!j.wasStartOfBlock,j=!j.wasEndOfBlock,P.insertNode(S)):$||((this||i)._.nextNode=S.equals(Y)?null:this._getNextSourceNode(P.getBoundaryNodes().endNode,1,Y))}V&&(V=S.getPrevious())&&V.type==CKEDITOR.NODE_ELEMENT&&("br"==V.getName()?V.remove():V.getLast()&&"br"==V.getLast().$.nodeName.toLowerCase()&&V.getLast().remove());j&&(V=S.getLast())&&V.type==CKEDITOR.NODE_ELEMENT&&"br"==V.getName()&&(!CKEDITOR.env.needsBrFiller||V.getPrevious(s)||V.getNext(s))&&V.remove();(this||i)._.nextNode||((this||i)._.nextNode=$||S.equals(Y)||!Y?null:this._getNextSourceNode(S,1,Y));return S},_getNextSourceNode:function(o,T,_){function d(i){return!(i.equals(_)||i.equals(S))}var S=(this||i).range.root;for(o=o.getNextSourceNode(T,null,d);!s(o);)o=o.getNextSourceNode(T,null,d);return o}};CKEDITOR.dom.range.prototype.createIterator=function(){return new a(this||i)}}(),CKEDITOR.command=function(o,s){(this||i).uiItems=[];(this||i).exec=function(T){if((this||i).state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())return!1;(this||i).editorFocus&&o.focus();return!1===this.fire("exec")||!1!==s.exec.call(this||i,o,T)};(this||i).refresh=function(o,T){if(!(this||i).readOnly&&o.readOnly)return!0;if((this||i).context&&!T.isContextFor((this||i).context)||!this.checkAllowed(!0))return this.disable(),!0;(this||i).startDisabled||this.enable();(this||i).modes&&!(this||i).modes[o.mode]&&this.disable();return!1===this.fire("refresh",{editor:o,path:T})||s.refresh&&!1!==s.refresh.apply(this||i,arguments)};var T;(this||i).checkAllowed=function(s){return s||"boolean"!=typeof T?T=o.activeFilter.checkFeature(this||i):T};CKEDITOR.tools.extend(this||i,s,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!s.context,state:CKEDITOR.TRISTATE_DISABLED});CKEDITOR.event.call(this||i)},CKEDITOR.command.prototype={enable:function(){(this||i).state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState((this||i).preserveState&&"undefined"!=typeof(this||i).previousState?(this||i).previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(o){if((this||i).state==o||o!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed())return!1;(this||i).previousState=(this||i).state;(this||i).state=o;this.fire("state");return!0},toggleState:function(){(this||i).state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):(this||i).state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function a(i,o,T,_,$){var V,j;i=[];for(V in o){j=o[V];j="boolean"==typeof j?{}:"function"==typeof j?{match:j}:s(j);"$"!=V.charAt(0)&&(j.elements=V);T&&(j.featureName=T.toLowerCase());var Y=j;Y.elements=k(Y.elements,/\s+/)||null;Y.propertiesOnly=Y.propertiesOnly||!0===Y.elements;var ee=/\s*,\s*/,te=void 0;for(te in S){Y[te]=k(Y[te],ee)||null;var ne=Y,ie=P[te],oe=k(Y[P[te]],ee),ae=Y[te],re=[],se=!0,le=void 0;oe?se=!1:oe={};for(le in ae)"!"==le.charAt(0)&&(le=le.slice(1),re.push(le),oe[le]=!0,se=!1);for(;le=re.pop();)ae[le]=ae["!"+le],delete ae["!"+le];ne[ie]=!se&&oe||null}Y.match=Y.match||null;_.push(j);i.push(j)}o=$.elements;$=$.generic;var ce;T=0;for(_=i.length;T<_;++T){V=s(i[T]);j=!0===V.classes||!0===V.styles||!0===V.attributes;Y=V;te=ie=ee=void 0;for(ee in S)Y[ee]=w(Y[ee]);ne=!0;for(te in P){ee=P[te];ie=Y[ee];oe=[];ae=void 0;for(ae in ie)-1<ae.indexOf("*")?oe.push(new RegExp("^"+ae.replace(/\*/g,".*")+"$")):oe.push(ae);ie=oe;ie.length&&(Y[ee]=ie,ne=!1)}Y.nothingRequired=ne;Y.noProperties=!(Y.attributes||Y.classes||Y.styles);if(!0===V.elements||null===V.elements)$[j?"unshift":"push"](V);else for(ce in Y=V.elements,delete V.elements,Y)o[ce]?o[ce][j?"unshift":"push"](V):o[ce]=[V]}}function f(i,o,s,T){if((!i.match||i.match(o))&&(T||g(i,o))&&(i.propertiesOnly||(s.valid=!0),s.allAttributes||(s.allAttributes=b(i.attributes,o.attributes,s.validAttributes)),s.allStyles||(s.allStyles=b(i.styles,o.styles,s.validStyles)),!s.allClasses)){i=i.classes;o=o.classes;T=s.validClasses;if(i)if(!0===i)i=!0;else{for(var _=0,S=o.length,P;_<S;++_)P=o[_],T[P]||(T[P]=i(P));i=!1}else i=!1;s.allClasses=i}}function b(i,o,s){if(!i)return!1;if(!0===i)return!0;for(var T in o)s[T]||(s[T]=i(T));return!1}function c(i,o,s){if(!i.match||i.match(o)){if(i.noProperties)return!1;s.hadInvalidAttribute=d(i.attributes,o.attributes)||s.hadInvalidAttribute;s.hadInvalidStyle=d(i.styles,o.styles)||s.hadInvalidStyle;i=i.classes;o=o.classes;if(i){for(var T=!1,_=!0===i,S=o.length;S--;)(_||i(o[S]))&&(o.splice(S,1),T=!0);i=T}else i=!1;s.hadInvalidClass=i||s.hadInvalidClass}}function d(i,o){if(!i)return!1;var s=!1,T=!0===i,_;for(_ in o)(T||i(_))&&(delete o[_],s=!0);return s}function l(i,o,s){if(i.disabled||i.customConfig&&!s||!o)return!1;i._.cachedChecks={};return!0}function k(i,o){if(!i)return!1;if(!0===i)return i;if("string"==typeof i)return i=T(i),"*"==i||CKEDITOR.tools.convertArrayToObject(i.split(o));if(CKEDITOR.tools.isArray(i))return!!i.length&&CKEDITOR.tools.convertArrayToObject(i);var s={},_=0,S;for(S in i)s[S]=i[S],_++;return!!_&&s}function g(i,o){if(i.nothingRequired)return!0;var s,T,_,S;if(_=i.requiredClasses)for(S=o.classes,s=0;s<_.length;++s)if(T=_[s],"string"==typeof T){if(-1==CKEDITOR.tools.indexOf(S,T))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(S,T))return!1;return h(o.styles,i.requiredStyles)&&h(o.attributes,i.requiredAttributes)}function h(i,o){if(!o)return!0;for(var s=0,T;s<o.length;++s)if(T=o[s],"string"==typeof T){if(!(T in i))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(i,T))return!1;return!0}function m(i){if(!i)return{};i=i.split(/\s*,\s*/).sort();for(var o={};i.length;)o[i.shift()]="cke-test";return o}function e(i){var o,s,_,S,P={},V=1;for(i=T(i);o=i.match($);)(s=o[2])?(_=n(s,"styles"),S=n(s,"attrs"),s=n(s,"classes")):_=S=s=null,P["$"+V++]={elements:o[1],classes:s,styles:_,attributes:S},i=i.slice(o[0].length);return P}function n(i,o){var s=i.match(V[o]);return s?T(s[1]):null}function q(i){var o=i.styleBackup=i.attributes.style,s=i.classBackup=i.attributes["class"];i.styles||(i.styles=CKEDITOR.tools.parseCssText(o||"",1));i.classes||(i.classes=s?s.split(/\s+/):[])}function y(i,o,s,T){var _=0,S;T.toHtml&&(o.name=o.name.replace(j,"$1"));if(T.doCallbacks&&i.elementCallbacks){e:{S=i.elementCallbacks;for(var P=0,$=S.length,V;P<$;++P)if(V=S[P](o)){S=V;break e}S=void 0}if(S)return S}if(T.doTransform&&(S=i._.transformations[o.name])){q(o);for(P=0;P<S.length;++P)x(i,o,S[P]);p(o)}if(T.doFilter){e:{P=o.name;$=i._;i=$.allowedRules.elements[P];S=$.allowedRules.generic;P=$.disallowedRules.elements[P];$=$.disallowedRules.generic;V=T.skipRequired;var ee={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1},te,ne;if(i||S){q(o);if(P)for(te=0,ne=P.length;te<ne;++te)if(!1===c(P[te],o,ee)){i=null;break e}if($)for(te=0,ne=$.length;te<ne;++te)c($[te],o,ee);if(i)for(te=0,ne=i.length;te<ne;++te)f(i[te],o,ee,V);if(S)for(te=0,ne=S.length;te<ne;++te)f(S[te],o,ee,V);i=ee}else i=null}if(!i||!i.valid)return s.push(o),1;ne=i.validAttributes;var ie=i.validStyles;S=i.validClasses;var P=o.attributes,oe=o.styles,$=o.classes;V=o.classBackup;var ae=o.styleBackup,re,se,le=[],ee=[],ce=/^data-cke-/;te=!1;delete P.style;delete P["class"];delete o.classBackup;delete o.styleBackup;if(!i.allAttributes)for(re in P)ne[re]||ce.test(re)&&(re==(se=re.replace(/^data-cke-saved-/,""))||ne[se])||(delete P[re],te=!0);if(!i.allStyles||i.hadInvalidStyle){for(re in oe)i.allStyles||ie[re]?le.push(re+":"+oe[re]):te=!0;le.length&&(P.style=le.sort().join("; "))}else ae&&(P.style=ae);if(!i.allClasses||i.hadInvalidClass){for(re=0;re<$.length;++re)(i.allClasses||S[$[re]])&&ee.push($[re]);ee.length&&(P["class"]=ee.sort().join(" "));V&&ee.length<V.split(/\s+/).length&&(te=!0)}else V&&(P["class"]=V);te&&(_=1);if(!T.skipFinalValidation&&!v(o))return s.push(o),1}T.toHtml&&(o.name=o.name.replace(Y,"cke:$1"));return _}function u(i){var o=[],s;for(s in i)-1<s.indexOf("*")&&o.push(s.replace(/\*/g,".*"));return o.length?new RegExp("^(?:"+o.join("|")+")$"):null}function p(i){var o=i.attributes,s;delete o.style;delete o["class"];(s=CKEDITOR.tools.writeCssText(i.styles,!0))&&(o.style=s);i.classes.length&&(o["class"]=i.classes.sort().join(" "))}function v(i){switch(i.name){case"a":if(!(i.children.length||i.attributes.name||i.attributes.id))return!1;break;case"img":if(!i.attributes.src)return!1}return!0}function w(i){if(!i)return!1;if(!0===i)return!0;var o=u(i);return function(s){return s in i||o&&s.match(o)}}function r(){return new CKEDITOR.htmlParser.element("br")}function z(i){return i.type==CKEDITOR.NODE_ELEMENT&&("br"==i.name||o.$block[i.name])}function t(i,s,T){var _=i.name;if(o.$empty[_]||!i.children.length)"hr"==_&&"br"==s?i.replaceWith(r()):(i.parent&&T.push({check:"it",el:i.parent}),i.remove());else if(o.$block[_]||"tr"==_)if("br"==s)i.previous&&!z(i.previous)&&(s=r(),s.insertBefore(i)),i.next&&!z(i.next)&&(s=r(),s.insertAfter(i)),i.replaceWithChildren();else{var _=i.children,S;e:{S=o[s];for(var P=0,$=_.length,V;P<$;++P)if(V=_[P],V.type==CKEDITOR.NODE_ELEMENT&&!S[V.name]){S=!1;break e}S=!0}if(S)i.name=s,i.attributes={},T.push({check:"parent-down",el:i});else{S=i.parent;for(var P=S.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==S.name,j,Y,$=_.length;0<$;)V=_[--$],P&&(V.type==CKEDITOR.NODE_TEXT||V.type==CKEDITOR.NODE_ELEMENT&&o.$inline[V.name])?(j||(j=new CKEDITOR.htmlParser.element(s),j.insertAfter(i),T.push({check:"parent-down",el:j})),j.add(V,0)):(j=null,Y=o[S.name]||o.span,V.insertAfter(i),S.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||V.type!=CKEDITOR.NODE_ELEMENT||Y[V.name]||T.push({check:"el-up",el:V}));i.remove()}}else _ in{style:1,script:1}?i.remove():(i.parent&&T.push({check:"it",el:i.parent}),i.replaceWithChildren())}function x(i,o,s){var T,_;for(T=0;T<s.length;++T)if(_=s[T],!(_.check&&!i.check(_.check,!1)||_.left&&!_.left(o))){_.right(o,ee);break}}function A(i,o){var s=o.getDefinition(),T=s.attributes,_=s.styles,S,P,$,V;if(i.name!=s.element)return!1;for(S in T)if("class"==S){for(s=T[S].split(/\s+/),$=i.classes.join("|");V=s.pop();)if(-1==$.indexOf(V))return!1}else if(i.attributes[S]!=T[S])return!1;for(P in _)if(i.styles[P]!=_[P])return!1;return!0}function B(i,o){var s,T;"string"==typeof i?s=i:i instanceof CKEDITOR.style?T=i:(s=i[0],T=i[1]);return[{element:s,left:T,right:function(i,s){s.transform(i,o)}}]}function C(i){return function(o){return A(o,i)}}function H(i){return function(o,s){s[i](o)}}var o=CKEDITOR.dtd,s=CKEDITOR.tools.copy,T=CKEDITOR.tools.trim,_=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2;CKEDITOR.filter=function(o,s){(this||i).allowedContent=[];(this||i).disallowedContent=[];(this||i).elementCallbacks=null;(this||i).disabled=!1;(this||i).editor=null;(this||i).id=CKEDITOR.tools.getNextNumber();(this||i)._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{},cachedChecks:{}};CKEDITOR.filter.instances[(this||i).id]=this||i;var T=(this||i).editor=o instanceof CKEDITOR.editor?o:null;if(T&&!s){(this||i).customConfig=!0;var S=T.config.allowedContent;!0===S?(this||i).disabled=!0:(S||((this||i).customConfig=!1),this.allow(S,"config",1),this.allow(T.config.extraAllowedContent,"extra",1),this.allow(_[T.enterMode]+" "+_[T.shiftEnterMode],"default",1),this.disallow(T.config.disallowedContent))}else(this||i).customConfig=!1,this.allow(s||o,"default",1)};CKEDITOR.filter.instances={};CKEDITOR.filter.prototype={allow:function(o,T,_){if(!l(this||i,o,_))return!1;var S,P;if("string"==typeof o)o=e(o);else if(o instanceof CKEDITOR.style){if(o.toAllowedContentRules)return this.allow(o.toAllowedContentRules((this||i).editor),T,_);S=o.getDefinition();o={};_=S.attributes;o[S.element]=S={styles:S.styles,requiredStyles:S.styles&&CKEDITOR.tools.object.keys(S.styles)};_&&(_=s(_),S.classes=_["class"]?_["class"].split(/\s+/):null,S.requiredClasses=S.classes,delete _["class"],S.attributes=_,S.requiredAttributes=_&&CKEDITOR.tools.object.keys(_))}else if(CKEDITOR.tools.isArray(o)){for(S=0;S<o.length;++S)P=this.allow(o[S],T,_);return P}a(this||i,o,T,(this||i).allowedContent,(this||i)._.allowedRules);return!0},applyTo:function(s,T,S,P){if((this||i).disabled)return!1;var $=this||i,V=[],j=(this||i).editor&&(this||i).editor.config.protectedSource,Y,ee=!1,te={doFilter:!S,doTransform:!0,doCallbacks:!0,toHtml:T};s.forEach((function(i){if(i.type==CKEDITOR.NODE_ELEMENT){if("off"==i.attributes["data-cke-filter"])return!1;if(!T||"span"!=i.name||!~CKEDITOR.tools.object.keys(i.attributes).join("|").indexOf("data-cke-"))if(Y=y($,i,V,te),1&Y)ee=!0;else if(2&Y)return!1}else if(i.type==CKEDITOR.NODE_COMMENT&&i.value.match(/^\{cke_protected\}(?!\{C\})/)){var o;e:{var s=decodeURIComponent(i.value.replace(/^\{cke_protected\}/,""));o=[];var _,S,P;if(j)for(S=0;S<j.length;++S)if((P=s.match(j[S]))&&P[0].length==s.length){o=!0;break e}s=CKEDITOR.htmlParser.fragment.fromHtml(s);1==s.children.length&&(_=s.children[0]).type==CKEDITOR.NODE_ELEMENT&&y($,_,o,te);o=!o.length}o||V.push(i)}}),null,!0);V.length&&(ee=!0);var ne;s=[];P=_[P||((this||i).editor?(this||i).editor.enterMode:CKEDITOR.ENTER_P)];for(var ie;S=V.pop();)S.type==CKEDITOR.NODE_ELEMENT?t(S,P,s):S.remove();for(;ne=s.pop();)if(S=ne.el,S.parent)switch(ie=o[S.parent.name]||o.span,ne.check){case"it":o.$removeEmpty[S.name]&&!S.children.length?t(S,P,s):v(S)||t(S,P,s);break;case"el-up":S.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||ie[S.name]||t(S,P,s);break;case"parent-down":S.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||ie[S.name]||t(S.parent,P,s)}return ee},checkFeature:function(o){if((this||i).disabled||!o)return!0;o.toFeature&&(o=o.toFeature((this||i).editor));return!o.requiredContent||this.check(o.requiredContent)},disable:function(){(this||i).disabled=!0},disallow:function(o){if(!l(this||i,o,!0))return!1;"string"==typeof o&&(o=e(o));a(this||i,o,null,(this||i).disallowedContent,(this||i)._.disallowedRules);return!0},addContentForms:function(o){if(!(this||i).disabled&&o){var s,T,_=[],S;for(s=0;s<o.length&&!S;++s)T=o[s],("string"==typeof T||T instanceof CKEDITOR.style)&&this.check(T)&&(S=T);if(S){for(s=0;s<o.length;++s)_.push(B(o[s],S));this.addTransformations(_)}}},addElementCallback:function(o){(this||i).elementCallbacks||((this||i).elementCallbacks=[]);(this||i).elementCallbacks.push(o)},addFeature:function(o){if((this||i).disabled||!o)return!0;o.toFeature&&(o=o.toFeature((this||i).editor));this.allow(o.allowedContent,o.name);this.addTransformations(o.contentTransformations);this.addContentForms(o.contentForms);return!o.requiredContent||!(this||i).customConfig&&!(this||i).disallowedContent.length||this.check(o.requiredContent)},addTransformations:function(o){var s,T;if(!(this||i).disabled&&o){var _=(this||i)._.transformations,S;for(S=0;S<o.length;++S){s=o[S];var P=void 0,$=void 0,V=void 0,j=void 0,Y=void 0,ee=void 0;T=[];for($=0;$<s.length;++$)V=s[$],"string"==typeof V?(V=V.split(/\s*:\s*/),j=V[0],Y=null,ee=V[1]):(j=V.check,Y=V.left,ee=V.right),P||(P=V,P=P.element?P.element:j?j.match(/^([a-z0-9]+)/i)[0]:P.left.getDefinition().element),Y instanceof CKEDITOR.style&&(Y=C(Y)),T.push({check:j==P?null:j,left:Y,right:"string"==typeof ee?H(ee):ee});s=P;_[s]||(_[s]=[]);_[s].push(T)}}},check:function(o,T,_){if((this||i).disabled)return!0;if(CKEDITOR.tools.isArray(o)){for(var S=o.length;S--;)if(this.check(o[S],T,_))return!0;return!1}var P,$;if("string"==typeof o){$=o+"<"+(!1===T?"0":"1")+(_?"1":"0")+">";if($ in(this||i)._.cachedChecks)return(this||i)._.cachedChecks[$];P=e(o).$1;var V=P.styles,S=P.classes;P.name=P.elements;P.classes=S=S?S.split(/\s*,\s*/):[];P.styles=m(V);P.attributes=m(P.attributes);P.children=[];S.length&&(P.attributes["class"]=S.join(" "));V&&(P.attributes.style=CKEDITOR.tools.writeCssText(P.styles))}else P=o.getDefinition(),V=P.styles,S=P.attributes||{},V&&!CKEDITOR.tools.isEmpty(V)?(V=s(V),S.style=CKEDITOR.tools.writeCssText(V,!0)):V={},P={name:P.element,attributes:S,classes:S["class"]?S["class"].split(/\s+/):[],styles:V,children:[]};var V=CKEDITOR.tools.clone(P),j=[],Y;if(!1!==T&&(Y=(this||i)._.transformations[P.name])){for(S=0;S<Y.length;++S)x(this||i,P,Y[S]);p(P)}y(this||i,V,j,{doFilter:!0,doTransform:!1!==T,skipRequired:!_,skipFinalValidation:!_});0<j.length?_=!1:((T=P.attributes["class"])&&(P.attributes["class"]=P.attributes["class"].split(" ").sort().join(" ")),_=CKEDITOR.tools.objectCompare(P.attributes,V.attributes,!0),T&&(P.attributes["class"]=T));"string"==typeof o&&((this||i)._.cachedChecks[$]=_);return _},getAllowedEnterMode:function(){var i=["p","div","br"],o={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(s,T){var S=i.slice(),P;if(this.check(_[s]))return s;for(T||(S=S.reverse());P=S.pop();)if(this.check(P))return o[P];return CKEDITOR.ENTER_BR}}(),clone:function(){var o=new CKEDITOR.filter,s=CKEDITOR.tools.clone;o.allowedContent=s((this||i).allowedContent);o._.allowedRules=s((this||i)._.allowedRules);o.disallowedContent=s((this||i).disallowedContent);o._.disallowedRules=s((this||i)._.disallowedRules);o._.transformations=s((this||i)._.transformations);o.disabled=(this||i).disabled;o.editor=(this||i).editor;return o},destroy:function(){delete CKEDITOR.filter.instances[(this||i).id];delete(this||i)._;delete(this||i).allowedContent;delete(this||i).disallowedContent}};var S={styles:1,attributes:1,classes:1},P={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},$=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,V={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},j=/^cke:(object|embed|param)$/,Y=/^(object|embed|param)$/,ee;ee=CKEDITOR.filter.transformationsTools={sizeToStyle:function(i){this.lengthToStyle(i,"width");this.lengthToStyle(i,"height")},sizeToAttribute:function(i){this.lengthToAttribute(i,"width");this.lengthToAttribute(i,"height")},lengthToStyle:function(i,o,s){s=s||o;if(!(s in i.styles)){var T=i.attributes[o];T&&(/^\d+$/.test(T)&&(T+="px"),i.styles[s]=T)}delete i.attributes[o]},lengthToAttribute:function(i,o,s){s=s||o;if(!(s in i.attributes)){var T=i.styles[o],_=T&&T.match(/^(\d+)(?:\.\d*)?px$/);_?i.attributes[s]=_[1]:"cke-test"==T&&(i.attributes[s]="cke-test")}delete i.styles[o]},alignmentToStyle:function(i){if(!("float"in i.styles)){var o=i.attributes.align;"left"!=o&&"right"!=o||(i.styles["float"]=o)}delete i.attributes.align},alignmentToAttribute:function(i){if(!("align"in i.attributes)){var o=i.styles["float"];"left"!=o&&"right"!=o||(i.attributes.align=o)}delete i.styles["float"]},splitBorderShorthand:function(i){if(i.styles.border){var o=CKEDITOR.tools.style.parse.border(i.styles.border);o.color&&(i.styles["border-color"]=o.color);o.style&&(i.styles["border-style"]=o.style);o.width&&(i.styles["border-width"]=o.width);delete i.styles.border}},listTypeToStyle:function(i){if(i.attributes.type)switch(i.attributes.type){case"a":i.styles["list-style-type"]="lower-alpha";break;case"A":i.styles["list-style-type"]="upper-alpha";break;case"i":i.styles["list-style-type"]="lower-roman";break;case"I":i.styles["list-style-type"]="upper-roman";break;case"1":i.styles["list-style-type"]="decimal";break;default:i.styles["list-style-type"]=i.attributes.type}},splitMarginShorthand:function(i){function b(s){i.styles["margin-top"]=o[s[0]];i.styles["margin-right"]=o[s[1]];i.styles["margin-bottom"]=o[s[2]];i.styles["margin-left"]=o[s[3]]}if(i.styles.margin){var o=i.styles.margin.match(/(\-?[\.\d]+\w+)/g)||["0px"];switch(o.length){case 1:b([0,0,0,0]);break;case 2:b([0,1,0,1]);break;case 3:b([0,1,2,1]);break;case 4:b([0,1,2,3])}delete i.styles.margin}},matchesStyle:A,transform:function(i,o){if("string"==typeof o)i.name=o;else{var s=o.getDefinition(),T=s.styles,_=s.attributes,S,P,$,V;i.name=s.element;for(S in _)if("class"==S)for(s=i.classes.join("|"),$=_[S].split(/\s+/);V=$.pop();)-1==s.indexOf(V)&&i.classes.push(V);else i.attributes[S]=_[S];for(P in T)i.styles[P]=T[P]}}}}(),function(){CKEDITOR.focusManager=function(o){if(o.focusManager)return o.focusManager;(this||i).hasFocus=!1;(this||i).currentActive=null;(this||i)._={editor:o};return this||i};CKEDITOR.focusManager._={blurDelay:200};CKEDITOR.focusManager.prototype={focus:function(o){(this||i)._.timer&&clearTimeout((this||i)._.timer);o&&((this||i).currentActive=o);(this||i).hasFocus||(this||i)._.locked||((o=CKEDITOR.currentInstance)&&o.focusManager.blur(1),(this||i).hasFocus=!0,(o=(this||i)._.editor.container)&&o.addClass("cke_focus"),(this||i)._.editor.fire("focus"))},lock:function(){(this||i)._.locked=1},unlock:function(){delete(this||i)._.locked},blur:function(o){function f(){if((this||i).hasFocus){(this||i).hasFocus=!1;var o=(this||i)._.editor.container;o&&o.removeClass("cke_focus");(this||i)._.editor.fire("blur")}}if(!(this||i)._.locked){(this||i)._.timer&&clearTimeout((this||i)._.timer);var s=CKEDITOR.focusManager._.blurDelay;o||!s?f.call(this||i):(this||i)._.timer=CKEDITOR.tools.setTimeout((function(){delete(this||i)._.timer;f.call(this||i)}),s,this||i)}},add:function(o,s){var T=o.getCustomData("focusmanager");if(!T||T!=(this||i)){T&&T.remove(o);var T="focus",_="blur";s&&(CKEDITOR.env.ie?(T="focusin",_="focusout"):CKEDITOR.event.useCapture=1);var S={blur:function(){o.equals((this||i).currentActive)&&this.blur()},focus:function(){this.focus(o)}};o.on(T,S.focus,this||i);o.on(_,S.blur,this||i);s&&(CKEDITOR.event.useCapture=0);o.setCustomData("focusmanager",this||i);o.setCustomData("focusmanager_handlers",S)}},remove:function(i){i.removeCustomData("focusmanager");var o=i.removeCustomData("focusmanager_handlers");i.removeListener("blur",o.blur);i.removeListener("focus",o.focus)}}}(),CKEDITOR.keystrokeHandler=function(o){if(o.keystrokeHandler)return o.keystrokeHandler;(this||i).keystrokes={};(this||i).blockedKeystrokes={};(this||i)._={editor:o};return this||i},function(){var o,f=function(s){s=s.data;var T=s.getKeystroke(),_=(this||i).keystrokes[T],S=(this||i)._.editor;o=!1===S.fire("key",{keyCode:T,domEvent:s});o||(_&&(o=!1!==S.execCommand(_,{from:"keystrokeHandler"})),o||(o=!!(this||i).blockedKeystrokes[T]));o&&s.preventDefault(!0);return!o},b=function(i){o&&(o=!1,i.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(o){o.on("keydown",f,this||i);CKEDITOR.env.gecko&&CKEDITOR.env.mac&&o.on("keypress",b,this||i)}}}(),function(){CKEDITOR.lang={languages:{af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(o,s,T){o&&CKEDITOR.lang.languages[o]||(o=this.detect(s,o));var _=this||i;s=function(){_[o].dir=_.rtl[o]?"rtl":"ltr";T(o,_[o])};(this||i)[o]?s():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+o+".js"),s,this||i)},detect:function(o,s){var T=(this||i).languages;s=s||navigator.userLanguage||navigator.language||o;var _=s.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),S=_[1],_=_[2];T[S+"-"+_]?S=S+"-"+_:T[S]||(S=null);CKEDITOR.lang.detect=S?function(){return S}:function(i){return i};return S||o}}}(),CKEDITOR.scriptLoader=function(){var o={},s={};return{load:function(i,T,_,S){var P="string"==typeof i;P&&(i=[i]);_||(_=CKEDITOR);var $=i.length,V=[],j=[],e=function(i){T&&(P?T.call(_,i):T.call(_,V,j))};if(0===$)e(!0);else{var n=function(i,o){(o?V:j).push(i);0>=--$&&(S&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),e(o))},q=function(i,T){o[i]=1;var _=s[i];delete s[i];for(var S=0;S<_.length;S++)_[S](i,T)},y=function(i){if(o[i])n(i,!0);else{var _=s[i]||(s[i]=[]);_.push(n);if(!(1<_.length)){var S=new CKEDITOR.dom.element("script");S.setAttributes({type:"text/javascript",src:i});T&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?S.$.onreadystatechange=function(){"loaded"!=S.$.readyState&&"complete"!=S.$.readyState||(S.$.onreadystatechange=null,q(i,!0))}:(S.$.onload=function(){setTimeout((function(){S.$.onload=null;S.$.onerror=null;q(i,!0)}),0)},S.$.onerror=function(){S.$.onload=null;S.$.onerror=null;q(i,!1)}));S.appendTo(CKEDITOR.document.getHead())}}};S&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var Y=0;Y<$;Y++)y(i[Y])}},queue:function(){function a(){var i;(i=o[0])&&this.load(i.scriptUrl,i.callback,CKEDITOR,0)}var o=[];return function(s,T){var _=this||i;o.push({scriptUrl:s,callback:function(){T&&T.apply(this||i,arguments);o.shift();a.call(_)}});1==o.length&&a.call(this||i)}}()}}(),CKEDITOR.resourceManager=function(o,s){(this||i).basePath=o;(this||i).fileName=s;(this||i).registered={};(this||i).loaded={};(this||i).externals={};(this||i)._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(o,s){if((this||i).registered[o])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+o+'" is already registered.');var T=(this||i).registered[o]=s||{};T.name=o;T.path=this.getPath(o);CKEDITOR.fire(o+CKEDITOR.tools.capitalize((this||i).fileName)+"Ready",T);return this.get(o)},get:function(o){return(this||i).registered[o]||null},getPath:function(o){var s=(this||i).externals[o];return CKEDITOR.getUrl(s&&s.dir||(this||i).basePath+o+"/")},getFilePath:function(o){var s=(this||i).externals[o];return CKEDITOR.getUrl(this.getPath(o)+(s?s.file:(this||i).fileName+".js"))},addExternal:function(o,s,T){o=o.split(",");for(var _=0;_<o.length;_++){var S=o[_];T||(s=s.replace(/[^\/]+$/,(function(i){T=i;return""})));(this||i).externals[S]={dir:s,file:T||(this||i).fileName+".js"}}},load:function(o,s,T){CKEDITOR.tools.isArray(o)||(o=o?[o]:[]);for(var _=(this||i).loaded,S=(this||i).registered,P=[],$={},V={},j=0;j<o.length;j++){var Y=o[j];if(Y)if(_[Y]||S[Y])V[Y]=this.get(Y);else{var ee=this.getFilePath(Y);P.push(ee);ee in $||($[ee]=[]);$[ee].push(Y)}}CKEDITOR.scriptLoader.load(P,(function(i,o){if(o.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+$[o[0]].join(",")+'" was not found at "'+o[0]+'".');for(var S=0;S<i.length;S++)for(var P=$[i[S]],j=0;j<P.length;j++){var Y=P[j];V[Y]=this.get(Y);_[Y]=1}s.call(T,V)}),this||i)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,(function(o){var s={};return function(T,_,S){var P={},k=function(T){o.call(this||i,T,(function(o){CKEDITOR.tools.extend(P,o);var T=[],$;for($ in o){var V=o[$],j=V&&V.requires;if(!s[$]){if(V.icons)for(var Y=V.icons.split(","),ee=Y.length;ee--;)CKEDITOR.skin.addIcon(Y[ee],V.path+"icons/"+(CKEDITOR.env.hidpi&&V.hidpi?"hidpi/":"")+Y[ee]+".png");V.isSupportedEnvironment=V.isSupportedEnvironment||function(){return!0};s[$]=1}if(j)for(j.split&&(j=j.split(",")),V=0;V<j.length;V++)P[j[V]]||T.push(j[V])}if(T.length)k.call(this||i,T);else{for($ in P)V=P[$],V.onLoad&&!V.onLoad._called&&(!1===V.onLoad()&&delete P[$],V.onLoad._called=1);_&&_.call(S||window,P)}}),this||i)};k.call(this||i,T)}})),CKEDITOR.plugins.setLang=function(i,o,s){var T=this.get(i);i=T.langEntries||(T.langEntries={});T=T.lang||(T.lang=[]);T.split&&(T=T.split(","));-1==CKEDITOR.tools.indexOf(T,o)&&T.push(o);i[o]=s},CKEDITOR.ui=function(o){if(o.ui)return o.ui;(this||i).items={};(this||i).instances={};(this||i).editor=o;(this||i)._={handlers:{}};return this||i},CKEDITOR.ui.prototype={add:function(o,s,T){T.name=o.toLowerCase();var _=(this||i).items[o]={type:s,command:T.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(_,T)},get:function(o){return(this||i).instances[o]},create:function(o){var s=(this||i).items[o],T=s&&(this||i)._.handlers[s.type],_=s&&s.command&&(this||i).editor.getCommand(s.command),T=T&&T.create.apply(this||i,s.args);(this||i).instances[o]=T;_&&_.uiItems.push(T);T&&!T.type&&(T.type=s.type);return T},addHandler:function(o,s){(this||i)._.handlers[o]=s},space:function(i){return CKEDITOR.document.getById(this.spaceId(i))},spaceId:function(o){return(this||i).editor.id+"_"+o}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function a(o,s,T){CKEDITOR.event.call(this||i);o=o&&CKEDITOR.tools.clone(o);if(void 0!==s){if(!(s instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!T)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&T==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!b(s,T))throw Error('The specified element mode is not supported on element: "'+s.getName()+'".');(this||i).element=s;(this||i).elementMode=T;(this||i).name=(this||i).elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(s.getId()||s.getNameAtt())}else(this||i).elementMode=CKEDITOR.ELEMENT_MODE_NONE;(this||i)._={};(this||i).commands={};(this||i).templates={};(this||i).name=(this||i).name||f();(this||i).id=CKEDITOR.tools.getNextId();(this||i).status="unloaded";(this||i).config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config);(this||i).ui=new CKEDITOR.ui(this||i);(this||i).focusManager=new CKEDITOR.focusManager(this||i);(this||i).keystrokeHandler=new CKEDITOR.keystrokeHandler(this||i);this.on("readOnly",c);this.on("selectionChange",(function(o){l(this||i,o.data.path)}));this.on("activeFilterChange",(function(){l(this||i,this.elementPath(),!0)}));this.on("mode",c);this.on("instanceReady",(function(){if((this||i).config.startupFocus){if("end"===(this||i).config.startupFocus){var o=this.createRange();o.selectNodeContents(this.editable());o.shrink(CKEDITOR.SHRINK_ELEMENT,!0);o.collapse();this.getSelection().selectRanges([o])}this.focus()}}));CKEDITOR.fire("instanceCreated",null,this||i);CKEDITOR.add(this||i);CKEDITOR.tools.setTimeout((function(){"destroyed"!==(this||i).status?g(this||i,o):CKEDITOR.warn("editor-incorrect-destroy")}),0,this||i)}function f(){do{var i="editor"+ ++o}while(CKEDITOR.instances[i]);return i}function b(i,o){return o==CKEDITOR.ELEMENT_MODE_INLINE?i.is(CKEDITOR.dtd.$editable)||i.is("textarea"):o==CKEDITOR.ELEMENT_MODE_REPLACE?!i.is(CKEDITOR.dtd.$nonBodyContent):1}function c(){var o=(this||i).commands,s;for(s in o)d(this||i,o[s])}function d(i,o){o[o.startDisabled||i.readOnly&&!o.readOnly?"disable":o.modes[i.mode]?"enable":"disable"]()}function l(i,o,s){if(o){var T,_,S=i.commands;for(_ in S)T=S[_],(s||T.contextSensitive)&&T.refresh(i,o)}}function k(i){var o=i.config.customConfig;if(!o)return!1;var o=CKEDITOR.getUrl(o),T=s[o]||(s[o]={});T.fn?(T.fn.call(i,i.config),CKEDITOR.getUrl(i.config.customConfig)!=o&&k(i)||i.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(o,(function(){T.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){};k(i)}));return!0}function g(i,o){i.on("customConfigLoaded",(function(){if(o){if(o.on)for(var s in o.on)i.on(s,o.on[s]);CKEDITOR.tools.extend(i.config,o,!0);delete i.config.on}s=i.config;i.readOnly=!!s.readOnly||(i.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?i.element.is("textarea")?i.element.hasAttribute("disabled")||i.element.hasAttribute("readonly"):i.element.isReadOnly():i.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(i.element.hasAttribute("disabled")||i.element.hasAttribute("readonly")));i.blockless=i.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!(i.element.is("textarea")||CKEDITOR.dtd[i.element.getName()].p);i.tabIndex=s.tabIndex||i.element&&i.element.getAttribute("tabindex")||0;i.activeEnterMode=i.enterMode=i.blockless?CKEDITOR.ENTER_BR:s.enterMode;i.activeShiftEnterMode=i.shiftEnterMode=i.blockless?CKEDITOR.ENTER_BR:s.shiftEnterMode;s.skin&&(CKEDITOR.skinName=s.skin);i.fireOnce("configLoaded");i.dataProcessor=new CKEDITOR.htmlDataProcessor(i);i.filter=i.activeFilter=new CKEDITOR.filter(i);h(i)}));o&&null!=o.customConfig&&(i.config.customConfig=o.customConfig);k(i)||i.fireOnce("customConfigLoaded")}function h(i){CKEDITOR.skin.loadPart("editor",(function(){m(i)}))}function m(i){CKEDITOR.lang.load(i.config.language,i.config.defaultLanguage,(function(o,s){var T=i.config.title;i.langCode=o;i.lang=CKEDITOR.tools.prototypedCopy(s);i.title="string"==typeof T||!1===T?T:[i.lang.editor,i.name].join(", ");i.config.contentsLangDirection||(i.config.contentsLangDirection=i.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?i.element.getDirection(1):i.lang.dir);i.fire("langLoaded");e(i)}))}function e(i){i.getStylesSet((function(o){i.once("loaded",(function(){i.fire("stylesSet",{styles:o})}),null,null,1);n(i)}))}function n(i){function b(i){if(!i)return"";CKEDITOR.tools.isArray(i)&&(i=i.join(","));return i.replace(/\s/g,"")}var o=i.config,s=b(o.plugins),T=b(o.extraPlugins),_=b(o.removePlugins);if(T)var S=new RegExp("(?:^|,)(?:"+T.replace(/,/g,"|")+")(?=,|$)","g"),s=s.replace(S,""),s=s+","+T;if(_)var P=new RegExp("(?:^|,)(?:"+_.replace(/,/g,"|")+")(?=,|$)","g"),s=s.replace(P,"");CKEDITOR.env.air&&(s+=",adobeair");CKEDITOR.plugins.load(s.split(","),(function(s){var T=[],_=[],S=[];i.plugins=CKEDITOR.tools.extend({},i.plugins,s);for(var $ in s){var V=s[$],j=V.lang,Y=null,ee=V.requires,te;CKEDITOR.tools.isArray(ee)&&(ee=ee.join(","));if(ee&&(te=ee.match(P)))for(;ee=te.pop();)CKEDITOR.error("editor-plugin-required",{plugin:ee.replace(",",""),requiredBy:$});j&&!i.lang[$]&&(j.split&&(j=j.split(",")),0<=CKEDITOR.tools.indexOf(j,i.langCode)?Y=i.langCode:(Y=i.langCode.replace(/-.*/,""),Y=Y!=i.langCode&&0<=CKEDITOR.tools.indexOf(j,Y)?Y:0<=CKEDITOR.tools.indexOf(j,"en")?"en":j[0]),V.langEntries&&V.langEntries[Y]?(i.lang[$]=V.langEntries[Y],Y=null):S.push(CKEDITOR.getUrl(V.path+"lang/"+Y+".js")));_.push(Y);T.push(V)}CKEDITOR.scriptLoader.load(S,(function(){for(var s=["beforeInit","init","afterInit"],S=0;S<s.length;S++)for(var P=0;P<T.length;P++){var $=T[P];0===S&&_[P]&&$.lang&&$.langEntries&&(i.lang[$.name]=$.langEntries[_[P]]);$[s[S]]&&$[s[S]](i)}i.fireOnce("pluginsLoaded");o.keystrokes&&i.setKeystroke(i.config.keystrokes);for(P=0;P<i.config.blockedKeystrokes.length;P++)i.keystrokeHandler.blockedKeystrokes[i.config.blockedKeystrokes[P]]=1;i.status="loaded";i.fireOnce("loaded");CKEDITOR.fire("instanceLoaded",null,i)}))}))}function q(){var o=(this||i).element;if(o&&(this||i).elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var s=this.getData();(this||i).config.htmlEncodeOutput&&(s=CKEDITOR.tools.htmlEncode(s));o.is("textarea")?o.setValue(s):o.setHtml(s);return!0}return!1}function y(i,o){function c(i){var o=i.startContainer,s=i.endContainer;return!(!o.is||!(o.is("tr")||o.is("td")&&o.equals(s)&&i.endOffset===o.getChildCount()))}function e(i){var o=i.startContainer;return o.is("tr")?i.cloneContents():o.clone(!0)}for(var s=new CKEDITOR.dom.documentFragment,T,_,S,P=0;P<i.length;P++){var $=i[P],V=$.startContainer.getAscendant("tr",!0);c($)?(T||(T=V.getAscendant("table").clone(),T.append(V.getAscendant({thead:1,tbody:1,tfoot:1}).clone()),s.append(T),T=T.findOne("thead, tbody, tfoot")),_&&_.equals(V)||(_=V,S=V.clone(),T.append(S)),S.append(e($))):s.append($.cloneContents())}return T?s:o.getHtmlFromRange(i[0])}a.prototype=CKEDITOR.editor.prototype;CKEDITOR.editor=a;var o=0,s={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{plugins:{detectConflict:function(o,s){for(var T=0;T<s.length;T++){var _=s[T];if((this||i)[_])return CKEDITOR.warn("editor-plugin-conflict",{plugin:o,replacedWith:_}),!0}return!1}},addCommand:function(o,s){s.name=o.toLowerCase();var T=s instanceof CKEDITOR.command?s:new CKEDITOR.command(this||i,s);(this||i).mode&&d(this||i,T);return(this||i).commands[o]=T},_attachToForm:function(){function a(i){o.updateElement();o._.required&&!s.getValue()&&!1===o.fire("required")&&i.data.preventDefault()}function b(i){return!!(i&&i.call&&i.apply)}var o=this||i,s=o.element,T=new CKEDITOR.dom.element(s.$.form);s.is("textarea")&&T&&(T.on("submit",a),b(T.$.submit)&&(T.$.submit=CKEDITOR.tools.override(T.$.submit,(function(o){return function(){a();o.apply?o.apply(this||i):o()}}))),o.on("destroy",(function(){T.removeListener("submit",a)})))},destroy:function(o){var s=CKEDITOR.filter.instances,T=this||i;this.fire("beforeDestroy");!o&&q.call(this||i);this.editable(null);(this||i).filter&&delete(this||i).filter;CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(s),(function(i){i=s[i];T===i.editor&&i.destroy()}));delete(this||i).activeFilter;(this||i).status="destroyed";this.fire("destroy");this.removeAllListeners();CKEDITOR.remove(this||i);CKEDITOR.fire("instanceDestroyed",null,this||i)},elementPath:function(i){if(!i){i=this.getSelection();if(!i)return null;i=i.getStartElement()}return i?new CKEDITOR.dom.elementPath(i,this.editable()):null},createRange:function(){var i=this.editable();return i?new CKEDITOR.dom.range(i):null},execCommand:function(i,o){var s=this.getCommand(i),T={name:i,commandData:o||{},command:s};return!(!s||s.state==CKEDITOR.TRISTATE_DISABLED||!1===this.fire("beforeCommandExec",T)||(T.returnValue=s.exec(T.commandData),s.async||!1===this.fire("afterCommandExec",T)))&&T.returnValue},getCommand:function(o){return(this||i).commands[o]},getData:function(o){!o&&this.fire("beforeGetData");var s=(this||i)._.data;"string"!=typeof s&&(s=(s=(this||i).element)&&(this||i).elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?s.is("textarea")?s.getValue():s.getHtml():"");s={dataValue:s};!o&&this.fire("getData",s);return s.dataValue},getSnapshot:function(){var o=this.fire("getSnapshot");"string"!=typeof o&&(o=(o=(this||i).element)&&(this||i).elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?o.is("textarea")?o.getValue():o.getHtml():"");return o},loadSnapshot:function(i){this.fire("loadSnapshot",i)},setData:function(o,s,T){var _=!0,S=s;s&&"object"==typeof s&&(T=s.internal,S=s.callback,_=!s.noSnapshot);!T&&_&&this.fire("saveSnapshot");!S&&T||this.once("dataReady",(function(i){!T&&_&&this.fire("saveSnapshot");S&&S.call(i.editor)}));o={dataValue:o};!T&&this.fire("setData",o);(this||i)._.data=o.dataValue;!T&&this.fire("afterSetData",o)},setReadOnly:function(o){o=null==o||o;(this||i).readOnly!=o&&((this||i).readOnly=o,(this||i).keystrokeHandler.blockedKeystrokes[8]=+o,this.editable().setReadOnly(o),this.fire("readOnly"))},insertHtml:function(i,o,s){this.fire("insertHtml",{dataValue:i,mode:o,range:s})},insertText:function(i){this.fire("insertText",i)},insertElement:function(i){this.fire("insertElement",i)},getSelectedHtml:function(i){var o=this.editable(),s=this.getSelection(),s=s&&s.getRanges();if(!o||!s||0===s.length)return null;o=y(s,o);return i?o.getHtml():o},extractSelectedHtml:function(i,o){var s=this.editable(),T=this.getSelection().getRanges(),_=new CKEDITOR.dom.documentFragment,S;if(!s||0===T.length)return null;for(S=0;S<T.length;S++)_.append(s.extractHtmlFromRange(T[S],o));o||this.getSelection().selectRanges([T[0]]);return i?_.getHtml():_},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==(this||i).status&&(this||i)._.previousValue!==this.getSnapshot()},resetDirty:function(){(this||i)._.previousValue=this.getSnapshot()},updateElement:function(){return q.call(this||i)},setKeystroke:function(){for(var o=(this||i).keystrokeHandler.keystrokes,s=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],T,_,S=s.length;S--;)T=s[S],_=0,CKEDITOR.tools.isArray(T)&&(_=T[1],T=T[0]),_?o[T]=_:delete o[T]},getCommandKeystroke:function(o,s){var T="string"===typeof o?this.getCommand(o):o,_=[];if(T){var S=CKEDITOR.tools.object.findKey((this||i).commands,T),P=(this||i).keystrokeHandler.keystrokes;if(T.fakeKeystroke)_.push(T.fakeKeystroke);else for(var $ in P)P[$]===S&&_.push($)}return s?_:_[0]||null},addFeature:function(o){return(this||i).filter.addFeature(o)},setActiveFilter:function(o){o||(o=(this||i).filter);(this||i).activeFilter!==o&&((this||i).activeFilter=o,this.fire("activeFilterChange"),o===(this||i).filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(o.getAllowedEnterMode((this||i).enterMode),o.getAllowedEnterMode((this||i).shiftEnterMode,!0)))},setActiveEnterMode:function(o,s){o=o?(this||i).blockless?CKEDITOR.ENTER_BR:o:(this||i).enterMode;s=s?(this||i).blockless?CKEDITOR.ENTER_BR:s:(this||i).shiftEnterMode;(this||i).activeEnterMode==o&&(this||i).activeShiftEnterMode==s||((this||i).activeEnterMode=o,(this||i).activeShiftEnterMode=s,this.fire("activeEnterModeChange"))},showNotification:function(i){alert(i)}});CKEDITOR.editor._getEditorElement=function(i){if(!CKEDITOR.env.isCompatible)return null;var o=CKEDITOR.dom.element.get(i);return o?o.getEditor()?(CKEDITOR.error("editor-element-conflict",{editorName:o.getEditor().name}),null):o:(CKEDITOR.error("editor-incorrect-element",{element:i}),null)}}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){(this||i)._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var o=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,s={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(T){for(var _,S,P=0,$;_=(this||i)._.htmlPartsRegex.exec(T);){S=_.index;S>P&&(P=T.substring(P,S),$?$.push(P):this.onText(P));P=(this||i)._.htmlPartsRegex.lastIndex;if(!(S=_[1])||(S=S.toLowerCase(),$&&CKEDITOR.dtd.$cdata[S]&&(this.onCDATA($.join("")),$=null),$))if($)$.push(_[0]);else if(S=_[3]){if(S=S.toLowerCase(),!/="/.test(S)){var V={},j,Y=_[4];_=!!_[5];if(Y)for(;j=o.exec(Y);){var ee=j[1].toLowerCase();j=j[2]||j[3]||j[4]||"";V[ee]=!j&&s[ee]?ee:CKEDITOR.tools.htmlDecodeAttr(j)}this.onTagOpen(S,V,_);!$&&CKEDITOR.dtd.$cdata[S]&&($=[])}}else(S=_[2])&&this.onComment(S);else this.onTagClose(S)}T.length>P&&this.onText(T.substring(P,T.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){(this||i)._={output:[]}},proto:{openTag:function(o){(this||i)._.output.push("<",o)},openTagClose:function(o,s){s?(this||i)._.output.push(" />"):(this||i)._.output.push(">")},attribute:function(o,s){"string"==typeof s&&(s=CKEDITOR.tools.htmlEncodeAttr(s));(this||i)._.output.push(" ",o,'="',s,'"')},closeTag:function(o){(this||i)._.output.push("</",o,">")},text:function(o){(this||i)._.output.push(o)},comment:function(o){(this||i)._.output.push("\x3c!--",o,"--\x3e")},write:function(o){(this||i)._.output.push(o)},reset:function(){(this||i)._.output=[];(this||i)._.indent=!1},getHtml:function(o){var s=(this||i)._.output.join("");o&&this.reset();return s}}}),"use strict",function(){CKEDITOR.htmlParser.node=function(){};CKEDITOR.htmlParser.node.prototype={remove:function(){var o=(this||i).parent.children,s=CKEDITOR.tools.indexOf(o,this||i),T=(this||i).previous,_=(this||i).next;T&&(T.next=_);_&&(_.previous=T);o.splice(s,1);(this||i).parent=null},replaceWith:function(o){var s=(this||i).parent.children,T=CKEDITOR.tools.indexOf(s,this||i),_=o.previous=(this||i).previous,S=o.next=(this||i).next;_&&(_.next=o);S&&(S.previous=o);s[T]=o;o.parent=(this||i).parent;(this||i).parent=null},insertAfter:function(o){var s=o.parent.children,T=CKEDITOR.tools.indexOf(s,o),_=o.next;s.splice(T+1,0,this||i);(this||i).next=o.next;(this||i).previous=o;o.next=this||i;_&&(_.previous=this||i);(this||i).parent=o.parent},insertBefore:function(o){var s=o.parent.children,T=CKEDITOR.tools.indexOf(s,o);s.splice(T,0,this||i);(this||i).next=o;((this||i).previous=o.previous)&&(o.previous.next=this||i);o.previous=this||i;(this||i).parent=o.parent},getAscendant:function(o){var s="function"==typeof o?o:"string"==typeof o?function(i){return i.name==o}:function(i){return i.name in o},T=(this||i).parent;for(;T&&T.type==CKEDITOR.NODE_ELEMENT;){if(s(T))return T;T=T.parent}return null},wrapWith:function(o){this.replaceWith(o);o.add(this||i);return o},getIndex:function(){return CKEDITOR.tools.indexOf((this||i).parent.children,this||i)},getFilterContext:function(i){return i||{}}}}(),"use strict",CKEDITOR.htmlParser.comment=function(o){(this||i).value=o;(this||i)._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(o,s){var T=(this||i).value;if(!(T=o.onComment(s,T,this||i)))return this.remove(),!1;if("string"!=typeof T)return this.replaceWith(T),!1;(this||i).value=T;return!0},writeHtml:function(o,s){s&&this.filter(s);o.comment((this||i).value)}}),"use strict",function(){CKEDITOR.htmlParser.text=function(o){(this||i).value=o;(this||i)._={isBlockLike:!1}};CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(o,s){if(!((this||i).value=o.onText(s,(this||i).value,this||i)))return this.remove(),!1},writeHtml:function(o,s){s&&this.filter(s);o.text((this||i).value)}})}(),"use strict",function(){CKEDITOR.htmlParser.cdata=function(o){(this||i).value=o};CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(o){o.write((this||i).value)}})}(),"use strict",CKEDITOR.htmlParser.fragment=function(){(this||i).children=[];(this||i).parent=null;(this||i)._={isBlockLike:!0,hasInlineStarted:!1}},function(){function a(i){return!i.attributes["data-cke-survive"]&&("a"==i.name&&i.attributes.href||CKEDITOR.dtd.$removeEmpty[i.name])}var o=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),s={ol:1,ul:1},T=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),_={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(i,S,P){function h(i){var o;if(0<j.length)for(var s=0;s<j.length;s++){var T=j[s],_=T.name,S=CKEDITOR.dtd[_],P=ee.name&&CKEDITOR.dtd[ee.name];P&&!P[_]||i&&S&&!S[i]&&CKEDITOR.dtd[i]?_==ee.name&&(n(ee,ee.parent,1),s--):(o||(m(),o=1),T=T.clone(),T.parent=ee,ee=T,j.splice(s,1),s--)}}function m(){for(;Y.length;)n(Y.shift(),ee)}function e(i){if(i._.isBlockLike&&"pre"!=i.name&&"textarea"!=i.name){var o=i.children.length,s=i.children[o-1],T;s&&s.type==CKEDITOR.NODE_TEXT&&((T=CKEDITOR.tools.rtrim(s.value))?s.value=T:i.children.length=o-1)}}function n(i,o,s){o=o||ee||V;var T=ee;void 0===i.previous&&(q(o,i)&&(ee=o,$.onTagOpen(P,{}),i.returnPoint=o=ee),e(i),a(i)&&!i.children.length||o.add(i),"pre"==i.name&&(ne=!1),"textarea"==i.name&&(te=!1));i.returnPoint?(ee=i.returnPoint,delete i.returnPoint):ee=s?o:T}function q(i,o){if((i==V||"body"==i.name)&&P&&(!i.name||CKEDITOR.dtd[i.name][P])){var s,T;return(s=o.attributes&&(T=o.attributes["data-cke-real-element-type"])?T:o.name)&&s in CKEDITOR.dtd.$inline&&!(s in CKEDITOR.dtd.head)&&!o.isOrphan||o.type==CKEDITOR.NODE_TEXT}}function y(i,o){return(i in CKEDITOR.dtd.$listItem||i in CKEDITOR.dtd.$tableContent)&&(i==o||"dt"==i&&"dd"==o||"dd"==i&&"dt"==o)}var $=new CKEDITOR.htmlParser,V=S instanceof CKEDITOR.htmlParser.element?S:"string"==typeof S?new CKEDITOR.htmlParser.element(S):new CKEDITOR.htmlParser.fragment,j=[],Y=[],ee=V,te="textarea"==V.name,ne="pre"==V.name;$.onTagOpen=function(i,_,S,P){_=new CKEDITOR.htmlParser.element(i,_);_.isUnknown&&S&&(_.isEmpty=!0);_.isOptionalClose=P;if(a(_))j.push(_);else{if("pre"==i)ne=!0;else{if("br"==i&&ne){ee.add(new CKEDITOR.htmlParser.text("\n"));return}"textarea"==i&&(te=!0)}if("br"==i)Y.push(_);else{for(;!(P=(S=ee.name)?CKEDITOR.dtd[S]||(ee._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):T,_.isUnknown||ee.isUnknown||P[i]);)if(ee.isOptionalClose)$.onTagClose(S);else if(i in s&&S in s)S=ee.children,(S=S[S.length-1])&&"li"==S.name||n(S=new CKEDITOR.htmlParser.element("li"),ee),!_.returnPoint&&(_.returnPoint=ee),ee=S;else if(i in CKEDITOR.dtd.$listItem&&!y(i,S))$.onTagOpen("li"==i?"ul":"dl",{},0,1);else if(S in o&&!y(i,S))!_.returnPoint&&(_.returnPoint=ee),ee=ee.parent;else{if(S in CKEDITOR.dtd.$inline&&j.unshift(ee),!ee.parent){_.isOrphan=1;break}n(ee,ee.parent,1)}h(i);m();_.parent=ee;_.isEmpty?n(_):ee=_}}};$.onTagClose=function(i){for(var o=j.length-1;0<=o;o--)if(i==j[o].name){j.splice(o,1);return}for(var s=[],T=[],_=ee;_!=V&&_.name!=i;)_._.isBlockLike||T.unshift(_),s.push(_),_=_.returnPoint||_.parent;if(_!=V){for(o=0;o<s.length;o++){var S=s[o];n(S,S.parent)}ee=_;_._.isBlockLike&&m();n(_,_.parent);_==ee&&(ee=ee.parent);j=j.concat(T)}"body"==i&&(P=!1)};$.onText=function(i){if(ee._.hasInlineStarted&&!Y.length||ne||te||(i=CKEDITOR.tools.ltrim(i),0!==i.length)){var s=ee.name,S=s?CKEDITOR.dtd[s]||(ee._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):T;if(te||S["#"]||!(s in o)){m();h();ne||te||(i=i.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," "));i=new CKEDITOR.htmlParser.text(i);q(ee,i)&&this.onTagOpen(P,{},0,1);ee.add(i)}else $.onTagOpen(_[s]||""),$.onText(i)}};$.onCDATA=function(i){ee.add(new CKEDITOR.htmlParser.cdata(i))};$.onComment=function(i){m();h();ee.add(new CKEDITOR.htmlParser.comment(i))};$.parse(i);for(m();ee!=V;)n(ee,ee.parent,1);e(V);return V};CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(o,s){isNaN(s)&&(s=(this||i).children.length);var T=0<s?(this||i).children[s-1]:null;if(T){if(o._.isBlockLike&&T.type==CKEDITOR.NODE_TEXT&&(T.value=CKEDITOR.tools.rtrim(T.value),0===T.value.length)){(this||i).children.pop();this.add(o);return}T.next=o}o.previous=T;o.parent=this||i;(this||i).children.splice(s,0,o);(this||i)._.hasInlineStarted||((this||i)._.hasInlineStarted=o.type==CKEDITOR.NODE_TEXT||o.type==CKEDITOR.NODE_ELEMENT&&!o._.isBlockLike)},filter:function(o,s){s=this.getFilterContext(s);o.onRoot(s,this||i);this.filterChildren(o,!1,s)},filterChildren:function(o,s,T){if((this||i).childrenFilteredBy!=o.id){T=this.getFilterContext(T);s&&!(this||i).parent&&o.onRoot(T,this||i);(this||i).childrenFilteredBy=o.id;for(s=0;s<(this||i).children.length;s++)!1===(this||i).children[s].filter(o,T)&&s--}},writeHtml:function(i,o){o&&this.filter(o);this.writeChildrenHtml(i)},writeChildrenHtml:function(o,s,T){var _=this.getFilterContext();T&&!(this||i).parent&&s&&s.onRoot(_,this||i);s&&this.filterChildren(s,!1,_);s=0;T=(this||i).children;for(_=T.length;s<_;s++)T[s].writeHtml(o)},forEach:function(o,s,T){if(!(T||s&&(this||i).type!=s))var _=o(this||i);if(!1!==_){T=(this||i).children;for(var S=0;S<T.length;S++)_=T[S],_.type==CKEDITOR.NODE_ELEMENT?_.forEach(o,s):s&&_.type!=s||o(_)}},getFilterContext:function(i){return i||{}}}}(),"use strict",function(){function a(){(this||i).rules=[]}function f(i,o,s,T){var _,S;for(_ in o)(S=i[_])||(S=i[_]=new a),S.add(o[_],s,T)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(o){(this||i).id=CKEDITOR.tools.getNextNumber();(this||i).elementNameRules=new a;(this||i).attributeNameRules=new a;(this||i).elementsRules={};(this||i).attributesRules={};(this||i).textRules=new a;(this||i).commentRules=new a;(this||i).rootRules=new a;o&&this.addRules(o,10)},proto:{addRules:function(o,s){var T;"number"==typeof s?T=s:s&&"priority"in s&&(T=s.priority);"number"!=typeof T&&(T=10);"object"!=typeof s&&(s={});o.elementNames&&(this||i).elementNameRules.addMany(o.elementNames,T,s);o.attributeNames&&(this||i).attributeNameRules.addMany(o.attributeNames,T,s);o.elements&&f((this||i).elementsRules,o.elements,T,s);o.attributes&&f((this||i).attributesRules,o.attributes,T,s);o.text&&(this||i).textRules.add(o.text,T,s);o.comment&&(this||i).commentRules.add(o.comment,T,s);o.root&&(this||i).rootRules.add(o.root,T,s)},applyTo:function(o){o.filter(this||i)},onElementName:function(o,s){return(this||i).elementNameRules.execOnName(o,s)},onAttributeName:function(o,s){return(this||i).attributeNameRules.execOnName(o,s)},onText:function(o,s,T){return(this||i).textRules.exec(o,s,T)},onComment:function(o,s,T){return(this||i).commentRules.exec(o,s,T)},onRoot:function(o,s){return(this||i).rootRules.exec(o,s)},onElement:function(o,s){for(var T=[(this||i).elementsRules["^"],(this||i).elementsRules[s.name],(this||i).elementsRules.$],_,S=0;3>S;S++)if(_=T[S]){_=_.exec(o,s,this||i);if(!1===_)return null;if(_&&_!=s)return this.onNode(o,_);if(s.parent&&!s.name)break}return s},onNode:function(i,o){var s=o.type;return s==CKEDITOR.NODE_ELEMENT?this.onElement(i,o):s==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(i,o.value)):s==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(i,o.value)):null},onAttribute:function(o,s,T,_){return(T=(this||i).attributesRules[T])?T.exec(o,_,s,this||i):_}}});CKEDITOR.htmlParser.filterRulesGroup=a;a.prototype={add:function(o,s,T){(this||i).rules.splice(this.findIndex(s),0,{value:o,priority:s,options:T})},addMany:function(o,s,T){for(var _=[this.findIndex(s),0],S=0,P=o.length;S<P;S++)_.push({value:o[S],priority:s,options:T});(this||i).rules.splice.apply((this||i).rules,_)},findIndex:function(o){for(var s=(this||i).rules,T=s.length-1;0<=T&&o<s[T].priority;)T--;return T+1},exec:function(o,s){var T=s instanceof CKEDITOR.htmlParser.node||s instanceof CKEDITOR.htmlParser.fragment,_=Array.prototype.slice.call(arguments,1),S=(this||i).rules,P=S.length,$,V,j,Y;for(Y=0;Y<P;Y++)if(T&&($=s.type,V=s.name),j=S[Y],!(o.nonEditable&&!j.options.applyToAll||o.nestedEditable&&j.options.excludeNestedEditable)){j=j.value.apply(null,_);if(!1===j||T&&j&&(j.name!=V||j.type!=$))return j;null!=j&&(_[0]=s=j)}return s},execOnName:function(o,s){for(var T=0,_=(this||i).rules,S=_.length,P;s&&T<S;T++)P=_[T],o.nonEditable&&!P.options.applyToAll||o.nestedEditable&&P.options.excludeNestedEditable||(s=s.replace(P.value[0],P.value[1]));return s}}}(),function(){function a(i,s){function g(i){return i||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function h(i,o){return function(s){if(s.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var T=[],_=b(s),S,$;if(_)for(f(_,1)&&T.push(_);_;)l(_)&&(S=c(_))&&f(S)&&(($=c(S))&&!l($)?T.push(S):(g(P).insertAfter(S),S.remove())),_=_.previous;for(_=0;_<T.length;_++)T[_].remove();(T=!i||!1!==("function"==typeof o?o(s):o))&&((P||CKEDITOR.env.needsBrFiller||s.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(P||CKEDITOR.env.needsBrFiller||!(7<document.documentMode||s.name in CKEDITOR.dtd.tr||s.name in CKEDITOR.dtd.$listItem))?(T=b(s),T=!T||"form"==s.name&&"input"==T.name):T=!1);T&&s.add(g(i))}}}function f(i,s){return!(P&&!CKEDITOR.env.needsBrFiller||i.type!=CKEDITOR.NODE_ELEMENT||"br"!=i.name||i.attributes["data-cke-eol"])||!!(i.type==CKEDITOR.NODE_TEXT&&(T=i.value.match(o))&&(T.index&&(new CKEDITOR.htmlParser.text(i.value.substring(0,T.index)).insertBefore(i),i.value=T[0]),!CKEDITOR.env.needsBrFiller&&P&&(!s||i.parent.name in $)||!P&&((T=i.previous)&&"br"==T.name||!T||l(T))));var T}var _={elements:{}},P="html"==s,$=CKEDITOR.tools.extend({},S),V;for(V in $)"#"in T[V]||delete $[V];for(V in $)_.elements[V]=h(P,i.config.fillEmptyBlocks);_.root=h(P,!1);_.elements.br=function(i){return function(o){if(o.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var s=o.attributes;if("data-cke-bogus"in s||"data-cke-eol"in s)delete s["data-cke-bogus"];else{for(s=o.next;s&&d(s);)s=s.next;var T=c(o);!s&&l(o.parent)?k(o.parent,g(i)):l(s)&&T&&!l(T)&&g(i).insertBefore(s)}}}}(P);return _}function f(i,o){return i!=CKEDITOR.ENTER_BR&&!1!==o&&(i==CKEDITOR.ENTER_DIV?"div":"p")}function b(i){for(i=i.children[i.children.length-1];i&&d(i);)i=i.previous;return i}function c(i){for(i=i.previous;i&&d(i);)i=i.previous;return i}function d(i){return i.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(i.value)||i.type==CKEDITOR.NODE_ELEMENT&&i.attributes["data-cke-bookmark"]}function l(i){return i&&(i.type==CKEDITOR.NODE_ELEMENT&&i.name in S||i.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function k(i,o){var s=i.children[i.children.length-1];i.children.push(o);o.parent=i;s&&(s.next=o,o.previous=s)}function g(i){i=i.attributes;"false"!=i.contenteditable&&(i["data-cke-editable"]=i.contenteditable?"true":1);i.contenteditable="false"}function h(i){i=i.attributes;switch(i["data-cke-editable"]){case"true":i.contenteditable="true";break;case"1":delete i.contenteditable}}function m(i){return i.replace(Y,(function(i,o,s){return"<"+o+s.replace(ee,(function(i,o){return te.test(o)&&-1==s.indexOf("data-cke-saved-"+o)?" data-cke-saved-"+i+" data-cke-"+CKEDITOR.rnd+"-"+i:i}))+">"}))}function e(i,o){return i.replace(o,(function(i,o,s){0===i.indexOf("<textarea")&&(i=o+p(s).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>");return"<cke:encoded>"+encodeURIComponent(i)+"</cke:encoded>"}))}function n(i){return i.replace(oe,(function(i,o){return decodeURIComponent(o)}))}function q(i){return i.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,(function(i){return"\x3c!--"+s+"{C}"+encodeURIComponent(i).replace(/--/g,"%2D%2D")+"--\x3e"}))}function y(i){return CKEDITOR.tools.array.reduce(i.split(""),(function(i,o){var s=o.toLowerCase(),T=o.toUpperCase(),_=u(s);s!==T&&(_+="|"+u(T));return i+"("+_+")"}),"")}function u(i){var o;o=i.charCodeAt(0);var s=o.toString(16);o={htmlCode:"&#"+o+";?",hex:"&#x0*"+s+";?",entity:{"<":"&lt;",">":"&gt;",":":"&colon;"}[i]};for(var T in o)o[T]&&(i+="|"+o[T]);return i}function p(i){return i.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,(function(i,o){return decodeURIComponent(o)}))}function v(i,o){var s=o._.dataStore;return i.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,(function(i,o){return decodeURIComponent(o)})).replace(/\{cke_protected_(\d+)\}/g,(function(i,o){return s&&s[o]||""}))}function w(i,o){var T=[],_=o.config.protectedSource,S=o._.dataStore||(o._.dataStore={id:1}),P=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g,_=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(_);i=i.replace(/\x3c!--[\s\S]*?--\x3e/g,(function(i){return"\x3c!--{cke_tempcomment}"+(T.push(i)-1)+"--\x3e"}));for(var $=0;$<_.length;$++)i=i.replace(_[$],(function(i){i=i.replace(P,(function(i,o,s){return T[s]}));return/cke_temp(comment)?/.test(i)?i:"\x3c!--{cke_temp}"+(T.push(i)-1)+"--\x3e"}));i=i.replace(P,(function(i,o,_){return"\x3c!--"+s+(o?"{C}":"")+encodeURIComponent(T[_]).replace(/--/g,"%2D%2D")+"--\x3e"}));i=i.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,(function(i){return i.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,(function(i,o){S[S.id]=decodeURIComponent(o);return"{cke_protected_"+S.id+++"}"}))}));return i=i.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,(function(i,s,T,_){return"<"+s+T+">"+v(p(_),o)+"</"+s+">"}))}CKEDITOR.htmlDataProcessor=function(o){var s,T,_=this||i;(this||i).editor=o;(this||i).dataFilter=s=new CKEDITOR.htmlParser.filter;(this||i).htmlFilter=T=new CKEDITOR.htmlParser.filter;(this||i).writer=new CKEDITOR.htmlParser.basicWriter;s.addRules(P);s.addRules($,{applyToAll:!0});s.addRules(a(o,"data"),{applyToAll:!0});T.addRules(V);T.addRules(j,{applyToAll:!0});T.addRules(a(o,"html"),{applyToAll:!0});o.on("toHtml",(function(i){i=i.data;var s=i.dataValue,T,s=s.replace(ae,""),s=w(s,o),s=e(s,ie),s=m(s),s=e(s,ne),s=s.replace(re,"$1cke:$2"),s=s.replace(le,"<cke:$1$2></cke:$1>"),s=s.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),s=s.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");T=i.context||o.editable().getName();var _;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==T&&(T="div",s="<pre>"+s+"</pre>",_=1);T=o.document.createElement(T);T.setHtml("a"+s);s=T.getHtml().substr(1);s=s.replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),"");_&&(s=s.replace(/^<pre>|<\/pre>$/gi,""));s=s.replace(se,"$1$2");s=n(s);s=p(s);T=!1!==i.fixForBody&&f(i.enterMode,o.config.autoParagraph);s=CKEDITOR.htmlParser.fragment.fromHtml(s,i.context,T);T&&(_=s,!_.children.length&&CKEDITOR.dtd[_.name][T]&&(T=new CKEDITOR.htmlParser.element(T),_.add(T)));i.dataValue=s}),null,null,5);o.on("toHtml",(function(i){i.data.filter.applyTo(i.data.dataValue,!0,i.data.dontFilter,i.data.enterMode)&&o.fire("dataFiltered")}),null,null,6);o.on("toHtml",(function(i){i.data.dataValue.filterChildren(_.dataFilter,!0)}),null,null,10);o.on("toHtml",(function(i){i=i.data;var o=i.dataValue,s=new CKEDITOR.htmlParser.basicWriter;o.writeChildrenHtml(s);o=s.getHtml(!0);i.dataValue=q(o)}),null,null,15);o.on("toDataFormat",(function(i){var s=i.data.dataValue;i.data.enterMode!=CKEDITOR.ENTER_BR&&(s=s.replace(/^<br *\/?>/i,""));i.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(s,i.data.context,f(i.data.enterMode,o.config.autoParagraph))}),null,null,5);o.on("toDataFormat",(function(i){i.data.dataValue.filterChildren(_.htmlFilter,!0)}),null,null,10);o.on("toDataFormat",(function(i){i.data.filter.applyTo(i.data.dataValue,!1,!0)}),null,null,11);o.on("toDataFormat",(function(i){var s=i.data.dataValue,T=_.writer;T.reset();s.writeChildrenHtml(T);s=T.getHtml(!0);s=p(s);s=v(s,o);i.data.dataValue=s}),null,null,15)};CKEDITOR.htmlDataProcessor.prototype={toHtml:function(o,s,T,_){var S=(this||i).editor,P,$,V,j;s&&"object"==typeof s?(P=s.context,T=s.fixForBody,_=s.dontFilter,$=s.filter,V=s.enterMode,j=s.protectedWhitespaces):P=s;P||null===P||(P=S.editable().getName());return S.fire("toHtml",{dataValue:o,context:P,fixForBody:T,dontFilter:_,filter:$||S.filter,enterMode:V||S.enterMode,protectedWhitespaces:j}).dataValue},toDataFormat:function(o,s){var T,_,S;s&&(T=s.context,_=s.filter,S=s.enterMode);T||null===T||(T=(this||i).editor.editable().getName());return(this||i).editor.fire("toDataFormat",{dataValue:o,filter:_||(this||i).editor.filter,context:T,enterMode:S||(this||i).editor.enterMode}).dataValue}};var o=/(?:&nbsp;|\xa0)$/,s="{cke_protected}",T=CKEDITOR.dtd,_="caption colgroup col thead tfoot tbody".split(" "),S=CKEDITOR.tools.extend({},T.$blockLimit,T.$block),P={elements:{input:g,textarea:g}},$={attributeNames:[[/^on/,"data-cke-pa-on"],[/^srcdoc/,"data-cke-pa-srcdoc"],[/^data-cke-expando$/,""]],elements:{iframe:function(i){if(i.attributes&&i.attributes.src){var o=i.attributes.src.toLowerCase().replace(/[^a-z]/gi,"");0!==o.indexOf("javascript")&&0!==o.indexOf("data")||(i.attributes["data-cke-pa-src"]=i.attributes.src,delete i.attributes.src)}}}},V={elements:{embed:function(i){var o=i.parent;if(o&&"object"==o.name){var s=o.attributes.width,o=o.attributes.height;s&&(i.attributes.width=s);o&&(i.attributes.height=o)}},a:function(i){var o=i.attributes;if(!(i.children.length||o.name||o.id||i.attributes["data-cke-saved-name"]))return!1}}},j={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(i){var o=i.attributes;if(o){if(o["data-cke-temp"])return!1;for(var s=["name","href","src"],T,_=0;_<s.length;_++)T="data-cke-saved-"+s[_],T in o&&delete o[s[_]]}return i},table:function(i){i.children.slice(0).sort((function(i,o){var s,T;i.type==CKEDITOR.NODE_ELEMENT&&o.type==i.type&&(s=CKEDITOR.tools.indexOf(_,i.name),T=CKEDITOR.tools.indexOf(_,o.name));-1<s&&-1<T&&s!=T||(s=i.parent?i.getIndex():-1,T=o.parent?o.getIndex():-1);return s>T?1:-1}))},param:function(i){i.children=[];i.isEmpty=!0;return i},span:function(i){"Apple-style-span"==i.attributes["class"]&&delete i.name},html:function(i){delete i.attributes.contenteditable;delete i.attributes["class"]},body:function(i){delete i.attributes.spellcheck;delete i.attributes.contenteditable},style:function(i){var o=i.children[0];o&&o.value&&(o.value=CKEDITOR.tools.trim(o.value));i.attributes.type||(i.attributes.type="text/css")},title:function(i){var o=i.children[0];!o&&k(i,o=new CKEDITOR.htmlParser.text);o.value=i.attributes["data-cke-title"]||""},input:h,textarea:h},attributes:{class:function(i){return CKEDITOR.tools.ltrim(i.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(j.attributes.style=function(i){return i.replace(/(^|;)([^\:]+)/g,(function(i){return i.toLowerCase()}))});var Y=/<(a|area|img|input|source)\b([^>]*)>/gi,ee=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,te=/^(href|src|name)$/i,ne=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,ie=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,oe=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,ae=new RegExp("("+y("<cke:encoded>")+"(.*?)"+y("</cke:encoded>")+")|("+y("<")+y("/")+"?"+y("cke:encoded>")+")","gi"),re=/(<\/?)((?:object|embed|param|html|body|head|title)([\s][^>]*)?>)/gi,se=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,le=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),"use strict",CKEDITOR.htmlParser.element=function(o,s){(this||i).name=o;(this||i).attributes=s||{};(this||i).children=[];var T=o||"",_=T.match(/^cke:(.*)/);_&&(T=_[1]);T=!!(CKEDITOR.dtd.$nonBodyContent[T]||CKEDITOR.dtd.$block[T]||CKEDITOR.dtd.$listItem[T]||CKEDITOR.dtd.$tableContent[T]||CKEDITOR.dtd.$nonEditable[T]||"br"==T);(this||i).isEmpty=!!CKEDITOR.dtd.$empty[o];(this||i).isUnknown=!CKEDITOR.dtd[o];(this||i)._={isBlockLike:T,hasInlineStarted:(this||i).isEmpty||!T}},CKEDITOR.htmlParser.cssStyle=function(i){var o={};((i instanceof CKEDITOR.htmlParser.element?i.attributes.style:i)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,(function(i,s,T){"font-family"==s&&(T=T.replace(/["']/g,""));o[s.toLowerCase()]=T}));return{rules:o,populate:function(i){var o=this.toString();o&&(i instanceof CKEDITOR.dom.element?i.setAttribute("style",o):i instanceof CKEDITOR.htmlParser.element?i.attributes.style=o:i.style=o)},toString:function(){var i=[],s;for(s in o)o[s]&&i.push(s,":",o[s],";");return i.join("")}}},function(){function a(i){return function(o){return o.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof i?o.name==i:o.name in i)}}var f=function(i,o){i=i[0];o=o[0];return i<o?-1:i>o?1:0},o=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:o.add,clone:function(){return new CKEDITOR.htmlParser.element((this||i).name,(this||i).attributes)},filter:function(o,s){var T=this||i,_,S;s=T.getFilterContext(s);T.parent||o.onRoot(s,T);for(;;){_=T.name;if(!(S=o.onElementName(s,_)))return this.remove(),!1;T.name=S;if(!(T=o.onElement(s,T)))return this.remove(),!1;if(T!==(this||i))return this.replaceWith(T),!1;if(T.name==_)break;if(T.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(T),!1;if(!T.name)return this.replaceWithChildren(),!1}_=T.attributes;var P,$;for(P in _){for(S=_[P];;){if(!($=o.onAttributeName(s,P))){delete _[P];break}if($==P)break;delete _[P],P=$}$&&(!1===(S=o.onAttribute(s,T,$,S))?delete _[$]:_[$]=S)}T.isEmpty||this.filterChildren(o,!1,s);return!0},filterChildren:o.filterChildren,writeHtml:function(o,s){s&&this.filter(s);var T=(this||i).name,_=[],S=(this||i).attributes,P,$;o.openTag(T,S);for(P in S)_.push([P,S[P]]);o.sortAttributes&&_.sort(f);P=0;for($=_.length;P<$;P++)S=_[P],o.attribute(S[0],S[1]);o.openTagClose(T,(this||i).isEmpty);this.writeChildrenHtml(o);(this||i).isEmpty||o.closeTag(T)},writeChildrenHtml:o.writeChildrenHtml,replaceWithChildren:function(){for(var o=(this||i).children,s=o.length;s;)o[--s].insertAfter(this||i);this.remove()},forEach:o.forEach,getFirst:function(o){if(!o)return(this||i).children.length?(this||i).children[0]:null;"function"!=typeof o&&(o=a(o));for(var s=0,T=(this||i).children.length;s<T;++s)if(o((this||i).children[s]))return(this||i).children[s];return null},getHtml:function(){var i=new CKEDITOR.htmlParser.basicWriter;this.writeChildrenHtml(i);return i.getHtml()},setHtml:function(o){o=(this||i).children=CKEDITOR.htmlParser.fragment.fromHtml(o).children;for(var s=0,T=o.length;s<T;++s)o[s].parent=this||i},getOuterHtml:function(){var i=new CKEDITOR.htmlParser.basicWriter;this.writeHtml(i);return i.getHtml()},split:function(o){for(var s=(this||i).children.splice(o,(this||i).children.length-o),T=this.clone(),_=0;_<s.length;++_)s[_].parent=T;T.children=s;s[0]&&(s[0].previous=null);0<o&&((this||i).children[o-1].next=null);(this||i).parent.add(T,this.getIndex()+1);return T},find:function(o,s){void 0===s&&(s=!1);var T=[],_;for(_=0;_<(this||i).children.length;_++){var S=(this||i).children[_];("function"==typeof o&&o(S)||"string"==typeof o&&S.name===o)&&T.push(S);s&&S.find&&(T=T.concat(S.find(o,s)))}return T},findOne:function(o,s){var T=null,_=CKEDITOR.tools.array.find((this||i).children,(function(i){var _="function"===typeof o?o(i):i.name===o;if(_||!s)return _;i.children&&i.findOne&&(T=i.findOne(o,!0));return!!T}));return T||_||null},addClass:function(o){if(!this.hasClass(o)){var s=(this||i).attributes["class"]||"";(this||i).attributes["class"]=s+(s?" ":"")+o}},removeClass:function(o){var s=(this||i).attributes["class"];s&&((s=CKEDITOR.tools.trim(s.replace(new RegExp("(?:\\s+|^)"+o+"(?:\\s+|$)")," ")))?(this||i).attributes["class"]=s:delete(this||i).attributes["class"])},hasClass:function(o){var s=(this||i).attributes["class"];return!!s&&new RegExp("(?:^|\\s)"+o+"(?=\\s|$)").test(s)},getFilterContext:function(o){var s=[];o||(o={nonEditable:!1,nestedEditable:!1});o.nonEditable||"false"!=(this||i).attributes.contenteditable?o.nonEditable&&!o.nestedEditable&&"true"==(this||i).attributes.contenteditable&&s.push("nestedEditable",!0):s.push("nonEditable",!0);if(s.length){o=CKEDITOR.tools.copy(o);for(var T=0;T<s.length;T+=2)o[s[T]]=s[T+1]}return o}},!0)}(),function(){var o=/{([^}]+)}/g;CKEDITOR.template=function(o){(this||i).source="function"===typeof o?o:String(o)};CKEDITOR.template.prototype.output=function(s,T){var _=("function"===typeof(this||i).source?this.source(s):(this||i).source).replace(o,(function(i,o){return void 0!==s[o]?s[o]:i}));return T?T.push(_):_}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(i){function f(){CKEDITOR.currentInstance==i&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}CKEDITOR.instances[i.name]=i;i.on("focus",(function(){CKEDITOR.currentInstance!=i&&(CKEDITOR.currentInstance=i,CKEDITOR.fire("currentInstance"))}));i.on("blur",f);i.on("destroy",f);CKEDITOR.fire("instance",null,i)},CKEDITOR.remove=function(i){delete CKEDITOR.instances[i.name]},function(){var i={};CKEDITOR.addTemplate=function(o,s){var T=i[o];if(T)return T;T={name:o,source:s};CKEDITOR.fire("template",T);return i[o]=new CKEDITOR.template(T.source)};CKEDITOR.getTemplate=function(o){return i[o]}}(),function(){var i=[];CKEDITOR.addCss=function(o){i.push(o)};CKEDITOR.getCss=function(){return i.join("\n")}}(),CKEDITOR.on("instanceDestroyed",(function(){CKEDITOR.tools.isEmpty((this||i).instances)&&CKEDITOR.fire("reset")})),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,function(){CKEDITOR.inline=function(i,o){i=CKEDITOR.editor._getEditorElement(i);if(!i)return null;var s=new CKEDITOR.editor(o,i,CKEDITOR.ELEMENT_MODE_INLINE),T=i.is("textarea")?i:null;T?(s.setData(T.getValue(),null,!0),i=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!s.readOnly+'" class="cke_textarea_inline">'+T.getValue()+"</div>",CKEDITOR.document),i.insertAfter(T),T.hide(),T.$.form&&s._attachToForm()):s.setData(i.getHtml(),null,!0);s.on("loaded",(function(){s.fire("uiReady");s.editable(i);s.container=i;s.ui.contentsElement=i;s.setData(s.getData(1));s.resetDirty();s.fire("contentDom");s.mode="wysiwyg";s.fire("mode");s.status="ready";s.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,s)}),null,null,1e4);s.on("destroy",(function(){T&&(s.container.clearCustomData(),s.container.remove(),T.show());s.element.clearCustomData();delete s.element}));return s};CKEDITOR.inlineAll=function(){var i,o,s;for(s in CKEDITOR.dtd.$editable)for(var T=CKEDITOR.document.getElementsByTag(s),_=0,S=T.count();_<S;_++)i=T.getItem(_),"true"==i.getAttribute("contenteditable")&&(o={element:i,config:{}},!1!==CKEDITOR.fire("inline",o)&&CKEDITOR.inline(i,o.config))};CKEDITOR.domReady((function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()}))}(),CKEDITOR.replaceClass="ckeditor",function(){function a(i,o,s,T){i=CKEDITOR.editor._getEditorElement(i);if(!i)return null;var _=new CKEDITOR.editor(o,i,T);T==CKEDITOR.ELEMENT_MODE_REPLACE&&(i.setStyle("visibility","hidden"),_._.required=i.hasAttribute("required"),i.removeAttribute("required"));s&&_.setData(s,null,!0);_.on("loaded",(function(){b(_);T==CKEDITOR.ELEMENT_MODE_REPLACE&&_.config.autoUpdateElement&&i.$.form&&_._attachToForm();_.setMode(_.config.startupMode,(function(){_.resetDirty();_.status="ready";_.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,_)}))}));_.on("destroy",f);return _}function f(){var o=(this||i).container,s=(this||i).element;o&&(o.clearCustomData(),o.remove());s&&(s.clearCustomData(),(this||i).elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(s.show(),(this||i)._.required&&s.setAttribute("required","required")),delete(this||i).element)}function b(i){var o=i.name,s=i.element,T=i.elementMode,_=i.fire("uiSpace",{space:"top",html:""}).html,S=i.fire("uiSpace",{space:"bottom",html:""}).html,P=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(i.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(i.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>'),o=CKEDITOR.dom.element.createFromHtml(P.output({id:i.id,name:o,langDir:i.lang.dir,langCode:i.langCode,voiceLabel:i.title,topHtml:_?'<span id="'+i.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+_+"</span>":"",contentId:i.ui.spaceId("contents"),bottomHtml:S?'<span id="'+i.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+S+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}));T==CKEDITOR.ELEMENT_MODE_REPLACE?(s.hide(),o.insertAfter(s)):s.append(o);i.container=o;i.ui.contentsElement=i.ui.space("contents");_&&i.ui.space("top").unselectable();S&&i.ui.space("bottom").unselectable();s=i.config.width;T=i.config.height;s&&o.setStyle("width",CKEDITOR.tools.cssLength(s));T&&i.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(T));o.disableContextMenu();CKEDITOR.env.webkit&&o.on("focus",(function(){i.focus()}));i.fireOnce("uiReady")}CKEDITOR.replace=function(i,o){return a(i,o,null,CKEDITOR.ELEMENT_MODE_REPLACE)};CKEDITOR.appendTo=function(i,o,s){return a(i,o,s,CKEDITOR.ELEMENT_MODE_APPENDTO)};CKEDITOR.replaceAll=function(){for(var i=document.getElementsByTagName("textarea"),o=0;o<i.length;o++){var s=null,T=i[o];if(T.name||T.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(T.className))continue}else if("function"==typeof arguments[0]&&(s={},!1===arguments[0](T,s)))continue;this.replace(T,s)}}};CKEDITOR.editor.prototype.addMode=function(o,s){((this||i)._.modes||((this||i)._.modes={}))[o]=s};CKEDITOR.editor.prototype.setMode=function(o,s){var T=this||i,_=(this||i)._.modes;if(o!=T.mode&&_&&_[o]){T.fire("beforeSetMode",o);if(T.mode){var S=T.checkDirty(),_=T._.previousModeData,P,$=0;T.fire("beforeModeUnload");T.editable(0);T._.previousMode=T.mode;T._.previousModeData=P=T.getData(1);"source"==T.mode&&_==P&&(T.fire("lockSnapshot",{forceUpdate:!0}),$=1);T.ui.space("contents").setHtml("");T.mode=""}else T._.previousModeData=T.getData(1);(this||i)._.modes[o]((function(){T.mode=o;void 0!==S&&!S&&T.resetDirty();$?T.fire("unlockSnapshot"):"wysiwyg"==o&&T.fire("saveSnapshot");setTimeout((function(){T.fire("mode");s&&s.call(T)}),0)}))}};CKEDITOR.editor.prototype.resize=function(o,s,T,_){var S=(this||i).container,P=(this||i).ui.space("contents"),$=CKEDITOR.env.webkit&&(this||i).document&&(this||i).document.getWindow().$.frameElement;_=_?(this||i).container.getFirst((function(i){return i.type==CKEDITOR.NODE_ELEMENT&&i.hasClass("cke_inner")})):S;_.setSize("width",o,!0);$&&($.style.width="1%");var V=(_.$.offsetHeight||0)-(P.$.clientHeight||0),S=Math.max(s-(T?0:V),0);s=T?s+V:s;P.setStyle("height",S+"px");$&&($.style.width="100%");this.fire("resize",{outerHeight:s,contentsHeight:S,outerWidth:o||_.getSize("width")})};CKEDITOR.editor.prototype.getResizable=function(o){return o?(this||i).ui.space("contents"):(this||i).container};CKEDITOR.domReady((function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)}))}(),CKEDITOR.config.startupMode="wysiwyg",function(){function a(i){var o=i.editor,s=i.data.path,T=s.blockLimit,_=i.data.selection,S=_.getRanges()[0],P;(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(_=f(_,s))&&(_.appendBogus(),P=CKEDITOR.env.ie);k(o,s.block,T)&&S.collapsed&&!S.getCommonAncestor().isReadOnly()&&(s=S.clone(),s.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),T=new CKEDITOR.dom.walker(s),T.guard=function(i){return!c(i)||i.type==CKEDITOR.NODE_COMMENT||i.isReadOnly()},!T.checkForward()||s.checkStartOfBlock()&&s.checkEndOfBlock())&&(o=S.fixBlock(!0,o.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(o=o.getFirst(c))&&o.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(o.getText()).match(/^(?:&nbsp;|\xa0)$/)&&o.remove(),P=1,i.cancel());P&&S.select()}function f(i,o){if(i.isFake)return 0;var s=o.block||o.blockLimit,T=s&&s.getLast(c);return!s||!s.isBlockBoundary()||T&&T.type==CKEDITOR.NODE_ELEMENT&&T.isBlockBoundary()||s.is("pre")||s.getBogus()?void 0:s}function b(i){var o=i.data.getTarget();o.is("input")&&(o=o.getAttribute("type"),"submit"!=o&&"reset"!=o||i.data.preventDefault())}function c(i){return o(i)&&s(i)}function d(o,s){return function(T){var _=T.data.$.toElement||T.data.$.fromElement||T.data.$.relatedTarget;(_=_&&_.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(_):null)&&(s.equals(_)||s.contains(_))||o.call(this||i,T)}}function l(i){function b(i){return function(s,S){S&&s.type==CKEDITOR.NODE_ELEMENT&&s.is(T)&&(o=s);if(!(S||!c(s)||i&&_(s)))return!1}}var o,s=i.getRanges()[0];i=i.root;var T={table:1,ul:1,ol:1,dl:1};if(s.startPath().contains(T)){var S=s.clone();S.collapse(1);S.setStartAt(i,CKEDITOR.POSITION_AFTER_START);i=new CKEDITOR.dom.walker(S);i.guard=b();i.checkBackward();if(o)return S=s.clone(),S.collapse(),S.setEndAt(o,CKEDITOR.POSITION_AFTER_END),i=new CKEDITOR.dom.walker(S),i.guard=b(!0),o=!1,i.checkForward(),o}return null}function k(i,o,s){return!1!==i.config.autoParagraph&&i.activeEnterMode!=CKEDITOR.ENTER_BR&&(i.editable().equals(s)&&!o||o&&"true"==o.getAttribute("contenteditable"))}function g(i){return i.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==i.config.autoParagraph&&(i.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p")}function h(i){i&&i.isEmptyInlineRemoveable()&&i.remove()}function m(i){var o=i.editor;o.getSelection().scrollIntoView();setTimeout((function(){o.fire("saveSnapshot")}),0)}function e(i,o,s){var T=i.getCommonAncestor(o);for(o=i=s?o:i;(i=i.getParent())&&!T.equals(i)&&1==i.getChildCount();)o=i;o.remove()}var o,s,T,_,S,P,$,V,j,Y;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(o,s){this.base(s.$||s);(this||i).editor=o;(this||i).status="unloaded";(this||i).hasFocus=!1;this.setup()},proto:{focus:function(){var o;if(CKEDITOR.env.webkit&&!(this||i).hasFocus&&(o=(this||i).editor._.previousActive||this.getDocument().getActive(),this.contains(o)))o.focus();else{CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!(this||i).hasFocus&&this.getDocument().equals(CKEDITOR.document)&&((this||i).editor._.previousScrollTop=(this||i).$.scrollTop);try{if(!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document))if(CKEDITOR.env.chrome){var s=(this||i).$.scrollTop;(this||i).$.focus();(this||i).$.scrollTop=s}else(this||i).$.focus();else(this||i).$.setActive()}catch(i){if(!CKEDITOR.env.ie)throw i}CKEDITOR.env.safari&&!this.isInline()&&(o=CKEDITOR.document.getActive(),o.equals(this.getWindow().getFrame())||this.getWindow().focus())}},on:function(o,s){var T=Array.prototype.slice.call(arguments,0);CKEDITOR.env.ie&&/^focus|blur$/.exec(o)&&(o="focus"==o?"focusin":"focusout",s=d(s,this||i),T[0]=o,T[1]=s);return CKEDITOR.dom.element.prototype.on.apply(this||i,T)},attachListener:function(o){!(this||i)._.listeners&&((this||i)._.listeners=[]);var s=Array.prototype.slice.call(arguments,1),s=o.on.apply(o,s);(this||i)._.listeners.push(s);return s},clearListeners:function(){var o=(this||i)._.listeners;try{for(;o.length;)o.pop().removeListener()}catch(i){}},restoreAttrs:function(){var o=(this||i)._.attrChanges,s,T;for(T in o)o.hasOwnProperty(T)&&(s=o[T],null!==s?this.setAttribute(T,s):this.removeAttribute(T))},attachClass:function(i){var o=this.getCustomData("classes");this.hasClass(i)||(!o&&(o=[]),o.push(i),this.setCustomData("classes",o),this.addClass(i))},changeAttr:function(o,s){var T=this.getAttribute(o);s!==T&&(!(this||i)._.attrChanges&&((this||i)._.attrChanges={}),o in(this||i)._.attrChanges||((this||i)._.attrChanges[o]=T),this.setAttribute(o,s))},insertText:function(o){(this||i).editor.focus();this.insertHtml(this.transformPlainTextToHtml(o),"text")},transformPlainTextToHtml:function(o){var s=(this||i).editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:(this||i).editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(o,s)},insertHtml:function(o,s,T){var _=(this||i).editor;_.focus();_.fire("saveSnapshot");T||(T=_.getSelection().getRanges()[0]);P(this||i,s||"html",o,T);T.select();m(this||i);(this||i).editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(o,s,T){P(this||i,T||"html",o,s);(this||i).editor.fire("afterInsertHtml",{intoRange:s})},insertElement:function(o,s){var T=(this||i).editor;T.focus();T.fire("saveSnapshot");var S=T.activeEnterMode,T=T.getSelection(),P=o.getName(),P=CKEDITOR.dtd.$block[P];s||(s=T.getRanges()[0]);this.insertElementIntoRange(o,s)&&(s.moveToPosition(o,CKEDITOR.POSITION_AFTER_END),P&&((P=o.getNext((function(i){return c(i)&&!_(i)})))&&P.type==CKEDITOR.NODE_ELEMENT&&P.is(CKEDITOR.dtd.$block)?P.getDtd()["#"]?s.moveToElementEditStart(P):s.moveToElementEditEnd(o):P||S==CKEDITOR.ENTER_BR||(P=s.fixBlock(!0,S==CKEDITOR.ENTER_DIV?"div":"p"),s.moveToElementEditStart(P))));T.selectRanges([s]);m(this||i)},insertElementIntoSelection:function(i){this.insertElement(i)},insertElementIntoRange:function(o,s){var T=(this||i).editor,_=T.config.enterMode,S=o.getName(),P=CKEDITOR.dtd.$block[S];if(s.checkReadOnly())return!1;s.deleteContents(1);s.startContainer.type==CKEDITOR.NODE_ELEMENT&&(s.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})?$(s):s.startContainer.is(CKEDITOR.dtd.$list)&&V(s));var j,Y;if(P)for(;(j=s.getCommonAncestor(0,1))&&(Y=CKEDITOR.dtd[j.getName()])&&(!Y||!Y[S]);)if(j.getName()in CKEDITOR.dtd.span){var P=s.splitElement(j),ee=s.createBookmark();h(j);h(P);s.moveToBookmark(ee)}else s.checkStartOfBlock()&&s.checkEndOfBlock()?(s.setStartBefore(j),s.collapse(!0),j.remove()):s.splitBlock(_==CKEDITOR.ENTER_DIV?"div":"p",T.editable());s.insertNode(o);return!0},setData:function(o,s){s||(o=(this||i).editor.dataProcessor.toHtml(o));this.setHtml(o);this.fixInitialSelection();"unloaded"==(this||i).status&&((this||i).status="ready");(this||i).editor.fire("dataReady")},getData:function(o){var s=this.getHtml();o||(s=(this||i).editor.dataProcessor.toDataFormat(s));return s},setReadOnly:function(i){this.setAttribute("contenteditable",!i)},detach:function(){this.removeClass("cke_editable");(this||i).status="detached";var o=(this||i).editor;(this||i)._.detach();delete o.document;delete o.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function a(){var i=o.getDocument().$,s=i.getSelection(),T;e:if(s.anchorNode&&s.anchorNode==o.$)T=!0;else{if(CKEDITOR.env.webkit&&(T=o.getDocument().getActive())&&T.equals(o)&&!s.anchorNode){T=!0;break e}T=void 0}T&&(T=new CKEDITOR.dom.range(o),T.moveToElementEditStart(o),i=i.createRange(),i.setStart(T.startContainer.$,T.startOffset),i.collapse(!0),s.removeAllRanges(),s.addRange(i))}function b(){var i=o.getDocument().$,s=i.selection,T=o.getDocument().getActive();"None"==s.type&&T.equals(o)&&(s=new CKEDITOR.dom.range(o),i=i.body.createTextRange(),s.moveToElementEditStart(o),s=s.startContainer,s.type!=CKEDITOR.NODE_ELEMENT&&(s=s.getParent()),i.moveToElementText(s.$),i.collapse(!0),i.select())}var o=this||i;CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)?(this||i).hasFocus&&(this.focus(),b()):(this||i).hasFocus?(this.focus(),a()):this.once("focus",(function(){a()}),null,null,-999)},getHtmlFromRange:function(o){if(o.collapsed)return new CKEDITOR.dom.documentFragment(o.document);o={doc:this.getDocument(),range:o.clone()};j.eol.detect(o,this||i);j.bogus.exclude(o);j.cell.shrink(o);o.fragment=o.range.cloneContents();j.tree.rebuild(o,this||i);j.eol.fix(o,this||i);return new CKEDITOR.dom.documentFragment(o.fragment.$)},extractHtmlFromRange:function(o,_){var S=Y,P={range:o,doc:o.document},$=this.getHtmlFromRange(o);if(o.collapsed)return o.optimize(),$;o.enlarge(CKEDITOR.ENLARGE_INLINE,1);S.table.detectPurge(P);P.bookmark=o.createBookmark();delete P.range;var V=(this||i).editor.createRange();V.moveToPosition(P.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START);P.targetBookmark=V.createBookmark();S.list.detectMerge(P,this||i);S.table.detectRanges(P,this||i);S.block.detectMerge(P,this||i);P.tableContentsRanges?(S.table.deleteRanges(P),o.moveToBookmark(P.bookmark),P.range=o):(o.moveToBookmark(P.bookmark),P.range=o,o.extractContents(S.detectExtractMerge(P)));o.moveToBookmark(P.targetBookmark);o.optimize();S.fixUneditableRangePosition(o);S.list.merge(P,this||i);S.table.purge(P,this||i);S.block.merge(P,this||i);if(_){S=o.startPath();if(P=o.checkStartOfBlock()&&o.checkEndOfBlock()&&S.block&&!o.root.equals(S.block)){e:{var P=S.block.getElementsByTag("span"),V=0,j;if(P)for(;j=P.getItem(V++);)if(!s(j)){P=!0;break e}P=!1}P=!P}P&&(o.moveToPosition(S.block,CKEDITOR.POSITION_BEFORE_START),S.block.remove())}else S.autoParagraph((this||i).editor,o),T(o.startContainer)&&o.startContainer.appendBogus();o.startContainer.mergeSiblings();return $},setup:function(){var s=(this||i).editor;this.attachListener(s,"beforeGetData",(function(){var i=this.getData();this.is("textarea")||!1!==s.config.ignoreEmptyParagraph&&(i=i.replace(S,(function(i,o){return o})));s.setData(i,null,1)}),this||i);this.attachListener(s,"getSnapshot",(function(i){i.data=this.getData(1)}),this||i);this.attachListener(s,"afterSetData",(function(){this.setData(s.getData(1))}),this||i);this.attachListener(s,"loadSnapshot",(function(i){this.setData(i.data,1)}),this||i);this.attachListener(s,"beforeFocus",(function(){var i=s.getSelection();(i=i&&i.getNative())&&"Control"==i.type||this.focus()}),this||i);this.attachListener(s,"insertHtml",(function(i){this.insertHtml(i.data.dataValue,i.data.mode,i.data.range)}),this||i);this.attachListener(s,"insertElement",(function(i){this.insertElement(i.data)}),this||i);this.attachListener(s,"insertText",(function(i){this.insertText(i.data)}),this||i);this.setReadOnly(s.readOnly);this.attachClass("cke_editable");s.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):s.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&s.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed");this.attachClass("cke_contents_"+s.config.contentsLangDirection);s.keystrokeHandler.blockedKeystrokes[8]=+s.readOnly;s.keystrokeHandler.attach(this||i);this.on("blur",(function(){(this||i).hasFocus=!1}),null,null,-1);this.on("focus",(function(){(this||i).hasFocus=!0}),null,null,-1);CKEDITOR.env.webkit&&this.on("scroll",(function(){s._.previousScrollTop=s.editable().$.scrollTop}),null,null,-1);if(CKEDITOR.env.edge&&14<CKEDITOR.env.version){var d=function(){var i=s.editable();null!=s._.previousScrollTop&&i.getDocument().equals(CKEDITOR.document)&&(i.$.scrollTop=s._.previousScrollTop,s._.previousScrollTop=null,this.removeListener("scroll",d))};this.on("scroll",d)}s.focusManager.add(this||i);this.equals(CKEDITOR.document.getActive())&&((this||i).hasFocus=!0,s.once("contentDom",(function(){s.focusManager.focus(this||i)}),this||i));this.isInline()&&this.changeAttr("tabindex",s.tabIndex);if(!this.is("textarea")){s.document=this.getDocument();s.window=this.getWindow();var T=s.document;this.changeAttr("spellcheck",!s.config.disableNativeSpellChecker);var _=s.config.contentsLangDirection;this.getDirection(1)!=_&&this.changeAttr("dir",_);var P=CKEDITOR.getCss();if(P){var _=T.getHead(),$=_.getCustomData("stylesheet");$?P!=$.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?$.$.styleSheet.cssText=P:$.setText(P)):(P=T.appendStyleText(P),P=new CKEDITOR.dom.element(P.ownerNode||P.owningElement),_.setCustomData("stylesheet",P),P.data("cke-temp",1))}_=T.getCustomData("stylesheet_ref")||0;T.setCustomData("stylesheet_ref",_+1);this.setCustomData("cke_includeReadonly",!s.config.disableReadonlyStyling);this.attachListener(this||i,"click",(function(o){o=o.data;var s=new CKEDITOR.dom.elementPath(o.getTarget(),this||i).contains("a");s&&2!=o.$.button&&s.isReadOnly()&&o.preventDefault()}));var V={8:1,46:1};this.attachListener(s,"key",(function(i){if(s.readOnly)return!0;var T=i.data.domEvent.getKey(),_;i=s.getSelection();if(0!==i.getRanges().length){if(T in V){var S,P=i.getRanges()[0],$=P.startPath(),j,Y,ee,T=8==T;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(S=i.getSelectedElement())||(S=l(i))?(s.fire("saveSnapshot"),P.moveToPosition(S,CKEDITOR.POSITION_BEFORE_START),S.remove(),P.select(),s.fire("saveSnapshot"),_=1):P.collapsed&&((j=$.block)&&(ee=j[T?"getPrevious":"getNext"](o))&&ee.type==CKEDITOR.NODE_ELEMENT&&ee.is("table")&&P[T?"checkStartOfBlock":"checkEndOfBlock"]()?(s.fire("saveSnapshot"),P[T?"checkEndOfBlock":"checkStartOfBlock"]()&&j.remove(),P["moveToElementEdit"+(T?"End":"Start")](ee),P.select(),s.fire("saveSnapshot"),_=1):$.blockLimit&&$.blockLimit.is("td")&&(Y=$.blockLimit.getAscendant("table"))&&P.checkBoundaryOfElement(Y,T?CKEDITOR.START:CKEDITOR.END)&&(ee=Y[T?"getPrevious":"getNext"](o))?(s.fire("saveSnapshot"),P["moveToElementEdit"+(T?"End":"Start")](ee),P.checkStartOfBlock()&&P.checkEndOfBlock()?ee.remove():P.select(),s.fire("saveSnapshot"),_=1):(Y=$.contains(["td","th","caption"]))&&P.checkBoundaryOfElement(Y,T?CKEDITOR.START:CKEDITOR.END)&&(_=1))}return!_}}));s.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this||i,"keyup",(function(o){o.data.getKeystroke()in V&&!this.getFirst(c)&&(this.appendBogus(),o=s.createRange(),o.moveToPosition(this||i,CKEDITOR.POSITION_AFTER_START),o.select())}));this.attachListener(this||i,"dblclick",(function(i){if(s.readOnly)return!1;i={element:i.data.getTarget()};s.fire("doubleclick",i)}));CKEDITOR.env.ie&&this.attachListener(this||i,"click",b);CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this||i,"mousedown",(function(i){var o=i.data.getTarget();o.is("img","hr","input","textarea","select")&&!o.isReadOnly()&&(s.getSelection().selectElement(o),o.is("input","textarea","select")&&i.data.preventDefault())}));CKEDITOR.env.edge&&this.attachListener(this||i,"mouseup",(function(i){(i=i.data.getTarget())&&i.is("img")&&!i.isReadOnly()&&s.getSelection().selectElement(i)}));CKEDITOR.env.gecko&&this.attachListener(this||i,"mouseup",(function(i){if(2==i.data.$.button&&(i=i.data.getTarget(),!i.getAscendant("table")&&!i.getOuterHtml().replace(S,""))){var o=s.createRange();o.moveToElementEditStart(i);o.select(!0)}}));CKEDITOR.env.webkit&&(this.attachListener(this||i,"click",(function(i){i.data.getTarget().is("input","select")&&i.data.preventDefault()})),this.attachListener(this||i,"mouseup",(function(i){i.data.getTarget().is("input","textarea")&&i.data.preventDefault()})));CKEDITOR.env.webkit&&this.attachListener(s,"key",(function(i){if(s.readOnly)return!0;var o=i.data.domEvent.getKey();if(o in V&&(i=s.getSelection(),0!==i.getRanges().length)){var o=8==o,T=i.getRanges()[0];i=T.startPath();if(T.collapsed)e:{var _=i.block;if(_&&T[o?"checkStartOfBlock":"checkEndOfBlock"]()&&T.moveToClosestEditablePosition(_,!o)&&T.collapsed){if(T.startContainer.type==CKEDITOR.NODE_ELEMENT){var S=T.startContainer.getChild(T.startOffset-(o?1:0));if(S&&S.type==CKEDITOR.NODE_ELEMENT&&S.is("hr")){s.fire("saveSnapshot");S.remove();i=!0;break e}}T=T.startPath().block;if(!T||T&&T.contains(_))i=void 0;else{s.fire("saveSnapshot");var P;(P=(o?T:_).getBogus())&&P.remove();P=s.getSelection();S=P.createBookmarks();(o?_:T).moveChildren(o?T:_,!1);i.lastElement.mergeSiblings();e(_,T,!o);P.selectBookmarks(S);i=!0}}else i=!1}else o=T,P=i.block,T=o.endPath().block,P&&T&&!P.equals(T)?(s.fire("saveSnapshot"),(_=P.getBogus())&&_.remove(),o.enlarge(CKEDITOR.ENLARGE_INLINE),o.deleteContents(),T.getParent()&&(T.moveChildren(P,!1),i.lastElement.mergeSiblings(),e(P,T,!0)),o=s.getSelection().getRanges()[0],o.collapse(1),o.optimize(),""===o.startContainer.getHtml()&&o.startContainer.appendBogus(),o.select(),i=!0):i=!1;if(!i)return;s.getSelection().scrollIntoView();s.fire("saveSnapshot");return!1}}),this||i,null,100)}}},_:{detach:function(){(this||i).editor.setData((this||i).editor.getData(),0,1);this.clearListeners();this.restoreAttrs();var o;if(o=this.removeCustomData("classes"))for(;o.length;)this.removeClass(o.pop());if(!this.is("textarea")){o=this.getDocument();var s=o.getHead();if(s.getCustomData("stylesheet")){var T=o.getCustomData("stylesheet_ref");--T?o.setCustomData("stylesheet_ref",T):(o.removeCustomData("stylesheet_ref"),s.removeCustomData("stylesheet").remove())}}(this||i).editor.fire("contentDomUnload");delete(this||i).editor}}});CKEDITOR.editor.prototype.editable=function(o){var s=(this||i)._.editable;if(s&&o)return 0;arguments.length&&(s=(this||i)._.editable=o?o instanceof CKEDITOR.editable?o:new CKEDITOR.editable(this||i,o):(s&&s.detach(),null));return s};CKEDITOR.on("instanceLoaded",(function(i){var o=i.editor;o.on("insertElement",(function(i){i=i.data;i.type==CKEDITOR.NODE_ELEMENT&&(i.is("input")||i.is("textarea"))&&("false"!=i.getAttribute("contentEditable")&&i.data("cke-editable",i.hasAttribute("contenteditable")?"true":"1"),i.setAttribute("contentEditable",!1))}));o.on("selectionChange",(function(i){if(!o.readOnly){var s=o.getSelection();s&&!s.isLocked&&(s=o.checkDirty(),o.fire("lockSnapshot"),a(i),o.fire("unlockSnapshot"),!s&&o.resetDirty())}}))}));CKEDITOR.on("instanceCreated",(function(o){var s=o.editor;s.on("mode",(function(){var o=s.editable();if(o&&o.isInline()){var T=s.title;o.changeAttr("role","textbox");o.changeAttr("aria-multiline","true");o.changeAttr("aria-label",T);T&&o.changeAttr("title",T);var _=s.fire("ariaEditorHelpLabel",{}).label;if(_&&(T=(this||i).ui.space((this||i).elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var S=CKEDITOR.tools.getNextId(),_=CKEDITOR.dom.element.createFromHtml('<span id="'+S+'" class="cke_voice_label">'+_+"</span>");T.append(_);o.changeAttr("aria-describedby",S)}}}))}));CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");o=CKEDITOR.dom.walker.whitespaces(!0);s=CKEDITOR.dom.walker.bookmark(!1,!0);T=CKEDITOR.dom.walker.empty();_=CKEDITOR.dom.walker.bogus();S=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi;P=function(){function a(i){return i.type==CKEDITOR.NODE_ELEMENT}function b(o,s){var T,_,S,P,$=[],V=s.range.startContainer;T=s.range.startPath();for(var V=i[V.getName()],j=0,Y=o.getChildren(),ee=Y.count(),te=-1,ne=-1,ie=0,oe=T.contains(i.$list);j<ee;++j)T=Y.getItem(j),a(T)?(S=T.getName(),oe&&S in CKEDITOR.dtd.$list?$=$.concat(b(T,s)):(P=!!V[S],"br"!=S||!T.data("cke-eol")||j&&j!=ee-1||(ie=(_=j?$[j-1].node:Y.getItem(j+1))&&(!a(_)||!_.is("br")),_=_&&a(_)&&i.$block[_.getName()]),-1!=te||P||(te=j),P||(ne=j),$.push({isElement:1,isLineBreak:ie,isBlock:T.isBlockBoundary(),hasBlockSibling:_,node:T,name:S,allowed:P}),_=ie=0)):$.push({isElement:0,node:T,allowed:1});-1<te&&($[te].firstNotAllowed=1);-1<ne&&($[ne].lastNotAllowed=1);return $}function e(o,s){var T=[],_=o.getChildren(),S=_.count(),P,$=0,V=i[s],j=!o.is(i.$inline)||o.is("br");for(j&&T.push(" ");$<S;$++)P=_.getItem($),a(P)&&!P.is(V)?T=T.concat(e(P,s)):T.push(P);j&&T.push(" ");return T}function d(i){return a(i.startContainer)&&i.startContainer.getChild(i.startOffset-1)}function f(o){return o&&a(o)&&(o.is(i.$removeEmpty)||o.is("a")&&!o.isBlockBoundary())}function m(i,s,T,_){var S=i.clone(),P,$;S.setEndAt(s,CKEDITOR.POSITION_BEFORE_END);(P=new CKEDITOR.dom.walker(S).next())&&a(P)&&o[P.getName()]&&($=P.getPrevious())&&a($)&&!$.getParent().equals(i.startContainer)&&T.contains($)&&_.contains(P)&&P.isIdentical($)&&(P.moveChildren($),P.remove(),m(i,s,T,_))}function l(i,o){function e(i,o){if(o.isBlock&&o.isElement&&!o.node.is("br")&&a(i)&&i.is("br"))return i.remove(),1}var s=o.endContainer.getChild(o.endOffset),T=o.endContainer.getChild(o.endOffset-1);s&&e(s,i[i.length-1]);T&&e(T,i[0])&&(o.setEnd(o.endContainer,o.endOffset-1),o.collapse())}var i=CKEDITOR.dtd,o={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},s={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},T=CKEDITOR.tools.extend({},i.$inline);delete T.br;return function(o,_,S,P){var $=o.editor,V=!1;"unfiltered_html"==_&&(_="html",V=!0);if(!P.checkReadOnly()){var j=new CKEDITOR.dom.elementPath(P.startContainer,P.root).blockLimit||P.root;_={type:_,dontFilter:V,editable:o,editor:$,range:P,blockLimit:j,mergeCandidates:[],zombies:[]};var V=_.range,j=_.mergeCandidates,Y="html"===_.type,ee,te,ne,ie,oe,ae;"text"==_.type&&V.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(te=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",V.document),V.insertNode(te),V.setStartAfter(te));ne=new CKEDITOR.dom.elementPath(V.startContainer);_.endPath=ie=new CKEDITOR.dom.elementPath(V.endContainer);if(!V.collapsed){ee=ie.block||ie.blockLimit;var re=V.getCommonAncestor();ee&&!ee.equals(re)&&!ee.contains(re)&&V.checkEndOfBlock()&&_.zombies.push(ee);V.deleteContents()}for(;(oe=d(V))&&a(oe)&&oe.isBlockBoundary()&&ne.contains(oe);)V.moveToPosition(oe,CKEDITOR.POSITION_BEFORE_END);m(V,_.blockLimit,ne,ie);te&&(V.setEndBefore(te),V.collapse(),te.remove());te=V.startPath();(ee=te.contains(f,!1,1))&&(ae=V.splitElement(ee),_.inlineStylesRoot=ee,_.inlineStylesPeak=te.lastElement);te=V.createBookmark();Y&&(h(ee),h(ae));(ee=te.startNode.getPrevious(c))&&a(ee)&&f(ee)&&j.push(ee);(ee=te.startNode.getNext(c))&&a(ee)&&f(ee)&&j.push(ee);for(ee=te.startNode;(ee=ee.getParent())&&f(ee);)j.push(ee);V.moveToBookmark(te);""===$.getData()&&$.enterMode===CKEDITOR.ENTER_DIV&&(($=o.getFirst())&&$.remove(),P.setStartAt(o,CKEDITOR.POSITION_AFTER_START),P.collapse(!0));if(o=S){o=_.range;if("text"==_.type&&_.inlineStylesRoot){P=_.inlineStylesPeak;$=P.getDocument().createText("{cke-peak}");for(ae=_.inlineStylesRoot.getParent();!P.equals(ae);)$=$.appendTo(P.clone()),P=P.getParent();S=$.getOuterHtml().split("{cke-peak}").join(S)}P=_.blockLimit.getName();if(/^\s+|\s+$/.test(S)&&"span"in CKEDITOR.dtd[P]){var se='<span data-cke-marker="1">&nbsp;</span>';S=se+S+se}S=_.editor.dataProcessor.toHtml(S,{context:null,fixForBody:!1,protectedWhitespaces:!!se,dontFilter:_.dontFilter,filter:_.editor.activeFilter,enterMode:_.editor.activeEnterMode});P=o.document.createElement("body");P.setHtml(S);se&&(P.getFirst().remove(),P.getLast().remove());if((se=o.startPath().block)&&(1!=se.getChildCount()||!se.getBogus()))e:{var le;if(1==P.getChildCount()&&a(le=P.getFirst())&&le.is(s)&&!le.hasAttribute("contenteditable")){se=le.getElementsByTag("*");o=0;for(ae=se.count();o<ae;o++)if($=se.getItem(o),!$.is(T))break e;le.moveChildren(le.getParent(1));le.remove()}}_.dataWrapper=P;o=S}if(o){le=_.range;o=le.document;P=_.blockLimit;ae=0;var ce,se=[],de,ue;S=te=0;var he,$=le.startContainer;oe=_.endPath.elements[0];var fe,V=oe.getPosition($),j=!!oe.getCommonAncestor($)&&V!=CKEDITOR.POSITION_IDENTICAL&&!(V&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),$=b(_.dataWrapper,_);for(l($,le);ae<$.length;ae++){V=$[ae];(Y=V.isLineBreak)&&(Y=le,ee=P,ie=ne=void 0,V.hasBlockSibling?Y=1:(ne=Y.startContainer.getAscendant(i.$block,1))&&ne.is({div:1,p:1})?(ie=ne.getPosition(ee),ie==CKEDITOR.POSITION_IDENTICAL||ie==CKEDITOR.POSITION_CONTAINS?Y=0:(ee=Y.splitElement(ne),Y.moveToPosition(ee,CKEDITOR.POSITION_AFTER_START),Y=1)):Y=0);if(Y)S=0<ae;else{Y=le.startPath();!V.isBlock&&k(_.editor,Y.block,Y.blockLimit)&&(ue=g(_.editor))&&(ue=o.createElement(ue),ue.appendBogus(),le.insertNode(ue),CKEDITOR.env.needsBrFiller&&(ce=ue.getBogus())&&ce.remove(),le.moveToPosition(ue,CKEDITOR.POSITION_BEFORE_END));if((Y=le.startPath().block)&&!Y.equals(de)){(ce=Y.getBogus())&&(ce.remove(),se.push(Y));de=Y}V.firstNotAllowed&&(te=1);if(te&&V.isElement){Y=le.startContainer;for(ee=null;Y&&!i[Y.getName()][V.name];){if(Y.equals(P)){Y=null;break}ee=Y;Y=Y.getParent()}if(Y)ee&&(he=le.splitElement(ee),_.zombies.push(he),_.zombies.push(ee));else{ee=P.getName();fe=!ae;Y=ae==$.length-1;ee=e(V.node,ee);ne=[];ie=ee.length;for(var re=0,ge=void 0,me=0,Ee=-1;re<ie;re++)ge=ee[re]," "==ge?(me||fe&&!re||(ne.push(new CKEDITOR.dom.text(" ")),Ee=ne.length),me=1):(ne.push(ge),me=0);Y&&Ee==ne.length&&ne.pop();fe=ne}}if(fe){for(;Y=fe.pop();)le.insertNode(Y);fe=0}else le.insertNode(V.node);V.lastNotAllowed&&ae<$.length-1&&((he=j?oe:he)&&le.setEndAt(he,CKEDITOR.POSITION_AFTER_START),te=0);le.collapse()}}1!=$.length?ce=!1:(ce=$[0],ce=ce.isElement&&"false"==ce.node.getAttribute("contenteditable"));ce&&(S=!0,Y=$[0].node,le.setStartAt(Y,CKEDITOR.POSITION_BEFORE_START),le.setEndAt(Y,CKEDITOR.POSITION_AFTER_END));_.dontMoveCaret=S;_.bogusNeededBlocks=se}ce=_.range;var pe;he=_.bogusNeededBlocks;for(fe=ce.createBookmark();de=_.zombies.pop();)de.getParent()&&(ue=ce.clone(),ue.moveToElementEditStart(de),ue.removeEmptyBlocksAtEnd());if(he)for(;de=he.pop();)CKEDITOR.env.needsBrFiller?de.appendBogus():de.append(ce.document.createText(" "));for(;de=_.mergeCandidates.pop();)de.mergeSiblings();ce.moveToBookmark(fe);if(!_.dontMoveCaret){for(de=d(ce);de&&a(de)&&!de.is(i.$empty);){if(de.isBlockBoundary())ce.moveToPosition(de,CKEDITOR.POSITION_BEFORE_END);else{if(f(de)&&de.getHtml().match(/(\s|&nbsp;)$/g)){pe=null;break}pe=ce.clone();pe.moveToPosition(de,CKEDITOR.POSITION_BEFORE_END)}de=de.getLast(c)}pe&&ce.moveToRange(pe)}}}}();$=function(){function a(i){i=new CKEDITOR.dom.walker(i);i.guard=function(i,o){return!o&&(i.type==CKEDITOR.NODE_ELEMENT?i.is(CKEDITOR.dtd.$tableContent):void 0)};i.evaluator=function(i){return i.type==CKEDITOR.NODE_ELEMENT};return i}function b(i,o,s){o=i.getDocument().createElement(o);i.append(o,s);return o}function c(i){var o=i.count(),s;for(o;0<o--;)s=i.getItem(o),CKEDITOR.tools.trim(s.getHtml())||(s.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&s.getChildCount()&&s.getFirst().remove())}return function(i){var o=i.startContainer,s=o.getAscendant("table",1),T=!1;c(s.getElementsByTag("td"));c(s.getElementsByTag("th"));s=i.clone();s.setStart(o,0);s=a(s).lastBackward();s||(s=i.clone(),s.setEndAt(o,CKEDITOR.POSITION_BEFORE_END),s=a(s).lastForward(),T=!0);s||(s=o);s.is("table")?(i.setStartAt(s,CKEDITOR.POSITION_BEFORE_START),i.collapse(!0),s.remove()):(s.is({tbody:1,thead:1,tfoot:1})&&(s=b(s,"tr",T)),s.is("tr")&&(s=b(s,s.getParent().is("thead")?"th":"td",T)),(o=s.getBogus())&&o.remove(),i.moveToPosition(s,T?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}();V=function(){function a(i){i=new CKEDITOR.dom.walker(i);i.guard=function(i,o){return!o&&(i.type==CKEDITOR.NODE_ELEMENT?i.is(CKEDITOR.dtd.$list)||i.is(CKEDITOR.dtd.$listItem):void 0)};i.evaluator=function(i){return i.type==CKEDITOR.NODE_ELEMENT&&i.is(CKEDITOR.dtd.$listItem)};return i}return function(i){var o=i.startContainer,s=!1,T;T=i.clone();T.setStart(o,0);T=a(T).lastBackward();T||(T=i.clone(),T.setEndAt(o,CKEDITOR.POSITION_BEFORE_END),T=a(T).lastForward(),s=!0);T||(T=o);T.is(CKEDITOR.dtd.$list)?(i.setStartAt(T,CKEDITOR.POSITION_BEFORE_START),i.collapse(!0),T.remove()):((o=T.getBogus())&&o.remove(),i.moveToPosition(T,s?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),i.select())}}();j={eol:{detect:function(i,o){var s=i.range,T=s.clone(),_=s.clone(),S=new CKEDITOR.dom.elementPath(s.startContainer,o),P=new CKEDITOR.dom.elementPath(s.endContainer,o);T.collapse(1);_.collapse();S.block&&T.checkBoundaryOfElement(S.block,CKEDITOR.END)&&(s.setStartAfter(S.block),i.prependEolBr=1);P.block&&_.checkBoundaryOfElement(P.block,CKEDITOR.START)&&(s.setEndBefore(P.block),i.appendEolBr=1)},fix:function(i,o){var s=o.getDocument(),T;i.appendEolBr&&(T=this.createEolBr(s),i.fragment.append(T));!i.prependEolBr||T&&!T.getPrevious()||i.fragment.append(this.createEolBr(s),1)},createEolBr:function(i){return i.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(i){var o=i.range.getBoundaryNodes(),s=o.startNode,o=o.endNode;!o||!_(o)||s&&s.equals(o)||i.range.setEndBefore(o)}},tree:{rebuild:function(i,o){var s=i.range,T=s.getCommonAncestor(),_=new CKEDITOR.dom.elementPath(T,o),S=new CKEDITOR.dom.elementPath(s.startContainer,o),s=new CKEDITOR.dom.elementPath(s.endContainer,o),P;T.type==CKEDITOR.NODE_TEXT&&(T=T.getParent());if(_.blockLimit.is({tr:1,table:1})){var $=_.contains("table").getParent();P=function(i){return!i.equals($)}}else if(_.block&&_.block.is(CKEDITOR.dtd.$listItem)&&(S=S.contains(CKEDITOR.dtd.$list),s=s.contains(CKEDITOR.dtd.$list),!S.equals(s))){var V=_.contains(CKEDITOR.dtd.$list).getParent();P=function(i){return!i.equals(V)}}P||(P=function(i){return!i.equals(_.block)&&!i.equals(_.blockLimit)});this.rebuildFragment(i,o,T,P)},rebuildFragment:function(i,o,s,T){for(var _;s&&!s.equals(o)&&T(s);)_=s.clone(0,1),i.fragment.appendTo(_),i.fragment=_,s=s.getParent()}},cell:{shrink:function(i){i=i.range;var o=i.startContainer,s=i.endContainer,T=i.startOffset,_=i.endOffset;o.type==CKEDITOR.NODE_ELEMENT&&o.equals(s)&&o.is("tr")&&++T==_&&i.shrink(CKEDITOR.SHRINK_TEXT)}}};Y=function(){function a(i,o){var s=i.getParent();s.is(CKEDITOR.dtd.$inline)&&i[o?"insertBefore":"insertAfter"](s)}function b(i,o,s){a(o);a(s,1);for(var _;_=s.getNext();)_.insertAfter(o),o=_;T(i)&&i.remove()}function c(i,o){var s=new CKEDITOR.dom.range(i);s.setStartAfter(o.startNode);s.setEndBefore(o.endNode);return s}return{list:{detectMerge:function(i,o){var s=c(o,i.bookmark),T=s.startPath(),_=s.endPath(),S=T.contains(CKEDITOR.dtd.$list),P=_.contains(CKEDITOR.dtd.$list);i.mergeList=S&&P&&S.getParent().equals(P.getParent())&&!S.equals(P);i.mergeListItems=T.block&&_.block&&T.block.is(CKEDITOR.dtd.$listItem)&&_.block.is(CKEDITOR.dtd.$listItem);(i.mergeList||i.mergeListItems)&&(s=s.clone(),s.setStartBefore(i.bookmark.startNode),s.setEndAfter(i.bookmark.endNode),i.mergeListBookmark=s.createBookmark())},merge:function(i,o){if(i.mergeListBookmark){var s=i.mergeListBookmark.startNode,T=i.mergeListBookmark.endNode,_=new CKEDITOR.dom.elementPath(s,o),S=new CKEDITOR.dom.elementPath(T,o);if(i.mergeList){var P=_.contains(CKEDITOR.dtd.$list),$=S.contains(CKEDITOR.dtd.$list);P.equals($)||($.moveChildren(P),$.remove())}i.mergeListItems&&(_=_.contains(CKEDITOR.dtd.$listItem),S=S.contains(CKEDITOR.dtd.$listItem),_.equals(S)||b(S,s,T));s.remove();T.remove()}}},block:{detectMerge:function(i,o){if(!i.tableContentsRanges&&!i.mergeListBookmark){var s=new CKEDITOR.dom.range(o);s.setStartBefore(i.bookmark.startNode);s.setEndAfter(i.bookmark.endNode);i.mergeBlockBookmark=s.createBookmark()}},merge:function(i,o){if(i.mergeBlockBookmark&&!i.purgeTableBookmark){var s=i.mergeBlockBookmark.startNode,T=i.mergeBlockBookmark.endNode,_=new CKEDITOR.dom.elementPath(s,o),S=new CKEDITOR.dom.elementPath(T,o),_=_.block,S=S.block;_&&S&&!_.equals(S)&&b(S,s,T);s.remove();T.remove()}}},table:function(){function a(o){var s=[],T,_=new CKEDITOR.dom.walker(o),S=o.startPath().contains(i),P=o.endPath().contains(i),$={};_.guard=function(_,V){if(_.type==CKEDITOR.NODE_ELEMENT){var j="visited_"+(V?"out":"in");if(_.getCustomData(j))return;CKEDITOR.dom.element.setMarker($,_,j,1)}if(V&&S&&_.equals(S))T=o.clone(),T.setEndAt(S,CKEDITOR.POSITION_BEFORE_END),s.push(T);else if(!V&&P&&_.equals(P))T=o.clone(),T.setStartAt(P,CKEDITOR.POSITION_AFTER_START),s.push(T);else{(j=!V)&&(j=_.type==CKEDITOR.NODE_ELEMENT&&_.is(i)&&(!S||b(_,S))&&(!P||b(_,P)));if(!j&&(j=V))if(_.is(i))var j=S&&S.getAscendant("table",!0),Y=P&&P.getAscendant("table",!0),ee=_.getAscendant("table",!0),j=j&&j.contains(ee)||Y&&Y.contains(ee);else j=void 0;j&&(T=o.clone(),T.selectNodeContents(_),s.push(T))}};_.lastForward();CKEDITOR.dom.element.clearAllMarkers($);return s}function b(i,o){var s=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,T=i.getPosition(o);return T!==CKEDITOR.POSITION_IDENTICAL&&0===(T&s)}var i={td:1,th:1,caption:1};return{detectPurge:function(o){var s=o.range,T=s.clone();T.enlarge(CKEDITOR.ENLARGE_ELEMENT);var T=new CKEDITOR.dom.walker(T),_=0;T.evaluator=function(o){o.type==CKEDITOR.NODE_ELEMENT&&o.is(i)&&++_};T.checkForward();if(1<_){var T=s.startPath().contains("table"),S=s.endPath().contains("table");T&&S&&s.checkBoundaryOfElement(T,CKEDITOR.START)&&s.checkBoundaryOfElement(S,CKEDITOR.END)&&(s=o.range.clone(),s.setStartBefore(T),s.setEndAfter(S),o.purgeTableBookmark=s.createBookmark())}},detectRanges:function(o,s){var T=c(s,o.bookmark),_=T.clone(),S,P,$=T.getCommonAncestor();$.is(CKEDITOR.dtd.$tableContent)&&!$.is(i)&&($=$.getAscendant("table",!0));P=$;$=new CKEDITOR.dom.elementPath(T.startContainer,P);P=new CKEDITOR.dom.elementPath(T.endContainer,P);$=$.contains("table");P=P.contains("table");($||P)&&($&&P&&b($,P)?(o.tableSurroundingRange=_,_.setStartAt($,CKEDITOR.POSITION_AFTER_END),_.setEndAt(P,CKEDITOR.POSITION_BEFORE_START),_=T.clone(),_.setEndAt($,CKEDITOR.POSITION_AFTER_END),S=T.clone(),S.setStartAt(P,CKEDITOR.POSITION_BEFORE_START),S=a(_).concat(a(S))):$?P||(o.tableSurroundingRange=_,_.setStartAt($,CKEDITOR.POSITION_AFTER_END),T.setEndAt($,CKEDITOR.POSITION_AFTER_END)):(o.tableSurroundingRange=_,_.setEndAt(P,CKEDITOR.POSITION_BEFORE_START),T.setStartAt(P,CKEDITOR.POSITION_AFTER_START)),o.tableContentsRanges=S||a(T))},deleteRanges:function(i){for(var o;o=i.tableContentsRanges.pop();)o.extractContents(),T(o.startContainer)&&o.startContainer.appendBogus();i.tableSurroundingRange&&i.tableSurroundingRange.extractContents()},purge:function(i){if(i.purgeTableBookmark){var o=i.doc,s=i.range.clone(),o=o.createElement("p");o.insertBefore(i.purgeTableBookmark.startNode);s.moveToBookmark(i.purgeTableBookmark);s.deleteContents();i.range.moveToPosition(o,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(i){return!(i.range.startPath().contains(CKEDITOR.dtd.$listItem)&&i.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(i){i.startContainer.getDtd()["#"]||i.moveToClosestEditablePosition(null,!0)},autoParagraph:function(i,o){var s=o.startPath(),T;k(i,s.block,s.blockLimit)&&(T=g(i))&&(T=o.document.createElement(T),T.appendBogus(),o.insertNode(T),o.moveToPosition(T,CKEDITOR.POSITION_AFTER_START))}}}()}(),function(){function a(i){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(i)}function f(i,o){if(0===i.length||a(i[0].getEnclosedNode()))return!1;var s,T;if((s=!o&&1===i.length)&&!(s=i[0].collapsed)){var _=i[0];s=_.startContainer.getAscendant({td:1,th:1},!0);var S=_.endContainer.getAscendant({td:1,th:1},!0);T=CKEDITOR.tools.trim;s&&s.equals(S)&&!s.findOne("td, th, tr, tbody, table")?(_=_.cloneContents(),s=!_.getFirst()||T(_.getFirst().getText())!==T(s.getText())):s=!1}if(s)return!1;for(T=0;T<i.length;T++)if(s=i[T]._getTableElement(),!s)return!1;return!0}function b(i){function b(i){i=i.find("td, th");var o=[],s;for(s=0;s<i.count();s++)o.push(i.getItem(s));return o}var o=[],s,T;for(T=0;T<i.length;T++)s=i[T]._getTableElement(),s.is&&s.is({td:1,th:1})?o.push(s):o=o.concat(b(s));return o}function c(i){i=b(i);var o="",s=[],T,_;for(_=0;_<i.length;_++)T&&!T.equals(i[_].getAscendant("tr"))?(o+=s.join("\t")+"\n",T=i[_].getAscendant("tr"),s=[]):0===_&&(T=i[_].getAscendant("tr")),s.push(i[_].getText());return o+=s.join("\t")}function d(o){var T=(this||i).root.editor,_=T.getSelection(1);this.reset();S=!0;_.root.once("selectionchange",(function(i){i.cancel()}),null,null,0);_.selectRanges([o[0]]);_=(this||i)._.cache;_.ranges=new CKEDITOR.dom.rangeList(o);_.type=CKEDITOR.SELECTION_TEXT;_.selectedElement=o[0]._getTableElement();_.selectedText=c(o);_.nativeSel=null;(this||i).isFake=1;(this||i).rev=s++;T._.fakeSelection=this||i;S=!1;(this||i).root.fire("selectionchange")}function l(){var o=(this||i)._.fakeSelection,s;if(o){s=this.getSelection(1);var T;if(!(T=!s)&&(T=!s.isHidden())){T=o;var _=s.getRanges(),S=T.getRanges(),P=_.length&&_[0]._getTableElement()&&_[0]._getTableElement().getAscendant("table",!0),$=S.length&&S[0]._getTableElement()&&S[0]._getTableElement().getAscendant("table",!0),V=1===_.length&&_[0]._getTableElement()&&_[0]._getTableElement().is("table"),j=1===S.length&&S[0]._getTableElement()&&S[0]._getTableElement().is("table");if(a(T.getSelectedElement()))T=!1;else{var Y=1===_.length&&_[0].collapsed,S=f(_,!!CKEDITOR.env.webkit)&&f(S);P=!(!P||!$)&&(P.equals($)||$.contains(P));P&&(Y||S)?(V&&!j&&T.selectRanges(_),T=!0):T=!1}T=!T}T&&(o.reset(),o=0)}if(o||(o=s||this.getSelection(1),o&&o.getType()!=CKEDITOR.SELECTION_NONE)){this.fire("selectionCheck",o);s=this.elementPath();s.compare((this||i)._.selectionPreviousPath)||(T=(this||i)._.selectionPreviousPath&&(this||i)._.selectionPreviousPath.blockLimit.equals(s.blockLimit),!CKEDITOR.env.webkit&&!CKEDITOR.env.gecko||T||((this||i)._.previousActive=(this||i).document.getActive()),(this||i)._.selectionPreviousPath=s,this.fire("selectionChange",{selection:o,path:s}))}}function k(){$=!0;P||(g.call(this||i),P=CKEDITOR.tools.setTimeout(g,200,this||i))}function g(){P=null;$&&(CKEDITOR.tools.setTimeout(l,0,this||i),$=!1)}function h(i){return!(!V(i)&&(i.type!=CKEDITOR.NODE_ELEMENT||i.is(CKEDITOR.dtd.$empty)))}function m(i){function b(o,s){return!(!o||o.type==CKEDITOR.NODE_TEXT)&&i.clone()["moveToElementEdit"+(s?"End":"Start")](o)}if(!(i.root instanceof CKEDITOR.editable))return!1;var o=i.startContainer,s=i.getPreviousNode(h,null,o),T=i.getNextNode(h,null,o);return!(!b(s)&&!b(T,1)&&(s||T||o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()&&o.getBogus()))}function e(i){n(i,!1);var o=i.getDocument().createText(T);i.setCustomData("cke-fillingChar",o);return o}function n(i,o){var s=i&&i.removeCustomData("cke-fillingChar");if(s){if(!1!==o){var _=i.getDocument().getSelection().getNative(),S=_&&"None"!=_.type&&_.getRangeAt(0),P=T.length;if(s.getLength()>P&&S&&S.intersectsNode(s.$)){var $=[{node:_.anchorNode,offset:_.anchorOffset},{node:_.focusNode,offset:_.focusOffset}];_.anchorNode==s.$&&_.anchorOffset>P&&($[0].offset-=P);_.focusNode==s.$&&_.focusOffset>P&&($[1].offset-=P)}}s.setText(q(s.getText(),1));$&&(s=i.getDocument().$,_=s.getSelection(),s=s.createRange(),s.setStart($[0].node,$[0].offset),s.collapse(!0),_.removeAllRanges(),_.addRange(s),_.extend($[1].node,$[1].offset))}}function q(i,o){return o?i.replace(_,(function(i,o){return o?" ":""})):i.replace(T,"")}function y(i,o){var s=o&&CKEDITOR.tools.htmlEncode(o)||"&nbsp;",s=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie&&14>CKEDITOR.env.version?"display:none":"position:fixed;top:0;left:-1000px;width:0;height:0;overflow:hidden;")+'">'+s+"</div>",i.document);i.fire("lockSnapshot");i.editable().append(s);var T=i.getSelection(1),_=i.createRange(),S=T.root.on("selectionchange",(function(i){i.cancel()}),null,null,0);_.setStartAt(s,CKEDITOR.POSITION_AFTER_START);_.setEndAt(s,CKEDITOR.POSITION_BEFORE_END);T.selectRanges([_]);S.removeListener();i.fire("unlockSnapshot");i._.hiddenSelectionContainer=s}function u(i){var o={37:1,39:1,8:1,46:1};return function(s){var T=s.data.getKeystroke();if(o[T]){var _=i.getSelection().getRanges(),S=_[0];1==_.length&&S.collapsed&&(T=S[38>T?"getPreviousEditableNode":"getNextEditableNode"]())&&T.type==CKEDITOR.NODE_ELEMENT&&"false"==T.getAttribute("contenteditable")&&(i.getSelection().fake(T),s.data.preventDefault(),s.cancel())}}}function p(i){for(var o=0;o<i.length;o++){var s=i[o];s.getCommonAncestor().isReadOnly()&&i.splice(o,1);if(!s.collapsed){if(s.startContainer.isReadOnly())for(var T=s.startContainer,_;T&&!((_=T.type==CKEDITOR.NODE_ELEMENT)&&T.is("body")||!T.isReadOnly());)_&&"false"==T.getAttribute("contentEditable")&&s.setStartAfter(T),T=T.getParent();T=s.startContainer;_=s.endContainer;var S=s.startOffset,P=s.endOffset,$=s.clone();T&&T.type==CKEDITOR.NODE_TEXT&&(S>=T.getLength()?$.setStartAfter(T):$.setStartBefore(T));_&&_.type==CKEDITOR.NODE_TEXT&&(P?$.setEndAfter(_):$.setEndBefore(_));T=new CKEDITOR.dom.walker($);T.evaluator=function(T){if(T.type==CKEDITOR.NODE_ELEMENT&&T.isReadOnly()){var _=s.clone();s.setEndBefore(T);s.collapsed&&i.splice(o--,1);T.getPosition($.endContainer)&CKEDITOR.POSITION_CONTAINS||(_.setStartAfter(T),_.collapsed||i.splice(o+1,0,_));return!0}return!1};T.next()}}return i}var o="function"!=typeof window.getSelection,s=1,T=CKEDITOR.tools.repeat("​",7),_=new RegExp(T+"( )?","g"),S,P,$,V=CKEDITOR.dom.walker.invisible(1),j=function(){function a(i){return function(o){var s=o.editor.createRange();s.moveToClosestEditablePosition(o.selected,i)&&o.editor.getSelection().selectRanges([s]);return!1}}function b(i){return function(o){var s=o.editor,T=s.createRange(),_;if(!s.readOnly)return(_=T.moveToClosestEditablePosition(o.selected,i))||(_=T.moveToClosestEditablePosition(o.selected,!i)),_&&s.getSelection().selectRanges([T]),s.fire("saveSnapshot"),o.selected.remove(),_||(T.moveToElementEditablePosition(s.editable()),s.getSelection().selectRanges([T])),s.fire("saveSnapshot"),!1}}var i=a(),o=a(1);return{37:i,38:i,39:o,40:o,8:b(),46:b(1)}}();CKEDITOR.on("instanceCreated",(function(i){function b(){var i=s.getSelection();i&&i.removeAllRanges()}var s=i.editor;s.on("contentDom",(function(){function a(){j=new CKEDITOR.dom.selection(s.getSelection());j.lock()}function b(){T.removeListener("mouseup",b);P.removeListener("mouseup",b);var o=CKEDITOR.document.$.selection,s=o.createRange();"None"!=o.type&&s.parentElement()&&s.parentElement().ownerDocument==i.$&&s.select()}function e(i){i=i.getRanges()[0];return i&&(i=i.startContainer.getAscendant((function(i){return i.type==CKEDITOR.NODE_ELEMENT&&i.hasAttribute("contenteditable")}),!0))&&"false"===i.getAttribute("contenteditable")?i:null}var i=s.document,T=CKEDITOR.document,_=s.editable(),S=i.getBody(),P=i.getDocumentElement(),$=_.isInline(),V,j;CKEDITOR.env.gecko&&_.attachListener(_,"focus",(function(i){i.removeListener();0!==V&&(i=s.getSelection().getNative())&&i.isCollapsed&&i.anchorNode==_.$&&(i=s.createRange(),i.moveToElementEditStart(_),i.select())}),null,null,-2);_.attachListener(_,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",(function(){if(V&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){V=s._.previousActive&&s._.previousActive.equals(i.getActive());var o=null!=s._.previousScrollTop&&s._.previousScrollTop!=_.$.scrollTop;CKEDITOR.env.webkit&&V&&o&&(_.$.scrollTop=s._.previousScrollTop)}s.unlockSelection(V);V=0}),null,null,-1);_.attachListener(_,"mousedown",(function(){V=0}));(CKEDITOR.env.ie||$)&&(o?_.attachListener(_,"beforedeactivate",a,null,null,-1):_.attachListener(s,"selectionCheck",a,null,null,-1),_.attachListener(_,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusout":"blur",(function(){s.lockSelection(j);V=1}),null,null,-1),_.attachListener(_,"mousedown",(function(){V=0})));if(CKEDITOR.env.ie&&!$){var Y;_.attachListener(_,"mousedown",(function(i){2==i.data.$.button&&((i=s.document.getSelection())&&i.getType()!=CKEDITOR.SELECTION_NONE||(Y=s.window.getScrollPosition()))}));_.attachListener(_,"mouseup",(function(i){2==i.data.$.button&&Y&&(s.document.$.documentElement.scrollLeft=Y.x,s.document.$.documentElement.scrollTop=Y.y);Y=null}));if("BackCompat"!=i.$.compatMode){if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat){var ee,te;P.on("mousedown",(function(i){function b(i){i=i.data.$;if(ee){var o=S.$.createTextRange();try{o.moveToPoint(i.clientX,i.clientY)}catch(i){}ee.setEndPoint(0>te.compareEndPoints("StartToStart",o)?"EndToEnd":"StartToStart",o);ee.select()}}function c(){P.removeListener("mousemove",b);T.removeListener("mouseup",c);P.removeListener("mouseup",c);ee.select()}i=i.data;if(i.getTarget().is("html")&&i.$.y<P.$.clientHeight&&i.$.x<P.$.clientWidth){ee=S.$.createTextRange();try{ee.moveToPoint(i.$.clientX,i.$.clientY)}catch(i){}te=ee.duplicate();P.on("mousemove",b);T.on("mouseup",c);P.on("mouseup",c)}}))}7<CKEDITOR.env.version&&11>CKEDITOR.env.version&&P.on("mousedown",(function(i){i.data.getTarget().is("html")&&(T.on("mouseup",b),P.on("mouseup",b))}))}}_.attachListener(_,"selectionchange",l,s);_.attachListener(_,"keyup",k,s);_.attachListener(_,"touchstart",k,s);_.attachListener(_,"touchend",k,s);CKEDITOR.env.ie&&_.attachListener(_,"keydown",(function(i){var o=this.getSelection(1),s=e(o);s&&!s.equals(_)&&(o.selectElement(s),i.data.preventDefault())}),s);_.attachListener(_,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",(function(){s.forceNextSelectionCheck();s.selectionChange(1)}));if($&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var ne;_.attachListener(_,"mousedown",(function(){ne=1}));_.attachListener(i.getDocumentElement(),"mouseup",(function(){ne&&k.call(s);ne=0}))}else _.attachListener(CKEDITOR.env.ie?_:i.getDocumentElement(),"mouseup",k,s);CKEDITOR.env.webkit&&_.attachListener(i,"keydown",(function(i){switch(i.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:_.hasFocus&&n(_)}}),null,null,-1);_.attachListener(_,"keydown",u(s),null,null,-1)}));s.on("setData",(function(){s.unlockSelection();CKEDITOR.env.webkit&&b()}));s.on("contentDomUnload",(function(){s.unlockSelection()}));CKEDITOR.env.ie9Compat&&s.on("beforeDestroy",b,null,null,9);s.on("dataReady",(function(){delete s._.fakeSelection;delete s._.hiddenSelectionContainer;s.selectionChange(1)}));s.on("loadSnapshot",(function(){var i=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),o=s.editable().getLast(i);o&&o.hasAttribute("data-cke-hidden-sel")&&(o.remove(),CKEDITOR.env.gecko&&(i=s.editable().getFirst(i))&&i.is("br")&&i.getAttribute("_moz_editor_bogus_node")&&i.remove())}),null,null,100);s.on("key",(function(i){if("wysiwyg"==s.mode){var o=s.getSelection();if(o.isFake){var T=j[i.data.keyCode];if(T)return T({editor:s,selected:o.getSelectedElement(),selection:o,keyEvent:i})}}}))}));CKEDITOR.env.webkit&&CKEDITOR.on("instanceReady",(function(i){var o=i.editor;o.on("selectionChange",(function(){var i=o.editable(),s=i.getCustomData("cke-fillingChar");s&&(s.getCustomData("ready")?(n(i),i.editor.fire("selectionCheck")):s.setCustomData("ready",1))}),null,null,-1);o.on("beforeSetMode",(function(){n(o.editable())}),null,null,-1);o.on("getSnapshot",(function(i){i.data&&(i.data=q(i.data))}),o,null,20);o.on("toDataFormat",(function(i){i.data.dataValue=q(i.data.dataValue)}),null,null,0)}));CKEDITOR.editor.prototype.selectionChange=function(o){(o?l:k).call(this||i)};CKEDITOR.editor.prototype.getSelection=function(o){return!(this||i)._.savedSelection&&!(this||i)._.fakeSelection||o?(o=this.editable())&&"wysiwyg"==(this||i).mode?new CKEDITOR.dom.selection(o):null:(this||i)._.savedSelection||(this||i)._.fakeSelection};CKEDITOR.editor.prototype.lockSelection=function(o){o=o||this.getSelection(1);return o.getType()!=CKEDITOR.SELECTION_NONE&&(!o.isLocked&&o.lock(),(this||i)._.savedSelection=o,!0)};CKEDITOR.editor.prototype.unlockSelection=function(o){var s=(this||i)._.savedSelection;return!!s&&(s.unlock(o),delete(this||i)._.savedSelection,!0)};CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete(this||i)._.selectionPreviousPath};CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this||i)};CKEDITOR.dom.range.prototype.select=function(){var o=(this||i).root instanceof CKEDITOR.editable?(this||i).root.editor.getSelection():new CKEDITOR.dom.selection((this||i).root);o.selectRanges([this||i]);return o};CKEDITOR.SELECTION_NONE=1;CKEDITOR.SELECTION_TEXT=2;CKEDITOR.SELECTION_ELEMENT=3;CKEDITOR.dom.selection=function(o){if(o instanceof CKEDITOR.dom.selection){var T=o;o=o.root}var _=o instanceof CKEDITOR.dom.element;(this||i).rev=T?T.rev:s++;(this||i).document=o instanceof CKEDITOR.dom.document?o:o.getDocument();(this||i).root=_?o:(this||i).document.getBody();(this||i).isLocked=0;(this||i)._={cache:{}};if(T)return CKEDITOR.tools.extend((this||i)._.cache,T._.cache),(this||i).isFake=T.isFake,(this||i).isLocked=T.isLocked,this||i;o=this.getNative();var S,P;if(o)if(o.getRangeAt)S=(P=o.rangeCount&&o.getRangeAt(0))&&new CKEDITOR.dom.node(P.commonAncestorContainer);else{try{P=o.createRange()}catch(i){}S=P&&CKEDITOR.dom.element.get(P.item&&P.item(0)||P.parentElement())}(!S||S.type!=CKEDITOR.NODE_ELEMENT&&S.type!=CKEDITOR.NODE_TEXT||!(this||i).root.equals(S)&&!(this||i).root.contains(S))&&((this||i)._.cache.type=CKEDITOR.SELECTION_NONE,(this||i)._.cache.startElement=null,(this||i)._.cache.selectedElement=null,(this||i)._.cache.selectedText="",(this||i)._.cache.ranges=new CKEDITOR.dom.rangeList);return this||i};var Y={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:q,_createFillingCharSequenceNode:e,FILLING_CHAR_SEQUENCE:T});CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==(this||i)._.cache.nativeSel?(this||i)._.cache.nativeSel:(this||i)._.cache.nativeSel=o?(this||i).document.$.selection:(this||i).document.getWindow().$.getSelection()},getType:o?function(){var o=(this||i)._.cache;if(o.type)return o.type;var s=CKEDITOR.SELECTION_NONE;try{var T=this.getNative(),_=T.type;"Text"==_&&(s=CKEDITOR.SELECTION_TEXT);"Control"==_&&(s=CKEDITOR.SELECTION_ELEMENT);T.createRange().parentElement()&&(s=CKEDITOR.SELECTION_TEXT)}catch(i){}return o.type=s}:function(){var o=(this||i)._.cache;if(o.type)return o.type;var s=CKEDITOR.SELECTION_TEXT,T=this.getNative();if(T&&T.rangeCount){if(1==T.rangeCount){var T=T.getRangeAt(0),_=T.startContainer;_==T.endContainer&&1==_.nodeType&&1==T.endOffset-T.startOffset&&Y[_.childNodes[T.startOffset].nodeName.toLowerCase()]&&(s=CKEDITOR.SELECTION_ELEMENT)}}else s=CKEDITOR.SELECTION_NONE;return o.type=s},getRanges:function(){var s=o?function(){function a(i){return new CKEDITOR.dom.node(i).getIndex()}var b=function(i,o){i=i.duplicate();i.collapse(o);var s=i.parentElement();if(!s.hasChildNodes())return{container:s,offset:0};for(var T=s.children,_,S,P=i.duplicate(),$=0,V=T.length-1,j=-1,Y,ee;$<=V;)if(j=Math.floor(($+V)/2),_=T[j],P.moveToElementText(_),Y=P.compareEndPoints("StartToStart",i),0<Y)V=j-1;else{if(!(0>Y))return{container:s,offset:a(_)};$=j+1}if(-1==j||j==T.length-1&&0>Y){P.moveToElementText(s);P.setEndPoint("StartToStart",i);P=P.text.replace(/(\r\n|\r)/g,"\n").length;T=s.childNodes;if(!P)return _=T[T.length-1],_.nodeType!=CKEDITOR.NODE_TEXT?{container:s,offset:T.length}:{container:_,offset:_.nodeValue.length};for(s=T.length;0<P&&0<s;)S=T[--s],S.nodeType==CKEDITOR.NODE_TEXT&&(ee=S,P-=S.nodeValue.length);return{container:ee,offset:-P}}P.collapse(0<Y);P.setEndPoint(0<Y?"StartToStart":"EndToStart",i);P=P.text.replace(/(\r\n|\r)/g,"\n").length;if(!P)return{container:s,offset:a(_)+(0<Y?0:1)};for(;0<P;)try{S=_[0<Y?"previousSibling":"nextSibling"],S.nodeType==CKEDITOR.NODE_TEXT&&(P-=S.nodeValue.length,ee=S),_=S}catch(i){return{container:s,offset:a(_)}}return{container:ee,offset:0<Y?-P:ee.nodeValue.length+P}};return function(){var o=this.getNative(),s=o&&o.createRange(),T=this.getType();if(!o)return[];if(T==CKEDITOR.SELECTION_TEXT)return o=new CKEDITOR.dom.range((this||i).root),T=b(s,!0),o.setStart(new CKEDITOR.dom.node(T.container),T.offset),T=b(s),o.setEnd(new CKEDITOR.dom.node(T.container),T.offset),o.endContainer.getPosition(o.startContainer)&CKEDITOR.POSITION_PRECEDING&&o.endOffset<=o.startContainer.getIndex()&&o.collapse(),[o];if(T==CKEDITOR.SELECTION_ELEMENT){for(var T=[],_=0;_<s.length;_++){for(var S=s.item(_),P=S.parentNode,$=0,o=new CKEDITOR.dom.range((this||i).root);$<P.childNodes.length&&P.childNodes[$]!=S;$++);o.setStart(new CKEDITOR.dom.node(P),$);o.setEnd(new CKEDITOR.dom.node(P),$+1);T.push(o)}return T}return[]}}():function(){var o=[],s,T=this.getNative();if(!T)return o;for(var _=0;_<T.rangeCount;_++){var S=T.getRangeAt(_);s=new CKEDITOR.dom.range((this||i).root);s.setStart(new CKEDITOR.dom.node(S.startContainer),S.startOffset);s.setEnd(new CKEDITOR.dom.node(S.endContainer),S.endOffset);o.push(s)}return o};return function(o){var T=(this||i)._.cache,_=T.ranges;_||(T.ranges=_=new CKEDITOR.dom.rangeList(s.call(this||i)));return o?p(new CKEDITOR.dom.rangeList(_.slice())):_}}(),getStartElement:function(){var o=(this||i)._.cache;if(void 0!==o.startElement)return o.startElement;var s;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var T=this.getRanges()[0];if(T){if(T.collapsed)s=T.startContainer,s.type!=CKEDITOR.NODE_ELEMENT&&(s=s.getParent());else{for(T.optimize();s=T.startContainer,T.startOffset==(s.getChildCount?s.getChildCount():s.getLength())&&!s.isBlockBoundary();)T.setStartAfter(s);s=T.startContainer;if(s.type!=CKEDITOR.NODE_ELEMENT)return s.getParent();if((s=s.getChild(T.startOffset))&&s.type==CKEDITOR.NODE_ELEMENT)for(T=s.getFirst();T&&T.type==CKEDITOR.NODE_ELEMENT;)s=T,T=T.getFirst();else s=T.startContainer}s=s.$}}return o.startElement=s?new CKEDITOR.dom.element(s):null},getSelectedElement:function(){var o=(this||i)._.cache;if(void 0!==o.selectedElement)return o.selectedElement;var s=this||i,T=CKEDITOR.tools.tryThese((function(){return s.getNative().createRange().item(0)}),(function(){for(var i=s.getRanges()[0].clone(),o,T,_=2;_&&!((o=i.getEnclosedNode())&&o.type==CKEDITOR.NODE_ELEMENT&&Y[o.getName()]&&(T=o));_--)i.shrink(CKEDITOR.SHRINK_ELEMENT);return T&&T.$}));return o.selectedElement=T?new CKEDITOR.dom.element(T):null},getSelectedText:function(){var s=(this||i)._.cache;if(void 0!==s.selectedText)return s.selectedText;var T=this.getNative(),T=o?"Control"==T.type?"":T.createRange().text:T.toString();return s.selectedText=T},lock:function(){this.getRanges();this.getStartElement();this.getSelectedElement();this.getSelectedText();(this||i)._.cache.nativeSel=null;(this||i).isLocked=1},unlock:function(o){if((this||i).isLocked){if(o)var s=this.getSelectedElement(),T=this.getRanges(),_=(this||i).isFake;(this||i).isLocked=0;this.reset();o&&(o=s||T[0]&&T[0].getCommonAncestor())&&o.getAscendant("body",1)&&(f(T)?d.call(this||i,T):_?this.fake(s):s?this.selectElement(s):this.selectRanges(T))}},reset:function(){(this||i)._.cache={};(this||i).isFake=0;var o=(this||i).root.editor;if(o&&o._.fakeSelection)if((this||i).rev==o._.fakeSelection.rev){delete o._.fakeSelection;var T=o._.hiddenSelectionContainer;if(T){var _=o.checkDirty();o.fire("lockSnapshot");T.remove();o.fire("unlockSnapshot");!_&&o.resetDirty()}delete o._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");(this||i).rev=s++},selectElement:function(o){var s=new CKEDITOR.dom.range((this||i).root);s.setStartBefore(o);s.setEndAfter(o);this.selectRanges([s])},selectRanges:function(s){var T=(this||i).root.editor,_=T&&T._.hiddenSelectionContainer;this.reset();if(_)for(var _=(this||i).root,P,$=0;$<s.length;++$)P=s[$],P.endContainer.equals(_)&&(P.endOffset=Math.min(P.endOffset,_.getChildCount()));if(s.length)if((this||i).isLocked){var V=CKEDITOR.document.getActive();this.unlock();this.selectRanges(s);this.lock();V&&!V.equals((this||i).root)&&V.focus()}else{var j;var ee,te;1==s.length&&!(te=s[0]).collapsed&&(j=te.getEnclosedNode())&&j.type==CKEDITOR.NODE_ELEMENT&&(te=te.clone(),te.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(ee=te.getEnclosedNode())&&ee.type==CKEDITOR.NODE_ELEMENT&&(j=ee),"false"==j.getAttribute("contenteditable"))||(j=void 0);if(j)this.fake(j);else if(T&&T.plugins.tableselection&&T.plugins.tableselection.isSupportedEnvironment()&&f(s)&&!S&&!s[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored"))d.call(this||i,s);else{if(o){ee=CKEDITOR.dom.walker.whitespaces(!0);j=/\ufeff|\u00a0/;te={table:1,tbody:1,tr:1};1<s.length&&(T=s[s.length-1],s[0].setEnd(T.endContainer,T.endOffset));T=s[0];s=T.collapsed;var ne,ie,oe;if((_=T.getEnclosedNode())&&_.type==CKEDITOR.NODE_ELEMENT&&_.getName()in Y&&(!_.is("a")||!_.getText()))try{oe=_.$.createControlRange();oe.addElement(_.$);oe.select();return}catch(i){}(T.startContainer.type==CKEDITOR.NODE_ELEMENT&&T.startContainer.getName()in te||T.endContainer.type==CKEDITOR.NODE_ELEMENT&&T.endContainer.getName()in te)&&(T.shrink(CKEDITOR.NODE_ELEMENT,!0),s=T.collapsed);oe=T.createBookmark();te=oe.startNode;s||(V=oe.endNode);oe=T.document.$.body.createTextRange();oe.moveToElementText(te.$);oe.moveStart("character",1);V?(j=T.document.$.body.createTextRange(),j.moveToElementText(V.$),oe.setEndPoint("EndToEnd",j),oe.moveEnd("character",-1)):(ne=te.getNext(ee),ie=te.hasAscendant("pre"),ne=!(ne&&ne.getText&&ne.getText().match(j))&&(ie||!te.hasPrevious()||te.getPrevious().is&&te.getPrevious().is("br")),ie=T.document.createElement("span"),ie.setHtml("&#65279;"),ie.insertBefore(te),ne&&T.document.createText("\ufeff").insertBefore(te));T.setStartBefore(te);te.remove();s?(ne?(oe.moveStart("character",-1),oe.select(),T.document.$.selection.clear()):oe.select(),T.moveToPosition(ie,CKEDITOR.POSITION_BEFORE_START),ie.remove()):(T.setEndBefore(V),V.remove(),oe.select())}else{V=this.getNative();if(!V)return;this.removeAllRanges();for(oe=0;oe<s.length;oe++)if(oe<s.length-1&&(ne=s[oe],ie=s[oe+1],j=ne.clone(),j.setStart(ne.endContainer,ne.endOffset),j.setEnd(ie.startContainer,ie.startOffset),!j.collapsed&&(j.shrink(CKEDITOR.NODE_ELEMENT,!0),T=j.getCommonAncestor(),j=j.getEnclosedNode(),T.isReadOnly()||j&&j.isReadOnly()))){ie.setStart(ne.startContainer,ne.startOffset);s.splice(oe--,1)}else{T=s[oe];ie=(this||i).document.$.createRange();T.collapsed&&CKEDITOR.env.webkit&&m(T)&&(j=e((this||i).root),T.insertNode(j),(ne=j.getNext())&&!j.getPrevious()&&ne.type==CKEDITOR.NODE_ELEMENT&&"br"==ne.getName()?(n((this||i).root),T.moveToPosition(ne,CKEDITOR.POSITION_BEFORE_START)):T.moveToPosition(j,CKEDITOR.POSITION_AFTER_END));ie.setStart(T.startContainer.$,T.startOffset);try{ie.setEnd(T.endContainer.$,T.endOffset)}catch(i){if(!(0<=i.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")))throw i;T.collapse(1),ie.setEnd(T.endContainer.$,T.endOffset)}V.addRange(ie)}}this.reset();(this||i).root.fire("selectionchange")}}},fake:function(o,T){var _=(this||i).root.editor;void 0===T&&o.hasAttribute("aria-label")&&(T=o.getAttribute("aria-label"));this.reset();y(_,T);var S=(this||i)._.cache,P=new CKEDITOR.dom.range((this||i).root);P.setStartBefore(o);P.setEndAfter(o);S.ranges=new CKEDITOR.dom.rangeList(P);S.selectedElement=S.startElement=o;S.type=CKEDITOR.SELECTION_ELEMENT;S.selectedText=S.nativeSel=null;(this||i).isFake=1;(this||i).rev=s++;_._.fakeSelection=this||i;(this||i).root.fire("selectionchange")},isHidden:function(){var i=this.getCommonAncestor();i&&i.type==CKEDITOR.NODE_TEXT&&(i=i.getParent());return!(!i||!i.data("cke-hidden-sel"))},isInTable:function(i){return f(this.getRanges(),i)},isCollapsed:function(){var i=this.getRanges();return 1===i.length&&i[0].collapsed},createBookmarks:function(o){o=this.getRanges().createBookmarks(o);(this||i).isFake&&(o.isFake=1);return o},createBookmarks2:function(o){o=this.getRanges().createBookmarks2(o);(this||i).isFake&&(o.isFake=1);return o},selectBookmarks:function(o){for(var s=[],T,_=0;_<o.length;_++){var S=new CKEDITOR.dom.range((this||i).root);S.moveToBookmark(o[_]);s.push(S)}o.isFake&&(T=f(s)?s[0]._getTableElement():s[0].getEnclosedNode(),T&&T.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),o.isFake=0));o.isFake&&!f(s)?this.fake(T):this.selectRanges(s);return this||i},getCommonAncestor:function(){var i=this.getRanges();return i.length?i[0].startContainer.getCommonAncestor(i[i.length-1].endContainer):null},scrollIntoView:function(){(this||i).type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var i=this.getNative();try{i&&i[o?"empty":"removeAllRanges"]()}catch(i){}this.reset()}}}}(),"use strict",CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function a(i,o){for(var s,T;(i=i.getParent())&&!i.equals(o);)if(i.getAttribute("data-nostyle"))s=i;else if(!T){var _=i.getAttribute("contentEditable");"false"==_?s=i:"true"==_&&(T=1)}return s}function f(i,o,s,T){return(i.getPosition(o)|T)==T&&(!s.childRule||s.childRule(i))}function b(o){var s=o.document;if(o.collapsed)s=w(this||i,s),o.insertNode(s),o.moveToPosition(s,CKEDITOR.POSITION_BEFORE_END);else{var T=(this||i).element,_=(this||i)._.definition,P,j=_.ignoreReadonly,Y=j||_.includeReadonly;null==Y&&(Y=o.root.getCustomData("cke_includeReadonly"));var ee=CKEDITOR.dtd[T];ee||(P=!0,ee=CKEDITOR.dtd.span);o.enlarge(CKEDITOR.ENLARGE_INLINE,1);o.trim();var te=o.createBookmark(),ne=te.startNode,ie=te.endNode,oe=ne,ae;if(!j){var re=o.getCommonAncestor(),j=a(ne,re),re=a(ie,re);j&&(oe=j.getNextSourceNode(!0));re&&(ie=re)}for(oe.getPosition(ie)==CKEDITOR.POSITION_FOLLOWING&&(oe=0);oe;){j=!1;if(oe.equals(ie))oe=null,j=!0;else{var se=oe.type==CKEDITOR.NODE_ELEMENT?oe.getName():null,re=se&&"false"==oe.getAttribute("contentEditable"),le=se&&oe.getAttribute("data-nostyle");if(se&&oe.data("cke-bookmark")||oe.type===CKEDITOR.NODE_COMMENT){oe=oe.getNextSourceNode(!0);continue}if(re&&Y&&CKEDITOR.dtd.$block[se])for(var ce=oe,de=d(ce),ue=void 0,he=de.length,fe=0,ce=he&&new CKEDITOR.dom.range(ce.getDocument());fe<he;++fe){var ue=de[fe],ge=CKEDITOR.filter.instances[ue.data("cke-filter")];(ge?ge.check(this||i):1)&&(ce.selectNodeContents(ue),b.call(this||i,ce))}de=se?!ee[se]||le||re&&!Y?0:f(oe,ie,_,$):1;if(de){if(ue=oe.getParent(),de=_,he=T,fe=P,!ue||!(ue.getDtd()||CKEDITOR.dtd.span)[he]&&!fe||de.parentRule&&!de.parentRule(ue))j=!0;else if(ae||se&&CKEDITOR.dtd.$removeEmpty[se]&&(oe.getPosition(ie)|$)!=$||(ae=o.clone(),ae.setStartBefore(oe)),se=oe.type,se==CKEDITOR.NODE_TEXT||re||se==CKEDITOR.NODE_ELEMENT&&!oe.getChildCount()){for(var se=oe,me;(j=!se.getNext(S))&&(me=se.getParent(),ee[me.getName()])&&f(me,ne,_,V);)se=me;ae.setEndAfter(se)}}else j=!0;oe=oe.getNextSourceNode(le||re)}if(j&&ae&&!ae.collapsed){for(var j=w(this||i,s),re=j.hasAttributes(),le=ae.getCommonAncestor(),se={},de={},ue={},he={},Ee,pe,Te;j&&le;){if(le.getName()==T){for(Ee in _.attributes)!he[Ee]&&(Te=le.getAttribute(pe))&&(j.getAttribute(Ee)==Te?de[Ee]=1:he[Ee]=1);for(pe in _.styles)!ue[pe]&&(Te=le.getStyle(pe))&&(j.getStyle(pe)==Te?se[pe]=1:ue[pe]=1)}le=le.getParent()}for(Ee in de)j.removeAttribute(Ee);for(pe in se)j.removeStyle(pe);re&&!j.hasAttributes()&&(j=null);j?(ae.extractContents().appendTo(j),ae.insertNode(j),u.call(this||i,j),j.mergeSiblings(),CKEDITOR.env.ie||j.$.normalize()):(j=new CKEDITOR.dom.element("span"),ae.extractContents().appendTo(j),ae.insertNode(j),u.call(this||i,j),j.remove(!0));ae=null}}o.moveToBookmark(te);o.shrink(CKEDITOR.SHRINK_TEXT);o.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function c(o){function b(){for(var i=new CKEDITOR.dom.elementPath(T.getParent()),o=new CKEDITOR.dom.elementPath(Y.getParent()),s=null,_=null,S=0;S<i.elements.length;S++){var P=i.elements[S];if(P==i.block||P==i.blockLimit)break;ee.checkElementRemovable(P,!0)&&(s=P)}for(S=0;S<o.elements.length;S++){P=o.elements[S];if(P==o.block||P==o.blockLimit)break;ee.checkElementRemovable(P,!0)&&(_=P)}_&&Y.breakParent(_);s&&T.breakParent(s)}o.enlarge(CKEDITOR.ENLARGE_INLINE,1);var s=o.createBookmark(),T=s.startNode,_=(this||i)._.definition.alwaysRemoveElement;if(o.collapsed){for(var S=new CKEDITOR.dom.elementPath(T.getParent(),o.root),P,$=0,V;$<S.elements.length&&(V=S.elements[$])&&V!=S.block&&V!=S.blockLimit;$++)if(this.checkElementRemovable(V)){var j;!_&&o.collapsed&&(o.checkBoundaryOfElement(V,CKEDITOR.END)||(j=o.checkBoundaryOfElement(V,CKEDITOR.START)))?(P=V,P.match=j?"start":"end"):(V.mergeSiblings(),V.is((this||i).element)?y.call(this||i,V):p(V,t(this||i)[V.getName()]))}if(P){_=T;for($=0;;$++){V=S.elements[$];if(V.equals(P))break;if(!V.match){V=V.clone();V.append(_);_=V}}_["start"==P.match?"insertBefore":"insertAfter"](P)}}else{var Y=s.endNode,ee=this||i;b();for(S=T;!S.equals(Y);)P=S.getNextSourceNode(),S.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(S)&&(S.getName()==(this||i).element?y.call(this||i,S):p(S,t(this||i)[S.getName()]),P.type==CKEDITOR.NODE_ELEMENT&&P.contains(T)&&(b(),P=T.getNext())),S=P}o.moveToBookmark(s);o.shrink(CKEDITOR.NODE_ELEMENT,!0)}function d(i){var o=[];i.forEach((function(i){if("true"==i.getAttribute("contenteditable"))return o.push(i),!1}),CKEDITOR.NODE_ELEMENT,!0);return o}function l(o){var s=o.getEnclosedNode()||o.getCommonAncestor(!1,!0);(o=new CKEDITOR.dom.elementPath(s,o.root).contains((this||i).element,1))&&!o.isReadOnly()&&r(o,this||i)}function k(o){var s=o.getCommonAncestor(!0,!0);if(o=new CKEDITOR.dom.elementPath(s,o.root).contains((this||i).element,1)){var s=(this||i)._.definition,T=s.attributes;if(T)for(var _ in T)o.removeAttribute(_,T[_]);if(s.styles)for(var S in s.styles)s.styles.hasOwnProperty(S)&&o.removeStyle(S)}}function g(o){var s=o.createBookmark(!0),T=o.createIterator();T.enforceRealBlocks=!0;(this||i)._.enterMode&&(T.enlargeBr=(this||i)._.enterMode!=CKEDITOR.ENTER_BR);for(var _,S=o.document,P;_=T.getNextParagraph();)!_.isReadOnly()&&(T.activeFilter?T.activeFilter.check(this||i):1)&&(P=w(this||i,S,_),m(_,P));o.moveToBookmark(s)}function h(o){var s=o.createBookmark(1),T=o.createIterator();T.enforceRealBlocks=!0;T.enlargeBr=(this||i)._.enterMode!=CKEDITOR.ENTER_BR;for(var _,S;_=T.getNextParagraph();)this.checkElementRemovable(_)&&(_.is("pre")?((S=(this||i)._.enterMode==CKEDITOR.ENTER_BR?null:o.document.createElement((this||i)._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&_.copyAttributes(S),m(_,S)):y.call(this||i,_));o.moveToBookmark(s)}function m(i,o){var s=!o;s&&(o=i.getDocument().createElement("div"),i.copyAttributes(o));var T=o&&o.is("pre"),_=i.is("pre"),S=!T&&_;if(T&&!_){_=o;(S=i.getBogus())&&S.remove();S=i.getHtml();S=n(S,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"");S=S.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1");S=S.replace(/([ \t\n\r]+|&nbsp;)/g," ");S=S.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var $=i.getDocument().createElement("div");$.append(_);_.$.outerHTML="<pre>"+S+"</pre>";_.copyAttributes($.getFirst());_=$.getFirst().remove()}else _.setHtml(S);o=_}else S?o=q(s?[i.getHtml()]:e(i),o):i.moveChildren(o);o.replace(i);if(T){var s=o,V;(V=s.getPrevious(P))&&V.type==CKEDITOR.NODE_ELEMENT&&V.is("pre")&&(T=n(V.getHtml(),/\n$/,"")+"\n\n"+n(s.getHtml(),/^\n/,""),CKEDITOR.env.ie?s.$.outerHTML="<pre>"+T+"</pre>":s.setHtml(T),V.remove())}else s&&v(o)}function e(i){var o=[];n(i.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,(function(i,o,s){return o+"</pre>"+s+"<pre>"})).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,(function(i,s){o.push(s)}));return o}function n(i,o,s){var T="",_="";i=i.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,(function(i,o,s){o&&(T=o);s&&(_=s);return""}));return T+i.replace(o,s)+_}function q(i,o){var s;1<i.length&&(s=new CKEDITOR.dom.documentFragment(o.getDocument()));for(var T=0;T<i.length;T++){var _=i[T],_=_.replace(/(\r\n|\r)/g,"\n"),_=n(_,/^[ \t]*\n/,""),_=n(_,/\n$/,""),_=n(_,/^[ \t]+|[ \t]+$/g,(function(i,o){return 1==i.length?"&nbsp;":o?" "+CKEDITOR.tools.repeat("&nbsp;",i.length-1):CKEDITOR.tools.repeat("&nbsp;",i.length-1)+" "})),_=_.replace(/\n/g,"<br>"),_=_.replace(/[ \t]{2,}/g,(function(i){return CKEDITOR.tools.repeat("&nbsp;",i.length-1)+" "}));if(s){var S=o.clone();S.setHtml(_);s.append(S)}else o.setHtml(_)}return s||o}function y(s,T){var _=(this||i)._.definition,S=_.attributes,_=_.styles,P=t(this||i)[s.getName()],$=CKEDITOR.tools.isEmpty(S)&&CKEDITOR.tools.isEmpty(_),V;for(V in S)("class"!=V&&!(this||i)._.definition.fullMatch||s.getAttribute(V)==x(V,S[V]))&&(T&&"data-"==V.slice(0,5)||($=s.hasAttribute(V),s.removeAttribute(V)));for(var j in _)(this||i)._.definition.fullMatch&&s.getStyle(j)!=x(j,_[j],!0)||($=$||!!s.getStyle(j),s.removeStyle(j));p(s,P,o[s.getName()]);$&&((this||i)._.definition.alwaysRemoveElement?v(s,1):!CKEDITOR.dtd.$block[s.getName()]||(this||i)._.enterMode==CKEDITOR.ENTER_BR&&!s.hasAttributes()?v(s):s.renameNode((this||i)._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function u(o){for(var s=t(this||i),T=o.getElementsByTag((this||i).element),_,S=T.count();0<=--S;)_=T.getItem(S),_.isReadOnly()||y.call(this||i,_,!0);for(var P in s)if(P!=(this||i).element)for(T=o.getElementsByTag(P),S=T.count()-1;0<=S;S--)_=T.getItem(S),_.isReadOnly()||p(_,s[P])}function p(i,o,s){if(o=o&&o.attributes)for(var T=0;T<o.length;T++){var _=o[T][0],S;if(S=i.getAttribute(_)){var P=o[T][1];(null===P||P.test&&P.test(S)||"string"==typeof P&&S==P)&&i.removeAttribute(_)}}s||v(i)}function v(i,o){if(!i.hasAttributes()||o)if(CKEDITOR.dtd.$block[i.getName()]){var s=i.getPrevious(P),T=i.getNext(P);!s||s.type!=CKEDITOR.NODE_TEXT&&s.isBlockBoundary({br:1})||i.append("br",1);!T||T.type!=CKEDITOR.NODE_TEXT&&T.isBlockBoundary({br:1})||i.append("br");i.remove(!0)}else s=i.getFirst(),T=i.getLast(),i.remove(!0),s&&(s.type==CKEDITOR.NODE_ELEMENT&&s.mergeSiblings(),T&&!s.equals(T)&&T.type==CKEDITOR.NODE_ELEMENT&&T.mergeSiblings())}function w(i,o,s){var T;T=i.element;"*"==T&&(T="span");T=new CKEDITOR.dom.element(T,o);s&&s.copyAttributes(T);T=r(T,i);o.getCustomData("doc_processing_style")&&T.hasAttribute("id")?T.removeAttribute("id"):o.setCustomData("doc_processing_style",1);return T}function r(i,o){var s=o._.definition,T=s.attributes,s=CKEDITOR.style.getStyleText(s);if(T)for(var _ in T)i.setAttribute(_,T[_]);s&&i.setAttribute("style",s);i.getDocument().removeCustomData("doc_processing_style");return i}function z(i,o){for(var s in i)i[s]=i[s].replace(_,(function(i,s){return o[s]}))}function t(i){if(i._.overrides)return i._.overrides;var o=i._.overrides={},s=i._.definition.overrides;if(s){CKEDITOR.tools.isArray(s)||(s=[s]);for(var T=0;T<s.length;T++){var _=s[T],S,P;"string"==typeof _?S=_.toLowerCase():(S=_.element?_.element.toLowerCase():i.element,P=_.attributes);_=o[S]||(o[S]={});if(P){var _=_.attributes=_.attributes||[],$;for($ in P)_.push([$.toLowerCase(),P[$]])}}}return o}function x(i,o,s){var T=new CKEDITOR.dom.element("span");T[s?"setStyle":"setAttribute"](i,o);return T[s?"getStyle":"getAttribute"](i)}function A(i,o){function c(i,o){return"font-family"==o.toLowerCase()?i.replace(/["']/g,""):i}"string"==typeof i&&(i=CKEDITOR.tools.parseCssText(i));"string"==typeof o&&(o=CKEDITOR.tools.parseCssText(o,!0));for(var s in i)if(!(s in o)||c(o[s],s)!=c(i[s],s)&&"inherit"!=i[s]&&"inherit"!=o[s])return!1;return!0}function B(o,s,T){var _=o.getRanges();s=s?(this||i).removeFromRange:(this||i).applyToRange;var S,P;if(o.isFake&&o.isInTable())for(S=[],P=0;P<_.length;P++)S.push(_[P].clone());for(var $=_.createIterator();P=$.getNextRange();)s.call(this||i,P,T);o.selectRanges(S||_)}var o={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},s={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},T=/\s*(?:;\s*|$)/,_=/#\((.+?)\)/g,S=CKEDITOR.dom.walker.bookmark(0,1),P=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(T,_){if("string"==typeof T.type)return new CKEDITOR.style.customHandlers[T.type](T);var S=T.attributes;S&&S.style&&(T.styles=CKEDITOR.tools.extend({},T.styles,CKEDITOR.tools.parseCssText(S.style)),delete S.style);_&&(T=CKEDITOR.tools.clone(T),z(T.attributes,_),z(T.styles,_));S=(this||i).element=T.element?"string"==typeof T.element?T.element.toLowerCase():T.element:"*";(this||i).type=T.type||(o[S]?CKEDITOR.STYLE_BLOCK:s[S]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE);"object"==typeof(this||i).element&&((this||i).type=CKEDITOR.STYLE_OBJECT);(this||i)._={definition:T}};CKEDITOR.style.prototype={apply:function(o){if(o instanceof CKEDITOR.dom.document)return B.call(this||i,o.getSelection());if(this.checkApplicable(o.elementPath(),o)){var s=(this||i)._.enterMode;s||((this||i)._.enterMode=o.activeEnterMode);B.call(this||i,o.getSelection(),0,o);(this||i)._.enterMode=s}},remove:function(o){if(o instanceof CKEDITOR.dom.document)return B.call(this||i,o.getSelection(),1);if(this.checkApplicable(o.elementPath(),o)){var s=(this||i)._.enterMode;s||((this||i)._.enterMode=o.activeEnterMode);B.call(this||i,o.getSelection(),1,o);(this||i)._.enterMode=s}},applyToRange:function(o){(this||i).applyToRange=(this||i).type==CKEDITOR.STYLE_INLINE?b:(this||i).type==CKEDITOR.STYLE_BLOCK?g:(this||i).type==CKEDITOR.STYLE_OBJECT?l:null;return this.applyToRange(o)},removeFromRange:function(o){(this||i).removeFromRange=(this||i).type==CKEDITOR.STYLE_INLINE?c:(this||i).type==CKEDITOR.STYLE_BLOCK?h:(this||i).type==CKEDITOR.STYLE_OBJECT?k:null;return this.removeFromRange(o)},applyToObject:function(o){r(o,this||i)},checkActive:function(o,s){switch((this||i).type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(o.block||o.blockLimit,!0,s);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var T=o.elements,_=0,S;_<T.length;_++)if(S=T[_],(this||i).type!=CKEDITOR.STYLE_INLINE||S!=o.block&&S!=o.blockLimit){if((this||i).type==CKEDITOR.STYLE_OBJECT){var P=S.getName();if(!("string"==typeof(this||i).element?P==(this||i).element:P in(this||i).element))continue}if(this.checkElementRemovable(S,!0,s))return!0}}return!1},checkApplicable:function(o,s,T){s&&s instanceof CKEDITOR.filter&&(T=s);if(T&&!T.check(this||i))return!1;switch((this||i).type){case CKEDITOR.STYLE_OBJECT:return!!o.contains((this||i).element);case CKEDITOR.STYLE_BLOCK:return!!o.blockLimit.getDtd()[(this||i).element]}return!0},checkElementMatch:function(o,s){var T=(this||i)._.definition;if(!o||!T.ignoreReadonly&&o.isReadOnly())return!1;var _=o.getName();if("string"==typeof(this||i).element?_==(this||i).element:_ in(this||i).element){if(!s&&!o.hasAttributes())return!0;if(_=T._AC)T=_;else{var _={},S=0,P=T.attributes;if(P)for(var $ in P)S++,_[$]=P[$];($=CKEDITOR.style.getStyleText(T))&&(_.style||S++,_.style=$);_._length=S;T=T._AC=_}if(!T._length)return!0;for(var V in T)if("_length"!=V)if(_=o.getAttribute(V)||"","style"==V?A(T[V],_):T[V]==_){if(!s)return!0}else if(s)return!1;if(s)return!0}return!1},checkElementRemovable:function(o,s,T){if(this.checkElementMatch(o,s,T))return!0;if(s=t(this||i)[o.getName()]){var _;if(!(s=s.attributes))return!0;for(T=0;T<s.length;T++)if(_=s[T][0],_=o.getAttribute(_)){var S=s[T][1];if(null===S)return!0;if("string"==typeof S){if(_==S)return!0}else if(S.test(_))return!0}}return!1},buildPreview:function(o){var s=(this||i)._.definition,T=[],_=s.element;"bdo"==_&&(_="span");var T=["<",_],S=s.attributes;if(S)for(var P in S)T.push(" ",P,'="',S[P],'"');(S=CKEDITOR.style.getStyleText(s))&&T.push(' style="',S,'"');T.push(">",o||s.name,"</",_,">");return T.join("")},getDefinition:function(){return(this||i)._.definition}};CKEDITOR.style.getStyleText=function(i){var o=i._ST;if(o)return o;var o=i.styles,s=i.attributes&&i.attributes.style||"",_="";s.length&&(s=s.replace(T,";"));for(var S in o){var P=o[S],$=(S+":"+P).replace(T,";");"inherit"==P?_+=$:s+=$}s.length&&(s=CKEDITOR.tools.normalizeCssText(s,!0));return i._ST=s+_};CKEDITOR.style.customHandlers={};CKEDITOR.style.addCustomHandler=function(o){var b=function(o){(this||i)._={definition:o};(this||i).setup&&this.setup(o)};b.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},o,!0);return(this||i).customHandlers[o.type]=b};var $=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,V=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(o,s){(this||i).requiredContent=(this||i).allowedContent=(this||i).style=o;CKEDITOR.tools.extend(this||i,s,!0)},CKEDITOR.styleCommand.prototype.exec=function(o){o.focus();(this||i).state==CKEDITOR.TRISTATE_OFF?o.applyStyle((this||i).style):(this||i).state==CKEDITOR.TRISTATE_ON&&o.removeStyle((this||i).style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(i,o,s){CKEDITOR.stylesSet.addExternal(i,o,"");CKEDITOR.stylesSet.load(i,s)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(o,s){var T=(this||i)._.styleStateChangeCallbacks;T||(T=(this||i)._.styleStateChangeCallbacks=[],this.on("selectionChange",(function(o){for(var s=0;s<T.length;s++){var _=T[s],S=_.style.checkActive(o.data.path,this||i)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;_.fn.call(this||i,S)}})));T.push({style:o,fn:s})},applyStyle:function(o){o.apply(this||i)},removeStyle:function(o){o.remove(this||i)},getStylesSet:function(o){if((this||i)._.stylesDefinitions)o((this||i)._.stylesDefinitions);else{var s=this||i,T=s.config.stylesCombo_stylesSet||s.config.stylesSet;if(!1===T)o(null);else if(T instanceof Array)s._.stylesDefinitions=T,o(T);else{T||(T="default");var T=T.split(":"),_=T[0];CKEDITOR.stylesSet.addExternal(_,T[1]?T.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),"");CKEDITOR.stylesSet.load(_,(function(i){s._.stylesDefinitions=i[_];o(s._.stylesDefinitions)}))}}}}),function(){if(window.Promise)CKEDITOR.tools.promise=Promise;else{var i=CKEDITOR.getUrl("vendor/promise.js");CKEDITOR.scriptLoader.load(i,(function(o){o?CKEDITOR.tools.promise=ES6Promise:CKEDITOR.error("no-vendor-lib",{path:i})}))}}(),CKEDITOR.dom.comment=function(o,s){"string"==typeof o&&(o=(s?s.$:document).createComment(o));CKEDITOR.dom.domObject.call(this||i,o)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+(this||i).$.nodeValue+"--\x3e"}}),"use strict",function(){var o={},s={},T;for(T in CKEDITOR.dtd.$blockLimit)T in CKEDITOR.dtd.$list||(o[T]=1);for(T in CKEDITOR.dtd.$block)T in CKEDITOR.dtd.$blockLimit||T in CKEDITOR.dtd.$empty||(s[T]=1);CKEDITOR.dom.elementPath=function(T,_){var S=null,P=null,$=[],V=T,j;_=_||T.getDocument().getBody();V||(V=_);do{if(V.type==CKEDITOR.NODE_ELEMENT){$.push(V);if(!(this||i).lastElement&&((this||i).lastElement=V,V.is(CKEDITOR.dtd.$object)||"false"==V.getAttribute("contenteditable")))continue;if(V.equals(_))break;if(!P&&(j=V.getName(),"true"==V.getAttribute("contenteditable")?P=V:!S&&s[j]&&(S=V),o[j])){if(j=!S&&"div"==j){e:{j=V.getChildren();for(var Y=0,ee=j.count();Y<ee;Y++){var te=j.getItem(Y);if(te.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[te.getName()]){j=!0;break e}}j=!1}j=!j}j?S=V:P=V}}}while(V=V.getParent());P||(P=_);(this||i).block=S;(this||i).blockLimit=P;(this||i).root=_;(this||i).elements=$}}(),CKEDITOR.dom.elementPath.prototype={compare:function(o){var s=(this||i).elements;o=o&&o.elements;if(!o||s.length!=o.length)return!1;for(var T=0;T<s.length;T++)if(!s[T].equals(o[T]))return!1;return!0},contains:function(o,s,T){var _=0,S;"string"==typeof o&&(S=function(i){return i.getName()==o});o instanceof CKEDITOR.dom.element?S=function(i){return i.equals(o)}:CKEDITOR.tools.isArray(o)?S=function(i){return-1<CKEDITOR.tools.indexOf(o,i.getName())}:"function"==typeof o?S=o:"object"==typeof o&&(S=function(i){return i.getName()in o});var P=(this||i).elements,$=P.length;s&&(T?_+=1:--$);T&&(P=Array.prototype.slice.call(P,0),P.reverse());for(;_<$;_++)if(S(P[_]))return P[_];return null},isContextFor:function(o){var s;return!(o in CKEDITOR.dtd.$block)||(s=this.contains(CKEDITOR.dtd.$intermediate)||(this||i).root.equals((this||i).block)&&(this||i).block||(this||i).blockLimit,!!s.getDtd()[o])},direction:function(){return((this||i).block||(this||i).blockLimit||(this||i).root).getDirection(1)}},CKEDITOR.dom.text=function(o,s){"string"==typeof o&&(o=(s?s.$:document).createTextNode(o));(this||i).$=o},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return(this||i).$.nodeValue.length},getText:function(){return(this||i).$.nodeValue},setText:function(o){(this||i).$.nodeValue=o},split:function(o){var s=(this||i).$.parentNode,T=s.childNodes.length,_=this.getLength(),S=this.getDocument(),P=new CKEDITOR.dom.text((this||i).$.splitText(o),S);s.childNodes.length==T&&(o>=_?(P=S.createText(""),P.insertAfter(this||i)):(o=S.createText(""),o.insertAfter(P),o.remove()));return P},substring:function(o,s){return"number"!=typeof s?(this||i).$.nodeValue.substr(o):(this||i).$.nodeValue.substring(o,s)}}),function(){function a(i,o,s){var T=i.serializable,_=o[s?"endContainer":"startContainer"],S=s?"endOffset":"startOffset",P=T?o.document.getById(i.startNode):i.startNode;i=T?o.document.getById(i.endNode):i.endNode;_.equals(P.getPrevious())?(o.startOffset=o.startOffset-_.getLength()-i.getPrevious().getLength(),_=i.getNext()):_.equals(i.getPrevious())&&(o.startOffset-=_.getLength(),_=i.getNext());_.equals(P.getParent())&&o[S]++;_.equals(i.getParent())&&o[S]++;o[s?"endContainer":"startContainer"]=_;return o}CKEDITOR.dom.rangeList=function(i){if(i instanceof CKEDITOR.dom.rangeList)return i;i?i instanceof CKEDITOR.dom.range&&(i=[i]):i=[];return CKEDITOR.tools.extend(i,o)};var o={createIterator:function(){var o=this||i,s=CKEDITOR.dom.walker.bookmark(),T=[],_;return{getNextRange:function(i){_=void 0===_?0:_+1;var S=o[_];if(S&&1<o.length){if(!_)for(var P=o.length-1;0<=P;P--)T.unshift(o[P].createBookmark(!0));if(i)for(var $=0;o[_+$+1];){var V=S.document;i=0;P=V.getById(T[$].endNode);for(V=V.getById(T[$+1].startNode);;){P=P.getNextSourceNode(!1);if(V.equals(P))i=1;else if(s(P)||P.type==CKEDITOR.NODE_ELEMENT&&P.isBlockBoundary())continue;break}if(!i)break;$++}for(S.moveToBookmark(T.shift());$--;)P=o[++_],P.moveToBookmark(T.shift()),S.setEnd(P.endContainer,P.endOffset)}return S}}},createBookmarks:function(o){for(var s=[],T,_=0;_<(this||i).length;_++){s.push(T=(this||i)[_].createBookmark(o,!0));for(var S=_+1;S<(this||i).length;S++)(this||i)[S]=a(T,(this||i)[S]),(this||i)[S]=a(T,(this||i)[S],!0)}return s},createBookmarks2:function(o){for(var s=[],T=0;T<(this||i).length;T++)s.push((this||i)[T].createBookmark2(o));return s},moveToBookmarks:function(o){for(var s=0;s<(this||i).length;s++)(this||i)[s].moveToBookmark(o[s])}}}(),function(){function a(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function f(i){var o=CKEDITOR.skin["ua_"+i],s=CKEDITOR.env;if(o)for(var o=o.split(",").sort((function(i,o){return i>o?-1:1})),T=0,_;T<o.length;T++)if(_=o[T],s.ie&&(_.replace(/^ie/,"")==s.version||s.quirks&&"iequirks"==_)&&(_="ie"),s[_]){i+="_"+o[T];break}return CKEDITOR.getUrl(a()+i+".css")}function b(i,s){o[i]||(CKEDITOR.document.appendStyleSheet(f(i)),o[i]=1);s&&s()}function c(i){var o=i.getById(s);o||(o=i.getHead().append("style"),o.setAttribute("id",s),o.setAttribute("type","text/css"));return o}function d(i,o,s){var T,_,S;if(CKEDITOR.env.webkit)for(o=o.split("}").slice(0,-1),_=0;_<o.length;_++)o[_]=o[_].split("{");for(var P=0;P<i.length;P++)if(CKEDITOR.env.webkit)for(_=0;_<o.length;_++){S=o[_][1];for(T=0;T<s.length;T++)S=S.replace(s[T][0],s[T][1]);i[P].$.sheet.addRule(o[_][0],S)}else{S=o;for(T=0;T<s.length;T++)S=S.replace(s[T][0],s[T][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?i[P].$.styleSheet.cssText+=S:i[P].$.innerHTML+=S}}var o={};CKEDITOR.skin={path:a,loadPart:function(i,o){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(a()+"skin.js"),(function(){b(i,o)})):b(i,o)},getPath:function(i){return CKEDITOR.getUrl(f(i))},icons:{},addIcon:function(o,s,T,_){o=o.toLowerCase();(this||i).icons[o]||((this||i).icons[o]={path:s,offset:T||0,bgsize:_||"16px"})},getIconStyle:function(o,s,T,_,S){var P;o&&(o=o.toLowerCase(),s&&(P=(this||i).icons[o+"-rtl"]),P||(P=(this||i).icons[o]));o=T||P&&P.path||"";_=_||P&&P.offset;S=S||P&&P.bgsize||"16px";o&&(o=o.replace(/'/g,"\\'"));return o&&"background-image:url('"+CKEDITOR.getUrl(o)+"');background-position:0 "+_+"px;background-size:"+S+";"}};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return(this||i).uiColor},setUiColor:function(o){var s=c(CKEDITOR.document);return((this||i).setUiColor=function(o){(this||i).uiColor=o;var S=CKEDITOR.skin.chameleon,P="",$="";"function"==typeof S&&(P=S(this||i,"editor"),$=S(this||i,"panel"));o=[[_,o]];d([s],P,o);d(T,$,o)}).call(this||i,o)}});var s="cke_ui_color",T=[],_=/\$color/g;CKEDITOR.on("instanceLoaded",(function(i){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var o=i.editor;i=function(i){i=(i.data[0]||i.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!i.getById("cke_ui_color")){var s=c(i);T.push(s);o.on("destroy",(function(){T=CKEDITOR.tools.array.filter(T,(function(i){return s!==i}))}));(i=o.getUiColor())&&d([s],CKEDITOR.skin.chameleon(o,"panel"),[[_,i]])}};o.on("panelShow",i);o.on("menuShow",i);o.config.uiColor&&o.setUiColor(o.config.uiColor)}}))}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var i=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);i.appendTo(CKEDITOR.document.getHead());try{var o=i.getComputedStyle("border-top-color"),s=i.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!o||o!=s)}catch(i){CKEDITOR.env.hc=!1}i.remove()}CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc");CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}");CKEDITOR.status="loaded";CKEDITOR.fireOnce("loaded");if(i=CKEDITOR._.pending)for(delete CKEDITOR._.pending,o=0;o<i.length;o++)CKEDITOR.editor.prototype.constructor.apply(i[o][0],i[o][1]),CKEDITOR.add(i[o][0])}(),CKEDITOR.skin.name="moono-lisa",CKEDITOR.skin.ua_editor="ie,iequirks,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie8",CKEDITOR.skin.chameleon=function(){var i=function(){return function(i,o){for(var s=i.match(/[^#]./g),T=0;3>T;T++){var _=T,S;S=parseInt(s[T],16);S=("0"+(0>o?0|S*(1+o):0|S+(255-S)*o).toString(16)).slice(-2);s[_]=S}return"#"+s.join("")}}(),o={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_bottom [background-color:{defaultBackground};border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [background-color:{defaultBackground};outline-color:{defaultBorder};] {id} .cke_dialog_tab [background-color:{dialogTab};border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [background-color:{lightBackground};] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} a.cke_button_off:hover,{id} a.cke_button_off:focus,{id} a.cke_button_off:active [background-color:{darkBackground};border-color:{toolbarElementsBorder};] {id} .cke_button_on [background-color:{ckeButtonOn};border-color:{toolbarElementsBorder};] {id} .cke_toolbar_separator,{id} .cke_toolgroup a.cke_button:last-child:after,{id} .cke_toolgroup a.cke_button.cke_button_disabled:hover:last-child:after [background-color: {toolbarElementsBorder};border-color: {toolbarElementsBorder};] {id} a.cke_combo_button:hover,{id} a.cke_combo_button:focus,{id} .cke_combo_on a.cke_combo_button [border-color:{toolbarElementsBorder};background-color:{darkBackground};] {id} .cke_combo:after [border-color:{toolbarElementsBorder};] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover,{id} a.cke_path_item:focus,{id} a.cke_path_item:active [background-color:{darkBackground};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [background-color:{lightBackground};border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover,.cke_menubutton:focus,.cke_menubutton:active [background-color:{menubuttonHover};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menubutton_disabled:hover .cke_menubutton_icon,.cke_menubutton_disabled:focus .cke_menubutton_icon,.cke_menubutton_disabled:active .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(s,T){var _=i(s.uiColor,.4),_={id:"."+s.id,defaultBorder:i(_,-.2),toolbarElementsBorder:i(_,-.25),defaultBackground:_,lightBackground:i(_,.8),darkBackground:i(_,-.15),ckeButtonOn:i(_,.4),ckeResizer:i(_,-.4),ckeColorauto:i(_,.8),dialogBody:i(_,.7),dialogTab:i(_,.65),dialogTabSelected:"#FFF",dialogTabSelectedBorder:"#FFF",elementsPathColor:i(_,-.6),menubuttonHover:i(_,.1),menubuttonIcon:i(_,.5),menubuttonIconHover:i(_,.3)};return o[T].output(_).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var a=function(o){(this||i)._||((this||i)._={});(this||i)._["default"]=(this||i)._.initValue=o["default"]||"";(this||i)._.required=o.required||!1;for(var s=[(this||i)._],T=1;T<arguments.length;T++)s.push(arguments[T]);s.push(!0);CKEDITOR.tools.extend.apply(CKEDITOR.tools,s);return(this||i)._},o={build:function(i,o,s){return new CKEDITOR.ui.dialog.textInput(i,o,s)}},s={build:function(i,o,s){return new CKEDITOR.ui.dialog[o.type](i,o,s)}},T={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(i){this.setValue(this.getInitValue(),i)},setInitValue:function(){(this||i)._.initValue=this.getValue()},resetInitValue:function(){(this||i)._.initValue=(this||i)._["default"]},getInitValue:function(){return(this||i)._.initValue}},_=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(o,s){(this||i)._.domOnChangeRegistered||(o.on("load",(function(){this.getInputElement().on("change",(function(){o.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})}),this||i)}),this||i),(this||i)._.domOnChangeRegistered=!0);this.on("change",s)}},!0),S=/^on([A-Z]\w+)/,k=function(i){for(var o in i)(S.test(o)||"title"==o||"type"==o)&&delete i[o];return i},g=function(i){i=i.data.getKeystroke();i==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):i==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(o,s,T,_){if(!(4>arguments.length)){var S=a.call(this||i,s);S.labelId=CKEDITOR.tools.getNextId()+"_label";(this||i)._.children=[];var P={role:s.role||"presentation"};s.includeLabel&&(P["aria-labelledby"]=S.labelId);CKEDITOR.ui.dialog.uiElement.call(this||i,o,s,T,"div",null,P,(function(){var T=[],P=s.required?" cke_required":"";"horizontal"!=s.labelLayout?T.push('<label class="cke_dialog_ui_labeled_label'+P+'" ',' id="'+S.labelId+'"',S.inputId?' for="'+S.inputId+'"':"",(s.labelStyle?' style="'+s.labelStyle+'"':"")+">",s.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',s.controlStyle?' style="'+s.controlStyle+'"':"",' role="presentation">',_.call(this||i,o,s),"</div>"):(P={type:"hbox",widths:s.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+P+'" id="'+S.labelId+'" for="'+S.inputId+'"'+(s.labelStyle?' style="'+s.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(s.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(s.controlStyle?' style="'+s.controlStyle+'"':"")+">"+_.call(this||i,o,s)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(o,P,T));return T.join("")}))}},textInput:function(o,s,T){if(!(3>arguments.length)){a.call(this||i,s);var _=(this||i)._.inputId=CKEDITOR.tools.getNextId()+"_textInput",S={class:"cke_dialog_ui_input_"+s.type,id:_,type:s.type};s.validate&&((this||i).validate=s.validate);s.maxLength&&(S.maxlength=s.maxLength);s.size&&(S.size=s.size);s.inputStyle&&(S.style=s.inputStyle);var P=this||i,$=!1;o.on("load",(function(){P.getInputElement().on("keydown",(function(i){13==i.data.getKeystroke()&&($=!0)}));P.getInputElement().on("keyup",(function(i){13==i.data.getKeystroke()&&$&&(o.getButton("ok")&&setTimeout((function(){o.getButton("ok").click()}),0),$=!1);P.bidi&&g.call(P,i)}),null,null,1e3)}));CKEDITOR.ui.dialog.labeledElement.call(this||i,o,s,T,(function(){var o=['<div class="cke_dialog_ui_input_',s.type,'" role="presentation"'];s.width&&o.push('style="width:'+s.width+'" ');o.push("><input ");S["aria-labelledby"]=(this||i)._.labelId;(this||i)._.required&&(S["aria-required"]=(this||i)._.required);for(var T in S)o.push(T+'="'+S[T]+'" ');o.push(" /></div>");return o.join("")}))}},textarea:function(o,s,T){if(!(3>arguments.length)){a.call(this||i,s);var _=this||i,S=(this||i)._.inputId=CKEDITOR.tools.getNextId()+"_textarea",P={};s.validate&&((this||i).validate=s.validate);P.rows=s.rows||5;P.cols=s.cols||20;P["class"]="cke_dialog_ui_input_textarea "+(s["class"]||"");"undefined"!=typeof s.inputStyle&&(P.style=s.inputStyle);s.dir&&(P.dir=s.dir);_.bidi&&o.on("load",(function(){_.getInputElement().on("keyup",g)}),_);CKEDITOR.ui.dialog.labeledElement.call(this||i,o,s,T,(function(){P["aria-labelledby"]=(this||i)._.labelId;(this||i)._.required&&(P["aria-required"]=(this||i)._.required);var o=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',S,'" '],s;for(s in P)o.push(s+'="'+CKEDITOR.tools.htmlEncode(P[s])+'" ');o.push(">",CKEDITOR.tools.htmlEncode(_._["default"]),"</textarea></div>");return o.join("")}))}},checkbox:function(o,s,T){if(!(3>arguments.length)){var _=a.call(this||i,s,{default:!!s["default"]});s.validate&&((this||i).validate=s.validate);CKEDITOR.ui.dialog.uiElement.call(this||i,o,s,T,"span",null,null,(function(){var i=CKEDITOR.tools.extend({},s,{id:s.id?s.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),T=[],S=CKEDITOR.tools.getNextId()+"_label",P={class:"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":S};k(i);s["default"]&&(P.checked="checked");"undefined"!=typeof i.inputStyle&&(i.style=i.inputStyle);_.checkbox=new CKEDITOR.ui.dialog.uiElement(o,i,T,"input",null,P);T.push(' <label id="',S,'" for="',P.id,'"'+(s.labelStyle?' style="'+s.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(s.label),"</label>");return T.join("")}))}},radio:function(o,s,T){if(!(3>arguments.length)){a.call(this||i,s);(this||i)._["default"]||((this||i)._["default"]=(this||i)._.initValue=s.items[0][1]);s.validate&&((this||i).validate=s.validate);var _=[],S=this||i;s.role="radiogroup";s.includeLabel=!0;CKEDITOR.ui.dialog.labeledElement.call(this||i,o,s,T,(function(){for(var i=[],T=[],P=(s.id?s.id:CKEDITOR.tools.getNextId())+"_radio",$=0;$<s.items.length;$++){var V=s.items[$],j=void 0!==V[2]?V[2]:V[0],Y=void 0!==V[1]?V[1]:V[0],ee=CKEDITOR.tools.getNextId()+"_radio_input",te=ee+"_label",ee=CKEDITOR.tools.extend({},s,{id:ee,title:null,type:null},!0),j=CKEDITOR.tools.extend({},ee,{title:j},!0),ne={type:"radio",class:"cke_dialog_ui_radio_input",name:P,value:Y,"aria-labelledby":te},ie=[];S._["default"]==Y&&(ne.checked="checked");k(ee);k(j);"undefined"!=typeof ee.inputStyle&&(ee.style=ee.inputStyle);ee.keyboardFocusable=!0;_.push(new CKEDITOR.ui.dialog.uiElement(o,ee,ie,"input",null,ne));ie.push(" ");new CKEDITOR.ui.dialog.uiElement(o,j,ie,"label",null,{id:te,for:ne.id},V[0]);i.push(ie.join(""))}new CKEDITOR.ui.dialog.hbox(o,_,i,T);return T.join("")}));(this||i)._.children=_}},button:function(o,s,T){if(arguments.length){"function"==typeof s&&(s=s(o.getParentEditor()));a.call(this||i,s,{disabled:s.disabled||!1});CKEDITOR.event.implementOn(this||i);var _=this||i;o.on("load",(function(){var i=this.getElement();(function(){i.on("click",(function(i){_.click();i.data.preventDefault()}));i.on("keydown",(function(i){i.data.getKeystroke()in{32:1}&&(_.click(),i.data.preventDefault())}))})();i.unselectable()}),this||i);var S=CKEDITOR.tools.extend({},s);delete S.style;var P=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this||i,o,S,T,"a",null,{style:s.style,href:"javascript:void(0)",title:s.label,hidefocus:"true",class:s["class"],role:"button","aria-labelledby":P},'<span id="'+P+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(s.label)+"</span>")}},select:function(o,s,T){if(!(3>arguments.length)){var _=a.call(this||i,s);s.validate&&((this||i).validate=s.validate);_.inputId=CKEDITOR.tools.getNextId()+"_select";CKEDITOR.ui.dialog.labeledElement.call(this||i,o,s,T,(function(){var T=CKEDITOR.tools.extend({},s,{id:s.id?s.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),S=[],P=[],$={id:_.inputId,class:"cke_dialog_ui_input_select","aria-labelledby":(this||i)._.labelId};S.push('<div class="cke_dialog_ui_input_',s.type,'" role="presentation"');s.width&&S.push('style="width:'+s.width+'" ');S.push(">");void 0!==s.size&&($.size=s.size);void 0!==s.multiple&&($.multiple=s.multiple);k(T);for(var V=0,j;V<s.items.length&&(j=s.items[V]);V++)P.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==j[1]?j[1]:j[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(j[0]));"undefined"!=typeof T.inputStyle&&(T.style=T.inputStyle);_.select=new CKEDITOR.ui.dialog.uiElement(o,T,S,"select",null,$,P.join(""));S.push("</div>");return S.join("")}))}},file:function(o,s,T){if(!(3>arguments.length)){void 0===s["default"]&&(s["default"]="");var _=CKEDITOR.tools.extend(a.call(this||i,s),{definition:s,buttons:[]});s.validate&&((this||i).validate=s.validate);o.on("load",(function(){CKEDITOR.document.getById(_.frameId).getParent().addClass("cke_dialog_ui_input_file")}));CKEDITOR.ui.dialog.labeledElement.call(this||i,o,s,T,(function(){_.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var i=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',_.frameId,'" title="',s.label,'" src="javascript:void('];i.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0");i.push(')"></iframe>');return i.join("")}))}},fileButton:function(o,s,T){var _=this||i;if(!(3>arguments.length)){a.call(this||i,s);s.validate&&((this||i).validate=s.validate);var S=CKEDITOR.tools.extend({},s),P=S.onClick;S.className=(S.className?S.className+" ":"")+"cke_dialog_ui_button";S.onClick=function(T){var _=s["for"];T=!!P&&P.call(this||i,T);!1!==T&&("xhr"!==T&&o.getContentElement(_[0],_[1]).submit(),this.disable())};o.on("load",(function(){o.getContentElement(s["for"][0],s["for"][1])._.buttons.push(_)}));CKEDITOR.ui.dialog.button.call(this||i,o,S,T)}},html:function(){var o=/^\s*<[\w:]+\s+([^>]*)?>/,s=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,T=/\/$/;return function(_,S,P){if(!(3>arguments.length)){var $=[],V=S.html;"<"!=V.charAt(0)&&(V="<span>"+V+"</span>");var j=S.focus;if(j){var Y=(this||i).focus;(this||i).focus=function(){("function"==typeof j?j:Y).call(this||i);this.fire("focus")};S.isFocusable&&((this||i).isFocusable=(this||i).isFocusable);(this||i).keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this||i,_,S,$,"span",null,null,"");$=$.join("").match(o);V=V.match(s)||["","",""];T.test(V[1])&&(V[1]=V[1].slice(0,-1),V[2]="/"+V[2]);P.push([V[1]," ",$[1]||"",V[2]].join(""))}}}(),fieldset:function(o,s,T,_,S){var P=S.label;(this||i)._={children:s};CKEDITOR.ui.dialog.uiElement.call(this||i,o,S,_,"fieldset",null,null,(function(){var i=[];P&&i.push("<legend"+(S.labelStyle?' style="'+S.labelStyle+'"':"")+">"+P+"</legend>");for(var o=0;o<T.length;o++)i.push(T[o]);return i.join("")}))}},!0);CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement;CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(o){var s=CKEDITOR.document.getById((this||i)._.labelId);1>s.getChildCount()?new CKEDITOR.dom.text(o,CKEDITOR.document).appendTo(s):s.getChild(0).$.nodeValue=o;return this||i},getLabel:function(){var o=CKEDITOR.document.getById((this||i)._.labelId);return!o||1>o.getChildCount()?"":o.getChild(0).getText()},eventProcessors:_},!0);CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return!(this||i)._.disabled&&this.fire("click",{dialog:(this||i)._.dialog})},enable:function(){(this||i)._.disabled=!1;var o=this.getElement();o&&o.removeClass("cke_disabled")},disable:function(){(this||i)._.disabled=!0;this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!(this||i)._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(o,s){this.on("click",(function(){s.apply(this||i,arguments)}))}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById((this||i)._.inputId)},focus:function(){var i=this.selectParentTab();setTimeout((function(){var o=i.getInputElement();o&&o.$.focus()}),0)},select:function(){var i=this.selectParentTab();setTimeout((function(){var o=i.getInputElement();o&&(o.$.focus(),o.$.select())}),0)},accessKeyUp:function(){this.select()},setValue:function(o){if((this||i).bidi){var s=o&&o.charAt(0);(s="‪"==s?"ltr":"‫"==s?"rtl":null)&&(o=o.slice(1));this.setDirectionMarker(s)}o||(o="");return CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this||i,arguments)},getValue:function(){var o=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this||i);if((this||i).bidi&&o){var s=this.getDirectionMarker();s&&(o=("ltr"==s?"‪":"‫")+o)}return o},setDirectionMarker:function(i){var o=this.getInputElement();i?o.setAttributes({dir:i,"data-cke-dir-marker":i}):this.getDirectionMarker()&&o.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},T,!0);CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput;CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return(this||i)._.select.getElement()},add:function(o,s,T){var _=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),S=this.getInputElement().$;_.$.text=o;_.$.value=void 0===s||null===s?o:s;void 0===T||null===T?CKEDITOR.env.ie?S.add(_.$):S.add(_.$,null):S.add(_.$,T);return this||i},remove:function(o){this.getInputElement().$.remove(o);return this||i},clear:function(){for(var o=this.getInputElement().$;0<o.length;)o.remove(0);return this||i},keyboardFocusable:!0},T,!0);CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return(this||i)._.checkbox.getElement()},setValue:function(i,o){this.getInputElement().$.checked=i;!o&&this.fire("change",{value:i})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(o,s){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version)return _.onChange.apply(this||i,arguments);o.on("load",(function(){var o=(this||i)._.checkbox.getElement();o.on("propertychange",(function(i){i=i.data.$;"checked"==i.propertyName&&this.fire("change",{value:o.$.checked})}),this||i)}),this||i);this.on("change",s);return null}},keyboardFocusable:!0},T,!0);CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(o,s){for(var T=(this||i)._.children,_,S=0;S<T.length&&(_=T[S]);S++)_.getElement().$.checked=_.getValue()==o;!s&&this.fire("change",{value:o})},getValue:function(){for(var o=(this||i)._.children,s=0;s<o.length;s++)if(o[s].getElement().$.checked)return o[s].getValue();return null},accessKeyUp:function(){var o=(this||i)._.children,s;for(s=0;s<o.length;s++)if(o[s].getElement().$.checked){o[s].getElement().focus();return}o[0].getElement().focus()},eventProcessors:{onChange:function(o,s){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version)return _.onChange.apply(this||i,arguments);o.on("load",(function(){for(var o=(this||i)._.children,s=this||i,T=0;T<o.length;T++)o[T].getElement().on("propertychange",(function(o){o=o.data.$;"checked"==o.propertyName&&(this||i).$.checked&&s.fire("change",{value:this.getAttribute("value")})}))}),this||i);this.on("change",s);return null}}},T,!0);CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,T,{getInputElement:function(){var o=CKEDITOR.document.getById((this||i)._.frameId).getFrameDocument();return 0<o.$.forms.length?new CKEDITOR.dom.element(o.$.forms[0].elements[0]):this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this||i},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(o){var s=/^on([A-Z]\w+)/,T,d=function(i,o,s,T){i.on("formLoaded",(function(){i.getInputElement().on(s,T,i)}))},_;for(_ in o)(T=_.match(s))&&((this||i).eventProcessors[_]?(this||i).eventProcessors[_].call(this||i,(this||i)._.dialog,o[_]):d(this||i,(this||i)._.dialog,T[1].toLowerCase(),o[_]));return this||i},reset:function(){function a(){s.$.open();var i="";T.size&&(i=T.size-(CKEDITOR.env.ie?7:0));var j=o.frameId+"_input";s.$.write(['<html dir="'+$+'" lang="'+V+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+$+'" lang="'+V+'" action="',CKEDITOR.tools.htmlEncode(T.action),'"><label id="',o.labelId,'" for="',j,'" style="display:none">',CKEDITOR.tools.htmlEncode(T.label),'</label><input style="width:100%" id="',j,'" aria-labelledby="',o.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(T.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<i?i:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+S+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+P+")}","<\/script>"].join(""));s.$.close();for(i=0;i<_.length;i++)_[i].enable()}var o=(this||i)._,s=CKEDITOR.document.getById(o.frameId).getFrameDocument(),T=o.definition,_=o.buttons,S=(this||i).formLoadedNumber,P=(this||i).formUnloadNumber,$=o.dialog._.editor.lang.dir,V=o.dialog._.editor.langCode;S||(S=(this||i).formLoadedNumber=CKEDITOR.tools.addFunction((function(){this.fire("formLoaded")}),this||i),P=(this||i).formUnloadNumber=CKEDITOR.tools.addFunction((function(){this.getInputElement().clearCustomData()}),this||i),this.getDialog()._.editor.on("destroy",(function(){CKEDITOR.tools.removeFunction(S);CKEDITOR.tools.removeFunction(P)})));CKEDITOR.env.gecko?setTimeout(a,500):a()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){(this||i)._.initValue=""},eventProcessors:{onChange:function(o,s){(this||i)._.domOnChangeRegistered||(this.on("formLoaded",(function(){this.getInputElement().on("change",(function(){this.fire("change",{value:this.getValue()})}),this||i)}),this||i),(this||i)._.domOnChangeRegistered=!0);this.on("change",s)}},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button;CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype);CKEDITOR.dialog.addUIElement("text",o);CKEDITOR.dialog.addUIElement("password",o);CKEDITOR.dialog.addUIElement("tel",o);CKEDITOR.dialog.addUIElement("textarea",s);CKEDITOR.dialog.addUIElement("checkbox",s);CKEDITOR.dialog.addUIElement("radio",s);CKEDITOR.dialog.addUIElement("button",s);CKEDITOR.dialog.addUIElement("select",s);CKEDITOR.dialog.addUIElement("file",s);CKEDITOR.dialog.addUIElement("fileButton",s);CKEDITOR.dialog.addUIElement("html",s);CKEDITOR.dialog.addUIElement("fieldset",{build:function(i,o,s){for(var T=o.children,_,S=[],P=[],$=0;$<T.length&&(_=T[$]);$++){var V=[];S.push(V);P.push(CKEDITOR.dialog._.uiElementBuilders[_.type].build(i,_,V))}return new CKEDITOR.ui.dialog[o.type](i,P,S,s,o)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function a(){for(var o=(this||i)._.tabIdList.length,s=CKEDITOR.tools.indexOf((this||i)._.tabIdList,(this||i)._.currentTabId)+o,T=s-1;T>s-o;T--)if((this||i)._.tabs[(this||i)._.tabIdList[T%o]][0].$.offsetHeight)return(this||i)._.tabIdList[T%o];return null}function f(){for(var o=(this||i)._.tabIdList.length,s=CKEDITOR.tools.indexOf((this||i)._.tabIdList,(this||i)._.currentTabId),T=s+1;T<s+o;T++)if((this||i)._.tabs[(this||i)._.tabIdList[T%o]][0].$.offsetHeight)return(this||i)._.tabIdList[T%o];return null}function b(i,o){for(var s=i.$.getElementsByTagName("input"),T=0,_=s.length;T<_;T++){var S=new CKEDITOR.dom.element(s[T]);"text"==S.getAttribute("type").toLowerCase()&&(o?(S.setAttribute("value",S.getCustomData("fake_value")||""),S.removeCustomData("fake_value")):(S.setCustomData("fake_value",S.getAttribute("value")),S.setAttribute("value","")))}}function c(o,s){var T=this.getInputElement();T&&(o?T.removeAttribute("aria-invalid"):T.setAttribute("aria-invalid",!0));o||((this||i).select?this.select():this.focus());s&&alert(s);this.fire("validated",{valid:o,msg:s})}function d(){var i=this.getInputElement();i&&i.removeAttribute("aria-invalid")}function l(i){var o=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",s).output({id:CKEDITOR.tools.getNextNumber(),editorId:i.id,langDir:i.lang.dir,langCode:i.langCode,editorDialogClass:"cke_editor_"+i.name.replace(/\./g,"\\.")+"_dialog",closeTitle:i.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),T=o.getChild([0,0,0,0,0]),_=T.getChild(0),S=T.getChild(1);i.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(T);!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(i="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+i+'" tabIndex="-1"></iframe>').appendTo(T.getParent()));_.unselectable();S.unselectable();return{element:o,parts:{dialog:o.getChild(0),title:_,close:S,tabs:T.getChild(2),contents:T.getChild([3,0,0,0]),footer:T.getChild([3,0,1,0])}}}function k(o,s,T){(this||i).element=s;(this||i).focusIndex=T;(this||i).tabIndex=0;(this||i).isFocusable=function(){return!s.getAttribute("disabled")&&s.isVisible()};(this||i).focus=function(){o._.currentFocusIndex=(this||i).focusIndex;(this||i).element.focus()};s.on("keydown",(function(i){i.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}));s.on("focus",(function(){this.fire("mouseover")}));s.on("blur",(function(){this.fire("mouseout")}))}function g(i){function b(){i.layout()}var o=CKEDITOR.document.getWindow();o.on("resize",b);i.on("hide",(function(){o.removeListener("resize",b)}))}function h(o,s){(this||i)._={dialog:o};CKEDITOR.tools.extend(this||i,s)}function m(i){function b(P){var $=i.getSize(),V=CKEDITOR.document.getWindow().getViewPaneSize(),j=P.data.$.screenX,Y=P.data.$.screenY,ee=j-o.x,te=Y-o.y;o={x:j,y:Y};s.x+=ee;s.y+=te;i.move(s.x+S[3]<_?-S[3]:s.x-S[1]>V.width-$.width-_?V.width-$.width+("rtl"==T.lang.dir?0:S[1]):s.x,s.y+S[0]<_?-S[0]:s.y-S[2]>V.height-$.height-_?V.height-$.height+S[2]:s.y,1);P.data.preventDefault()}function c(){CKEDITOR.document.removeListener("mousemove",b);CKEDITOR.document.removeListener("mouseup",c);if(CKEDITOR.env.ie6Compat){var i=P.getChild(0).getFrameDocument();i.removeListener("mousemove",b);i.removeListener("mouseup",c)}}var o=null,s=null,T=i.getParentEditor(),_=T.config.dialog_magnetDistance,S=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof _&&(_=20);i.parts.title.on("mousedown",(function(T){o={x:T.data.$.screenX,y:T.data.$.screenY};CKEDITOR.document.on("mousemove",b);CKEDITOR.document.on("mouseup",c);s=i.getPosition();if(CKEDITOR.env.ie6Compat){var _=P.getChild(0).getFrameDocument();_.on("mousemove",b);_.on("mouseup",c)}T.data.preventDefault()}),i)}function e(i){function b(P){var Y="rtl"==T.lang.dir,ee=j.width,te=j.height,ne=ee+(P.data.$.screenX-V.x)*(Y?-1:1)*(i._.moved?1:2),ie=te+(P.data.$.screenY-V.y)*(i._.moved?1:2),oe=i._.element.getFirst(),oe=Y&&oe.getComputedStyle("right"),ae=i.getPosition();ae.y+ie>$.height&&(ie=$.height-ae.y);(Y?oe:ae.x)+ne>$.width&&(ne=$.width-(Y?oe:ae.x));s!=CKEDITOR.DIALOG_RESIZE_WIDTH&&s!=CKEDITOR.DIALOG_RESIZE_BOTH||(ee=Math.max(o.minWidth||0,ne-_));s!=CKEDITOR.DIALOG_RESIZE_HEIGHT&&s!=CKEDITOR.DIALOG_RESIZE_BOTH||(te=Math.max(o.minHeight||0,ie-S));i.resize(ee,te);i._.moved||i.layout();P.data.preventDefault()}function c(){CKEDITOR.document.removeListener("mouseup",c);CKEDITOR.document.removeListener("mousemove",b);Y&&(Y.remove(),Y=null);if(CKEDITOR.env.ie6Compat){var i=P.getChild(0).getFrameDocument();i.removeListener("mouseup",c);i.removeListener("mousemove",b)}}var o=i.definition,s=o.resizable;if(s!=CKEDITOR.DIALOG_RESIZE_NONE){var T=i.getParentEditor(),_,S,$,V,j,Y,ee=CKEDITOR.tools.addFunction((function(o){j=i.getSize();var s=i.parts.contents;s.$.getElementsByTagName("iframe").length&&(Y=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),s.append(Y));S=j.height-i.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks));_=j.width-i.parts.contents.getSize("width",1);V={x:o.screenX,y:o.screenY};$=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on("mousemove",b);CKEDITOR.document.on("mouseup",c);CKEDITOR.env.ie6Compat&&(s=P.getChild(0).getFrameDocument(),s.on("mousemove",b),s.on("mouseup",c));o.preventDefault&&o.preventDefault()}));i.on("load",(function(){var o="";s==CKEDITOR.DIALOG_RESIZE_WIDTH?o=" cke_resizer_horizontal":s==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(o=" cke_resizer_vertical");o=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+o+" cke_resizer_"+T.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(T.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+ee+', event )">'+("ltr"==T.lang.dir?"◢":"◣")+"</div>");i.parts.footer.append(o,1)}));T.on("destroy",(function(){CKEDITOR.tools.removeFunction(ee)}))}}function n(i){i.data.preventDefault(1)}function q(o){var s=CKEDITOR.document.getWindow(),T=o.config,$=CKEDITOR.skinName||o.config.skin,V=T.dialog_backgroundCoverColor||("moono-lisa"==$?"black":"white"),$=T.dialog_backgroundCoverOpacity,j=T.baseFloatZIndex,T=CKEDITOR.tools.genKey(V,$,j),Y=S[T];Y?Y.show():(j=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",j,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+V,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(V="<html><body style=\\'background-color:"+V+";\\'></body></html>",j.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),j.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+V+"' );document.close();")+"})())"),j.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),j.push("</div>"),Y=CKEDITOR.dom.element.createFromHtml(j.join("")),Y.setOpacity(void 0!==$?$:.5),Y.on("keydown",n),Y.on("keypress",n),Y.on("keyup",n),Y.appendTo(CKEDITOR.document.getBody()),S[T]=Y);o.focusManager.add(Y);P=Y;o=function(){var i=s.getViewPaneSize();Y.setStyles({width:i.width+"px",height:i.height+"px"})};var h=function(){var i=s.getScrollPosition(),o=CKEDITOR.dialog._.currentTop;Y.setStyles({left:i.x+"px",top:i.y+"px"});if(o)do{i=o.getPosition(),o.move(i.x,i.y)}while(o=o._.parentDialog)};_=o;s.on("resize",o);o();CKEDITOR.env.mac&&CKEDITOR.env.webkit||Y.focus();if(CKEDITOR.env.ie6Compat){var k=function(){h();k.prevScrollHandler.apply(this||i,arguments)};s.$.setTimeout((function(){k.prevScrollHandler=window.onscroll||function(){};window.onscroll=k}),0);h()}}function y(i){P&&(i.focusManager.remove(P),i=CKEDITOR.document.getWindow(),P.hide(),P=null,i.removeListener("resize",_),CKEDITOR.env.ie6Compat&&i.$.setTimeout((function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null}),0),_=null)}var o=CKEDITOR.tools.cssLength,s='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(o,s){function h(){var i=te._.focusList;i.sort((function(i,o){return i.tabIndex!=o.tabIndex?o.tabIndex-i.tabIndex:i.focusIndex-o.focusIndex}));for(var o=i.length,s=0;s<o;s++)i[s].focusIndex=s}function k(i){var o=te._.focusList;i=i||0;if(!(1>o.length)){var s=te._.currentFocusIndex;te._.tabBarMode&&0>i&&(s=0);try{o[s].getInputElement().$.blur()}catch(i){}var T=s,_=1<te._.pageCount;do{T+=i;if(_&&!te._.tabBarMode&&(T==o.length||-1==T)){te._.tabBarMode=!0;te._.tabs[te._.currentTabId][0].focus();te._.currentFocusIndex=-1;return}T=(T+o.length)%o.length;if(T==s)break}while(i&&!o[T].isFocusable());o[T].focus();"text"==o[T].type&&o[T].select()}}function n(s){if(te==CKEDITOR.dialog._.currentTop){var T=s.data.getKeystroke(),_="rtl"==o.lang.dir,S=[37,38,39,40];j=Y=0;if(9==T||T==CKEDITOR.SHIFT+9)k(T==CKEDITOR.SHIFT+9?-1:1),j=1;else if(T==CKEDITOR.ALT+121&&!te._.tabBarMode&&1<te.getPageCount())te._.tabBarMode=!0,te._.tabs[te._.currentTabId][0].focus(),te._.currentFocusIndex=-1,j=1;else if(-1!=CKEDITOR.tools.indexOf(S,T)&&te._.tabBarMode)T=-1!=CKEDITOR.tools.indexOf([_?39:37,38],T)?a.call(te):f.call(te),te.selectPage(T),te._.tabs[T][0].focus(),j=1;else if(13!=T&&32!=T||!te._.tabBarMode)if(13==T)T=s.data.getTarget(),T.is("a","button","select","textarea")||T.is("input")&&"button"==T.$.type||((T=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(T.click,0,T),j=1),Y=1;else{if(27!=T)return;(T=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(T.click,0,T):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),Y=1}else this.selectPage((this||i)._.currentTabId),(this||i)._.tabBarMode=!1,(this||i)._.currentFocusIndex=-1,k(1),j=1;r(s)}}function r(i){j?i.data.preventDefault(1):Y&&i.data.stopPropagation()}var _=CKEDITOR.dialog._.dialogDefinitions[s],S=CKEDITOR.tools.clone(T),P=o.config.dialog_buttonsOrder||"OS",$=o.lang.dir,V={},j,Y;("OS"==P&&CKEDITOR.env.mac||"rtl"==P&&"ltr"==$||"ltr"==P&&"rtl"==$)&&S.buttons.reverse();_=CKEDITOR.tools.extend(_(o),S);_=CKEDITOR.tools.clone(_);_=new t(this||i,_);S=l(o);(this||i)._={editor:o,element:S.element,name:s,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1};(this||i).parts=S.parts;CKEDITOR.tools.setTimeout((function(){o.fire("ariaWidget",(this||i).parts.contents)}),0,this||i);S={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"};S["rtl"==$?"right":"left"]=0;(this||i).parts.dialog.setStyles(S);CKEDITOR.event.call(this||i);(this||i).definition=_=CKEDITOR.fire("dialogDefinition",{name:s,definition:_},o).definition;if(!("removeDialogTabs"in o._)&&o.config.removeDialogTabs){S=o.config.removeDialogTabs.split(";");for($=0;$<S.length;$++)if(P=S[$].split(":"),2==P.length){var ee=P[0];V[ee]||(V[ee]=[]);V[ee].push(P[1])}o._.removeDialogTabs=V}if(o._.removeDialogTabs&&(V=o._.removeDialogTabs[s]))for($=0;$<V.length;$++)_.removeContents(V[$]);_.onLoad&&this.on("load",_.onLoad);_.onShow&&this.on("show",_.onShow);_.onHide&&this.on("hide",_.onHide);_.onOk&&this.on("ok",(function(s){o.fire("saveSnapshot");setTimeout((function(){o.fire("saveSnapshot")}),0);!1===_.onOk.call(this||i,s)&&(s.data.hide=!1)}));(this||i).state=CKEDITOR.DIALOG_STATE_IDLE;_.onCancel&&this.on("cancel",(function(o){!1===_.onCancel.call(this||i,o)&&(o.data.hide=!1)}));var te=this||i,M=function(o){var s=te._.contents,T=!1,_;for(_ in s)for(var S in s[_])if(T=o.call(this||i,s[_][S]))return};this.on("ok",(function(o){M((function(s){if(s.validate){var T=s.validate(this||i),_="string"==typeof T||!1===T;_&&(o.data.hide=!1,o.stop());c.call(s,!_,"string"==typeof T?T:void 0);return _}}))}),this||i,null,0);this.on("cancel",(function(i){M((function(s){if(s.isChanged())return o.config.dialog_noConfirmCancel||confirm(o.lang.common.confirmCancel)||(i.data.hide=!1),!0}))}),this||i,null,0);(this||i).parts.close.on("click",(function(i){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide();i.data.preventDefault()}),this||i);(this||i).changeFocus=k;var ne=(this||i)._.element;o.focusManager.add(ne,1);this.on("show",(function(){ne.on("keydown",n,this||i);CKEDITOR.env.gecko&&ne.on("keypress",r,this||i)}));this.on("hide",(function(){ne.removeListener("keydown",n);CKEDITOR.env.gecko&&ne.removeListener("keypress",r);M((function(i){d.apply(i)}))}));this.on("iframeAdded",(function(o){new CKEDITOR.dom.document(o.data.iframe.$.contentWindow.document).on("keydown",n,this||i,null,0)}));this.on("show",(function(){h();var s=1<te._.pageCount;o.config.dialog_startupFocusTab&&s?(te._.tabBarMode=!0,te._.tabs[te._.currentTabId][0].focus(),te._.currentFocusIndex=-1):(this||i)._.hasFocus||((this||i)._.currentFocusIndex=s?-1:(this||i)._.focusList.length-1,_.onFocus?(s=_.onFocus.call(this||i))&&s.focus():k(1))}),this||i,null,4294967295);CKEDITOR.env.ie6Compat&&this.on("load",(function(){var i=this.getElement(),o=i.getFirst();o.remove();o.appendTo(i)}),this||i);m(this||i);e(this||i);new CKEDITOR.dom.text(_.title,CKEDITOR.document).appendTo((this||i).parts.title);for($=0;$<_.contents.length;$++)(V=_.contents[$])&&this.addPage(V);(this||i).parts.tabs.on("click",(function(o){var s=o.data.getTarget();s.hasClass("cke_dialog_tab")&&(s=s.$.id,this.selectPage(s.substring(4,s.lastIndexOf("_"))),(this||i)._.tabBarMode&&((this||i)._.tabBarMode=!1,(this||i)._.currentFocusIndex=-1,k(1)),o.data.preventDefault())}),this||i);$=[];V=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this||i,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:_.buttons},$).getChild();(this||i).parts.footer.setHtml($.join(""));for($=0;$<V.length;$++)(this||i)._.buttons[V[$].id]=V[$]};CKEDITOR.dialog.prototype={destroy:function(){this.hide();(this||i)._.element.remove()},resize:function(){return function(o,s){(this||i)._.contentSize&&(this||i)._.contentSize.width==o&&(this||i)._.contentSize.height==s||(CKEDITOR.dialog.fire("resize",{dialog:this||i,width:o,height:s},(this||i)._.editor),this.fire("resize",{width:o,height:s},(this||i)._.editor),(this||i).parts.contents.setStyles({width:o+"px",height:s+"px"}),"rtl"==(this||i)._.editor.lang.dir&&(this||i)._.position&&((this||i)._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-(this||i)._.contentSize.width-parseInt((this||i)._.element.getFirst().getStyle("right"),10)),(this||i)._.contentSize={width:o,height:s})}}(),getSize:function(){var o=(this||i)._.element.getFirst();return{width:o.$.offsetWidth||0,height:o.$.offsetHeight||0}},move:function(o,s,T){var _=(this||i)._.element.getFirst(),S="rtl"==(this||i)._.editor.lang.dir,P="fixed"==_.getComputedStyle("position");CKEDITOR.env.ie&&_.setStyle("zoom","100%");P&&(this||i)._.position&&(this||i)._.position.x==o&&(this||i)._.position.y==s||((this||i)._.position={x:o,y:s},P||(P=CKEDITOR.document.getWindow().getScrollPosition(),o+=P.x,s+=P.y),S&&(P=this.getSize(),o=CKEDITOR.document.getWindow().getViewPaneSize().width-P.width-o),s={top:(0<s?s:0)+"px"},s[S?"right":"left"]=(0<o?o:0)+"px",_.setStyles(s),T&&((this||i)._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},(this||i)._.position)},show:function(){var o=(this||i)._.element,s=(this||i).definition;o.getParent()&&o.getParent().equals(CKEDITOR.document.getBody())?o.setStyle("display","block"):o.appendTo(CKEDITOR.document.getBody());this.resize((this||i)._.contentSize&&(this||i)._.contentSize.width||s.width||s.minWidth,(this||i)._.contentSize&&(this||i)._.contentSize.height||s.height||s.minHeight);this.reset();null===(this||i)._.currentTabId&&this.selectPage((this||i).definition.contents[0].id);null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=(this||i)._.editor.config.baseFloatZIndex);(this||i)._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10);null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this||i,(this||i)._.parentDialog=null,q((this||i)._.editor)):((this||i)._.parentDialog=CKEDITOR.dialog._.currentTop,(this||i)._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor((this||i)._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this||i);o.on("keydown",H);o.on("keyup",F);(this||i)._.hasFocus=!1;for(var T in s.contents)if(s.contents[T]){var o=s.contents[T],_=(this||i)._.tabs[o.id],S=o.requiredContent,P=0;if(_){for(var $ in(this||i)._.contents[o.id]){var V=(this||i)._.contents[o.id][$];"hbox"!=V.type&&"vbox"!=V.type&&V.getInputElement()&&(V.requiredContent&&!(this||i)._.editor.activeFilter.check(V.requiredContent)?V.disable():(V.enable(),P++))}!P||S&&!(this||i)._.editor.activeFilter.check(S)?_[0].addClass("cke_dialog_tab_disabled"):_[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout((function(){this.layout();g(this||i);(this||i).parts.dialog.setStyle("visibility","");this.fireOnce("load",{});CKEDITOR.ui.fire("ready",this||i);this.fire("show",{});(this||i)._.editor.fire("dialogShow",this||i);(this||i)._.parentDialog||(this||i)._.editor.focusManager.lock();this.foreach((function(i){i.setInitValue&&i.setInitValue()}))}),100,this||i)},layout:function(){var o=(this||i).parts.dialog,s=this.getSize(),T=CKEDITOR.document.getWindow().getViewPaneSize(),_=(T.width-s.width)/2,S=(T.height-s.height)/2;CKEDITOR.env.ie6Compat||(s.height+(0<S?S:0)>T.height||s.width+(0<_?_:0)>T.width?o.setStyle("position","absolute"):o.setStyle("position","fixed"));this.move((this||i)._.moved?(this||i)._.position.x:_,(this||i)._.moved?(this||i)._.position.y:S)},foreach:function(o){for(var s in(this||i)._.contents)for(var T in(this||i)._.contents[s])o.call(this||i,(this||i)._.contents[s][T]);return this||i},reset:function(){var a=function(i){i.reset&&i.reset(1)};return function(){this.foreach(a);return this||i}}(),setupContent:function(){var i=arguments;this.foreach((function(o){o.setup&&o.setup.apply(o,i)}))},commitContent:function(){var o=arguments;this.foreach((function(s){CKEDITOR.env.ie&&(this||i)._.currentFocusIndex==s.focusIndex&&s.getInputElement().$.blur();s.commit&&s.commit.apply(s,o)}))},hide:function(){if((this||i).parts.dialog.isVisible()){this.fire("hide",{});(this||i)._.editor.fire("dialogHide",this||i);this.selectPage((this||i)._.tabIdList[0]);var o=(this||i)._.element;o.setStyle("display","none");(this||i).parts.dialog.setStyle("visibility","hidden");for(J(this||i);CKEDITOR.dialog._.currentTop!=(this||i);)CKEDITOR.dialog._.currentTop.hide();if((this||i)._.parentDialog){var s=(this||i)._.parentDialog.getElement().getFirst();s.setStyle("z-index",parseInt(s.$.style.zIndex,10)+Math.floor((this||i)._.editor.config.baseFloatZIndex/2))}else y((this||i)._.editor);if(CKEDITOR.dialog._.currentTop=(this||i)._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null;o.removeListener("keydown",H);o.removeListener("keyup",F);var T=(this||i)._.editor;T.focus();setTimeout((function(){T.focusManager.unlock();CKEDITOR.env.iOS&&T.window.focus()}),0)}delete(this||i)._.parentDialog;this.foreach((function(i){i.resetInitValue&&i.resetInitValue()}));this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(o){if(!o.requiredContent||(this||i)._.editor.filter.check(o.requiredContent)){for(var s=[],T=o.label?' title="'+CKEDITOR.tools.htmlEncode(o.label)+'"':"",_=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this||i,{type:"vbox",className:"cke_dialog_page_contents",children:o.elements,expand:!!o.expand,padding:o.padding,style:o.style||"width: 100%;"},s),S=(this||i)._.contents[o.id]={},P=_.getChild(),$=0;_=P.shift();)_.notAllowed||"hbox"==_.type||"vbox"==_.type||$++,S[_.id]=_,"function"==typeof _.getChild&&P.push.apply(P,_.getChild());$||(o.hidden=!0);s=CKEDITOR.dom.element.createFromHtml(s.join(""));s.setAttribute("role","tabpanel");_=CKEDITOR.env;S="cke_"+o.id+"_"+CKEDITOR.tools.getNextNumber();T=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<(this||i)._.pageCount?" cke_last":"cke_first",T,o.hidden?' style="display:none"':"",' id="',S,'"',_.gecko&&!_.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',o.label,"</a>"].join(""));s.setAttribute("aria-labelledby",S);(this||i)._.tabs[o.id]=[T,s];(this||i)._.tabIdList.push(o.id);!o.hidden&&(this||i)._.pageCount++;(this||i)._.lastTab=T;this.updateStyle();s.setAttribute("name",o.id);s.appendTo((this||i).parts.contents);T.unselectable();(this||i).parts.tabs.append(T);o.accessKey&&(I(this||i,this||i,"CTRL+"+o.accessKey,L,E),(this||i)._.accessKeyMap["CTRL+"+o.accessKey]=o.id)}},selectPage:function(o){if((this||i)._.currentTabId!=o&&!(this||i)._.tabs[o][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:o,currentPage:(this||i)._.currentTabId})){for(var s in(this||i)._.tabs){var T=(this||i)._.tabs[s][0],_=(this||i)._.tabs[s][1];s!=o&&(T.removeClass("cke_dialog_tab_selected"),_.hide());_.setAttribute("aria-hidden",s!=o)}var S=(this||i)._.tabs[o];S[0].addClass("cke_dialog_tab_selected");CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(b(S[1]),S[1].show(),setTimeout((function(){b(S[1],1)}),0)):S[1].show();(this||i)._.currentTabId=o;(this||i)._.currentTabIndex=CKEDITOR.tools.indexOf((this||i)._.tabIdList,o)}},updateStyle:function(){(this||i).parts.dialog[(1===(this||i)._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(o){var s=(this||i)._.tabs[o]&&(this||i)._.tabs[o][0];s&&1!=(this||i)._.pageCount&&s.isVisible()&&(o==(this||i)._.currentTabId&&this.selectPage(a.call(this||i)),s.hide(),(this||i)._.pageCount--,this.updateStyle())},showPage:function(o){(o=(this||i)._.tabs[o]&&(this||i)._.tabs[o][0])&&(o.show(),(this||i)._.pageCount++,this.updateStyle())},getElement:function(){return(this||i)._.element},getName:function(){return(this||i)._.name},getContentElement:function(o,s){var T=(this||i)._.contents[o];return T&&T[s]},getValueOf:function(i,o){return this.getContentElement(i,o).getValue()},setValueOf:function(i,o,s){return this.getContentElement(i,o).setValue(s)},getButton:function(o){return(this||i)._.buttons[o]},click:function(o){return(this||i)._.buttons[o].click()},disableButton:function(o){return(this||i)._.buttons[o].disable()},enableButton:function(o){return(this||i)._.buttons[o].enable()},getPageCount:function(){return(this||i)._.pageCount},getParentEditor:function(){return(this||i)._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(o,s){if("undefined"==typeof s)s=(this||i)._.focusList.length,(this||i)._.focusList.push(new k(this||i,o,s));else{(this||i)._.focusList.splice(s,0,new k(this||i,o,s));for(var T=s+1;T<(this||i)._.focusList.length;T++)(this||i)._.focusList[T].focusIndex++}},setState:function(o){if((this||i).state!=o){(this||i).state=o;if(o==CKEDITOR.DIALOG_STATE_BUSY){if(!(this||i).parts.spinner){var s=this.getParentEditor().lang.dir,T={attributes:{class:"cke_dialog_spinner"},styles:{float:"rtl"==s?"right":"left"}};T.styles["margin-"+("rtl"==s?"left":"right")]="8px";(this||i).parts.spinner=CKEDITOR.document.createElement("div",T);(this||i).parts.spinner.setHtml("&#8987;");(this||i).parts.spinner.appendTo((this||i).parts.title,1)}(this||i).parts.spinner.show();this.getButton("ok").disable()}else o==CKEDITOR.DIALOG_STATE_IDLE&&((this||i).parts.spinner&&(this||i).parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",o)}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(o,s){(this||i)._.dialogDefinitions[o]&&"function"!=typeof s||((this||i)._.dialogDefinitions[o]=s)},exists:function(o){return!!(this||i)._.dialogDefinitions[o]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(i,o,s){i=i.config.removeDialogTabs;return!(i&&i.match(new RegExp("(?:^|;)"+o+":"+s+"(?:$|;)","i")))},okButton:function(){var a=function(i,o){o=o||{};return CKEDITOR.tools.extend({id:"ok",type:"button",label:i.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function(i){i=i.data.dialog;!1!==i.fire("ok",{hide:!0}).hide&&i.hide()}},o,!0)};a.type="button";a.override=function(i){return CKEDITOR.tools.extend((function(o){return a(o,i)}),{type:"button"},!0)};return a}(),cancelButton:function(){var a=function(i,o){o=o||{};return CKEDITOR.tools.extend({id:"cancel",type:"button",label:i.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(i){i=i.data.dialog;!1!==i.fire("cancel",{hide:!0}).hide&&i.hide()}},o,!0)};a.type="button";a.override=function(i){return CKEDITOR.tools.extend((function(o){return a(o,i)}),{type:"button"},!0)};return a}(),addUIElement:function(o,s){(this||i)._.uiElementBuilders[o]=s}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var T={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},w=function(i,o,s){for(var T=0,_;_=i[T];T++)if(_.id==o||s&&_[s]&&(_=w(_[s],o,s)))return _;return null},r=function(i,o,s,T,_){if(s){for(var S=0,P;P=i[S];S++){if(P.id==s)return i.splice(S,0,o),o;if(T&&P[T]&&(P=r(P[T],o,s,T,!0)))return P}if(_)return null}i.push(o);return o},z=function(i,o,s){for(var T=0,_;_=i[T];T++){if(_.id==o)return i.splice(T,1);if(s&&_[s]&&(_=z(_[s],o,s)))return _}return null},t=function(o,s){(this||i).dialog=o;for(var T=s.contents,_=0,S;S=T[_];_++)T[_]=S&&new h(o,S);CKEDITOR.tools.extend(this||i,s)};t.prototype={getContents:function(o){return w((this||i).contents,o)},getButton:function(o){return w((this||i).buttons,o)},addContents:function(o,s){return r((this||i).contents,o,s)},addButton:function(o,s){return r((this||i).buttons,o,s)},removeContents:function(o){z((this||i).contents,o)},removeButton:function(o){z((this||i).buttons,o)}};h.prototype={get:function(o){return w((this||i).elements,o,"children")},add:function(o,s){return r((this||i).elements,o,s,"children")},remove:function(o){z((this||i).elements,o,"children")}};var _,S={},P,$={},H=function(i){var o=i.data.$.ctrlKey||i.data.$.metaKey,s=i.data.$.altKey,T=i.data.$.shiftKey,_=String.fromCharCode(i.data.$.keyCode);(o=$[(o?"CTRL+":"")+(s?"ALT+":"")+(T?"SHIFT+":"")+_])&&o.length&&(o=o[o.length-1],o.keydown&&o.keydown.call(o.uiElement,o.dialog,o.key),i.data.preventDefault())},F=function(i){var o=i.data.$.ctrlKey||i.data.$.metaKey,s=i.data.$.altKey,T=i.data.$.shiftKey,_=String.fromCharCode(i.data.$.keyCode);(o=$[(o?"CTRL+":"")+(s?"ALT+":"")+(T?"SHIFT+":"")+_])&&o.length&&(o=o[o.length-1],o.keyup&&(o.keyup.call(o.uiElement,o.dialog,o.key),i.data.preventDefault()))},I=function(i,o,s,T,_){($[s]||($[s]=[])).push({uiElement:i,dialog:o,key:s,keyup:_||i.accessKeyUp,keydown:T||i.accessKeyDown})},J=function(i){for(var o in $){for(var s=$[o],T=s.length-1;0<=T;T--)s[T].dialog!=i&&s[T].uiElement!=i||s.splice(T,1);0===s.length&&delete $[o]}},E=function(i,o){i._.accessKeyMap[o]&&i.selectPage(i._.accessKeyMap[o])},L=function(){};(function(){CKEDITOR.ui.dialog={uiElement:function(o,s,T,_,S,P,$){if(!(4>arguments.length)){var V=(_.call?_(s):_)||"div",j=["<",V," "],Y=(S&&S.call?S(s):S)||{},ee=(P&&P.call?P(s):P)||{},te=($&&$.call?$.call(this||i,o,s):$)||"",ne=(this||i).domId=ee.id||CKEDITOR.tools.getNextId()+"_uiElement";s.requiredContent&&!o.getParentEditor().filter.check(s.requiredContent)&&(Y.display="none",(this||i).notAllowed=!0);ee.id=ne;var ie={};s.type&&(ie["cke_dialog_ui_"+s.type]=1);s.className&&(ie[s.className]=1);s.disabled&&(ie.cke_disabled=1);for(var oe=ee["class"]&&ee["class"].split?ee["class"].split(" "):[],ne=0;ne<oe.length;ne++)oe[ne]&&(ie[oe[ne]]=1);oe=[];for(ne in ie)oe.push(ne);ee["class"]=oe.join(" ");s.title&&(ee.title=s.title);ie=(s.style||"").split(";");s.align&&(oe=s.align,Y["margin-left"]="left"==oe?0:"auto",Y["margin-right"]="right"==oe?0:"auto");for(ne in Y)ie.push(ne+":"+Y[ne]);s.hidden&&ie.push("display:none");for(ne=ie.length-1;0<=ne;ne--)""===ie[ne]&&ie.splice(ne,1);0<ie.length&&(ee.style=(ee.style?ee.style+"; ":"")+ie.join("; "));for(ne in ee)j.push(ne+'="'+CKEDITOR.tools.htmlEncode(ee[ne])+'" ');j.push(">",te,"</",V,">");T.push(j.join(""));((this||i)._||((this||i)._={})).dialog=o;"boolean"==typeof s.isChanged&&((this||i).isChanged=function(){return s.isChanged});"function"==typeof s.isChanged&&((this||i).isChanged=s.isChanged);"function"==typeof s.setValue&&((this||i).setValue=CKEDITOR.tools.override((this||i).setValue,(function(o){return function(T){o.call(this||i,s.setValue.call(this||i,T))}})));"function"==typeof s.getValue&&((this||i).getValue=CKEDITOR.tools.override((this||i).getValue,(function(o){return function(){return s.getValue.call(this||i,o.call(this||i))}})));CKEDITOR.event.implementOn(this||i);this.registerEvents(s);(this||i).accessKeyUp&&(this||i).accessKeyDown&&s.accessKey&&I(this||i,o,"CTRL+"+s.accessKey);var ae=this||i;o.on("load",(function(){var i=ae.getInputElement();if(i){var s=ae.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";i.on("focus",(function(){o._.tabBarMode=!1;o._.hasFocus=!0;ae.fire("focus");s&&this.addClass(s)}));i.on("blur",(function(){ae.fire("blur");s&&this.removeClass(s)}))}}));CKEDITOR.tools.extend(this||i,s);(this||i).keyboardFocusable&&((this||i).tabIndex=s.tabIndex||0,(this||i).focusIndex=o._.focusList.push(this||i)-1,this.on("focus",(function(){o._.currentFocusIndex=ae.focusIndex})))}},hbox:function(s,T,_,S,P){if(!(4>arguments.length)){(this||i)._||((this||i)._={});var $=(this||i)._.children=T,V=P&&P.widths||null,j=P&&P.height||null,Y,ee={role:"presentation"};P&&P.align&&(ee.align=P.align);CKEDITOR.ui.dialog.uiElement.call(this||i,s,P||{type:"hbox"},S,"table",{},ee,(function(){var i=['<tbody><tr class="cke_dialog_ui_hbox">'];for(Y=0;Y<_.length;Y++){var s="cke_dialog_ui_hbox_child",T=[];0===Y&&(s="cke_dialog_ui_hbox_first");Y==_.length-1&&(s="cke_dialog_ui_hbox_last");i.push('<td class="',s,'" role="presentation" ');V?V[Y]&&T.push("width:"+o(V[Y])):T.push("width:"+Math.floor(100/_.length)+"%");j&&T.push("height:"+o(j));P&&void 0!==P.padding&&T.push("padding:"+o(P.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&$[Y].align&&T.push("text-align:"+$[Y].align);0<T.length&&i.push('style="'+T.join("; ")+'" ');i.push(">",_[Y],"</td>")}i.push("</tr></tbody>");return i.join("")}))}},vbox:function(s,T,_,S,P){if(!(3>arguments.length)){(this||i)._||((this||i)._={});var $=(this||i)._.children=T,V=P&&P.width||null,j=P&&P.heights||null;CKEDITOR.ui.dialog.uiElement.call(this||i,s,P||{type:"vbox"},S,"div",null,{role:"presentation"},(function(){var i=['<table role="presentation" cellspacing="0" border="0" '];i.push('style="');P&&P.expand&&i.push("height:100%;");i.push("width:"+o(V||"100%"),";");CKEDITOR.env.webkit&&i.push("float:none;");i.push('"');i.push('align="',CKEDITOR.tools.htmlEncode(P&&P.align||("ltr"==s.getParentEditor().lang.dir?"left":"right")),'" ');i.push("><tbody>");for(var T=0;T<_.length;T++){var S=[];i.push('<tr><td role="presentation" ');V&&S.push("width:"+o(V||"100%"));j?S.push("height:"+o(j[T])):P&&P.expand&&S.push("height:"+Math.floor(100/_.length)+"%");P&&void 0!==P.padding&&S.push("padding:"+o(P.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&$[T].align&&S.push("text-align:"+$[T].align);0<S.length&&i.push('style="',S.join("; "),'" ');i.push(' class="cke_dialog_ui_vbox_child">',_[T],"</td></tr>")}i.push("</tbody></table>");return i.join("")}))}}}})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById((this||i).domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return(this||i)._.dialog},setValue:function(o,s){this.getInputElement().setValue(o);!s&&this.fire("change",{value:o});return this||i},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var o=this.getInputElement();(o=o.getParent())&&-1==o.$.className.search("cke_dialog_page_contents"););if(!o)return this||i;o=o.getAttribute("name");(this||i)._.dialog._.currentTabId!=o&&(this||i)._.dialog.selectPage(o);return this||i},focus:function(){this.selectParentTab().getInputElement().focus();return this||i},registerEvents:function(o){var s=/^on([A-Z]\w+)/,T,e=function(i,o,s,T){o.on("load",(function(){i.getInputElement().on(s,T,i)}))},_;for(_ in o)(T=_.match(s))&&((this||i).eventProcessors[_]?(this||i).eventProcessors[_].call(this||i,(this||i)._.dialog,o[_]):e(this||i,(this||i)._.dialog,T[1].toLowerCase(),o[_]));return this||i},eventProcessors:{onLoad:function(o,s){o.on("load",s,this||i)},onShow:function(o,s){o.on("show",s,this||i)},onHide:function(o,s){o.on("hide",s,this||i)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var i=this.getElement();this.getInputElement().setAttribute("disabled","true");i.addClass("cke_disabled")},enable:function(){var i=this.getElement();this.getInputElement().removeAttribute("disabled");i.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!(!this.isEnabled()||!this.isVisible())}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(o){if(1>arguments.length)return(this||i)._.children.concat();o.splice||(o=[o]);return 2>o.length?(this||i)._.children[o[0]]:(this||i)._.children[o[0]]&&(this||i)._.children[o[0]].getChild?(this||i)._.children[o[0]].getChild(o.slice(1,o.length)):null}},!0);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox;(function(){var i={build:function(i,o,s){for(var T=o.children,_,S=[],P=[],$=0;$<T.length&&(_=T[$]);$++){var V=[];S.push(V);P.push(CKEDITOR.dialog._.uiElementBuilders[_.type].build(i,_,V))}return new CKEDITOR.ui.dialog[o.type](i,P,S,s,o)}};CKEDITOR.dialog.addUIElement("hbox",i);CKEDITOR.dialog.addUIElement("vbox",i)})();CKEDITOR.dialogCommand=function(o,s){(this||i).dialogName=o;CKEDITOR.tools.extend(this||i,s,!0)};CKEDITOR.dialogCommand.prototype={exec:function(o){var s=(this||i).tabId;o.openDialog((this||i).dialogName,(function(i){s&&i.selectPage(s)}))},canUndo:!1,editorFocus:1};(function(){var o=/^([a]|[^a])+$/,s=/^\d*$/,T=/^\d*(?:\.\d+)?$/,_=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,P=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,$=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){var o=arguments;return function(){var s=(this||i)&&(this||i).getValue?this.getValue():o[0],T,_=CKEDITOR.VALIDATE_AND,S=[],P;for(P=0;P<o.length;P++){if("function"!=typeof o[P])break;S.push(o[P])}P<o.length&&"string"==typeof o[P]&&(T=o[P],P++);P<o.length&&"number"==typeof o[P]&&(_=o[P]);var $=_==CKEDITOR.VALIDATE_AND;for(P=0;P<S.length;P++)$=_==CKEDITOR.VALIDATE_AND?$&&S[P](s):$||S[P](s);return!!$||T}},regex:function(o,s){return function(T){T=(this||i)&&(this||i).getValue?this.getValue():T;return!!o.test(T)||s}},notEmpty:function(i){return this.regex(o,i)},integer:function(i){return this.regex(s,i)},number:function(i){return this.regex(T,i)},cssLength:function(i){return this.functions((function(i){return P.test(CKEDITOR.tools.trim(i))}),i)},htmlLength:function(i){return this.functions((function(i){return _.test(CKEDITOR.tools.trim(i))}),i)},inlineStyle:function(i){return this.functions((function(i){return $.test(CKEDITOR.tools.trim(i))}),i)},equals:function(i,o){return this.functions((function(o){return o==i}),o)},notEqual:function(i,o){return this.functions((function(o){return o!=i}),o)}};CKEDITOR.on("instanceDestroyed",(function(i){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var o;o=CKEDITOR.dialog._.currentTop;)o.hide();for(var s in S)S[s].remove();S={}}i=i.editor._.storedDialogs;for(var T in i)i[T].destroy()}))})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(o,s){var T=null,_=CKEDITOR.dialog._.dialogDefinitions[o];null===CKEDITOR.dialog._.currentTop&&q(this||i);if("function"==typeof _)T=(this||i)._.storedDialogs||((this||i)._.storedDialogs={}),T=T[o]||(T[o]=new CKEDITOR.dialog(this||i,o)),s&&s.call(T,T),T.show();else{if("failed"==_)throw y(this||i),Error('[CKEDITOR.dialog.openDialog] Dialog "'+o+'" failed when loading definition.');"string"==typeof _&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(_),(function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[o]&&(CKEDITOR.dialog._.dialogDefinitions[o]="failed");this.openDialog(o,s)}),this||i,0,1)}CKEDITOR.skin.loadPart("dialog");return T}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(i){i.on("doubleclick",(function(o){o.data.dialog&&i.openDialog(o.data.dialog)}),null,null,999)}}),function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(o){var s=this||i;o.addCommand("a11yHelp",{exec:function(){var i=o.langCode,i=s.availableLangs[i]?i:s.availableLangs[i.replace(/-.*/,"")]?i.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(s.path+"dialogs/lang/"+i+".js"),(function(){o.lang.a11yhelp=s.langEntries[i];o.openDialog("a11yHelp")}))},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1});o.setKeystroke(CKEDITOR.ALT+48,"a11yHelp");CKEDITOR.dialog.add("a11yHelp",(this||i).path+"dialogs/a11yhelp.js");o.on("ariaEditorHelpLabel",(function(i){i.data.label=o.lang.common.editorHelp}))}})}(),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(o){var s=o.addCommand("about",new CKEDITOR.dialogCommand("about"));s.modes={wysiwyg:1,source:1};s.canUndo=!1;s.readOnly=1;o.ui.addButton&&o.ui.addButton("About",{label:o.lang.about.dlgTitle,command:"about",toolbar:"about"});CKEDITOR.dialog.add("about",(this||i).path+"dialogs/about.js")}}),CKEDITOR.plugins.add("basicstyles",{init:function(i){var o=0,b=function(T,_,S,P){if(P){P=new CKEDITOR.style(P);var $=s[S];$.unshift(P);i.attachStyleStateChange(P,(function(o){!i.readOnly&&i.getCommand(S).setState(o)}));i.addCommand(S,new CKEDITOR.styleCommand(P,{contentForms:$}));i.ui.addButton&&i.ui.addButton(T,{label:_,command:S,toolbar:"basicstyles,"+(o+=10)})}},s={bold:["strong","b",["span",function(i){i=i.styles["font-weight"];return"bold"==i||700<=+i}]],italic:["em","i",["span",function(i){return"italic"==i.styles["font-style"]}]],underline:["u",["span",function(i){return"underline"==i.styles["text-decoration"]}]],strike:["s","strike",["span",function(i){return"line-through"==i.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},T=i.config,_=i.lang.basicstyles;b("Bold",_.bold,"bold",T.coreStyles_bold);b("Italic",_.italic,"italic",T.coreStyles_italic);b("Underline",_.underline,"underline",T.coreStyles_underline);b("Strike",_.strike,"strike",T.coreStyles_strike);b("Subscript",_.subscript,"subscript",T.coreStyles_subscript);b("Superscript",_.superscript,"superscript",T.coreStyles_superscript);i.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){var i={exec:function(i){var o=i.getCommand("blockquote").state,s=i.getSelection(),T=s&&s.getRanges()[0];if(T){var _=s.createBookmarks();if(CKEDITOR.env.ie){var S=_[0].startNode,P=_[0].endNode,$;if(S&&"blockquote"==S.getParent().getName())for($=S;$=$.getNext();)if($.type==CKEDITOR.NODE_ELEMENT&&$.isBlockBoundary()){S.move($,!0);break}if(P&&"blockquote"==P.getParent().getName())for($=P;$=$.getPrevious();)if($.type==CKEDITOR.NODE_ELEMENT&&$.isBlockBoundary()){P.move($);break}}var V=T.createIterator();V.enlargeBr=i.config.enterMode!=CKEDITOR.ENTER_BR;if(o==CKEDITOR.TRISTATE_OFF){for(S=[];o=V.getNextParagraph();)S.push(o);1>S.length&&(o=i.document.createElement(i.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),P=_.shift(),T.insertNode(o),o.append(new CKEDITOR.dom.text("\ufeff",i.document)),T.moveToBookmark(P),T.selectNodeContents(o),T.collapse(!0),P=T.createBookmark(),S.push(o),_.unshift(P));$=S[0].getParent();T=[];for(P=0;P<S.length;P++)o=S[P],$=$.getCommonAncestor(o.getParent());for(o={table:1,tbody:1,tr:1,ol:1,ul:1};o[$.getName()];)$=$.getParent();for(P=null;0<S.length;){for(o=S.shift();!o.getParent().equals($);)o=o.getParent();o.equals(P)||T.push(o);P=o}for(;0<T.length;)if(o=T.shift(),"blockquote"==o.getName()){for(P=new CKEDITOR.dom.documentFragment(i.document);o.getFirst();)P.append(o.getFirst().remove()),S.push(P.getLast());P.replace(o)}else S.push(o);T=i.document.createElement("blockquote");for(T.insertBefore(S[0]);0<S.length;)o=S.shift(),T.append(o)}else if(o==CKEDITOR.TRISTATE_ON){P=[];for($={};o=V.getNextParagraph();){for(S=T=null;o.getParent();){if("blockquote"==o.getParent().getName()){T=o.getParent();S=o;break}o=o.getParent()}T&&S&&!S.getCustomData("blockquote_moveout")&&(P.push(S),CKEDITOR.dom.element.setMarker($,S,"blockquote_moveout",!0))}CKEDITOR.dom.element.clearAllMarkers($);o=[];S=[];for($={};0<P.length;)V=P.shift(),T=V.getParent(),V.getPrevious()?V.getNext()?(V.breakParent(V.getParent()),S.push(V.getNext())):V.remove().insertAfter(T):V.remove().insertBefore(T),T.getCustomData("blockquote_processed")||(S.push(T),CKEDITOR.dom.element.setMarker($,T,"blockquote_processed",!0)),o.push(V);CKEDITOR.dom.element.clearAllMarkers($);for(P=S.length-1;0<=P;P--){T=S[P];e:{$=T;for(var V=0,j=$.getChildCount(),Y=void 0;V<j&&(Y=$.getChild(V));V++)if(Y.type==CKEDITOR.NODE_ELEMENT&&Y.isBlockBoundary()){$=!1;break e}$=!0}$&&T.remove()}if(i.config.enterMode==CKEDITOR.ENTER_BR)for(T=!0;o.length;)if(V=o.shift(),"div"==V.getName()){P=new CKEDITOR.dom.documentFragment(i.document);!T||!V.getPrevious()||V.getPrevious().type==CKEDITOR.NODE_ELEMENT&&V.getPrevious().isBlockBoundary()||P.append(i.document.createElement("br"));for(T=V.getNext()&&!(V.getNext().type==CKEDITOR.NODE_ELEMENT&&V.getNext().isBlockBoundary());V.getFirst();)V.getFirst().remove().appendTo(P);T&&P.append(i.document.createElement("br"));P.replace(V);T=!1}}s.selectBookmarks(_);i.focus()}},refresh:function(i,o){this.setState(i.elementPath(o.block||o.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(o){o.blockless||(o.addCommand("blockquote",i),o.ui.addButton&&o.ui.addButton("Blockquote",{label:o.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),"use strict",function(){function a(o,s){CKEDITOR.tools.extend(this||i,s,{editor:o,id:"cke-"+CKEDITOR.tools.getUniqueId(),area:o._.notificationArea});s.type||((this||i).type="info");(this||i).element=this._createElement();o.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement((this||i).element)}function f(o){var s=this||i;(this||i).editor=o;(this||i).notifications=[];(this||i).element=this._createElement();(this||i)._uiBuffer=CKEDITOR.tools.eventsBuffer(10,(this||i)._layout,this||i);(this||i)._changeBuffer=CKEDITOR.tools.eventsBuffer(500,(this||i)._layout,this||i);o.on("destroy",(function(){s._removeListeners();s.element.remove()}))}CKEDITOR.plugins.add("notification",{init:function(i){function c(i){var o=new CKEDITOR.dom.element("div");o.setStyles({position:"fixed","margin-left":"-9999px"});o.setAttributes({"aria-live":"assertive","aria-atomic":"true"});o.setText(i);CKEDITOR.document.getBody().append(o);setTimeout((function(){o.remove()}),100)}i._.notificationArea=new f(i);i.showNotification=function(o,s,T){var _,S;"progress"==s?_=T:S=T;o=new CKEDITOR.plugins.notification(i,{message:o,type:s,progress:_,duration:S});o.show();return o};i.on("key",(function(o){if(27==o.data.keyCode){var s=i._.notificationArea.notifications;s.length&&(c(i.lang.notification.closed),s[s.length-1].hide(),o.cancel())}}))}});a.prototype={show:function(){!1!==(this||i).editor.fire("notificationShow",{notification:this||i})&&((this||i).area.add(this||i),this._hideAfterTimeout())},update:function(o){var s=!0;!1===(this||i).editor.fire("notificationUpdate",{notification:this||i,options:o})&&(s=!1);var T=(this||i).element,_=T.findOne(".cke_notification_message"),S=T.findOne(".cke_notification_progress"),P=o.type;T.removeAttribute("role");o.progress&&"progress"!=(this||i).type&&(P="progress");P&&(T.removeClass(this._getClass()),T.removeAttribute("aria-label"),(this||i).type=P,T.addClass(this._getClass()),T.setAttribute("aria-label",(this||i).type),"progress"!=(this||i).type||S?"progress"!=(this||i).type&&S&&S.remove():(S=this._createProgressElement(),S.insertBefore(_)));void 0!==o.message&&((this||i).message=o.message,_.setHtml((this||i).message));void 0!==o.progress&&((this||i).progress=o.progress,S&&S.setStyle("width",this._getPercentageProgress()));s&&o.important&&(T.setAttribute("role","alert"),this.isVisible()||(this||i).area.add(this||i));(this||i).duration=o.duration;this._hideAfterTimeout()},hide:function(){!1!==(this||i).editor.fire("notificationHide",{notification:this||i})&&(this||i).area.remove(this||i)},isVisible:function(){return 0<=CKEDITOR.tools.indexOf((this||i).area.notifications,this||i)},_createElement:function(){var o=this||i,s,T,_=(this||i).editor.lang.common.close;s=new CKEDITOR.dom.element("div");s.addClass("cke_notification");s.addClass(this._getClass());s.setAttributes({id:(this||i).id,role:"alert","aria-label":(this||i).type});"progress"==(this||i).type&&s.append(this._createProgressElement());T=new CKEDITOR.dom.element("p");T.addClass("cke_notification_message");T.setHtml((this||i).message);s.append(T);T=CKEDITOR.dom.element.createFromHtml('<a class="cke_notification_close" href="javascript:void(0)" title="'+_+'" role="button" tabindex="-1"><span class="cke_label">X</span></a>');s.append(T);T.on("click",(function(){o.editor.focus();o.hide()}));return s},_getClass:function(){return"progress"==(this||i).type?"cke_notification_info":"cke_notification_"+(this||i).type},_createProgressElement:function(){var i=new CKEDITOR.dom.element("span");i.addClass("cke_notification_progress");i.setStyle("width",this._getPercentageProgress());return i},_getPercentageProgress:function(){return Math.round(100*((this||i).progress||0))+"%"},_hideAfterTimeout:function(){var o=this||i,s;(this||i)._hideTimeoutId&&clearTimeout((this||i)._hideTimeoutId);"number"==typeof(this||i).duration?s=(this||i).duration:"info"!=(this||i).type&&"success"!=(this||i).type||(s="number"==typeof(this||i).editor.config.notification_duration?(this||i).editor.config.notification_duration:5e3);s&&(o._hideTimeoutId=setTimeout((function(){o.hide()}),s))}};f.prototype={add:function(o){(this||i).notifications.push(o);(this||i).element.append(o.element);1==(this||i).element.getChildCount()&&(CKEDITOR.document.getBody().append((this||i).element),this._attachListeners());this._layout()},remove:function(o){var s=CKEDITOR.tools.indexOf((this||i).notifications,o);0>s||((this||i).notifications.splice(s,1),o.element.remove(),(this||i).element.getChildCount()||(this._removeListeners(),(this||i).element.remove()))},_createElement:function(){var o=(this||i).editor,s=o.config,T=new CKEDITOR.dom.element("div");T.addClass("cke_notifications_area");T.setAttribute("id","cke_notifications_area_"+o.name);T.setStyle("z-index",s.baseFloatZIndex-2);return T},_attachListeners:function(){var o=CKEDITOR.document.getWindow(),s=(this||i).editor;o.on("scroll",(this||i)._uiBuffer.input);o.on("resize",(this||i)._uiBuffer.input);s.on("change",(this||i)._changeBuffer.input);s.on("floatingSpaceLayout",(this||i)._layout,this||i,null,20);s.on("blur",(this||i)._layout,this||i,null,20)},_removeListeners:function(){var o=CKEDITOR.document.getWindow(),s=(this||i).editor;o.removeListener("scroll",(this||i)._uiBuffer.input);o.removeListener("resize",(this||i)._uiBuffer.input);s.removeListener("change",(this||i)._changeBuffer.input);s.removeListener("floatingSpaceLayout",(this||i)._layout);s.removeListener("blur",(this||i)._layout)},_layout:function(){function a(){o.setStyle("left",oe(ae+T.width-j-Y))}var o=(this||i).element,s=(this||i).editor,T=s.ui.contentsElement.getClientRect(),_=s.ui.contentsElement.getDocumentPosition(),S,P,$=o.getClientRect(),V,j=(this||i)._notificationWidth,Y=(this||i)._notificationMargin;V=CKEDITOR.document.getWindow();var ee=V.getScrollPosition(),te=V.getViewPaneSize(),ne=CKEDITOR.document.getBody(),ie=ne.getDocumentPosition(),oe=CKEDITOR.tools.cssLength;j&&Y||(V=(this||i).element.getChild(0),j=(this||i)._notificationWidth=V.getClientRect().width,Y=(this||i)._notificationMargin=parseInt(V.getComputedStyle("margin-left"),10)+parseInt(V.getComputedStyle("margin-right"),10));s.toolbar&&(S=s.ui.space("top"),P=S.getClientRect());S&&S.isVisible()&&P.bottom>T.top&&P.bottom<T.bottom-$.height?o.setStyles({position:"fixed",top:oe(P.bottom)}):0<T.top?o.setStyles({position:"absolute",top:oe(_.y)}):_.y+T.height-$.height>ee.y?o.setStyles({position:"fixed",top:0}):o.setStyles({position:"absolute",top:oe(_.y+T.height-$.height)});var ae="fixed"==o.getStyle("position")?T.left:"static"!=ne.getComputedStyle("position")?_.x-ie.x:_.x;T.width<j+Y?_.x+j+Y>ee.x+te.width?a():o.setStyle("left",oe(ae)):_.x+j+Y>ee.x+te.width?o.setStyle("left",oe(ae)):_.x+T.width/2+j/2+Y>ee.x+te.width?o.setStyle("left",oe(ae-_.x+ee.x+te.width-j-Y)):0>T.left+T.width-j-Y?a():0>T.left+T.width/2-j/2?o.setStyle("left",oe(ae-_.x+ee.x)):o.setStyle("left",oe(ae+T.width/2-j/2-Y/2))}};CKEDITOR.plugins.notification=a}(),function(){var o='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-describedby="{id}_description" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(o+=' onkeypress="return false;"');CKEDITOR.env.gecko&&(o+=' onblur="this.style.cssText = this.style.cssText;"');var s="";CKEDITOR.env.ie&&(s='return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)==CKEDITOR.MOUSE_BUTTON_LEFT&&');var o=o+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" onclick="'+s+'CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"'+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span><span id="{id}_description" class="cke_button_label" aria-hidden="false">{ariaShortcut}</span>{arrowHtml}</a>',T=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),_=CKEDITOR.addTemplate("button",o);CKEDITOR.plugins.add("button",{beforeInit:function(i){i.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}});CKEDITOR.UI_BUTTON="button";CKEDITOR.ui.button=function(o){CKEDITOR.tools.extend(this||i,o,{title:o.label,click:o.click||function(i){i.execCommand(o.command)}});(this||i)._={}};CKEDITOR.ui.button.handler={create:function(i){return new CKEDITOR.ui.button(i)}};CKEDITOR.ui.button.prototype={render:function(o,s){function k(){var s=o.mode;s&&(s=(this||i).modes[s]?void 0!==S[s]?S[s]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,s=o.readOnly&&!(this||i).readOnly?CKEDITOR.TRISTATE_DISABLED:s,this.setState(s),(this||i).refresh&&this.refresh())}var S=null,P=CKEDITOR.env,$=(this||i)._.id=CKEDITOR.tools.getNextId(),V="",j=(this||i).command,Y,ee,te;(this||i)._.editor=o;var ne={id:$,button:this||i,editor:o,focus:function(){CKEDITOR.document.getById($).focus()},execute:function(){(this||i).button.click(o)},attach:function(o){(this||i).button.attach(o)}},ie=CKEDITOR.tools.addFunction((function(i){if(ne.onkey)return i=new CKEDITOR.dom.event(i),!1!==ne.onkey(ne,i.getKeystroke())})),oe=CKEDITOR.tools.addFunction((function(i){var o;ne.onfocus&&(o=!1!==ne.onfocus(ne,new CKEDITOR.dom.event(i)));return o})),ae=0;ne.clickFn=Y=CKEDITOR.tools.addFunction((function(){ae&&(o.unlockSelection(1),ae=0);ne.execute();P.iOS&&o.focus()}));(this||i).modes?(S={},o.on("beforeModeUnload",(function(){o.mode&&(this||i)._.state!=CKEDITOR.TRISTATE_DISABLED&&(S[o.mode]=(this||i)._.state)}),this||i),o.on("activeFilterChange",k,this||i),o.on("mode",k,this||i),!(this||i).readOnly&&o.on("readOnly",k,this||i)):j&&(j=o.getCommand(j))&&(j.on("state",(function(){this.setState(j.state)}),this||i),V+=j.state==CKEDITOR.TRISTATE_ON?"on":j.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");var re;(this||i).directional&&o.on("contentDirChanged",(function(s){var T=CKEDITOR.document.getById((this||i)._.id),_=T.getFirst();s=s.data;s!=o.lang.dir?T.addClass("cke_"+s):T.removeClass("cke_ltr").removeClass("cke_rtl");_.setAttribute("style",CKEDITOR.skin.getIconStyle(re,"rtl"==s,(this||i).icon,(this||i).iconOffset))}),this||i);j?(ee=o.getCommandKeystroke(j))&&(te=CKEDITOR.tools.keystrokeToString(o.lang.common.keyboard,ee)):V+="off";ee=(this||i).name||(this||i).command;var se=null,le=(this||i).icon;re=ee;(this||i).icon&&!/\./.test((this||i).icon)?(re=(this||i).icon,le=null):((this||i).icon&&(se=(this||i).icon),CKEDITOR.env.hidpi&&(this||i).iconHiDpi&&(se=(this||i).iconHiDpi));se?(CKEDITOR.skin.addIcon(se,se),le=null):se=re;V={id:$,name:ee,iconName:re,label:(this||i).label,cls:((this||i).hasArrow?"cke_button_expandable ":"")+((this||i).className||""),state:V,ariaDisabled:"disabled"==V?"true":"false",title:(this||i).title+(te?" ("+te.display+")":""),ariaShortcut:te?o.lang.common.keyboardShortcut+" "+te.aria:"",titleJs:P.gecko&&!P.hc?"":((this||i).title||"").replace("'",""),hasArrow:"string"===typeof(this||i).hasArrow&&(this||i).hasArrow||((this||i).hasArrow?"true":"false"),keydownFn:ie,focusFn:oe,clickFn:Y,style:CKEDITOR.skin.getIconStyle(se,"rtl"==o.lang.dir,le,(this||i).iconOffset),arrowHtml:(this||i).hasArrow?T.output():""};_.output(V,s);(this||i).onRender&&this.onRender();return ne},setState:function(o){if((this||i)._.state==o)return!1;(this||i)._.state=o;var s=CKEDITOR.document.getById((this||i)._.id);return!!s&&(s.setState(o,"cke_button"),s.setAttribute("aria-disabled",o==CKEDITOR.TRISTATE_DISABLED),(this||i).hasArrow?s.setAttribute("aria-expanded",o==CKEDITOR.TRISTATE_ON):o===CKEDITOR.TRISTATE_ON?s.setAttribute("aria-pressed",!0):s.removeAttribute("aria-pressed"),!0)},getState:function(){return(this||i)._.state},toFeature:function(o){if((this||i)._.feature)return(this||i)._.feature;var s=this||i;(this||i).allowedContent||(this||i).requiredContent||!(this||i).command||(s=o.getCommand((this||i).command)||s);return(this||i)._.feature=s}};CKEDITOR.ui.prototype.addButton=function(i,o){this.add(i,CKEDITOR.UI_BUTTON,o)}}(),function(){function a(i){function b(){for(var o=c(),s=CKEDITOR.tools.clone(i.config.toolbarGroups)||f(i),T=0;T<s.length;T++){var _=s[T];if("/"!=_){"string"==typeof _&&(_=s[T]={name:_});var S,P=_.groups;if(P)for(var $=0;$<P.length;$++)S=P[$],(S=o[S])&&g(_,S);(S=o[_.name])&&g(_,S)}}return s}function c(){var o={},s,T,_;for(s in i.ui.items)T=i.ui.items[s],_=T.toolbar||"others",_=_.split(","),T=_[0],_=parseInt(_[1]||-1,10),o[T]||(o[T]=[]),o[T].push({name:s,order:_});for(T in o)o[T]=o[T].sort((function(i,o){return i.order==o.order?0:0>o.order?-1:0>i.order?1:i.order<o.order?-1:1}));return o}function g(s,T){if(T.length){s.items?s.items.push(i.ui.create("-")):s.items=[];for(var _;_=T.shift();)_="string"==typeof _?_:_.name,o&&-1!=CKEDITOR.tools.indexOf(o,_)||(_=i.ui.create(_))&&i.addFeature(_)&&s.items.push(_)}}function h(i){var o=[],s,T,_;for(s=0;s<i.length;++s)T=i[s],_={},"/"==T?o.push(T):CKEDITOR.tools.isArray(T)?(g(_,CKEDITOR.tools.clone(T)),o.push(_)):T.items&&(g(_,CKEDITOR.tools.clone(T.items)),_.name=T.name,o.push(_));return o}var o=i.config.removeButtons,o=o&&o.split(","),s=i.config.toolbar;"string"==typeof s&&(s=i.config["toolbar_"+s]);return i.toolbar=s?h(s):b()}function f(i){return i._.toolbarGroups||(i._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var b=function(){(this||i).toolbars=[];(this||i).focusCommandExecuted=!1};b.prototype.focus=function(){for(var o=0,s;s=(this||i).toolbars[o++];)for(var T=0,_;_=s.items[T++];)if(_.focus){_.focus();return}};var o={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(i){i.toolbox&&(i.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout((function(){i.toolbox.focus()}),100):i.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(s){var T,k=function(i,o){var _,S="rtl"==s.lang.dir,P=s.config.toolbarGroupCycling,$=S?37:39,S=S?39:37,P=void 0===P||P;switch(o){case 9:case CKEDITOR.SHIFT+9:for(;!_||!_.items.length;)if(_=9==o?(_?_.next:i.toolbar.next)||s.toolbox.toolbars[0]:(_?_.previous:i.toolbar.previous)||s.toolbox.toolbars[s.toolbox.toolbars.length-1],_.items.length)for(i=_.items[T?_.items.length-1:0];i&&!i.focus;)(i=T?i.previous:i.next)||(_=0);i&&i.focus();return!1;case $:_=i;do{_=_.next,!_&&P&&(_=i.toolbar.items[0])}while(_&&!_.focus);_?_.focus():k(i,9);return!1;case 40:return i.button&&i.button.hasArrow?i.execute():k(i,40==o?$:S),!1;case S:case 38:_=i;do{_=_.previous,!_&&P&&(_=i.toolbar.items[i.toolbar.items.length-1])}while(_&&!_.focus);_?_.focus():(T=1,k(i,CKEDITOR.SHIFT+9),T=0);return!1;case 27:return s.focus(),!1;case 13:case 32:return i.execute(),!1}return!0};s.on("uiSpace",(function(i){if(i.data.space==s.config.toolbarLocation){i.removeListener();s.toolbox=new b;var o=CKEDITOR.tools.getNextId(),T=['<span id="',o,'" class="cke_voice_label">',s.lang.toolbar.toolbars,"</span>",'<span id="'+s.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',o,'" onmousedown="return false;">'],o=!1!==s.config.toolbarStartupExpanded,_,S;s.config.toolbarCanCollapse&&s.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&T.push('<span class="cke_toolbox_main"'+(o?">":' style="display:none">'));for(var P=s.toolbox.toolbars,$=a(s),V=$.length,j=0;j<V;j++){var Y,ee=0,te,ne=$[j],ie="/"!==ne&&("/"===$[j+1]||j==V-1),oe;if(ne)if(_&&(T.push("</span>"),S=_=0),"/"===ne)T.push('<span class="cke_toolbar_break"></span>');else{oe=ne.items||ne;for(var ae=0;ae<oe.length;ae++){var re=oe[ae],se;if(re){var H=function(i){i=i.render(s,T);le=ee.items.push(i)-1;0<le&&(i.previous=ee.items[le-1],i.previous.next=i);i.toolbar=ee;i.onkey=k;i.onfocus=function(){s.toolbox.focusCommandExecuted||s.focus()}};if(re.type==CKEDITOR.UI_SEPARATOR)S=_&&re;else{se=!1!==re.canGroup;if(!ee){Y=CKEDITOR.tools.getNextId();ee={id:Y,items:[]};te=ne.name&&(s.lang.toolbar.toolbarGroups[ne.name]||ne.name);T.push('<span id="',Y,'" class="cke_toolbar'+(ie?' cke_toolbar_last"':'"'),te?' aria-labelledby="'+Y+'_label"':"",' role="toolbar">');te&&T.push('<span id="',Y,'_label" class="cke_voice_label">',te,"</span>");T.push('<span class="cke_toolbar_start"></span>');var le=P.push(ee)-1;0<le&&(ee.previous=P[le-1],ee.previous.next=ee)}se?_||(T.push('<span class="cke_toolgroup" role="presentation">'),_=1):_&&(T.push("</span>"),_=0);S&&(H(S),S=0);H(re)}}}_&&(T.push("</span>"),S=_=0);ee&&T.push('<span class="cke_toolbar_end"></span></span>')}}s.config.toolbarCanCollapse&&T.push("</span>");if(s.config.toolbarCanCollapse&&s.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var ce=CKEDITOR.tools.addFunction((function(){s.execCommand("toolbarCollapse")}));s.on("destroy",(function(){CKEDITOR.tools.removeFunction(ce)}));s.addCommand("toolbarCollapse",{readOnly:1,exec:function(i){var o=i.ui.space("toolbar_collapser"),s=o.getPrevious(),T=i.ui.space("contents"),_=s.getParent(),S=parseInt(T.$.style.height,10),P=_.$.offsetHeight,$=o.hasClass("cke_toolbox_collapser_min");$?(s.show(),o.removeClass("cke_toolbox_collapser_min"),o.setAttribute("title",i.lang.toolbar.toolbarCollapse)):(s.hide(),o.addClass("cke_toolbox_collapser_min"),o.setAttribute("title",i.lang.toolbar.toolbarExpand));o.getFirst().setText($?"▲":"◀");T.setStyle("height",S-(_.$.offsetHeight-P)+"px");i.fire("resize",{outerHeight:i.container.$.offsetHeight,contentsHeight:T.$.offsetHeight,outerWidth:i.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}});s.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse");T.push('<a title="'+(o?s.lang.toolbar.toolbarCollapse:s.lang.toolbar.toolbarExpand)+'" id="'+s.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser');o||T.push(" cke_toolbox_collapser_min");T.push('" onclick="CKEDITOR.tools.callFunction('+ce+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}T.push("</span>");i.data.html+=T.join("")}}));s.on("destroy",(function(){if((this||i).toolbox){var o,s=0,T,_,S;for(o=(this||i).toolbox.toolbars;s<o.length;s++)for(_=o[s].items,T=0;T<_.length;T++)S=_[T],S.clickFn&&CKEDITOR.tools.removeFunction(S.clickFn),S.keyDownFn&&CKEDITOR.tools.removeFunction(S.keyDownFn)}}));s.on("uiReady",(function(){var i=s.ui.space("toolbox");i&&s.focusManager.add(i,1)}));s.addCommand("toolbarFocus",o);s.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus");s.ui.add("-",CKEDITOR.UI_SEPARATOR,{});s.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(i,o){o.push('<span class="cke_toolbar_separator" role="separator"></span>');return{}}}}})}});CKEDITOR.ui.prototype.addToolbarGroup=function(o,s,T){var _=f((this||i).editor),S=0===s,P={name:o};if(T){if(T=CKEDITOR.tools.search(_,(function(i){return i.name==T}))){!T.groups&&(T.groups=[]);if(s&&(s=CKEDITOR.tools.indexOf(T.groups,s),0<=s)){T.groups.splice(s+1,0,o);return}S?T.groups.splice(0,0,o):T.groups.push(o);return}s=null}s&&(s=CKEDITOR.tools.indexOf(_,(function(i){return i.name==s})));S?_.splice(0,0,o):"number"==typeof s?_.splice(s+1,0,P):_.push(o)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top","use strict",function(){function a(i,o,s){o.type||(o.type="auto");if(s&&!1===i.fire("beforePaste",o)||!o.dataValue&&o.dataTransfer.isEmpty())return!1;o.dataValue||(o.dataValue="");CKEDITOR.env.gecko&&"drop"==o.method&&i.toolbox&&i.once("afterPaste",(function(){i.toolbox.focus()}));return i.fire("paste",o)}function f(o){function c(){var i=o.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var d=function(i){o.getSelection().isCollapsed()||(o.readOnly&&"cut"==i.name||s.initPasteDataTransfer(i,o),i.data.preventDefault())};i.on("copy",d);i.on("cut",d);i.on("cut",(function(){o.readOnly||o.extractSelectedHtml()}),null,null,999)}i.on(s.mainPasteEvent,(function(i){"beforepaste"==s.mainPasteEvent&&T||x(i)}));"beforepaste"==s.mainPasteEvent&&(i.on("paste",(function(i){_||(f(),i.data.preventDefault(),x(i),k("paste"))})),i.on("contextmenu",h,null,null,0),i.on("beforepaste",(function(i){!i.data||i.data.$.ctrlKey||i.data.$.shiftKey||h()}),null,null,0));i.on("beforecut",(function(){!T&&l(o)}));var S;i.attachListener(CKEDITOR.env.ie?i:o.document.getDocumentElement(),"mouseup",(function(){S=setTimeout(A,0)}));o.on("destroy",(function(){clearTimeout(S)}));i.on("keyup",A)}function d(s){return{type:s,canUndo:"cut"==s,startDisabled:!0,fakeKeystroke:"cut"==s?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){"cut"==(this||i).type&&l();var s;var T=(this||i).type;if(CKEDITOR.env.ie)s=k(T);else try{s=o.document.$.execCommand(T,!1,null)}catch(i){s=!1}s||o.showNotification(o.lang.clipboard[(this||i).type+"Error"]);return s}}}function g(){return{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(o,T){function e(i,T){T="undefined"===typeof T||T;i?(i.method="paste",i.dataTransfer||(i.dataTransfer=s.initPasteDataTransfer()),a(o,i,T)):S&&!o._.forcePasteDialog&&o.showNotification(V,"info",o.config.clipboard_notificationDuration);o._.forcePasteDialog=!1;o.fire("afterCommandExec",{name:"paste",command:_,returnValue:!!i})}T="undefined"!==typeof T&&null!==T?T:{};var _=this||i,S="undefined"===typeof T.notification||T.notification,P=T.type,$=CKEDITOR.tools.keystrokeToString(o.lang.common.keyboard,o.getCommandKeystroke(this||i)),V="string"===typeof S?S:o.lang.clipboard.pasteNotification.replace(/%1/,'<kbd aria-label="'+$.aria+'">'+$.display+"</kbd>"),$="string"===typeof T?T:T.dataValue;P&&!0!==o.config.forcePasteAsPlainText&&"allow-word"!==o.config.forcePasteAsPlainText?o._.nextPasteType=P:delete o._.nextPasteType;"string"===typeof $?e({dataValue:$}):o.getClipboardData(e)}}}function f(){_=1;setTimeout((function(){_=0}),100)}function h(){T=1;setTimeout((function(){T=0}),10)}function k(i){var s=o.document,T=s.getBody(),_=!1,f=function(){_=!0};T.on(i,f);7<CKEDITOR.env.version?s.$.execCommand(i):s.$.selection.createRange().execCommand(i);T.removeListener(i,f);return _}function l(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var i=o.getSelection(),s,T,_;i.getType()==CKEDITOR.SELECTION_ELEMENT&&(s=i.getSelectedElement())&&(T=i.getRanges()[0],_=o.document.createText(""),_.insertBefore(s),T.setStartBefore(_),T.setEndAfter(s),i.selectRanges([T]),setTimeout((function(){s.getParent()&&(_.remove(),i.selectElement(s))}),0))}}function m(i,s){var T=o.document,_=o.editable(),f=function(i){i.cancel()},S;if(!T.getById("cke_pastebin")){var P=o.getSelection(),$=P.createBookmarks();CKEDITOR.env.ie&&P.root.fire("selectionchange");var V=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!_.is("body")||CKEDITOR.env.ie?"div":"body",T);V.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var j=0,T=T.getWindow();CKEDITOR.env.webkit?(_.append(V),V.addClass("cke_editable"),_.is("body")||(j="static"!=_.getComputedStyle("position")?_:CKEDITOR.dom.element.get(_.$.offsetParent),j=j.getDocumentPosition().y)):_.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(V);V.setStyles({position:"absolute",top:T.getScrollPosition().y-j+10+"px",width:"1px",height:Math.max(1,T.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0});CKEDITOR.env.safari&&V.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text"));(j=V.getParent().isReadOnly())?(V.setOpacity(0),V.setAttribute("contenteditable",!0)):V.setStyle("ltr"==o.config.contentsLangDirection?"left":"right","-10000px");o.on("selectionChange",f,null,null,0);(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(S=_.once("blur",f,null,null,-100));j&&V.focus();j=new CKEDITOR.dom.range(V);j.selectNodeContents(V);var Y=j.select();CKEDITOR.env.ie&&(S=_.once("blur",(function(){o.lockSelection(Y)})));var ee=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout((function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=ee);S&&S.removeListener();CKEDITOR.env.ie&&_.focus();P.selectBookmarks($);V.remove();var i;CKEDITOR.env.webkit&&(i=V.getFirst())&&i.is&&i.hasClass("Apple-style-span")&&(V=i);o.removeListener("selectionChange",f);s(V.getHtml())}),0)}}function z(){if("paste"==s.mainPasteEvent)return o.fire("beforePaste",{type:"auto",method:"paste"}),!1;o.focus();f();var i=o.focusManager;i.lock();if(o.editable().fire(s.mainPasteEvent)&&!k("paste"))return i.unlock(),!1;i.unlock();return!0}function t(i){if("wysiwyg"==o.mode)switch(i.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:i=o.editable();f();"paste"==s.mainPasteEvent&&i.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:o.fire("saveSnapshot"),setTimeout((function(){o.fire("saveSnapshot")}),50)}}function x(i){var T={type:"auto",method:"paste",dataTransfer:s.initPasteDataTransfer(i)};T.dataTransfer.cacheData();var _=!1!==o.fire("beforePaste",T);_&&s.canClipboardApiBeTrusted(T.dataTransfer,o)?(i.data.preventDefault(),setTimeout((function(){a(o,T)}),0)):m(i,(function(i){T.dataValue=i.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,"");_&&a(o,T)}))}function A(){if("wysiwyg"==o.mode){var i=B("paste");o.getCommand("cut").setState(B("cut"));o.getCommand("copy").setState(B("copy"));o.getCommand("paste").setState(i);o.fire("pasteState",i)}}function B(i){var s=o.getSelection(),s=s&&s.getRanges()[0];if((o.readOnly||s&&s.checkReadOnly())&&i in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==i)return CKEDITOR.TRISTATE_OFF;i=o.getSelection();s=i.getRanges();return i.getType()==CKEDITOR.SELECTION_NONE||1==s.length&&s[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var s=CKEDITOR.plugins.clipboard,T=0,_=0;(function(){o.on("key",t);o.on("contentDom",c);o.on("selectionChange",A);if(o.contextMenu){o.contextMenu.addListener((function(){return{cut:B("cut"),copy:B("copy"),paste:B("paste")}}));var i=null;o.on("menuShow",(function(){i&&(i.removeListener(),i=null);var s=o.contextMenu.findItemByCommandName("paste");s&&s.element&&(i=s.element.on("touchend",(function(){o._.forcePasteDialog=!0})))}))}o.ui.addButton&&o.once("instanceReady",(function(){o._.pasteButtons&&CKEDITOR.tools.array.forEach(o._.pasteButtons,(function(i){(i=o.ui.get(i))&&(i=CKEDITOR.document.getById(i._.id))&&i.on("touchend",(function(){o._.forcePasteDialog=!0}))}))}))})();(function(){function a(i,s,T,_,S){var P=o.lang.clipboard[s];o.addCommand(s,T);o.ui.addButton&&o.ui.addButton(i,{label:P,command:s,toolbar:"clipboard,"+_});o.addMenuItems&&o.addMenuItem(s,{label:P,command:s,group:"clipboard",order:S})}a("Cut","cut",d("cut"),10,1);a("Copy","copy",d("copy"),20,4);a("Paste","paste",g(),30,8);o._.pasteButtons||(o._.pasteButtons=[]);o._.pasteButtons.push("Paste")})();o.getClipboardData=function(i,s){function d(i){i.removeListener();i.cancel();s(i.data)}function g(i){i.removeListener();i.cancel();s({type:_,dataValue:i.data.dataValue,dataTransfer:i.data.dataTransfer,method:"paste"})}var T=!1,_="auto";s||(s=i,i=null);o.on("beforePaste",(function(i){i.removeListener();T=!0;_=i.data.type}),null,null,1e3);o.on("paste",d,null,null,0);!1===z()&&(o.removeListener("paste",d),o._.forcePasteDialog&&T&&o.fire("pasteDialog")?(o.on("pasteDialogCommit",g),o.on("dialogHide",(function(i){i.removeListener();i.data.removeListener("pasteDialogCommit",g);i.data._.committed||s(null)}))):s(null))}}function b(i){if(CKEDITOR.env.webkit){if(!i.match(/^[^<]*$/g)&&!i.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!i.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!i.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!i.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}function c(i,o){function c(i){return CKEDITOR.tools.repeat("</p><p>",~~(i/2))+(1==i%2?"<br>":"")}o=o.replace(/(?!\u3000)\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>");o=o.replace(/<\/?[A-Z]+>/g,(function(i){return i.toLowerCase()}));if(o.match(/^[^<]$/))return o;CKEDITOR.env.webkit&&-1<o.indexOf("<div>")&&(o=o.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),o.match(/<div>(<br>|)<\/div>/)&&(o="<p>"+o.replace(/(<div>(<br>|)<\/div>)+/g,(function(i){return c(i.split("</div><div>").length+1)}))+"</p>"),o=o.replace(/<\/div><div>/g,"<br>"),o=o.replace(/<\/?div>/g,""));CKEDITOR.env.gecko&&i.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(o=o.replace(/^<br><br>$/,"<br>")),-1<o.indexOf("<br><br>")&&(o="<p>"+o.replace(/(<br>){2,}/g,(function(i){return c(i.length/4)}))+"</p>"));return k(i,o)}function d(i){function b(){var i={},o;for(o in CKEDITOR.dtd)"$"!=o.charAt(0)&&"div"!=o&&"span"!=o&&(i[o]=1);return i}var o={};return{get:function(s){return"plain-text"==s?o.plainText||(o.plainText=new CKEDITOR.filter(i,"br")):"semantic-content"==s?((s=o.semanticContent)||(s=new CKEDITOR.filter(i,{}),s.allow({$1:{elements:b(),attributes:!0,styles:!1,classes:!1}}),s=o.semanticContent=s),s):s?new CKEDITOR.filter(i,s):null}}}function l(i,o,s){o=CKEDITOR.htmlParser.fragment.fromHtml(o);var T=new CKEDITOR.htmlParser.basicWriter;s.applyTo(o,!0,!1,i.activeEnterMode);o.writeHtml(T);return T.getHtml()}function k(i,o){i.enterMode==CKEDITOR.ENTER_BR?o=o.replace(/(<\/p><p>)+/g,(function(i){return CKEDITOR.tools.repeat("<br>",i.length/7*2)})).replace(/<\/?p>/g,""):i.enterMode==CKEDITOR.ENTER_DIV&&(o=o.replace(/<(\/)?p>/g,"<$1div>"));return o}function g(i){i.data.preventDefault();i.data.$.dataTransfer.dropEffect="none"}function h(i){var o=CKEDITOR.plugins.clipboard;i.on("contentDom",(function(){function d(o,s,T){s.select();a(i,{dataTransfer:T,method:"drop"},1);T.sourceEditor.fire("saveSnapshot");T.sourceEditor.editable().extractHtmlFromRange(o);T.sourceEditor.getSelection().selectRanges([o]);T.sourceEditor.fire("saveSnapshot")}function g(s,T){s.select();a(i,{dataTransfer:T,method:"drop"},1);o.resetDragDataTransfer()}function f(o,s,T){var _={$:o.data.$,target:o.data.getTarget()};s&&(_.dragRange=s);T&&(_.dropRange=T);!1===i.fire(o.name,_)&&o.data.preventDefault()}function h(i){i.type!=CKEDITOR.NODE_ELEMENT&&(i=i.getParent());return i.getChildCount()}var s=i.editable(),T=CKEDITOR.plugins.clipboard.getDropTarget(i),_=i.ui.space("top"),S=i.ui.space("bottom");o.preventDefaultDropOnElement(_);o.preventDefaultDropOnElement(S);s.attachListener(T,"dragstart",f);s.attachListener(i,"dragstart",o.resetDragDataTransfer,o,null,1);s.attachListener(i,"dragstart",(function(s){o.initDragDataTransfer(s,i)}),null,null,2);s.attachListener(i,"dragstart",(function(){var s=o.dragRange=i.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(o.dragStartContainerChildCount=s?h(s.startContainer):null,o.dragEndContainerChildCount=s?h(s.endContainer):null)}),null,null,100);s.attachListener(T,"dragend",f);s.attachListener(i,"dragend",o.initDragDataTransfer,o,null,1);s.attachListener(i,"dragend",o.resetDragDataTransfer,o,null,100);s.attachListener(T,"dragover",(function(i){if(CKEDITOR.env.edge)i.data.preventDefault();else{var o=i.data.getTarget();(o&&o.is&&o.is("html")||CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&i.data.$.dataTransfer.types.contains("Files"))&&i.data.preventDefault()}}));s.attachListener(T,"drop",(function(s){if(!s.data.$.defaultPrevented){s.data.preventDefault();var T=s.data.getTarget();if(!T.isReadOnly()||T.type==CKEDITOR.NODE_ELEMENT&&T.is("html")){var T=o.getRangeAtDropPosition(s,i),_=o.dragRange;T&&f(s,_,T)}}}),null,null,9999);s.attachListener(i,"drop",o.initDragDataTransfer,o,null,1);s.attachListener(i,"drop",(function(s){if(s=s.data){var T=s.dropRange,_=s.dragRange,S=s.dataTransfer;S.getTransferType(i)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout((function(){o.internalDrop(_,T,S,i)}),0):S.getTransferType(i)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?d(_,T,S):g(T,S)}}),null,null,9999)}))}var o;CKEDITOR.plugins.add("clipboard",{requires:"dialog,notification,toolbar",init:function(o){var s,T=d(o);o.config.forcePasteAsPlainText?s="plain-text":o.config.pasteFilter?s=o.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in o.config||(s="semantic-content");o.pasteFilter=T.get(s);f(o);h(o);CKEDITOR.dialog.add("paste",CKEDITOR.getUrl((this||i).path+"dialogs/paste.js"));if(CKEDITOR.env.gecko){var _=["image/png","image/jpeg","image/gif"],S;o.on("paste",(function(i){var s=i.data,T=s.dataTransfer;if(!s.dataValue&&"paste"==s.method&&T&&1==T.getFilesCount()&&S!=T.id&&(T=T.getFile(0),-1!=CKEDITOR.tools.indexOf(_,T.type))){var P=new FileReader;P.addEventListener("load",(function(){i.data.dataValue='<img src="'+P.result+'" />';o.fire("paste",i.data)}),!1);P.addEventListener("abort",(function(){o.fire("paste",i.data)}),!1);P.addEventListener("error",(function(){o.fire("paste",i.data)}),!1);P.readAsDataURL(T);S=s.dataTransfer.id;i.stop()}}),null,null,1)}o.on("paste",(function(i){i.data.dataTransfer||(i.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer);if(!i.data.dataValue){var s=i.data.dataTransfer,T=s.getData("text/html");T?(i.data.dataValue=T,i.data.type="html"):(T=s.getData("text/plain"))&&(i.data.dataValue=o.editable().transformPlainTextToHtml(T),i.data.type="text")}}),null,null,1);o.on("paste",(function(i){var o=i.data.dataValue,s=CKEDITOR.dtd.$block;-1<o.indexOf("Apple-")&&(o=o.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=i.data.type&&(o=o.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,(function(i,o){return o.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")}))),-1<o.indexOf('<br class="Apple-interchange-newline">')&&(i.data.startsWithEOL=1,i.data.preSniffing="html",o=o.replace(/<br class="Apple-interchange-newline">/,"")),o=o.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1"));if(o.match(/^<[^<]+cke_(editable|contents)/i)){var T,_,S=new CKEDITOR.dom.element("div");for(S.setHtml(o);1==S.getChildCount()&&(T=S.getFirst())&&T.type==CKEDITOR.NODE_ELEMENT&&(T.hasClass("cke_editable")||T.hasClass("cke_contents"));)S=_=T;_&&(o=_.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?o=o.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,(function(o,T){return T.toLowerCase()in s?(i.data.preSniffing="html","<"+T):o})):CKEDITOR.env.webkit?o=o.replace(/<\/(\w+)><div><br><\/div>$/,(function(o,T){return T in s?(i.data.endsWithEOL=1,"</"+T+">"):o})):CKEDITOR.env.gecko&&(o=o.replace(/(\s)<br>$/,"$1"));i.data.dataValue=o}),null,null,3);o.on("paste",(function(i){i=i.data;var s=o._.nextPasteType||i.type,_=i.dataValue,S,P=o.config.clipboard_defaultContentType||"html",$=i.dataTransfer.getTransferType(o)==CKEDITOR.DATA_TRANSFER_EXTERNAL,V=!0===o.config.forcePasteAsPlainText;S="html"==s||"html"==i.preSniffing?"html":b(_);delete o._.nextPasteType;"htmlifiedtext"==S&&(_=c(o.config,_));"text"==s&&"html"==S?_=l(o,_,T.get("plain-text")):($&&o.pasteFilter&&!i.dontFilter||V)&&(_=l(o,_,o.pasteFilter));i.startsWithEOL&&(_='<br data-cke-eol="1">'+_);i.endsWithEOL&&(_+='<br data-cke-eol="1">');"auto"==s&&(s="html"==S||"html"==P?"html":"text");i.type=s;i.dataValue=_;delete i.preSniffing;delete i.startsWithEOL;delete i.endsWithEOL}),null,null,6);o.on("paste",(function(i){i=i.data;i.dataValue&&(o.insertHtml(i.dataValue,i.type,i.range),setTimeout((function(){o.fire("afterPaste")}),0))}),null,null,1e3);o.on("pasteDialog",(function(i){setTimeout((function(){o.openDialog("paste",i.data)}),0)}))}});CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:(!CKEDITOR.env.ie||16<=CKEDITOR.env.version)&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie||16<=CKEDITOR.env.version,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",addPasteButton:function(i,o,s){i.ui.addButton&&(i.ui.addButton(o,s),i._.pasteButtons||(i._.pasteButtons=[]),i._.pasteButtons.push(o))},canClipboardApiBeTrusted:function(i,o){return!!(i.getTransferType(o)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!i.isEmpty()||CKEDITOR.env.gecko&&(i.getData("text/html")||i.getFilesCount())||CKEDITOR.env.safari&&603<=CKEDITOR.env.version&&!CKEDITOR.env.iOS||CKEDITOR.env.edge&&16<=CKEDITOR.env.version)},getDropTarget:function(i){var o=i.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||o.isInline()?o:i.document},fixSplitNodesAfterDrop:function(i,o,s,T){function g(i,s,T){var _=i;_.type==CKEDITOR.NODE_TEXT&&(_=i.getParent());if(_.equals(s)&&T!=s.getChildCount())return i=o.startContainer.getChild(o.startOffset-1),s=o.startContainer.getChild(o.startOffset),i&&i.type==CKEDITOR.NODE_TEXT&&s&&s.type==CKEDITOR.NODE_TEXT&&(T=i.getLength(),i.setText(i.getText()+s.getText()),s.remove(),o.setStart(i,T),o.collapse(!0)),!0}var _=o.startContainer;"number"==typeof T&&"number"==typeof s&&_.type==CKEDITOR.NODE_ELEMENT&&(g(i.startContainer,_,s)||g(i.endContainer,_,T))},isDropRangeAffectedByDragRange:function(i,o){var s=o.startContainer,T=o.endOffset;return!!(i.endContainer.equals(s)&&i.endOffset<=T||i.startContainer.getParent().equals(s)&&i.startContainer.getIndex()<T||i.endContainer.getParent().equals(s)&&i.endContainer.getIndex()<T)},internalDrop:function(i,o,s,T){var _=CKEDITOR.plugins.clipboard,S=T.editable(),P,$;T.fire("saveSnapshot");T.fire("lockSnapshot",{dontUpdate:1});CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(i,o,_.dragStartContainerChildCount,_.dragEndContainerChildCount);($=this.isDropRangeAffectedByDragRange(i,o))||(P=i.createBookmark(!1));_=o.clone().createBookmark(!1);$&&(P=i.createBookmark(!1));i=P.startNode;o=P.endNode;$=_.startNode;o&&i.getPosition($)&CKEDITOR.POSITION_PRECEDING&&o.getPosition($)&CKEDITOR.POSITION_FOLLOWING&&$.insertBefore(i);i=T.createRange();i.moveToBookmark(P);S.extractHtmlFromRange(i,1);o=T.createRange();_.startNode.getCommonAncestor(S)||(_=T.getSelection().createBookmarks()[0]);o.moveToBookmark(_);a(T,{dataTransfer:s,method:"drop",range:o},1);T.fire("unlockSnapshot")},getRangeAtDropPosition:function(i,o){var s=i.data.$,T=s.clientX,_=s.clientY,S=o.getSelection(!0).getRanges()[0],P=o.createRange();if(i.data.testRange)return i.data.testRange;if(document.caretRangeFromPoint&&o.document.$.caretRangeFromPoint(T,_))s=o.document.$.caretRangeFromPoint(T,_),P.setStart(CKEDITOR.dom.node(s.startContainer),s.startOffset),P.collapse(!0);else if(s.rangeParent)P.setStart(CKEDITOR.dom.node(s.rangeParent),s.rangeOffset),P.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&S&&o.editable().hasFocus)return S;if(!document.body.createTextRange)return null;o.focus();s=o.document.getBody().$.createTextRange();try{for(var $=!1,V=0;20>V&&!$;V++){if(!$)try{s.moveToPoint(T,_-V),$=!0}catch(i){}if(!$)try{s.moveToPoint(T,_+V),$=!0}catch(i){}}if($){var j="cke-temp-"+(new Date).getTime();s.pasteHTML('<span id="'+j+'">​</span>');var Y=o.document.getById(j);P.moveToPosition(Y,CKEDITOR.POSITION_BEFORE_START);Y.remove()}else{var ee=o.document.$.elementFromPoint(T,_),te=new CKEDITOR.dom.element(ee),ne;if(te.equals(o.editable())||"html"==te.getName())return S&&S.startContainer&&!S.startContainer.equals(o.editable())?S:null;ne=te.getClientRect();T<ne.left?P.setStartAt(te,CKEDITOR.POSITION_AFTER_START):P.setStartAt(te,CKEDITOR.POSITION_BEFORE_END);P.collapse(!0)}}catch(i){return null}}return P},initDragDataTransfer:function(o,s){var T=o.data.$?o.data.$.dataTransfer:null,_=new(this||i).dataTransfer(T,s);"dragstart"===o.name&&_.storeId();T?(this||i).dragData&&_.id==(this||i).dragData.id?_=(this||i).dragData:(this||i).dragData=_:(this||i).dragData?_=(this||i).dragData:(this||i).dragData=_;o.data.dataTransfer=_},resetDragDataTransfer:function(){(this||i).dragData=null},initPasteDataTransfer:function(o,s){if((this||i).isCustomCopyCutSupported){if(o&&o.data&&o.data.$){var T=o.data.$.clipboardData,_=new(this||i).dataTransfer(T,s);"copy"!==o.name&&"cut"!==o.name||_.storeId();(this||i).copyCutData&&_.id==(this||i).copyCutData.id?(_=(this||i).copyCutData,_.$=T):(this||i).copyCutData=_;return _}return new(this||i).dataTransfer(null,s)}return new(this||i).dataTransfer(CKEDITOR.env.edge&&o&&o.data.$&&o.data.$.clipboardData||null,s)},preventDefaultDropOnElement:function(i){i&&i.on("dragover",g)}};o=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text";CKEDITOR.plugins.clipboard.dataTransfer=function(s,T){s&&((this||i).$=s);(this||i)._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],nativeHtmlCache:"",normalizeType:function(i){i=i.toLowerCase();return"text"==i||"text/plain"==i?"Text":"url"==i?"URL":i}};(this||i)._.fallbackDataTransfer=new CKEDITOR.plugins.clipboard.fallbackDataTransfer(this||i);(this||i).id=this.getData(o);(this||i).id||((this||i).id="Text"==o?"":"cke-"+CKEDITOR.tools.getUniqueId());T&&((this||i).sourceEditor=T,this.setData("text/html",T.getSelectedHtml(1)),"Text"==o||this.getData("text/plain")||this.setData("text/plain",T.getSelection().getSelectedText()))};CKEDITOR.DATA_TRANSFER_INTERNAL=1;CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2;CKEDITOR.DATA_TRANSFER_EXTERNAL=3;CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(o,s){o=(this||i)._.normalizeType(o);var T="text/html"==o&&s?(this||i)._.nativeHtmlCache:(this||i)._.data[o];if(void 0===T||null===T||""===T){if((this||i)._.fallbackDataTransfer.isRequired())T=(this||i)._.fallbackDataTransfer.getData(o,s);else try{T=(this||i).$.getData(o)||""}catch(i){T=""}"text/html"!=o||s||(T=this._stripHtml(T))}"Text"==o&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==T.substring(0,7)&&(T="");if("string"===typeof T)var _=T.indexOf("</html>"),T=-1!==_?T.substring(0,_+7):T;return T},setData:function(s,T){s=(this||i)._.normalizeType(s);"text/html"==s?((this||i)._.data[s]=this._stripHtml(T),(this||i)._.nativeHtmlCache=T):(this||i)._.data[s]=T;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==s||"Text"==s)if("Text"==o&&"Text"==s&&((this||i).id=T),(this||i)._.fallbackDataTransfer.isRequired())(this||i)._.fallbackDataTransfer.setData(s,T);else try{(this||i).$.setData(s,T)}catch(i){}},storeId:function(){"Text"!==o&&this.setData(o,(this||i).id)},getTransferType:function(o){return(this||i).sourceEditor?(this||i).sourceEditor==o?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function a(i){i=o._.normalizeType(i);var s=o.getData(i);"text/html"==i&&(o._.nativeHtmlCache=o.getData(i,!0),s=o._stripHtml(s));s&&(o._.data[i]=s)}if((this||i).$){var o=this||i,s,T;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if((this||i).$.types)for(s=0;s<(this||i).$.types.length;s++)a((this||i).$.types[s])}else a("Text"),a("URL");T=this._getImageFromClipboard();if((this||i).$&&(this||i).$.files||T){(this||i)._.files=[];if((this||i).$.files&&(this||i).$.files.length)for(s=0;s<(this||i).$.files.length;s++)(this||i)._.files.push((this||i).$.files[s]);0===(this||i)._.files.length&&T&&(this||i)._.files.push(T)}}},getFilesCount:function(){return(this||i)._.files.length?(this||i)._.files.length:(this||i).$&&(this||i).$.files&&(this||i).$.files.length?(this||i).$.files.length:this._getImageFromClipboard()?1:0},getFile:function(o){return(this||i)._.files.length?(this||i)._.files[o]:(this||i).$&&(this||i).$.files&&(this||i).$.files.length?(this||i).$.files[o]:0===o?this._getImageFromClipboard():void 0},isEmpty:function(){var s={},T;if(this.getFilesCount())return!1;CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys((this||i)._.data),(function(i){s[i]=1}));if((this||i).$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if((this||i).$.types)for(var _=0;_<(this||i).$.types.length;_++)s[(this||i).$.types[_]]=1}else s.Text=1,s.URL=1;"Text"!=o&&(s[o]=0);for(T in s)if(s[T]&&""!==this.getData(T))return!1;return!0},_getImageFromClipboard:function(){var o;try{if((this||i).$&&(this||i).$.items&&(this||i).$.items[0]&&(o=(this||i).$.items[0].getAsFile())&&o.type)return o}catch(i){}},_stripHtml:function(o){if(o&&o.length){o=o.replace((this||i)._.metaRegExp,"");var s=(this||i)._.bodyRegExp.exec(o);s&&s.length&&(o=s[1],o=o.replace((this||i)._.fragmentRegExp,""))}return o}};CKEDITOR.plugins.clipboard.fallbackDataTransfer=function(o){(this||i)._dataTransfer=o;(this||i)._customDataFallbackType="text/html"};CKEDITOR.plugins.clipboard.fallbackDataTransfer._isCustomMimeTypeSupported=null;CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes=[];CKEDITOR.plugins.clipboard.fallbackDataTransfer.prototype={isRequired:function(){var o=CKEDITOR.plugins.clipboard.fallbackDataTransfer,s=(this||i)._dataTransfer.$;if(null===o._isCustomMimeTypeSupported){if(!s)return!1;o._isCustomMimeTypeSupported=!1;if(CKEDITOR.env.edge&&17<=CKEDITOR.env.version)return!0;try{s.setData("cke/mimetypetest","cke test value"),o._isCustomMimeTypeSupported="cke test value"===s.getData("cke/mimetypetest"),s.clearData("cke/mimetypetest")}catch(i){}}return!o._isCustomMimeTypeSupported},getData:function(o,s){var T=this._getData((this||i)._customDataFallbackType,!0);if(s)return T;var T=this._extractDataComment(T),_=null,_=o===(this||i)._customDataFallbackType?T.content:T.data&&T.data[o]?T.data[o]:this._getData(o,!0);return null!==_?_:""},setData:function(o,s){var T=o===(this||i)._customDataFallbackType;T&&(s=this._applyDataComment(s,this._getFallbackTypeData()));var _=s,S=(this||i)._dataTransfer.$;try{S.setData(o,_),T&&((this||i)._dataTransfer._.nativeHtmlCache=_)}catch(s){if(this._isUnsupportedMimeTypeError(s)){T=CKEDITOR.plugins.clipboard.fallbackDataTransfer;-1===CKEDITOR.tools.indexOf(T._customTypes,o)&&T._customTypes.push(o);var T=this._getFallbackTypeContent(),P=this._getFallbackTypeData();P[o]=_;try{_=this._applyDataComment(T,P),S.setData((this||i)._customDataFallbackType,_),(this||i)._dataTransfer._.nativeHtmlCache=_}catch(i){_=""}}}return _},_getData:function(o,s){var T=(this||i)._dataTransfer._.data;if(!s&&T[o])return T[o];try{return(this||i)._dataTransfer.$.getData(o)}catch(i){return null}},_getFallbackTypeContent:function(){var o=(this||i)._dataTransfer._.data[(this||i)._customDataFallbackType];o||(o=this._extractDataComment(this._getData((this||i)._customDataFallbackType,!0)).content);return o},_getFallbackTypeData:function(){var o=CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes,s=this._extractDataComment(this._getData((this||i)._customDataFallbackType,!0)).data||{},T=(this||i)._dataTransfer._.data;CKEDITOR.tools.array.forEach(o,(function(i){void 0!==T[i]?s[i]=T[i]:void 0!==s[i]&&(s[i]=s[i])}),this||i);return s},_isUnsupportedMimeTypeError:function(i){return i.message&&-1!==i.message.search(/element not found/gi)},_extractDataComment:function(i){var o={data:null,content:i||""};if(i&&16<i.length){var s;(s=/\x3c!--cke-data:(.*?)--\x3e/g.exec(i))&&s[1]&&(o.data=JSON.parse(decodeURIComponent(s[1])),o.content=i.replace(s[0],""))}return o},_applyDataComment:function(i,o){var s="";o&&CKEDITOR.tools.object.keys(o).length&&(s="\x3c!--cke-data:"+encodeURIComponent(JSON.stringify(o))+"--\x3e");return s+(i&&i.length?i:"")}}}(),CKEDITOR.config.clipboard_notificationDuration=1e4,function(){CKEDITOR.plugins.add("panel",{beforeInit:function(i){i.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}});CKEDITOR.UI_PANEL="panel";CKEDITOR.ui.panel=function(o,s){s&&CKEDITOR.tools.extend(this||i,s);CKEDITOR.tools.extend(this||i,{className:"",css:[]});(this||i).id=CKEDITOR.tools.getNextId();(this||i).document=o;(this||i).isFramed=(this||i).forceIFrame||(this||i).css.length;(this||i)._={blocks:{}}};CKEDITOR.ui.panel.handler={create:function(i){return new CKEDITOR.ui.panel(i)}};var o=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),s=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),T=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(_,S){var P={editorId:_.id,id:(this||i).id,langCode:_.langCode,dir:_.lang.dir,cls:(this||i).className,frame:"",env:CKEDITOR.env.cssClass,"z-index":_.config.baseFloatZIndex+1};(this||i).getHolderElement=function(){var o=(this||i)._.holder;if(!o){if((this||i).isFramed){var o=(this||i).document.getById((this||i).id+"_frame"),s=o.getParent(),o=o.getFrameDocument();CKEDITOR.env.iOS&&s.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"});s=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind((function(){(this||i).isLoaded=!0;(this||i).onLoad&&this.onLoad()}),this||i));o.write(T.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml((this||i).css),onload:"window.parent.CKEDITOR.tools.callFunction("+s+");"},P)));o.getWindow().$.CKEDITOR=CKEDITOR;o.on("keydown",(function(o){var s=o.data.getKeystroke(),T=(this||i).document.getById((this||i).id).getAttribute("dir");("input"!==o.data.getTarget().getName()||37!==s&&39!==s)&&((this||i)._.onKeyDown&&!1===(this||i)._.onKeyDown(s)?"input"===o.data.getTarget().getName()&&32===s||o.data.preventDefault():(27==s||s==("rtl"==T?39:37))&&(this||i).onEscape&&!1===this.onEscape(s)&&o.data.preventDefault())}),this||i);o=o.getBody();o.unselectable();CKEDITOR.env.air&&CKEDITOR.tools.callFunction(s)}else o=(this||i).document.getById((this||i).id);(this||i)._.holder=o}return o};if((this||i).isFramed){var $=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";P.frame=s.output({id:(this||i).id+"_frame",src:$})}$=o.output(P);S&&S.push($);return $},addBlock:function(o,s){s=(this||i)._.blocks[o]=s instanceof CKEDITOR.ui.panel.block?s:new CKEDITOR.ui.panel.block(this.getHolderElement(),s);(this||i)._.currentBlock||this.showBlock(o);return s},getBlock:function(o){return(this||i)._.blocks[o]},showBlock:function(o){o=(this||i)._.blocks[o];var s=(this||i)._.currentBlock,T=!(this||i).forceIFrame||CKEDITOR.env.ie?(this||i)._.holder:(this||i).document.getById((this||i).id+"_frame");s&&s.hide();(this||i)._.currentBlock=o;CKEDITOR.fire("ariaWidget",T);o._.focusIndex=-1;(this||i)._.onKeyDown=o.onKeyDown&&CKEDITOR.tools.bind(o.onKeyDown,o);o.show();return o},destroy:function(){(this||i).element&&(this||i).element.remove()}};CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(o,s){(this||i).element=o.append(o.getDocument().createElement("div",{attributes:{tabindex:-1,class:"cke_panel_block"},styles:{display:"none"}}));s&&CKEDITOR.tools.extend(this||i,s);(this||i).element.setAttributes({role:(this||i).attributes.role||"presentation","aria-label":(this||i).attributes["aria-label"],title:(this||i).attributes.title||(this||i).attributes["aria-label"]});(this||i).keys={};(this||i)._.focusIndex=-1;(this||i).element.disableContextMenu()},_:{markItem:function(o){-1!=o&&(o=(this||i)._.getItems().getItem((this||i)._.focusIndex=o),CKEDITOR.env.webkit&&o.getDocument().getWindow().focus(),o.focus(),(this||i).onMark&&this.onMark(o))},markFirstDisplayed:function(o){for(var b=function(i){return i.type==CKEDITOR.NODE_ELEMENT&&"none"==i.getStyle("display")},s=(this||i)._.getItems(),T,_,S=s.count()-1;0<=S;S--)if(T=s.getItem(S),T.getAscendant(b)||(_=T,(this||i)._.focusIndex=S),"true"==T.getAttribute("aria-selected")){_=T;(this||i)._.focusIndex=S;break}_&&(o&&o(),CKEDITOR.env.webkit&&_.getDocument().getWindow().focus(),_.focus(),(this||i).onMark&&this.onMark(_))},getItems:function(){return(this||i).element.find("a,input")}},proto:{show:function(){(this||i).element.setStyle("display","")},hide:function(){(this||i).onHide&&!0===(this||i).onHide.call(this||i)||(this||i).element.setStyle("display","none")},onKeyDown:function(o,s){var T=(this||i).keys[o];switch(T){case"next":for(var _=(this||i)._.focusIndex,T=(this||i)._.getItems(),S;S=T.getItem(++_);)if(S.getAttribute("_cke_focus")&&S.$.offsetWidth){(this||i)._.focusIndex=_;S.focus(!0);break}return!S&&!s&&((this||i)._.focusIndex=-1,this.onKeyDown(o,1));case"prev":_=(this||i)._.focusIndex;for(T=(this||i)._.getItems();0<_&&(S=T.getItem(--_));){if(S.getAttribute("_cke_focus")&&S.$.offsetWidth){(this||i)._.focusIndex=_;S.focus(!0);break}S=null}return!S&&!s&&((this||i)._.focusIndex=T.count(),this.onKeyDown(o,1));case"click":case"mouseup":return _=(this||i)._.focusIndex,(S=0<=_&&(this||i)._.getItems().getItem(_))&&(S.$[T]?S.$[T]():S.$["on"+T]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function a(i,s,T,_,S){S=CKEDITOR.tools.genKey(s.getUniqueId(),T.getUniqueId(),i.lang.dir,i.uiColor||"",_.css||"",S||"");var P=o[S];P||(P=o[S]=new CKEDITOR.ui.panel(s,_),P.element=T.append(CKEDITOR.dom.element.createFromHtml(P.render(i),s)),P.element.setStyles({display:"none",position:"absolute"}));return P}var o={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(o,s,T,_){function k(){V.hide()}T.forceIFrame=1;T.toolbarRelated&&o.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(s=CKEDITOR.document.getById("cke_"+o.name));var S=s.getDocument();_=a(o,S,s,T,_||0);var P=_.element,$=P.getFirst(),V=this||i;P.disableContextMenu();(this||i).element=P;(this||i)._={editor:o,panel:_,parentElement:s,definition:T,document:S,iframe:$,children:[],dir:o.lang.dir,showBlockParams:null,markFirst:void 0===T.markFirst||T.markFirst};o.on("mode",k);o.on("resize",k);S.getWindow().on("resize",(function(){this.reposition()}),this||i)},proto:{addBlock:function(o,s){return(this||i)._.panel.addBlock(o,s)},addListBlock:function(o,s){return(this||i)._.panel.addListBlock(o,s)},getBlock:function(o){return(this||i)._.panel.getBlock(o)},showBlock:function(o,s,T,_,S,P){var $=(this||i)._.panel,V=$.showBlock(o);(this||i)._.showBlockParams=[].slice.call(arguments);this.allowBlur(!1);var j=(this||i)._.editor.editable();(this||i)._.returnFocus=j.hasFocus?j:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);(this||i)._.hideTimeout=0;var Y=(this||i).element,j=(this||i)._.iframe,j=CKEDITOR.env.ie&&!CKEDITOR.env.edge?j:new CKEDITOR.dom.window(j.$.contentWindow),ee=Y.getDocument(),te=(this||i)._.parentElement.getPositionedAncestor(),ne=s.getDocumentPosition(ee),ee=te?te.getDocumentPosition(ee):{x:0,y:0},ie="rtl"==(this||i)._.dir,oe=ne.x+(_||0)-ee.x,ae=ne.y+(S||0)-ee.y;!ie||1!=T&&4!=T?ie||2!=T&&3!=T||(oe+=s.$.offsetWidth-1):oe+=s.$.offsetWidth;3!=T&&4!=T||(ae+=s.$.offsetHeight-1);(this||i)._.panel._.offsetParentId=s.getId();Y.setStyles({top:ae+"px",left:0,display:""});Y.setOpacity(0);Y.getFirst().removeStyle("width");(this||i)._.editor.focusManager.add(j);(this||i)._.blurSet||(CKEDITOR.event.useCapture=!0,j.on("blur",(function(o){function b(){delete(this||i)._.returnFocus;this.hide()}this.allowBlur()&&o.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&(this||i).visible&&!(this||i)._.activeChild&&(CKEDITOR.env.iOS?(this||i)._.hideTimeout||((this||i)._.hideTimeout=CKEDITOR.tools.setTimeout(b,0,this||i)):b.call(this||i))}),this||i),j.on("focus",(function(){(this||i)._.focused=!0;this.hideChild();this.allowBlur(!0)}),this||i),CKEDITOR.env.iOS&&(j.on("touchstart",(function(){clearTimeout((this||i)._.hideTimeout)}),this||i),j.on("touchend",(function(){(this||i)._.hideTimeout=0;this.focus()}),this||i)),CKEDITOR.event.useCapture=!1,(this||i)._.blurSet=1);$.onEscape=CKEDITOR.tools.bind((function(o){if((this||i).onEscape&&!1===this.onEscape(o))return!1}),this||i);CKEDITOR.tools.setTimeout((function(){var o=CKEDITOR.tools.bind((function(){var o=Y;o.removeStyle("width");if(V.autoSize){var s=V.element.getDocument(),s=(CKEDITOR.env.webkit||CKEDITOR.env.edge?V.element:s.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<s&&(s+=(o.$.offsetWidth||0)-(o.$.clientWidth||0)+3);o.setStyle("width",s+10+"px");s=V.element.$.scrollHeight;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<s&&(s+=(o.$.offsetHeight||0)-(o.$.clientHeight||0)+3);o.setStyle("height",s+"px");$._.currentBlock.element.setStyle("display","none").removeStyle("display")}else o.removeStyle("height");ie&&(oe-=Y.$.offsetWidth);Y.setStyle("left",oe+"px");var s=$.element.getWindow(),o=Y.$.getBoundingClientRect(),s=s.getViewPaneSize(),T=o.width||o.right-o.left,_=o.height||o.bottom-o.top,S=ie?o.right:s.width-o.left,j=ie?s.width-o.right:o.left;ie?S<T&&(oe=j>T?oe+T:s.width>T?oe-o.left:oe-o.right+s.width):S<T&&(oe=j>T?oe-T:s.width>T?oe-o.right+s.width:oe-o.left);T=o.top;s.height-o.top<_&&(ae=T>_?ae-_:s.height>_?ae-o.bottom+s.height:ae-o.top);CKEDITOR.env.ie&&!CKEDITOR.env.edge&&(s=o=new CKEDITOR.dom.element(Y.$.offsetParent),"html"==s.getName()&&(s=s.getDocument().getBody()),"rtl"==s.getComputedStyle("direction")&&(oe=CKEDITOR.env.ie8Compat?oe-2*Y.getDocument().getDocumentElement().$.scrollLeft:oe-(o.$.scrollWidth-o.$.clientWidth)));var o=Y.getFirst(),ee;(ee=o.getCustomData("activePanel"))&&ee.onHide&&ee.onHide.call(this||i,1);o.setCustomData("activePanel",this||i);Y.setStyles({top:ae+"px",left:oe+"px"});Y.setOpacity(1);P&&P()}),this||i);$.isLoaded?o():$.onLoad=o;CKEDITOR.tools.setTimeout((function(){var o=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus();V.element.focus();CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=o);this.allowBlur(!0);(this||i)._.markFirst&&(CKEDITOR.env.ie?CKEDITOR.tools.setTimeout((function(){V.markFirstDisplayed?V.markFirstDisplayed():V._.markFirstDisplayed()}),0):V.markFirstDisplayed?V.markFirstDisplayed():V._.markFirstDisplayed());(this||i)._.editor.fire("panelShow",this||i)}),0,this||i)}),CKEDITOR.env.air?200:0,this||i);(this||i).visible=1;(this||i).onShow&&(this||i).onShow.call(this||i)},reposition:function(){var o=(this||i)._.showBlockParams;(this||i).visible&&(this||i)._.showBlockParams&&(this.hide(),(this||i).showBlock.apply(this||i,o))},focus:function(){if(CKEDITOR.env.webkit){var o=CKEDITOR.document.getActive();o&&!o.equals((this||i)._.iframe)&&o.$.blur()}((this||i)._.lastFocused||(this||i)._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var o=(this||i)._.iframe.getFrameDocument().getActive();o&&o.is("a")&&((this||i)._.lastFocused=o)},hide:function(o){if((this||i).visible&&(!(this||i).onHide||!0!==(this||i).onHide.call(this||i))){this.hideChild();CKEDITOR.env.gecko&&(this||i)._.iframe.getFrameDocument().$.activeElement.blur();(this||i).element.setStyle("display","none");(this||i).visible=0;(this||i).element.getFirst().removeCustomData("activePanel");(o=o&&(this||i)._.returnFocus)&&(CKEDITOR.env.webkit&&o.type&&o.getWindow().$.focus(),o.focus());delete(this||i)._.lastFocused;(this||i)._.showBlockParams=null;(this||i)._.editor.fire("panelHide",this||i)}},allowBlur:function(o){var s=(this||i)._.panel;void 0!==o&&(s.allowBlur=o);return s.allowBlur},showAsChild:function(o,s,T,_,S,P){(this||i)._.activeChild==o&&o._.panel._.offsetParentId==T.getId()||(this.hideChild(),o.onHide=CKEDITOR.tools.bind((function(){CKEDITOR.tools.setTimeout((function(){(this||i)._.focused||this.hide()}),0,this||i)}),this||i),(this||i)._.activeChild=o,(this||i)._.focused=!1,o.showBlock(s,T,_,S,P),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout((function(){o.element.getChild(0).$.style.cssText+=""}),100))},hideChild:function(o){var s=(this||i)._.activeChild;s&&(delete s.onHide,delete(this||i)._.activeChild,s.hide(),o&&this.focus())}}});CKEDITOR.on("instanceDestroyed",(function(){var i=CKEDITOR.tools.isEmpty(CKEDITOR.instances),s;for(s in o){var T=o[s];i?T.destroy():T.element.hide()}i&&(o={})}))}(),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(o){for(var s=o.config.menu_groups.split(","),T=o._.menuGroups={},_=o._.menuItems={},S=0;S<s.length;S++)T[s[S]]=S+1;o.addMenuGroup=function(i,o){T[i]=o||100};o.addMenuItem=function(o,s){T[s.group]&&(_[o]=new CKEDITOR.menuItem(this||i,o,s))};o.addMenuItems=function(i){for(var o in i)this.addMenuItem(o,i[o])};o.getMenuItem=function(i){return _[i]};o.removeMenuItem=function(i){delete _[i]}}}),function(){function a(i){i.sort((function(i,o){return i.group<o.group?-1:i.group>o.group?1:i.order<o.order?-1:i.order>o.order?1:0}))}var o='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1" _cke_focus=1 hidefocus="true" role="{role}" aria-label="{label}" aria-describedby="{id}_description" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked} draggable="false"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(o+=' onkeypress="return false;"');CKEDITOR.env.gecko&&(o+=' onblur="this.style.cssText = this.style.cssText;" ondragstart="return false;"');var o=o+' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">',s=CKEDITOR.addTemplate("menuItem",o+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{shortcutHtml}{arrowHtml}</span></a><span id="{id}_description" class="cke_voice_label" aria-hidden="false">{ariaShortcut}</span></span>'),T=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>'),_=CKEDITOR.addTemplate("menuShortcut",'<span class="cke_menubutton_label cke_menubutton_shortcut">{shortcut}</span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(o,s){s=(this||i)._.definition=s||{};(this||i).id=CKEDITOR.tools.getNextId();(this||i).editor=o;(this||i).items=[];(this||i)._.listeners=[];(this||i)._.level=s.level||1;var T=CKEDITOR.tools.extend({},s.panel,{css:[CKEDITOR.skin.getPath("editor")],level:(this||i)._.level-1,block:{}}),_=T.block.attributes=T.attributes||{};!_.role&&(_.role="menu");(this||i)._.panelDefinition=T},_:{onShow:function(){var o=(this||i).editor.getSelection(),s=o&&o.getStartElement(),T=(this||i).editor.elementPath(),_=(this||i)._.listeners;this.removeAll();for(var S=0;S<_.length;S++){var P=_[S](s,o,T);if(P)for(var $ in P){var V=(this||i).editor.getMenuItem($);!V||V.command&&!(this||i).editor.getCommand(V.command).state||(V.state=P[$],this.add(V))}}},onClick:function(o){this.hide();o.onClick?o.onClick():o.command&&(this||i).editor.execCommand(o.command)},onEscape:function(o){var s=(this||i).parent;s?s._.panel.hideChild(1):27==o&&this.hide(1);return!1},onHide:function(){(this||i).onHide&&this.onHide()},showSubMenu:function(o){var s=(this||i)._.subMenu,T=(this||i).items[o];if(T=T.getItems&&T.getItems()){s?s.removeAll():(s=(this||i)._.subMenu=new CKEDITOR.menu((this||i).editor,CKEDITOR.tools.extend({},(this||i)._.definition,{level:(this||i)._.level+1},!0)),s.parent=this||i,s._.onClick=CKEDITOR.tools.bind((this||i)._.onClick,this||i));for(var _ in T){var S=(this||i).editor.getMenuItem(_);S&&(S.state=T[_],s.add(S))}var P=(this||i)._.panel.getBlock((this||i).id).element.getDocument().getById((this||i).id+String(o));setTimeout((function(){s.show(P,2)}),0)}else(this||i)._.panel.hideChild(1)}},proto:{add:function(o){o.order||(o.order=(this||i).items.length);(this||i).items.push(o)},removeAll:function(){(this||i).items=[]},show:function(o,s,T,_){if((this||i).parent||((this||i)._.onShow(),(this||i).items.length)){s=s||("rtl"==(this||i).editor.lang.dir?2:1);var S=(this||i).items,P=(this||i).editor,$=(this||i)._.panel,V=(this||i)._.element;if(!$){$=(this||i)._.panel=new CKEDITOR.ui.floatPanel((this||i).editor,CKEDITOR.document.getBody(),(this||i)._.panelDefinition,(this||i)._.level);$.onEscape=CKEDITOR.tools.bind((function(o){if(!1===(this||i)._.onEscape(o))return!1}),this||i);$.onShow=function(){$._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")};$.onHide=CKEDITOR.tools.bind((function(){(this||i)._.onHide&&(this||i)._.onHide()}),this||i);V=$.addBlock((this||i).id,(this||i)._.panelDefinition.block);V.autoSize=!0;var j=V.keys;j[40]="next";j[9]="next";j[38]="prev";j[CKEDITOR.SHIFT+9]="prev";j["rtl"==P.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click";j[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(j[13]="mouseup");V=(this||i)._.element=V.element;j=V.getDocument();j.getBody().setStyle("overflow","hidden");j.getElementsByTag("html").getItem(0).setStyle("overflow","hidden");(this||i)._.itemOverFn=CKEDITOR.tools.addFunction((function(o){clearTimeout((this||i)._.showSubTimeout);(this||i)._.showSubTimeout=CKEDITOR.tools.setTimeout((this||i)._.showSubMenu,P.config.menu_subMenuDelay||400,this||i,[o])}),this||i);(this||i)._.itemOutFn=CKEDITOR.tools.addFunction((function(){clearTimeout((this||i)._.showSubTimeout)}),this||i);(this||i)._.itemClickFn=CKEDITOR.tools.addFunction((function(o){var s=(this||i).items[o];s.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):s.getItems?(this||i)._.showSubMenu(o):(this||i)._.onClick(s)}),this||i)}a(S);for(var j=P.elementPath(),j=['<div class="cke_menu'+(j&&j.direction()!=P.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],Y=S.length,ee=Y&&S[0].group,te=0;te<Y;te++){var ne=S[te];ee!=ne.group&&(j.push('<div class="cke_menuseparator" role="separator"></div>'),ee=ne.group);ne.render(this||i,te,j)}j.push("</div>");V.setHtml(j.join(""));CKEDITOR.ui.fire("ready",this||i);(this||i).parent?(this||i).parent._.panel.showAsChild($,(this||i).id,o,s,T,_):$.showBlock((this||i).id,o,s,T,_);P.fire("menuShow",[$])}},addListener:function(o){(this||i)._.listeners.push(o)},hide:function(o){(this||i)._.onHide&&(this||i)._.onHide();(this||i)._.panel&&(this||i)._.panel.hide(o)},findItemByCommandName:function(o){var s=CKEDITOR.tools.array.filter((this||i).items,(function(i){return o===i.command}));return s.length?(s=s[0],{item:s,element:(this||i)._.element.findOne("."+s.className)}):null}}});CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(o,s,T){CKEDITOR.tools.extend(this||i,T,{order:0,className:"cke_menubutton__"+s});(this||i).group=o._.menuGroups[(this||i).group];(this||i).editor=o;(this||i).name=s},proto:{render:function(o,S,P){var $=o.id+String(S),V="undefined"==typeof(this||i).state?CKEDITOR.TRISTATE_OFF:(this||i).state,j="",Y=(this||i).editor,ee,te,ne=V==CKEDITOR.TRISTATE_ON?"on":V==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";(this||i).role in{menuitemcheckbox:1,menuitemradio:1}&&(j=' aria-checked="'+(V==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var ie=(this||i).getItems,oe="&#"+("rtl"==(this||i).editor.lang.dir?"9668":"9658")+";",ae=(this||i).name;(this||i).icon&&!/\./.test((this||i).icon)&&(ae=(this||i).icon);(this||i).command&&(ee=Y.getCommand((this||i).command),(ee=Y.getCommandKeystroke(ee))&&(te=CKEDITOR.tools.keystrokeToString(Y.lang.common.keyboard,ee)));o={id:$,name:(this||i).name,iconName:ae,label:(this||i).label,cls:(this||i).className||"",state:ne,hasPopup:ie?"true":"false",disabled:V==CKEDITOR.TRISTATE_DISABLED,title:(this||i).label+(te?" ("+te.display+")":""),ariaShortcut:te?Y.lang.common.keyboardShortcut+" "+te.aria:"",href:"javascript:void('"+((this||i).label||"").replace("'")+"')",hoverFn:o._.itemOverFn,moveOutFn:o._.itemOutFn,clickFn:o._.itemClickFn,index:S,iconStyle:CKEDITOR.skin.getIconStyle(ae,"rtl"==(this||i).editor.lang.dir,ae==(this||i).icon?null:(this||i).icon,(this||i).iconOffset),shortcutHtml:te?_.output({shortcut:te.display}):"",arrowHtml:ie?T.output({label:oe}):"",role:(this||i).role?(this||i).role:"menuitem",ariaChecked:j};s.output(o,P)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(o){(this||i).base.call(this||i,o,{panel:{css:o.config.contextmenu_contentsCss,className:"cke_menu_panel",attributes:{"aria-label":o.lang.contextmenu.options}}})},proto:{addTarget:function(o,s){function b(){_=!1}var T,_;o.on("contextmenu",(function(o){o=o.data;var S=CKEDITOR.env.webkit?T:CKEDITOR.env.mac?o.$.metaKey:o.$.ctrlKey;if((!s||!S)&&(o.preventDefault(),!_)){if(CKEDITOR.env.mac&&CKEDITOR.env.webkit){var S=(this||i).editor,P=new CKEDITOR.dom.elementPath(o.getTarget(),S.editable()).contains((function(i){return i.hasAttribute("contenteditable")}),!0);P&&"false"==P.getAttribute("contenteditable")&&S.getSelection().fake(P)}var P=o.getTarget().getDocument(),$=o.getTarget().getDocument().getDocumentElement(),S=!P.equals(CKEDITOR.document),P=P.getWindow().getScrollPosition(),V=S?o.$.clientX:o.$.pageX||P.x+o.$.clientX,j=S?o.$.clientY:o.$.pageY||P.y+o.$.clientY;CKEDITOR.tools.setTimeout((function(){this.open($,null,V,j)}),CKEDITOR.env.ie?200:0,this||i)}}),this||i);if(CKEDITOR.env.webkit){var l=function(){T=0};o.on("keydown",(function(i){T=CKEDITOR.env.mac?i.data.$.metaKey:i.data.$.ctrlKey}));o.on("keyup",l);o.on("contextmenu",l)}CKEDITOR.env.gecko&&!CKEDITOR.env.mac&&(o.on("keydown",(function(i){i.data.$.shiftKey&&121===i.data.$.keyCode&&(_=!0)}),null,null,0),o.on("keyup",b),o.on("contextmenu",b))},open:function(o,s,T,_){!1!==(this||i).editor.config.enableContextMenu&&(this||i).editor.getSelection().getType()!==CKEDITOR.SELECTION_NONE&&((this||i).editor.focus(),o=o||CKEDITOR.document.getDocumentElement(),(this||i).editor.selectionChange(1),this.show(o,s,T,_))}}})},beforeInit:function(i){var o=i.contextMenu=new CKEDITOR.plugins.contextMenu(i);i.on("contentDom",(function(){o.addTarget(i.editable(),!1!==i.config.browserContextMenuOnCtrl)}));i.addCommand("contextMenu",{exec:function(i){var o=0,s=0,T=i.getSelection().getRanges(),T=T[T.length-1].getClientRects(i.editable().isInline());(T=T[T.length-1])&&(o=T["rtl"===i.lang.dir?"left":"right"],s=T.bottom);i.contextMenu.open(i.document.getBody().getParent(),null,o,s)}});i.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu");i.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){function a(o,T){function k(i){i=P.list[i];var s;i.equals(o.editable())||"true"==i.getAttribute("contenteditable")?(s=o.createRange(),s.selectNodeContents(i),s=s.select()):(s=o.getSelection(),s.selectElement(i));CKEDITOR.env.ie&&o.fire("selectionChange",{selection:s,path:new CKEDITOR.dom.elementPath(i)});o.focus()}function g(){S&&S.setHtml('<span class="cke_path_empty">&nbsp;</span>');delete P.list}var _=o.ui.spaceId("path"),S,P=o._.elementsPath,$=P.idBase;T.html+='<span id="'+_+'_label" class="cke_voice_label">'+o.lang.elementspath.eleLabel+'</span><span id="'+_+'" class="cke_path" role="group" aria-labelledby="'+_+'_label"><span class="cke_path_empty">&nbsp;</span></span>';o.on("uiReady",(function(){var i=o.ui.space("path");i&&o.focusManager.add(i,1)}));P.onClick=k;var V=CKEDITOR.tools.addFunction(k),j=CKEDITOR.tools.addFunction((function(i,s){var T=P.idBase,_;s=new CKEDITOR.dom.event(s);_="rtl"==o.lang.dir;switch(s.getKeystroke()){case _?39:37:case 9:return(_=CKEDITOR.document.getById(T+(i+1)))||(_=CKEDITOR.document.getById(T+"0")),_.focus(),!1;case _?37:39:case CKEDITOR.SHIFT+9:return(_=CKEDITOR.document.getById(T+(i-1)))||(_=CKEDITOR.document.getById(T+(P.list.length-1))),_.focus(),!1;case 27:return o.focus(),!1;case 13:case 32:return k(i),!1}return!0}));o.on("selectionChange",(function(i){for(var T=[],Y=P.list=[],ee=[],te=P.filters,ne=!0,ie=i.data.path.elements,oe=ie.length;oe--;){var ae=ie[oe],re=0;i=ae.data("cke-display-name")?ae.data("cke-display-name"):ae.data("cke-real-element-type")?ae.data("cke-real-element-type"):ae.getName();(ne=ae.hasAttribute("contenteditable")?"true"==ae.getAttribute("contenteditable"):ne)||ae.hasAttribute("contenteditable")||(re=1);for(var se=0;se<te.length;se++){var le=te[se](ae,i);if(!1===le){re=1;break}i=le||i}re||(Y.unshift(ae),ee.unshift(i))}Y=Y.length;for(te=0;te<Y;te++)i=ee[te],ne=o.lang.elementspath.eleTitle.replace(/%1/,i),i=s.output({id:$+te,label:ne,text:i,jsTitle:"javascript:void('"+i+"')",index:te,keyDownFn:j,clickFn:V}),T.unshift(i);S||(S=CKEDITOR.document.getById(_));ee=S;ee.setHtml(T.join("")+'<span class="cke_path_empty">&nbsp;</span>');o.fire("elementsPathUpdate",{space:ee})}));o.on("readOnly",g);o.on("contentDomUnload",g);o.addCommand("elementsPathFocus",i.toolbarFocus);o.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var i={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(i){(i=CKEDITOR.document.getById(i._.elementsPath.idBase+"0"))&&i.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},o="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(o+=' onkeypress="return false;"');CKEDITOR.env.gecko&&(o+=' onblur="this.style.cssText = this.style.cssText;"');var s=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+o+' hidefocus="true"  draggable="false"  ondragstart="return false;" onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(i){i._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]};i.on("uiSpace",(function(o){"bottom"==o.data.space&&a(i,o.data)}))}})}(),function(){function a(i,T){var _,S;T.on("refresh",(function(i){var T=[o],_;for(_ in i.data.states)T.push(i.data.states[_]);this.setState(CKEDITOR.tools.search(T,s)?s:o)}),T,null,100);T.on("exec",(function(o){_=i.getSelection();S=_.createBookmarks(1);o.data||(o.data={});o.data.done=!1}),T,null,0);T.on("exec",(function(){i.forceNextSelectionCheck();_.selectBookmarks(S)}),T,null,100)}var o=CKEDITOR.TRISTATE_DISABLED,s=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(i){var o=CKEDITOR.plugins.indent.genericDefinition;a(i,i.addCommand("indent",new o(!0)));a(i,i.addCommand("outdent",new o));i.ui.addButton&&(i.ui.addButton("Indent",{label:i.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),i.ui.addButton("Outdent",{label:i.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"}));i.on("dirChanged",(function(o){var s=i.createRange(),T=o.data.node;s.setStartBefore(T);s.setEndAfter(T);for(var _=new CKEDITOR.dom.walker(s),S;S=_.next();)if(S.type==CKEDITOR.NODE_ELEMENT)if(!S.equals(T)&&S.getDirection())s.setStartAfter(S),_=new CKEDITOR.dom.walker(s);else{var P=i.config.indentClasses;if(P)for(var $="ltr"==o.data.dir?["_rtl",""]:["","_rtl"],V=0;V<P.length;V++)S.hasClass(P[V]+$[0])&&(S.removeClass(P[V]+$[0]),S.addClass(P[V]+$[1]));P=S.getStyle("margin-right");$=S.getStyle("margin-left");P?S.setStyle("margin-left",P):S.removeStyle("margin-left");$?S.setStyle("margin-right",$):S.removeStyle("margin-right")}}))}});CKEDITOR.plugins.indent={genericDefinition:function(o){(this||i).isIndent=!!o;(this||i).startDisabled=!(this||i).isIndent},specificDefinition:function(o,s,T){(this||i).name=s;(this||i).editor=o;(this||i).jobs={};(this||i).enterBr=o.config.enterMode==CKEDITOR.ENTER_BR;(this||i).isIndent=!!T;(this||i).relatedGlobal=T?"indent":"outdent";(this||i).indentKey=T?9:CKEDITOR.SHIFT+9;(this||i).database={}},registerCommands:function(o,s){o.on("pluginsLoaded",(function(){for(var o in s)(function(o,s){var T=o.getCommand(s.relatedGlobal),_;for(_ in s.jobs)T.on("exec",(function(i){i.data.done||(o.fire("lockSnapshot"),s.execJob(o,_)&&(i.data.done=!0),o.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(s.database))}),this||i,null,_),T.on("refresh",(function(i){i.data.states||(i.data.states={});i.data.states[s.name+"@"+_]=s.refreshJob(o,_,i.data.path)}),this||i,null,_);o.addFeature(s)})(this||i,s[o])}))}};CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}};CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(s,T){var _=(this||i).jobs[T];if(_.state!=o)return _.exec.call(this||i,s)},refreshJob:function(s,T,_){T=(this||i).jobs[T];s.activeFilter.checkFeature(this||i)?T.state=T.refresh.call(this||i,s,_):T.state=o;return T.state},getContext:function(o){return o.contains((this||i).context)}}}(),function(){function a(o){function c(i){for(var P=S.startContainer,$=S.endContainer;P&&!P.getParent().equals(i);)P=P.getParent();for(;$&&!$.getParent().equals(i);)$=$.getParent();if(!P||!$)return!1;for(var V=[],j=!1;!j;)P.equals($)&&(j=!0),V.push(P),P=P.getNext();if(1>V.length)return!1;P=i.getParents(!0);for($=0;$<P.length;$++)if(P[$].getName&&_[P[$].getName()]){i=P[$];break}for(var P=s.isIndent?1:-1,$=V[0],V=V[V.length-1],j=CKEDITOR.plugins.list.listToArray(i,T),Y=j[V.getCustomData("listarray_index")].indent,$=$.getCustomData("listarray_index");$<=V.getCustomData("listarray_index");$++)if(j[$].indent+=P,0<P){for(var ee=j[$].parent,te=$-1;0<=te;te--)if(j[te].indent===P){ee=j[te].parent;break}j[$].parent=new CKEDITOR.dom.element(ee.getName(),ee.getDocument())}for($=V.getCustomData("listarray_index")+1;$<j.length&&j[$].indent>Y;$++)j[$].indent+=P;P=CKEDITOR.plugins.list.arrayToList(j,T,null,o.config.enterMode,i.getDirection());if(!s.isIndent){var ne;if((ne=i.getParent())&&ne.is("li"))for(var V=P.listNode.getChildren(),ie=[],oe,$=V.count()-1;0<=$;$--)(oe=V.getItem($))&&oe.is&&oe.is("li")&&ie.push(oe)}P&&P.listNode.replace(i);if(ie&&ie.length)for($=0;$<ie.length;$++){for(oe=i=ie[$];(oe=oe.getNext())&&oe.is&&oe.getName()in _;)CKEDITOR.env.needsNbspFiller&&!i.getFirst(b)&&i.append(S.document.createText(" ")),i.append(oe);i.insertAfter(ne)}P&&o.fire("contentDomInvalidated");return!0}for(var s=this||i,T=(this||i).database,_=(this||i).context,S,P=o.getSelection(),P=(P&&P.getRanges()).createIterator();S=P.getNextRange();){for(var $=S.getCommonAncestor();$&&($.type!=CKEDITOR.NODE_ELEMENT||!_[$.getName()]);){if(o.editable().equals($)){$=!1;break}$=$.getParent()}$||($=S.startPath().contains(_))&&S.setEndAt($,CKEDITOR.POSITION_BEFORE_END);if(!$){var V=S.getEnclosedNode();V&&V.type==CKEDITOR.NODE_ELEMENT&&V.getName()in _&&(S.setStartAt(V,CKEDITOR.POSITION_AFTER_START),S.setEndAt(V,CKEDITOR.POSITION_BEFORE_END),$=V)}$&&S.startContainer.type==CKEDITOR.NODE_ELEMENT&&S.startContainer.getName()in _&&(V=new CKEDITOR.dom.walker(S),V.evaluator=f,S.startContainer=V.next());$&&S.endContainer.type==CKEDITOR.NODE_ELEMENT&&S.endContainer.getName()in _&&(V=new CKEDITOR.dom.walker(S),V.evaluator=f,S.endContainer=V.previous());if($)return c($)}return 0}function f(i){return i.type==CKEDITOR.NODE_ELEMENT&&i.is("li")}function b(i){return o(i)&&s(i)}var o=CKEDITOR.dom.walker.whitespaces(!0),s=CKEDITOR.dom.walker.bookmark(!1,!0),T=CKEDITOR.TRISTATE_DISABLED,_=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(o){function c(o){s.specificDefinition.apply(this||i,arguments);(this||i).requiredContent=["ul","ol"];o.on("key",(function(s){var T=o.elementPath();if("wysiwyg"==o.mode&&s.data.keyCode==(this||i).indentKey&&T){var _=this.getContext(T);!_||(this||i).isIndent&&CKEDITOR.plugins.indentList.firstItemInPath((this||i).context,T,_)||(o.execCommand((this||i).relatedGlobal),s.cancel())}}),this||i);(this||i).jobs[(this||i).isIndent?10:30]={refresh:(this||i).isIndent?function(o,s){var S=this.getContext(s),P=CKEDITOR.plugins.indentList.firstItemInPath((this||i).context,s,S);return S&&(this||i).isIndent&&!P?_:T}:function(o,s){return!this.getContext(s)||(this||i).isIndent?T:_},exec:CKEDITOR.tools.bind(a,this||i)}}var s=CKEDITOR.plugins.indent;s.registerCommands(o,{indentlist:new c(o,"indentlist",!0),outdentlist:new c(o,"outdentlist")});CKEDITOR.tools.extend(c.prototype,s.specificDefinition.prototype,{context:{ol:1,ul:1}})}});CKEDITOR.plugins.indentList={};CKEDITOR.plugins.indentList.firstItemInPath=function(i,o,s){var T=o.contains(f);s||(s=o.contains(i));return s&&T&&T.equals(s.getFirst(f))}}(),function(){function a(o,s,T,_){for(var S=CKEDITOR.plugins.list.listToArray(s.root,T),P=[],$=0;$<s.contents.length;$++){var V=s.contents[$];(V=V.getAscendant("li",!0))&&!V.getCustomData("list_item_processed")&&(P.push(V),CKEDITOR.dom.element.setMarker(T,V,"list_item_processed",!0))}for(var V=s.root.getDocument(),j,Y,$=0;$<P.length;$++){var ee=P[$].getCustomData("listarray_index");j=S[ee].parent;j.is((this||i).type)||(Y=V.createElement((this||i).type),j.copyAttributes(Y,{start:1,type:1}),Y.removeStyle("list-style-type"),S[ee].parent=Y)}T=CKEDITOR.plugins.list.arrayToList(S,T,null,o.config.enterMode);for(var te,S=T.listNode.getChildCount(),$=0;$<S&&(te=T.listNode.getChild($));$++)te.getName()==(this||i).type&&_.push(te);T.listNode.replace(s.root);o.fire("contentDomInvalidated")}function f(o,s,T){var _=s.contents,P=s.root.getDocument(),$=[];if(1==_.length&&_[0].equals(s.root)){var V=P.createElement("div");_[0].moveChildren&&_[0].moveChildren(V);_[0].append(V);_[0]=V}s=s.contents[0].getParent();for(V=0;V<_.length;V++)s=s.getCommonAncestor(_[V].getParent());o=o.config.useComputedState;var j,Y;o=void 0===o||o;for(V=0;V<_.length;V++)for(var ee=_[V],te;te=ee.getParent();){if(te.equals(s)){$.push(ee);!Y&&ee.getDirection()&&(Y=1);ee=ee.getDirection(o);null!==j&&(j=j&&j!=ee?null:ee);break}ee=te}if(!(1>$.length)){_=$[$.length-1].getNext();V=P.createElement((this||i).type);for(T.push(V);$.length;)T=$.shift(),o=P.createElement("li"),ee=T,ee.is("pre")||S.test(ee.getName())||"false"==ee.getAttribute("contenteditable")?T.appendTo(o):(T.copyAttributes(o),j&&T.getDirection()&&(o.removeStyle("direction"),o.removeAttribute("dir")),T.moveChildren(o),T.remove()),o.appendTo(V);j&&Y&&V.setAttribute("dir",j);_?V.insertBefore(_):V.appendTo(s)}}function b(i,o,s){function d(s){!(V=$[s?"getFirst":"getLast"]())||V.is&&V.isBlockBoundary()||!(j=o.root[s?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||j.is&&j.isBlockBoundary({br:1})||i.document.createElement("br")[s?"insertBefore":"insertAfter"](V)}for(var T=CKEDITOR.plugins.list.listToArray(o.root,s),_=[],S=0;S<o.contents.length;S++){var P=o.contents[S];(P=P.getAscendant("li",!0))&&!P.getCustomData("list_item_processed")&&(_.push(P),CKEDITOR.dom.element.setMarker(s,P,"list_item_processed",!0))}P=null;for(S=0;S<_.length;S++)P=_[S].getCustomData("listarray_index"),T[P].indent=-1;for(S=P+1;S<T.length;S++)if(T[S].indent>T[S-1].indent+1){_=T[S-1].indent+1-T[S].indent;for(P=T[S].indent;T[S]&&T[S].indent>=P;)T[S].indent+=_,S++;S--}var $=CKEDITOR.plugins.list.arrayToList(T,s,null,i.config.enterMode,o.root.getAttribute("dir")).listNode,V,j;d(!0);d();$.replace(o.root);i.fire("contentDomInvalidated")}function c(o,s){(this||i).name=o;(this||i).context=(this||i).type=s;(this||i).allowedContent=s+" li";(this||i).requiredContent=s}function d(i,o,s,T){for(var _,S;_=i[T?"getLast":"getFirst"](P);)(S=_.getDirection(1))!==o.getDirection(1)&&_.setAttribute("dir",S),_.remove(),s?_[T?"insertBefore":"insertAfter"](s):o.append(_,T),s=_}function l(i){function b(o){var s=i[o?"getPrevious":"getNext"](q);s&&s.type==CKEDITOR.NODE_ELEMENT&&s.is(i.getName())&&(d(i,s,null,!o),i.remove(),i=s)}b();b(1)}function k(i){return i.type==CKEDITOR.NODE_ELEMENT&&(i.getName()in CKEDITOR.dtd.$block||i.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[i.getName()]["#"]}function g(i,o,s){i.fire("saveSnapshot");s.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var T=s.extractContents();o.trim(!1,!0);var S=o.createBookmark(),P=new CKEDITOR.dom.elementPath(o.startContainer),$=P.block,P=P.lastElement.getAscendant("li",1)||$,V=new CKEDITOR.dom.elementPath(s.startContainer),j=V.contains(CKEDITOR.dtd.$listItem),V=V.contains(CKEDITOR.dtd.$list);$?($=$.getBogus())&&$.remove():V&&($=V.getPrevious(q))&&_($)&&$.remove();($=T.getLast())&&$.type==CKEDITOR.NODE_ELEMENT&&$.is("br")&&$.remove();($=o.startContainer.getChild(o.startOffset))?T.insertBefore($):o.startContainer.append(T);j&&(T=h(j))&&(P.contains(j)?(d(T,j.getParent(),j),T.remove()):P.append(T));for(;s.checkStartOfBlock()&&s.checkEndOfBlock();){V=s.startPath();T=V.block;if(!T)break;T.is("li")&&(P=T.getParent(),T.equals(P.getLast(q))&&T.equals(P.getFirst(q))&&(T=P));s.moveToPosition(T,CKEDITOR.POSITION_BEFORE_START);T.remove()}s=s.clone();T=i.editable();s.setEndAt(T,CKEDITOR.POSITION_BEFORE_END);s=new CKEDITOR.dom.walker(s);s.evaluator=function(i){return q(i)&&!_(i)};(s=s.next())&&s.type==CKEDITOR.NODE_ELEMENT&&s.getName()in CKEDITOR.dtd.$list&&l(s);o.moveToBookmark(S);o.select();i.fire("saveSnapshot")}function h(i){return(i=i.getLast(q))&&i.type==CKEDITOR.NODE_ELEMENT&&i.getName()in o?i:null}var o={ol:1,ul:1},s=CKEDITOR.dom.walker.whitespaces(),T=CKEDITOR.dom.walker.bookmark(),q=function(i){return!(s(i)||T(i))},_=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(i,s,T,_,S){if(!o[i.getName()])return[];_||(_=0);T||(T=[]);for(var P=0,$=i.getChildCount();P<$;P++){var V=i.getChild(P);V.type==CKEDITOR.NODE_ELEMENT&&V.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(V,s,T,_+1);if("li"==V.$.nodeName.toLowerCase()){var j={parent:i,indent:_,element:V,contents:[]};S?j.grandparent=S:(j.grandparent=i.getParent(),j.grandparent&&"li"==j.grandparent.$.nodeName.toLowerCase()&&(j.grandparent=j.grandparent.getParent()));s&&CKEDITOR.dom.element.setMarker(s,V,"listarray_index",T.length);T.push(j);for(var Y=0,ee=V.getChildCount(),te;Y<ee;Y++)te=V.getChild(Y),te.type==CKEDITOR.NODE_ELEMENT&&o[te.getName()]?CKEDITOR.plugins.list.listToArray(te,s,T,_+1,j.grandparent):j.contents.push(te)}}return T},arrayToList:function(i,s,_,S,P){_||(_=0);if(!i||i.length<_+1)return null;for(var $,V=i[_].parent.getDocument(),j=new CKEDITOR.dom.documentFragment(V),Y=null,ee=_,te=Math.max(i[_].indent,0),ne=null,ie,oe,ae=S==CKEDITOR.ENTER_P?"p":"div";;){var re=i[ee];$=re.grandparent;ie=re.element.getDirection(1);if(re.indent==te){Y&&i[ee].parent.getName()==Y.getName()||(Y=i[ee].parent.clone(!1,1),P&&Y.setAttribute("dir",P),j.append(Y));ne=Y.append(re.element.clone(0,1));ie!=Y.getDirection(1)&&ne.setAttribute("dir",ie);for($=0;$<re.contents.length;$++)ne.append(re.contents[$].clone(1,1));ee++}else if(re.indent==Math.max(te,0)+1)re=i[ee-1].element.getDirection(1),ee=CKEDITOR.plugins.list.arrayToList(i,null,ee,S,re!=ie?ie:null),!ne.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=V.$.documentMode&&ne.append(V.createText(" ")),ne.append(ee.listNode),ee=ee.nextIndex;else{if(-1!=re.indent||_||!$)return null;o[$.getName()]?(ne=re.element.clone(!1,!0),ie!=$.getDirection(1)&&ne.setAttribute("dir",ie)):ne=new CKEDITOR.dom.documentFragment(V);var Y=$.getDirection(1)!=ie,se=re.element,le=se.getAttribute("class"),ce=se.getAttribute("style"),de=ne.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(S!=CKEDITOR.ENTER_BR||Y||ce||le),ue,he=re.contents.length,fe;for($=0;$<he;$++)if(ue=re.contents[$],T(ue)&&1<he)de?fe=ue.clone(1,1):ne.append(ue.clone(1,1));else if(ue.type==CKEDITOR.NODE_ELEMENT&&ue.isBlockBoundary()){Y&&!ue.getDirection()&&ue.setAttribute("dir",ie);oe=ue;var ge=se.getAttribute("style");ge&&oe.setAttribute("style",ge.replace(/([^;])$/,"$1;")+(oe.getAttribute("style")||""));le&&ue.addClass(le);oe=null;fe&&(ne.append(fe),fe=null);ne.append(ue.clone(1,1))}else de?(oe||(oe=V.createElement(ae),ne.append(oe),Y&&oe.setAttribute("dir",ie)),ce&&oe.setAttribute("style",ce),le&&oe.setAttribute("class",le),fe&&(oe.append(fe),fe=null),oe.append(ue.clone(1,1))):ne.append(ue.clone(1,1));fe&&((oe||ne).append(fe),fe=null);ne.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&ee!=i.length-1&&(CKEDITOR.env.needsBrFiller&&(ie=ne.getLast())&&ie.type==CKEDITOR.NODE_ELEMENT&&ie.is("br")&&ie.remove(),(ie=ne.getLast(q))&&ie.type==CKEDITOR.NODE_ELEMENT&&ie.is(CKEDITOR.dtd.$block)||ne.append(V.createElement("br")));ie=ne.$.nodeName.toLowerCase();"div"!=ie&&"p"!=ie||ne.appendBogus();j.append(ne);Y=null;ee++}oe=null;if(i.length<=ee||Math.max(i[ee].indent,0)<te)break}if(s)for(i=j.getFirst();i;){if(i.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(s,i),i.getName()in CKEDITOR.dtd.$listItem&&(_=i,V=P=S=void 0,S=_.getDirection()))){for(P=_.getParent();P&&!(V=P.getDirection());)P=P.getParent();S==V&&_.removeAttribute("dir")}i=i.getNextSourceNode()}return{listNode:j,nextIndex:ee}}};var S=/^h[1-6]$/,P=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);c.prototype={exec:function(s){function d(i){return o[i.root.getName()]&&!e(i.root,[CKEDITOR.NODE_COMMENT])}function e(i,o){return CKEDITOR.tools.array.filter(i.getChildren().toArray(),(function(i){return-1===CKEDITOR.tools.array.indexOf(o,i.type)})).length}function g(i){var o=!0;if(0===i.getChildCount())return!1;i.forEach((function(i){if(i.type!==CKEDITOR.NODE_COMMENT)return o=!1}),null,!0);return o}this.refresh(s,s.elementPath());var T=s.config,_=s.getSelection(),S=_&&_.getRanges();if((this||i).state==CKEDITOR.TRISTATE_OFF){var P=s.editable();if(P.getFirst(q)){var $=1==S.length&&S[0];(T=$&&$.getEnclosedNode())&&T.is&&(this||i).type==T.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else T.enterMode==CKEDITOR.ENTER_BR?P.appendBogus():S[0].fixBlock(1,T.enterMode==CKEDITOR.ENTER_P?"p":"div"),_.selectRanges(S)}for(var T=_.createBookmarks(!0),P=[],V={},S=S.createIterator(),j=0;($=S.getNextRange())&&++j;){var Y=$.getBoundaryNodes(),ee=Y.startNode,te=Y.endNode;ee.type==CKEDITOR.NODE_ELEMENT&&"td"==ee.getName()&&$.setStartAt(Y.startNode,CKEDITOR.POSITION_AFTER_START);te.type==CKEDITOR.NODE_ELEMENT&&"td"==te.getName()&&$.setEndAt(Y.endNode,CKEDITOR.POSITION_BEFORE_END);$=$.createIterator();for($.forceBrBreak=(this||i).state==CKEDITOR.TRISTATE_OFF;Y=$.getNextParagraph();)if(!Y.getCustomData("list_block")&&!g(Y)){CKEDITOR.dom.element.setMarker(V,Y,"list_block",1);for(var ne=s.elementPath(Y),ee=ne.elements,te=0,ne=ne.blockLimit,ie,oe=ee.length-1;0<=oe&&(ie=ee[oe]);oe--)if(o[ie.getName()]&&ne.contains(ie)){ne.removeCustomData("list_group_object_"+j);(ee=ie.getCustomData("list_group_object"))?ee.contents.push(Y):(ee={root:ie,contents:[Y]},P.push(ee),CKEDITOR.dom.element.setMarker(V,ie,"list_group_object",ee));te=1;break}te||(te=ne,te.getCustomData("list_group_object_"+j)?te.getCustomData("list_group_object_"+j).contents.push(Y):(ee={root:te,contents:[Y]},CKEDITOR.dom.element.setMarker(V,te,"list_group_object_"+j,ee),P.push(ee)))}}for(ie=[];0<P.length;)ee=P.shift(),(this||i).state==CKEDITOR.TRISTATE_OFF?d(ee)||(o[ee.root.getName()]?a.call(this||i,s,ee,V,ie):f.call(this||i,s,ee,ie)):(this||i).state==CKEDITOR.TRISTATE_ON&&o[ee.root.getName()]&&!d(ee)&&b.call(this||i,s,ee,V);for(oe=0;oe<ie.length;oe++)l(ie[oe]);CKEDITOR.dom.element.clearAllMarkers(V);_.selectBookmarks(T);s.focus()},refresh:function(s,T){var _=T.contains(o,1),S=T.blockLimit||T.root;_&&S.contains(_)?this.setState(_.is((this||i).type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(i){i.blockless||(i.addCommand("numberedlist",new c("numberedlist","ol")),i.addCommand("bulletedlist",new c("bulletedlist","ul")),i.ui.addButton&&(i.ui.addButton("NumberedList",{label:i.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),i.ui.addButton("BulletedList",{label:i.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),i.on("key",(function(s){var T=s.data.domEvent.getKey(),S;if("wysiwyg"==i.mode&&T in{8:1,46:1}){var P=i.getSelection().getRanges()[0],$=P&&P.startPath();if(P&&P.collapsed){var V=8==T,j=i.editable(),Y=new CKEDITOR.dom.walker(P.clone());Y.evaluator=function(i){return q(i)&&!_(i)};Y.guard=function(i,o){return!(o&&i.type==CKEDITOR.NODE_ELEMENT&&i.is("table"))};T=P.clone();if(V){var ee;(ee=$.contains(o))&&P.checkBoundaryOfElement(ee,CKEDITOR.START)&&(ee=ee.getParent())&&ee.is("li")&&(ee=h(ee))?(S=ee,ee=ee.getPrevious(q),T.moveToPosition(ee&&_(ee)?ee:S,CKEDITOR.POSITION_BEFORE_START)):(Y.range.setStartAt(j,CKEDITOR.POSITION_AFTER_START),Y.range.setEnd(P.startContainer,P.startOffset),(ee=Y.previous())&&ee.type==CKEDITOR.NODE_ELEMENT&&(ee.getName()in o||ee.is("li"))&&(ee.is("li")||(Y.range.selectNodeContents(ee),Y.reset(),Y.evaluator=k,ee=Y.previous()),S=ee,T.moveToElementEditEnd(S),T.moveToPosition(T.endPath().block,CKEDITOR.POSITION_BEFORE_END)));if(S)g(i,T,P),s.cancel();else{var te=$.contains(o);te&&P.checkBoundaryOfElement(te,CKEDITOR.START)&&(S=te.getFirst(q),P.checkBoundaryOfElement(S,CKEDITOR.START)&&(ee=te.getPrevious(q),h(S)?ee&&(P.moveToElementEditEnd(ee),P.select()):i.execCommand("outdent"),s.cancel()))}}else if(S=$.contains("li")){if(Y.range.setEndAt(j,CKEDITOR.POSITION_BEFORE_END),V=(j=S.getLast(q))&&k(j)?j:S,$=0,(ee=Y.next())&&ee.type==CKEDITOR.NODE_ELEMENT&&ee.getName()in o&&ee.equals(j)?($=1,ee=Y.next()):P.checkBoundaryOfElement(V,CKEDITOR.END)&&($=2),$&&ee){P=P.clone();P.moveToElementEditStart(ee);if(1==$&&(T.optimize(),!T.startContainer.equals(S))){for(S=T.startContainer;S.is(CKEDITOR.dtd.$inline);)te=S,S=S.getParent();te&&T.moveToPosition(te,CKEDITOR.POSITION_AFTER_END)}2==$&&(T.moveToPosition(T.endPath().block,CKEDITOR.POSITION_BEFORE_END),P.endPath().block&&P.moveToPosition(P.endPath().block,CKEDITOR.POSITION_AFTER_START));g(i,T,P);s.cancel()}}else Y.range.setEndAt(j,CKEDITOR.POSITION_BEFORE_END),(ee=Y.next())&&ee.type==CKEDITOR.NODE_ELEMENT&&ee.is(o)&&(ee=ee.getFirst(q),$.block&&P.checkStartOfBlock()&&P.checkEndOfBlock()?($.block.remove(),P.moveToElementEditStart(ee),P.select()):h(ee)?(P.moveToElementEditStart(ee),P.select()):(P=P.clone(),P.moveToElementEditStart(ee),g(i,T,P)),s.cancel());setTimeout((function(){i.selectionChange(1)}))}}})))}})}(),function(){function a(i,o,s){s=i.config.forceEnterMode||s;if("wysiwyg"==i.mode){o||(o=i.activeEnterMode);var S=i.elementPath();S&&!S.isContextFor("p")&&(o=CKEDITOR.ENTER_BR,s=1);i.fire("saveSnapshot");o==CKEDITOR.ENTER_BR?T(i,o,null,s):_(i,o,null,s);i.fire("saveSnapshot")}}function f(i){i=i.getSelection().getRanges(!0);for(var o=i.length-1;0<o;o--)i[o].deleteContents();return i[0]}function b(i){var o=i.startContainer.getAscendant((function(i){return i.type==CKEDITOR.NODE_ELEMENT&&"true"==i.getAttribute("contenteditable")}),!0);if(i.root.equals(o))return i;o=new CKEDITOR.dom.range(o);o.moveToRange(i);return o}CKEDITOR.plugins.add("enterkey",{init:function(i){i.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(i){a(i)}});i.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(i){a(i,i.activeShiftEnterMode,1)}});i.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var i=CKEDITOR.dom.walker.whitespaces(),o=CKEDITOR.dom.walker.bookmark(),s,T,_,S;CKEDITOR.plugins.enterkey={enterBlock:function(s,_,P,$){function y(i){var o;if(i===CKEDITOR.ENTER_BR||-1===CKEDITOR.tools.indexOf(["td","th"],ee.lastElement.getName())||1!==ee.lastElement.getChildCount())return!1;i=ee.lastElement.getChild(0).clone(!0);(o=i.getBogus())&&o.remove();return!i.getText().length}if(P=P||f(s)){P=b(P);var V=P.document,j=P.checkStartOfBlock(),Y=P.checkEndOfBlock(),ee=s.elementPath(P.startContainer),te=ee.block,ne=_==CKEDITOR.ENTER_DIV?"div":"p",ie;if(te&&j&&Y){j=te.getParent();if(j.is("li")&&1<j.getChildCount()){V=new CKEDITOR.dom.element("li");ie=s.createRange();V.insertAfter(j);te.remove();ie.setStart(V,0);s.getSelection().selectRanges([ie]);return}if(te.is("li")||te.getParent().is("li")){te.is("li")||(te=te.getParent(),j=te.getParent());ie=j.getParent();P=!te.hasPrevious();var oe=!te.hasNext();$=s.getSelection();var ne=$.createBookmarks(),ae=te.getDirection(1),Y=te.getAttribute("class"),re=te.getAttribute("style"),se=ie.getDirection(1)!=ae;s=s.enterMode!=CKEDITOR.ENTER_BR||se||re||Y;if(ie.is("li"))P||oe?(P&&oe&&j.remove(),te[oe?"insertAfter":"insertBefore"](ie)):te.breakParent(ie);else{if(s)ee.block.is("li")?(ie=V.createElement(_==CKEDITOR.ENTER_P?"p":"div"),se&&ie.setAttribute("dir",ae),re&&ie.setAttribute("style",re),Y&&ie.setAttribute("class",Y),te.moveChildren(ie)):ie=ee.block,P||oe?ie[P?"insertBefore":"insertAfter"](j):(te.breakParent(j),ie.insertAfter(j));else if(te.appendBogus(!0),P||oe)for(;V=te[P?"getFirst":"getLast"]();)V[P?"insertBefore":"insertAfter"](j);else for(te.breakParent(j);V=te.getLast();)V.insertAfter(j);te.remove()}$.selectBookmarks(ne);return}if(te&&te.getParent().is("blockquote")){te.breakParent(te.getParent());te.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||te.getPrevious().remove();te.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||te.getNext().remove();P.moveToElementEditStart(te);P.select();return}}else if(te&&te.is("pre")&&!Y){T(s,_,P,$);return}if(re=P.splitBlock(ne)){s=re.previousBlock;te=re.nextBlock;j=re.wasStartOfBlock;Y=re.wasEndOfBlock;te?(oe=te.getParent(),oe.is("li")&&(te.breakParent(oe),te.move(te.getNext(),1))):s&&(oe=s.getParent())&&oe.is("li")&&(s.breakParent(oe),oe=s.getNext(),P.moveToElementEditStart(oe),s.move(s.getPrevious()));if(j||Y)if(y(_))P.moveToElementEditStart(P.getTouchedStartNode());else{s?(s.is("li")||!S.test(s.getName())&&!s.is("pre"))&&(ie=s.clone()):te&&(ie=te.clone());ie?$&&!ie.is("li")&&ie.renameNode(ne):oe&&oe.is("li")?ie=oe:(ie=V.createElement(ne),s&&(ae=s.getDirection())&&ie.setAttribute("dir",ae));if(V=re.elementPath)for(_=0,$=V.elements.length;_<$;_++){ne=V.elements[_];if(ne.equals(V.block)||ne.equals(V.blockLimit))break;CKEDITOR.dtd.$removeEmpty[ne.getName()]&&(ne=ne.clone(),ie.moveChildren(ne),ie.append(ne))}ie.appendBogus();ie.getParent()||P.insertNode(ie);ie.is("li")&&ie.removeAttribute("value");!CKEDITOR.env.ie||!j||Y&&s.getChildCount()||(P.moveToElementEditStart(Y?s:ie),P.select());P.moveToElementEditStart(j&&!Y?te:ie)}else te.is("li")&&(ie=P.clone(),ie.selectNodeContents(te),ie=new CKEDITOR.dom.walker(ie),ie.evaluator=function(s){return!(o(s)||i(s)||s.type==CKEDITOR.NODE_ELEMENT&&s.getName()in CKEDITOR.dtd.$inline&&!(s.getName()in CKEDITOR.dtd.$empty))},(oe=ie.next())&&oe.type==CKEDITOR.NODE_ELEMENT&&oe.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?V.createElement("br"):V.createText(" ")).insertBefore(oe)),te&&P.moveToElementEditStart(te);P.select();P.scrollIntoView()}}},enterBr:function(i,o,s,T){if(s=s||f(i)){var P=s.document,$=s.checkEndOfBlock(),V=new CKEDITOR.dom.elementPath(i.getSelection().getStartElement()),j=V.block,Y=j&&V.block.getName();T||"li"!=Y?(!T&&$&&S.test(Y)?($=j.getDirection())?(P=P.createElement("div"),P.setAttribute("dir",$),P.insertAfter(j),s.setStart(P,0)):(P.createElement("br").insertAfter(j),CKEDITOR.env.gecko&&P.createText("").insertAfter(j),s.setStartAt(j.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(i="pre"==Y&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?P.createText("\r"):P.createElement("br"),s.deleteContents(),s.insertNode(i),CKEDITOR.env.needsBrFiller?(P.createText("\ufeff").insertAfter(i),$&&(j||V.blockLimit).appendBogus(),i.getNext().$.nodeValue="",s.setStartAt(i.getNext(),CKEDITOR.POSITION_AFTER_START)):s.setStartAt(i,CKEDITOR.POSITION_AFTER_END)),s.collapse(!0),s.select(),s.scrollIntoView()):_(i,o,s,T)}}};s=CKEDITOR.plugins.enterkey;T=s.enterBr;_=s.enterBlock;S=/^h[1-6]$/}(),function(){function a(i,o){var s={},T=[],_={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};i=i.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,(function(i,S){var P=o?"&"+S+";":_[S];s[P]=o?_[S]:"&"+S+";";T.push(P);return""}));i=i.replace(/,$/,"");if(!o&&i){i=i.split(",");var S=document.createElement("div"),P;S.innerHTML="&"+i.join(";&")+";";P=S.innerHTML;S=null;for(S=0;S<P.length;S++){var $=P.charAt(S);s[$]="&"+i[S]+";";T.push($)}}s.regex=T.join(o?"|":"");return s}CKEDITOR.plugins.add("entities",{afterInit:function(i){function b(i){return S[i]}function c(i){return"force"!=o.entities_processNumerical&&T[i]?T[i]:"&#"+i.charCodeAt(0)+";"}var o=i.config;if(i=(i=i.dataProcessor)&&i.htmlFilter){var s=[];!1!==o.basicEntities&&s.push("nbsp,gt,lt,amp");o.entities&&(s.length&&s.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),o.entities_latin&&s.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),o.entities_greek&&s.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),o.entities_additional&&s.push(o.entities_additional));var T=a(s.join(",")),_=T.regex?"["+T.regex+"]":"a^";delete T.regex;o.entities&&o.entities_processNumerical&&(_="[^ -~]|"+_);var _=new RegExp(_,"g"),S=a("nbsp,gt,lt,amp,shy",!0),P=new RegExp(S.regex,"g");i.addRules({text:function(i){return i.replace(P,b).replace(_,c)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(i,o,s,T){o=o||"80%";s=s||"70%";"string"==typeof o&&1<o.length&&"%"==o.substr(o.length-1,1)&&(o=parseInt(window.screen.width*parseInt(o,10)/100,10));"string"==typeof s&&1<s.length&&"%"==s.substr(s.length-1,1)&&(s=parseInt(window.screen.height*parseInt(s,10)/100,10));640>o&&(o=640);420>s&&(s=420);var _=parseInt((window.screen.height-s)/2,10),S=parseInt((window.screen.width-o)/2,10);T=(T||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+o+",height="+s+",top="+_+",left="+S;var P=window.open("",null,T,!0);if(!P)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(P.moveTo(S,_),P.resizeTo(o,s)),P.focus(),P.location.href=i}catch(o){window.open(i,null,T,!0)}return!0}}),"use strict",function(){function a(o){(this||i).editor=o;(this||i).loaders=[]}function f(o,s,T){var _=o.config.fileTools_defaultFileName;(this||i).editor=o;(this||i).lang=o.lang;"string"===typeof s?((this||i).data=s,(this||i).file=b((this||i).data),(this||i).loaded=(this||i).total=(this||i).file.size):((this||i).data=null,(this||i).file=s,(this||i).total=(this||i).file.size,(this||i).loaded=0);T?(this||i).fileName=T:(this||i).file.name?(this||i).fileName=(this||i).file.name:(o=(this||i).file.type.split("/"),_&&(o[0]=_),(this||i).fileName=o.join("."));(this||i).uploaded=0;(this||i).responseData=(this||i).uploadTotal=null;(this||i).status="created";(this||i).abort=function(){this.changeStatus("abort")}}function b(i){var s=i.match(o)[1];i=i.replace(o,"");i=atob(i);var T=[],_,S,P,$;for(_=0;_<i.length;_+=512){S=i.slice(_,_+512);P=Array(S.length);for($=0;$<S.length;$++)P[$]=S.charCodeAt($);S=new Uint8Array(P);T.push(S)}return new Blob(T,{type:s})}CKEDITOR.plugins.add("filetools",{beforeInit:function(i){i.uploadRepository=new a(i);i.on("fileUploadRequest",(function(i){var o=i.data.fileLoader;o.xhr.open("POST",o.uploadUrl,!0);i.data.requestData.upload={file:o.file,name:o.fileName}}),null,null,5);i.on("fileUploadRequest",(function(o){var s=o.data.fileLoader,T=new FormData;o=o.data.requestData;var _=i.config.fileTools_requestHeaders,S,P;for(P in o){var $=o[P];"object"===typeof $&&$.file?T.append(P,$.file,$.name):T.append(P,$)}T.append("ckCsrfToken",CKEDITOR.tools.getCsrfToken());if(_)for(S in _)s.xhr.setRequestHeader(S,_[S]);s.xhr.send(T)}),null,null,999);i.on("fileUploadResponse",(function(i){var o=i.data.fileLoader,s=o.xhr,T=i.data;try{var _=JSON.parse(s.responseText);_.error&&_.error.message&&(T.message=_.error.message);if(_.uploaded)for(var S in _)T[S]=_[S];else i.cancel()}catch(_){T.message=o.lang.filetools.responseError,CKEDITOR.warn("filetools-response-error",{responseText:s.responseText}),i.cancel()}}),null,null,999)}});a.prototype={create:function(o,s,T){T=T||f;var _=(this||i).loaders.length;o=new T((this||i).editor,o,s);o.id=_;(this||i).loaders[_]=o;this.fire("instanceCreated",o);return o},isFinished:function(){for(var o=0;o<(this||i).loaders.length;++o)if(!(this||i).loaders[o].isFinished())return!1;return!0}};f.prototype={loadAndUpload:function(o,s){var T=this||i;this.once("loaded",(function(i){i.cancel();T.once("update",(function(i){i.cancel()}),null,null,0);T.upload(o,s)}),null,null,0);this.load()},load:function(){var o=this||i,s=(this||i).reader=new FileReader;o.changeStatus("loading");(this||i).abort=function(){o.reader.abort()};s.onabort=function(){o.changeStatus("abort")};s.onerror=function(){o.message=o.lang.filetools.loadError;o.changeStatus("error")};s.onprogress=function(i){o.loaded=i.loaded;o.update()};s.onload=function(){o.loaded=o.total;o.data=s.result;o.changeStatus("loaded")};s.readAsDataURL((this||i).file)},upload:function(o,s){var T=s||{};o?((this||i).uploadUrl=o,(this||i).xhr=new XMLHttpRequest,this.attachRequestListeners(),(this||i).editor.fire("fileUploadRequest",{fileLoader:this||i,requestData:T})&&this.changeStatus("uploading")):((this||i).message=(this||i).lang.filetools.noUrlError,this.changeStatus("error"))},attachRequestListeners:function(){function a(){"error"!=o.status&&(o.message=o.lang.filetools.networkError,o.changeStatus("error"))}function b(){"abort"!=o.status&&o.changeStatus("abort")}var o=this||i,s=(this||i).xhr;o.abort=function(){s.abort();b()};s.onerror=a;s.onabort=b;s.upload?(s.upload.onprogress=function(i){i.lengthComputable&&(o.uploadTotal||(o.uploadTotal=i.total),o.uploaded=i.loaded,o.update())},s.upload.onerror=a,s.upload.onabort=b):(o.uploadTotal=o.total,o.update());s.onload=function(){o.update();if("abort"!=o.status)if(o.uploaded=o.uploadTotal,200>s.status||299<s.status)o.message=o.lang.filetools["httpError"+s.status],o.message||(o.message=o.lang.filetools.httpError.replace("%1",s.status)),o.changeStatus("error");else{for(var i={fileLoader:o},T=["message","fileName","url"],_=o.editor.fire("fileUploadResponse",i),S=0;S<T.length;S++){var P=T[S];"string"===typeof i[P]&&(o[P]=i[P])}o.responseData=i;delete o.responseData.fileLoader;!1===_?o.changeStatus("error"):o.changeStatus("uploaded")}}},changeStatus:function(o){(this||i).status=o;"error"!=o&&"abort"!=o&&"loaded"!=o&&"uploaded"!=o||((this||i).abort=function(){});this.fire(o);this.update()},update:function(){this.fire("update")},isFinished:function(){return!!(this||i).status.match(/^(?:loaded|uploaded|error|abort)$/)}};CKEDITOR.event.implementOn(a.prototype);CKEDITOR.event.implementOn(f.prototype);var o=/^data:(\S*?);base64,/;CKEDITOR.fileTools||(CKEDITOR.fileTools={});CKEDITOR.tools.extend(CKEDITOR.fileTools,{uploadRepository:a,fileLoader:f,getUploadUrl:function(i,o){var s=CKEDITOR.tools.capitalize;return o&&i[o+"UploadUrl"]?i[o+"UploadUrl"]:i.uploadUrl?i.uploadUrl:o&&i["filebrowser"+s(o,1)+"UploadUrl"]?i["filebrowser"+s(o,1)+"UploadUrl"]+"&responseType=json":i.filebrowserUploadUrl?i.filebrowserUploadUrl+"&responseType=json":null},isTypeSupported:function(i,o){return!!i.type.match(o)},isFileUploadSupported:"function"===typeof FileReader&&"function"===typeof(new FileReader).readAsDataURL&&"function"===typeof FormData&&"function"===typeof(new FormData).append&&"function"===typeof XMLHttpRequest&&"function"===typeof Blob})}(),function(){function a(i,o){var s=[];if(!o)return i;for(var T in o)s.push(T+"="+encodeURIComponent(o[T]));return i+(-1!=i.indexOf("?")?"&":"?")+s.join("&")}function f(i){return!i.match(/command=QuickUpload/)||i.match(/(\?|&)responseType=json/)?i:a(i,{responseType:"json"})}function b(i){i+="";return i.charAt(0).toUpperCase()+i.substr(1)}function c(){var o=this.getDialog(),s=o.getParentEditor();s._.filebrowserSe=this||i;var T=s.config["filebrowser"+b(o.getName())+"WindowWidth"]||s.config.filebrowserWindowWidth||"80%",o=s.config["filebrowser"+b(o.getName())+"WindowHeight"]||s.config.filebrowserWindowHeight||"70%",_=(this||i).filebrowser.params||{};_.CKEditor=s.name;_.CKEditorFuncNum=s._.filebrowserFn;_.langCode||(_.langCode=s.langCode);_=a((this||i).filebrowser.url,_);s.popup(_,T,o,s.config.filebrowserWindowFeatures||s.config.fileBrowserWindowFeatures)}function d(i){var o=new CKEDITOR.dom.element(i.$.form);o&&((i=o.$.elements.ckCsrfToken)?i=new CKEDITOR.dom.element(i):(i=new CKEDITOR.dom.element("input"),i.setAttributes({name:"ckCsrfToken",type:"hidden"}),o.append(i)),i.setAttribute("value",CKEDITOR.tools.getCsrfToken()))}function l(){var o=this.getDialog();o.getParentEditor()._.filebrowserSe=this||i;return!(!o.getContentElement((this||i)["for"][0],(this||i)["for"][1]).getInputElement().$.value||!o.getContentElement((this||i)["for"][0],(this||i)["for"][1]).getAction())}function k(i,o,s){var T=s.params||{};T.CKEditor=i.name;T.CKEditorFuncNum=i._.filebrowserFn;T.langCode||(T.langCode=i.langCode);o.action=a(s.url,T);o.filebrowser=s}function g(o,s,T,_){if(_&&_.length)for(var S,P=_.length;P--;)if(S=_[P],"hbox"!=S.type&&"vbox"!=S.type&&"fieldset"!=S.type||g(o,s,T,S.children),S.filebrowser)if("string"==typeof S.filebrowser&&(S.filebrowser={action:"fileButton"==S.type?"QuickUpload":"Browse",target:S.filebrowser}),"Browse"==S.filebrowser.action){var $=S.filebrowser.url;void 0===$&&($=o.config["filebrowser"+b(s)+"BrowseUrl"],void 0===$&&($=o.config.filebrowserBrowseUrl));$&&(S.onClick=c,S.filebrowser.url=$,S.hidden=!1)}else if("QuickUpload"==S.filebrowser.action&&S["for"]&&($=S.filebrowser.url,void 0===$&&($=o.config["filebrowser"+b(s)+"UploadUrl"],void 0===$&&($=o.config.filebrowserUploadUrl)),$)){var V=S.onClick;S.onClick=function(s){var T=s.sender,_=T.getDialog().getContentElement((this||i)["for"][0],(this||i)["for"][1]).getInputElement(),S=CKEDITOR.fileTools&&CKEDITOR.fileTools.isFileUploadSupported;if(V&&!1===V.call(T,s))return!1;if(l.call(T,s)){if("form"!==o.config.filebrowserUploadMethod&&S)return s=o.uploadRepository.create(_.$.files[0]),s.on("uploaded",(function(i){var o=i.sender.responseData;e.call(i.sender.editor,o.url,o.message)})),s.on("error",h.bind(this||i)),s.on("abort",h.bind(this||i)),s.loadAndUpload(f($)),"xhr";d(_);return!0}return!1};S.filebrowser.url=$;S.hidden=!1;k(o,T.getContents(S["for"][0]).get(S["for"][1]),S.filebrowser)}}function h(i){var o={};try{o=JSON.parse(i.sender.xhr.response)||{}}catch(i){}this.enable();alert(o.error?o.error.message:i.sender.message)}function m(i,o,s){if(-1!==s.indexOf(";")){s=s.split(";");for(var T=0;T<s.length;T++)if(m(i,o,s[T]))return!0;return!1}return(i=i.getContents(o).get(s).filebrowser)&&i.url}function e(o,s){var T=(this||i)._.filebrowserSe.getDialog(),_=(this||i)._.filebrowserSe["for"],S=(this||i)._.filebrowserSe.filebrowser.onSelect;_&&T.getContentElement(_[0],_[1]).reset();"function"==typeof s&&!1===s.call((this||i)._.filebrowserSe)||S&&!1===S.call((this||i)._.filebrowserSe,o,s)||("string"==typeof s&&s&&alert(s),o&&(_=(this||i)._.filebrowserSe,T=_.getDialog(),_=_.filebrowser.target||null))&&(_=_.split(":"),S=T.getContentElement(_[0],_[1]))&&(S.setValue(o),T.selectPage(_[0]))}CKEDITOR.plugins.add("filebrowser",{requires:"popup,filetools",init:function(o){o._.filebrowserFn=CKEDITOR.tools.addFunction(e,o);o.on("destroy",(function(){CKEDITOR.tools.removeFunction((this||i)._.filebrowserFn)}))}});CKEDITOR.on("dialogDefinition",(function(i){if(i.editor.plugins.filebrowser)for(var o=i.data.definition,s,T=0;T<o.contents.length;++T)(s=o.contents[T])&&(g(i.editor,i.data.name,o,s.elements),s.hidden&&s.filebrowser&&(s.hidden=!m(o,s.id,s.filebrowser)))}))}(),function(){function a(i){var T=i.config,_=i.fire("uiSpace",{space:"top",html:""}).html,S=function(){function e(i,o,T){$.setStyle(o,s(T));$.setStyle("position",i)}function g(i){var o=P.getDocumentPosition();switch(i){case"top":e("absolute","top",o.y-ee-ie);break;case"pin":e("fixed","top",ae);break;case"bottom":e("absolute","top",o.y+(j.height||j.bottom-j.top)+ie)}_=i}var _,P,V,j,Y,ee,te,ne=T.floatSpaceDockedOffsetX||0,ie=T.floatSpaceDockedOffsetY||0,oe=T.floatSpacePinnedOffsetX||0,ae=T.floatSpacePinnedOffsetY||0;return function(ae){if(P=i.editable()){var re=ae&&"focus"==ae.name;re&&$.show();i.fire("floatingSpaceLayout",{show:re});$.removeStyle("left");$.removeStyle("right");V=$.getClientRect();j=P.getClientRect();Y=o.getViewPaneSize();ee=V.height;te="pageXOffset"in o.$?o.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft;_?(ee+ie<=j.top?g("top"):ee+ie>Y.height-j.bottom?g("pin"):g("bottom"),ae=Y.width/2,ae=T.floatSpacePreferRight?"right":0<j.left&&j.right<Y.width&&j.width>V.width?"rtl"==T.contentsLangDirection?"right":"left":ae-j.left>j.right-ae?"left":"right",V.width>Y.width?(ae="left",re=0):(re="left"==ae?0<j.left?j.left:0:j.right<Y.width?Y.width-j.right:0,re+V.width>Y.width&&(ae="left"==ae?"right":"left",re=0)),$.setStyle(ae,s(("pin"==_?oe:ne)+re+("pin"==_?0:"left"==ae?te:-te)))):(_="pin",g("pin"),S(ae))}}}();if(_){var P=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(i.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(i.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),$=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(P.output({content:_,id:i.id,langDir:i.lang.dir,langCode:i.langCode,name:i.name,style:"display:none;z-index:"+(T.baseFloatZIndex-1),topId:i.ui.spaceId("top"),voiceLabel:i.title}))),V=CKEDITOR.tools.eventsBuffer(500,S),j=CKEDITOR.tools.eventsBuffer(100,S);$.unselectable();$.on("mousedown",(function(i){i=i.data;i.getTarget().hasAscendant("a",1)||i.preventDefault()}));i.on("focus",(function(s){S(s);i.on("change",V.input);o.on("scroll",j.input);o.on("resize",j.input)}));i.on("blur",(function(){$.hide();i.removeListener("change",V.input);o.removeListener("scroll",j.input);o.removeListener("resize",j.input)}));i.on("destroy",(function(){o.removeListener("scroll",j.input);o.removeListener("resize",j.input);$.clearCustomData();$.remove()}));i.focusManager.hasFocus&&$.show();i.focusManager.add($,1)}}var o=CKEDITOR.document.getWindow(),s=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(o){o.on("loaded",(function(){a(this||i)}),null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var o=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),s=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" draggable="false" ondragstart="return false;" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),T=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" draggable="false" ondragstart="return false;" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),_=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(i,o){return this.addBlock(i,new CKEDITOR.ui.listBlock(this.getHolderElement(),o))};CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(o,s){s=s||{};var T=s.attributes||(s.attributes={});((this||i).multiSelect=!!s.multiSelect)&&(T["aria-multiselectable"]=!0);!T.role&&(T.role="listbox");(this||i).base.apply(this||i,arguments);(this||i).element.setAttribute("role",T.role);T=(this||i).keys;T[40]="next";T[9]="next";T[38]="prev";T[CKEDITOR.SHIFT+9]="prev";T[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(T[13]="mouseup");(this||i)._.pendingHtml=[];(this||i)._.pendingList=[];(this||i)._.items={};(this||i)._.groups={}},_:{close:function(){if((this||i)._.started){var s=o.output({items:(this||i)._.pendingList.join("")});(this||i)._.pendingList=[];(this||i)._.pendingHtml.push(s);delete(this||i)._.started}},getClick:function(){(this||i)._.click||((this||i)._.click=CKEDITOR.tools.addFunction((function(o){var s=this.toggle(o);(this||i).onClick&&this.onClick(o,s)}),this||i));return(this||i)._.click}},proto:{add:function(o,T,S){var P=CKEDITOR.tools.getNextId();(this||i)._.started||((this||i)._.started=1,(this||i)._.size=(this||i)._.size||0);(this||i)._.items[o]=P;var $;$=CKEDITOR.tools.htmlEncodeAttr(o).replace(_,"\\'");o={id:P,val:$,onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:(this||i)._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(S||o),text:T||o};(this||i)._.pendingList.push(s.output(o))},startGroup:function(o){(this||i)._.close();var s=CKEDITOR.tools.getNextId();(this||i)._.groups[o]=s;(this||i)._.pendingHtml.push(T.output({id:s,label:o}))},commit:function(){(this||i)._.close();(this||i).element.appendHtml((this||i)._.pendingHtml.join(""));delete(this||i)._.size;(this||i)._.pendingHtml=[]},toggle:function(i){var o=this.isMarked(i);o?this.unmark(i):this.mark(i);return!o},hideGroup:function(o){var s=(o=(this||i).element.getDocument().getById((this||i)._.groups[o]))&&o.getNext();o&&(o.setStyle("display","none"),s&&"ul"==s.getName()&&s.setStyle("display","none"))},hideItem:function(o){(this||i).element.getDocument().getById((this||i)._.items[o]).setStyle("display","none")},showAll:function(){var o=(this||i)._.items,s=(this||i)._.groups,T=(this||i).element.getDocument(),_;for(_ in o)T.getById(o[_]).setStyle("display","");for(var S in s)o=T.getById(s[S]),_=o.getNext(),o.setStyle("display",""),_&&"ul"==_.getName()&&_.setStyle("display","")},mark:function(o){(this||i).multiSelect||this.unmarkAll();o=(this||i)._.items[o];var s=(this||i).element.getDocument().getById(o);s.addClass("cke_selected");(this||i).element.getDocument().getById(o+"_option").setAttribute("aria-selected",!0);(this||i).onMark&&this.onMark(s)},markFirstDisplayed:function(){var o=this||i;(this||i)._.markFirstDisplayed((function(){o.multiSelect||o.unmarkAll()}))},unmark:function(o){var s=(this||i).element.getDocument();o=(this||i)._.items[o];var T=s.getById(o);T.removeClass("cke_selected");s.getById(o+"_option").removeAttribute("aria-selected");(this||i).onUnmark&&this.onUnmark(T)},unmarkAll:function(){var o=(this||i)._.items,s=(this||i).element.getDocument(),T;for(T in o){var _=o[T];s.getById(_).removeClass("cke_selected");s.getById(_+"_option").removeAttribute("aria-selected")}(this||i).onUnmark&&this.onUnmark()},isMarked:function(o){return(this||i).element.getDocument().getById((this||i)._.items[o]).hasClass("cke_selected")},focus:function(o){(this||i)._.focusIndex=-1;var s=(this||i).element.getElementsByTag("a"),T,_=-1;if(o){for(T=(this||i).element.getDocument().getById((this||i)._.items[o]).getFirst();o=s.getItem(++_);)if(o.equals(T)){(this||i)._.focusIndex=_;break}}else(this||i).element.focus();T&&setTimeout((function(){T.focus()}),0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(i){i.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var o='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="listbox"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(o+=' onkeypress="return false;"');CKEDITOR.env.gecko&&(o+=' onblur="this.style.cssText = this.style.cssText;"');var o=o+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>",s=CKEDITOR.addTemplate("combo",o);CKEDITOR.UI_RICHCOMBO="richcombo";CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(o){CKEDITOR.tools.extend(this||i,o,{canGroup:!1,title:o.label,modes:{wysiwyg:1},editorFocus:1});o=(this||i).panel||{};delete(this||i).panel;(this||i).id=CKEDITOR.tools.getNextNumber();(this||i).document=o.parent&&o.parent.getDocument()||CKEDITOR.document;o.className="cke_combopanel";o.block={multiSelect:o.multiSelect,attributes:o.attributes};o.toolbarRelated=!0;(this||i)._={panelDefinition:o,items:{},listeners:[]}},proto:{renderHtml:function(i){var o=[];this.render(i,o);return o.join("")},render:function(o,T){function d(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var s=(this||i).modes[o.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;o.readOnly&&!(this||i).readOnly&&(s=CKEDITOR.TRISTATE_DISABLED);this.setState(s);this.setValue("");s!=CKEDITOR.TRISTATE_DISABLED&&(this||i).refresh&&this.refresh()}}var _=CKEDITOR.env,S="cke_"+(this||i).id,P=CKEDITOR.tools.addFunction((function(i){ee&&(o.unlockSelection(1),ee=0);V.execute(i)}),this||i),$=this||i,V={id:S,combo:this||i,focus:function(){CKEDITOR.document.getById(S).getChild(1).focus()},execute:function(i){var s=$._;if(s.state!=CKEDITOR.TRISTATE_DISABLED)if($.createPanel(o),s.on)s.panel.hide();else{$.commit();var T=$.getValue();T?s.list.mark(T):s.list.unmarkAll();s.panel.showBlock($.id,new CKEDITOR.dom.element(i),4)}},clickFn:P};(this||i)._.listeners.push(o.on("activeFilterChange",d,this||i));(this||i)._.listeners.push(o.on("mode",d,this||i));(this||i)._.listeners.push(o.on("selectionChange",d,this||i));!(this||i).readOnly&&(this||i)._.listeners.push(o.on("readOnly",d,this||i));var j=CKEDITOR.tools.addFunction((function(i,o){i=new CKEDITOR.dom.event(i);var s=i.getKeystroke();switch(s){case 13:case 32:case 40:CKEDITOR.tools.callFunction(P,o);break;default:V.onkey(V,s)}i.preventDefault()})),Y=CKEDITOR.tools.addFunction((function(){V.onfocus&&V.onfocus()})),ee=0;V.keyDownFn=j;_={id:S,name:(this||i).name||(this||i).command,label:(this||i).label,title:(this||i).title,cls:(this||i).className||"",titleJs:_.gecko&&!_.hc?"":((this||i).title||"").replace("'",""),keydownFn:j,focusFn:Y,clickFn:P};s.output(_,T);(this||i).onRender&&this.onRender();return V},createPanel:function(o){if(!(this||i)._.panel){var s=(this||i)._.panelDefinition,T=(this||i)._.panelDefinition.block,_=s.parent||CKEDITOR.document.getBody(),S="cke_combopanel__"+(this||i).name,P=new CKEDITOR.ui.floatPanel(o,_,s),s=P.addListBlock((this||i).id,T),$=this||i;P.onShow=function(){(this||i).element.addClass(S);$.setState(CKEDITOR.TRISTATE_ON);$._.on=1;$.editorFocus&&!o.focusManager.hasFocus&&o.focus();$.onOpen&&$.onOpen()};P.onHide=function(s){(this||i).element.removeClass(S);$.setState($.modes&&$.modes[o.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);$._.on=0;!s&&$.onClose&&$.onClose()};P.onEscape=function(){P.hide(1)};s.onClick=function(i,o){$.onClick&&$.onClick.call($,i,o);P.hide()};(this||i)._.panel=P;(this||i)._.list=s;P.getBlock((this||i).id).onHide=function(){$._.on=0;$.setState(CKEDITOR.TRISTATE_OFF)};(this||i).init&&this.init()}},setValue:function(o,s){(this||i)._.value=o;var T=(this||i).document.getById("cke_"+(this||i).id+"_text");T&&(o||s?T.removeClass("cke_combo_inlinelabel"):(s=(this||i).label,T.addClass("cke_combo_inlinelabel")),T.setText("undefined"!=typeof s?s:o))},getValue:function(){return(this||i)._.value||""},unmarkAll:function(){(this||i)._.list.unmarkAll()},mark:function(o){(this||i)._.list.mark(o)},hideItem:function(o){(this||i)._.list.hideItem(o)},hideGroup:function(o){(this||i)._.list.hideGroup(o)},showAll:function(){(this||i)._.list.showAll()},add:function(o,s,T){(this||i)._.items[o]=T||o;(this||i)._.list.add(o,s,T)},startGroup:function(o){(this||i)._.list.startGroup(o)},commit:function(){(this||i)._.committed||((this||i)._.list.commit(),(this||i)._.committed=1,CKEDITOR.ui.fire("ready",this||i));(this||i)._.committed=1},setState:function(o){if((this||i)._.state!=o){var s=(this||i).document.getById("cke_"+(this||i).id);s.setState(o,"cke_combo");o==CKEDITOR.TRISTATE_DISABLED?s.setAttribute("aria-disabled",!0):s.removeAttribute("aria-disabled");(this||i)._.state=o}},getState:function(){return(this||i)._.state},enable:function(){(this||i)._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState((this||i)._.lastState)},disable:function(){(this||i)._.state!=CKEDITOR.TRISTATE_DISABLED&&((this||i)._.lastState=(this||i)._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))},destroy:function(){CKEDITOR.tools.array.forEach((this||i)._.listeners,(function(i){i.removeListener()}));(this||i)._.listeners=[]}},statics:{handler:{create:function(i){return new CKEDITOR.ui.richCombo(i)}}}});CKEDITOR.ui.prototype.addRichCombo=function(i,o){this.add(i,CKEDITOR.UI_RICHCOMBO,o)}}(),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(o){if(!o.blockless){for(var s=o.config,T=o.lang.format,_=s.format_tags.split(";"),S={},P=0,$=[],V=0;V<_.length;V++){var j=_[V],Y=new CKEDITOR.style(s["format_"+j]);o.filter.customConfig&&!o.filter.check(Y)||(P++,S[j]=Y,S[j]._.enterMode=o.config.enterMode,$.push(Y))}0!==P&&o.ui.addRichCombo("Format",{label:T.label,title:T.panelTitle,toolbar:"styles,20",allowedContent:$,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(s.contentsCss),multiSelect:!1,attributes:{"aria-label":T.panelTitle}},init:function(){this.startGroup(T.panelTitle);for(var i in S){var o=T["tag_"+i];this.add(i,S[i].buildPreview(o),o)}},onClick:function(i){o.focus();o.fire("saveSnapshot");i=S[i];var s=o.elementPath();i.checkActive(s,o)||o.applyStyle(i);setTimeout((function(){o.fire("saveSnapshot")}),0)},onRender:function(){o.on("selectionChange",(function(i){var s=this.getValue();i=i.data.path;this.refresh();for(var T in S)if(S[T].checkActive(i,o)){T!=s&&this.setValue(T,o.lang.format["tag_"+T]);return}this.setValue("")}),this||i)},onOpen:function(){this.showAll();for(var i in S)o.activeFilter.check(S[i])||this.hideItem(i)},refresh:function(){var i=o.elementPath();if(i){if(i.isContextFor("p"))for(var s in S)if(o.activeFilter.check(S[s]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var i={canUndo:!1,exec:function(i){var o=i.document.createElement("hr");i.insertElement(o)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(o){o.blockless||(o.addCommand("horizontalrule",i),o.ui.addButton&&o.ui.addButton("HorizontalRule",{label:o.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(i){var o=new CKEDITOR.htmlWriter;o.forceSimpleAmpersand=i.config.forceSimpleAmpersand;o.indentationChars=i.config.dataIndentationChars||"\t";i.dataProcessor.writer=o}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base();(this||i).indentationChars="\t";(this||i).selfClosingEnd=" />";(this||i).lineBreakChars="\n";(this||i).sortAttributes=1;(this||i)._.indent=0;(this||i)._.indentation="";(this||i)._.inPre=0;(this||i)._.rules={};var o=CKEDITOR.dtd,s;for(s in CKEDITOR.tools.extend({},o.$nonBodyContent,o.$block,o.$listItem,o.$tableContent))this.setRules(s,{indent:!o[s]["#"],breakBeforeOpen:1,breakBeforeClose:!o[s]["#"],breakAfterClose:1,needsSpace:s in o.$block&&!(s in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1});this.setRules("title",{indent:0,breakAfterOpen:0});this.setRules("style",{indent:0,breakBeforeClose:1});this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(o){var s=(this||i)._.rules[o];(this||i)._.afterCloser&&s&&s.needsSpace&&(this||i)._.needsSpace&&(this||i)._.output.push("\n");(this||i)._.indent?this.indentation():s&&s.breakBeforeOpen&&(this.lineBreak(),this.indentation());(this||i)._.output.push("<",o);(this||i)._.afterCloser=0},openTagClose:function(o,s){var T=(this||i)._.rules[o];s?((this||i)._.output.push((this||i).selfClosingEnd),T&&T.breakAfterClose&&((this||i)._.needsSpace=T.needsSpace)):((this||i)._.output.push(">"),T&&T.indent&&((this||i)._.indentation+=(this||i).indentationChars));T&&T.breakAfterOpen&&this.lineBreak();"pre"==o&&((this||i)._.inPre=1)},attribute:function(o,s){"string"==typeof s&&(s=CKEDITOR.tools.htmlEncodeAttr(s),(this||i).forceSimpleAmpersand&&(s=s.replace(/&amp;/g,"&")));(this||i)._.output.push(" ",o,'="',s,'"')},closeTag:function(o){var s=(this||i)._.rules[o];s&&s.indent&&((this||i)._.indentation=(this||i)._.indentation.substr((this||i).indentationChars.length));(this||i)._.indent?this.indentation():s&&s.breakBeforeClose&&(this.lineBreak(),this.indentation());(this||i)._.output.push("</",o,">");"pre"==o&&((this||i)._.inPre=0);s&&s.breakAfterClose&&(this.lineBreak(),(this||i)._.needsSpace=s.needsSpace);(this||i)._.afterCloser=1},text:function(o){(this||i)._.indent&&(this.indentation(),!(this||i)._.inPre&&(o=CKEDITOR.tools.ltrim(o)));(this||i)._.output.push(o)},comment:function(o){(this||i)._.indent&&this.indentation();(this||i)._.output.push("\x3c!--",o,"--\x3e")},lineBreak:function(){!(this||i)._.inPre&&0<(this||i)._.output.length&&(this||i)._.output.push((this||i).lineBreakChars);(this||i)._.indent=1},indentation:function(){!(this||i)._.inPre&&(this||i)._.indentation&&(this||i)._.output.push((this||i)._.indentation);(this||i)._.indent=0},reset:function(){(this||i)._.output=[];(this||i)._.indent=0;(this||i)._.indentation="";(this||i)._.afterCloser=0;(this||i)._.inPre=0;(this||i)._.needsSpace=0},setRules:function(o,s){var T=(this||i)._.rules[o];T?CKEDITOR.tools.extend(T,s,!0):(this||i)._.rules[o]=s}}}),function(){function a(i,o){o||(o=i.getSelection().getSelectedElement());if(o&&o.is("img")&&!o.data("cke-realelement")&&!o.isReadOnly())return o}function f(i){var o=i.getStyle("float");"inherit"!=o&&"none"!=o||(o=0);o||(o=i.getAttribute("align"));return o}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(o){if(!o.plugins.detectConflict("image",["easyimage","image2"])){CKEDITOR.dialog.add("image",(this||i).path+"dialogs/image.js");var s="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(o,"image","advanced")&&(s="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)");o.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:s,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]}));o.ui.addButton&&o.ui.addButton("Image",{label:o.lang.common.image,command:"image",toolbar:"insert,10"});o.on("doubleclick",(function(i){var o=i.data.element;!o.is("img")||o.data("cke-realelement")||o.isReadOnly()||(i.data.dialog="image")}));o.addMenuItems&&o.addMenuItems({image:{label:o.lang.image.menu,command:"image",group:"image"}});o.contextMenu&&o.contextMenu.addListener((function(i){if(a(o,i))return{image:CKEDITOR.TRISTATE_OFF}}))}},afterInit:function(i){function c(o){var s=i.getCommand("justify"+o);if(s){"left"!=o&&"right"!=o||s.on("exec",(function(s){var T=a(i),_;T&&(_=f(T),_==o?(T.removeStyle("float"),o==f(T)&&T.removeAttribute("align")):T.setStyle("float",o),s.cancel())}));s.on("refresh",(function(s){var T=a(i);T&&(T=f(T),this.setState(T==o?CKEDITOR.TRISTATE_ON:"right"==o||"left"==o?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),s.cancel())}))}}i.plugins.image2||(c("left"),c("right"),c("center"),c("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function a(i,o){var s=T.exec(i),_=T.exec(o);if(s){if(!s[2]&&"px"==_[2])return _[1];if("px"==s[2]&&!_[2])return _[1]+"px"}return o}var o=CKEDITOR.htmlParser.cssStyle,s=CKEDITOR.tools.cssLength,T=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,_={elements:{$:function(i){var s=i.attributes;if((s=(s=(s=s&&s["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(s)))&&s.children[0])&&i.attributes["data-cke-resizable"]){var T=new o(i).rules;i=s.attributes;var _=T.width,T=T.height;_&&(i.width=a(i.width,_));T&&(i.height=a(i.height,T))}return s}}};CKEDITOR.plugins.add("fakeobjects",{init:function(i){i.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(i){(i=(i=i.dataProcessor)&&i.htmlFilter)&&i.addRules(_,{applyToAll:!0})}});CKEDITOR.editor.prototype.createFakeElement=function(T,_,S,P){var $=(this||i).lang.fakeobjects,$=$[S]||$.unknown;_={class:_,"data-cke-realelement":encodeURIComponent(T.getOuterHtml()),"data-cke-real-node-type":T.type,alt:$,title:$,align:T.getAttribute("align")||""};CKEDITOR.env.hc||(_.src=CKEDITOR.tools.transparentImageData);S&&(_["data-cke-real-element-type"]=S);P&&(_["data-cke-resizable"]=P,S=new o,P=T.getAttribute("width"),T=T.getAttribute("height"),P&&(S.rules.width=s(P)),T&&(S.rules.height=s(T)),S.populate(_));return(this||i).document.createElement("img",{attributes:_})};CKEDITOR.editor.prototype.createFakeParserElement=function(T,_,S,P){var $=(this||i).lang.fakeobjects,$=$[S]||$.unknown,V;V=new CKEDITOR.htmlParser.basicWriter;T.writeHtml(V);V=V.getHtml();_={class:_,"data-cke-realelement":encodeURIComponent(V),"data-cke-real-node-type":T.type,alt:$,title:$,align:T.attributes.align||""};CKEDITOR.env.hc||(_.src=CKEDITOR.tools.transparentImageData);S&&(_["data-cke-real-element-type"]=S);P&&(_["data-cke-resizable"]=P,P=T.attributes,T=new o,S=P.width,P=P.height,void 0!==S&&(T.rules.width=s(S)),void 0!==P&&(T.rules.height=s(P)),T.populate(_));return new CKEDITOR.htmlParser.element("img",_)};CKEDITOR.editor.prototype.restoreRealElement=function(o){if(o.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var s=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(o.data("cke-realelement")),(this||i).document);if(o.data("cke-resizable")){var T=o.getStyle("width");o=o.getStyle("height");T&&s.setAttribute("width",a(s.getAttribute("width"),T));o&&s.setAttribute("height",a(s.getAttribute("height"),o))}return s}}(),"use strict",function(){function a(i){return i.replace(/'/g,"\\$&")}function f(i){for(var o,s=i.length,T=[],_=0;_<s;_++)o=i.charCodeAt(_),T.push(o);return"String.fromCharCode("+T.join(",")+")"}function b(i,o){var s=i.plugins.link,T=s.compiledProtectionFunction.params,_,S;S=[s.compiledProtectionFunction.name,"("];for(var P=0;P<T.length;P++)s=T[P].toLowerCase(),_=o[s],0<P&&S.push(","),S.push("'",_?a(encodeURIComponent(o[s])):"","'");S.push(")");return S.join("")}function c(i){i=i.config.emailProtection||"";var o;i&&"encode"!=i&&(o={},i.replace(/^([^(]+)\(([^)]+)\)$/,(function(i,s,T){o.name=s;o.params=[];T.replace(/[^,\s]+/g,(function(i){o.params.push(i)}))})));return o}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function a(i){return s.replace(/%1/g,"rtl"==i?"right":"left").replace(/%2/g,"cke_contents_"+i)}var o="background:url("+CKEDITOR.getUrl((this||i).path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",s=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+o+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+o+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(a("ltr")+a("rtl"))},init:function(o){var s="a[!href]";CKEDITOR.dialog.isTabEnabled(o,"link","advanced")&&(s=s.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type,download]{*}(*)"));CKEDITOR.dialog.isTabEnabled(o,"link","target")&&(s=s.replace("]",",target,onclick]"));o.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:s,requiredContent:"a[href]"}));o.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"}));o.addCommand("unlink",new CKEDITOR.unlinkCommand);o.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand);o.setKeystroke(CKEDITOR.CTRL+76,"link");o.setKeystroke(CKEDITOR.CTRL+75,"link");o.ui.addButton&&(o.ui.addButton("Link",{label:o.lang.link.toolbar,command:"link",toolbar:"links,10"}),o.ui.addButton("Unlink",{label:o.lang.link.unlink,command:"unlink",toolbar:"links,20"}),o.ui.addButton("Anchor",{label:o.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"}));CKEDITOR.dialog.add("link",(this||i).path+"dialogs/link.js");CKEDITOR.dialog.add("anchor",(this||i).path+"dialogs/anchor.js");o.on("doubleclick",(function(i){var s=i.data.element.getAscendant({a:1,img:1},!0);s&&!s.isReadOnly()&&(s.is("a")?(i.data.dialog=!s.getAttribute("name")||s.getAttribute("href")&&s.getChildCount()?"link":"anchor",i.data.link=s):CKEDITOR.plugins.link.tryRestoreFakeAnchor(o,s)&&(i.data.dialog="anchor"))}),null,null,0);o.on("doubleclick",(function(i){i.data.dialog in{link:1,anchor:1}&&i.data.link&&o.getSelection().selectElement(i.data.link)}),null,null,20);o.addMenuItems&&o.addMenuItems({anchor:{label:o.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:o.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:o.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:o.lang.link.unlink,command:"unlink",group:"link",order:5}});o.contextMenu&&o.contextMenu.addListener((function(i){if(!i||i.isReadOnly())return null;i=CKEDITOR.plugins.link.tryRestoreFakeAnchor(o,i);if(!i&&!(i=CKEDITOR.plugins.link.getSelectedLink(o)))return null;var s={};i.getAttribute("href")&&i.getChildCount()&&(s={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF});i&&i.hasAttribute("name")&&(s.anchor=s.removeAnchor=CKEDITOR.TRISTATE_OFF);return s}));(this||i).compiledProtectionFunction=c(o)},afterInit:function(i){i.dataProcessor.dataFilter.addRules({elements:{a:function(o){return o.attributes.name?o.children.length?null:i.createFakeParserElement(o,"cke_anchor","anchor"):null}}});var o=i._.elementsPath&&i._.elementsPath.filters;o&&o.push((function(o,s){if("a"==s&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(i,o)||o.getAttribute("name")&&(!o.getAttribute("href")||!o.getChildCount())))return"anchor"}))}});var o=/^javascript:/,s=/^mailto:([^?]+)(?:\?(.+))?$/,T=/subject=([^;?:@&=$,\/]*)/i,_=/body=([^;?:@&=$,\/]*)/i,S=/^#(.*)$/,P=/^((?:http|https|ftp|news):\/\/)?(.*)$/,$=/^(_(?:self|top|parent|blank))$/,V=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,j=/^javascript:([^(]+)\(([^)]+)\)$/,Y=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,ee=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,te=/^tel:(.*)$/,ne={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType",class:"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(i,o){var s=i.getSelection(),T=s.getSelectedElement(),_=s.getRanges(),S=[],P;if(!o&&T&&T.is("a"))return T;for(T=0;T<_.length;T++)if(P=s.getRanges()[T],P.shrink(CKEDITOR.SHRINK_ELEMENT,!0,{skipBogus:!0}),(P=i.elementPath(P.getCommonAncestor()).contains("a",1))&&o)S.push(P);else if(P)return P;return o?S:null},getEditorAnchors:function(i){for(var o=i.editable(),s=o.isInline()&&!i.plugins.divarea?i.document:o,o=s.getElementsByTag("a"),s=s.getElementsByTag("img"),T=[],_=0,S;S=o.getItem(_++);)(S.data("cke-saved-name")||S.hasAttribute("name"))&&T.push({name:S.data("cke-saved-name")||S.getAttribute("name"),id:S.getAttribute("id")});for(_=0;S=s.getItem(_++);)(S=this.tryRestoreFakeAnchor(i,S))&&T.push({name:S.getAttribute("name"),id:S.getAttribute("id")});return T},fakeAnchor:!0,tryRestoreFakeAnchor:function(i,o){if(o&&o.data("cke-real-element-type")&&"anchor"==o.data("cke-real-element-type")){var s=i.restoreRealElement(o);if(s.data("cke-saved-name"))return s}},parseLinkAttributes:function(i,ie){var oe=ie&&(ie.data("cke-saved-href")||ie.getAttribute("href"))||"",ae=i.plugins.link.compiledProtectionFunction,re=i.config.emailProtection,se,le={};oe.match(o)&&("encode"==re?oe=oe.replace(V,(function(i,o,s){s=s||"";return"mailto:"+String.fromCharCode.apply(String,o.split(","))+s.replace(/\\'/g,"'")})):re&&oe.replace(j,(function(i,o,s){if(o==ae.name){le.type="email";i=le.email={};o=/(^')|('$)/g;s=s.match(/[^,\s]+/g);for(var T=s.length,_,S,P=0;P<T;P++)_=decodeURIComponent,S=s[P].replace(o,"").replace(/\\'/g,"'"),S=_(S),_=ae.params[P].toLowerCase(),i[_]=S;i.address=[i.name,i.domain].join("@")}})));if(!le.type)if(re=oe.match(S))le.type="anchor",le.anchor={},le.anchor.name=le.anchor.id=re[1];else if(re=oe.match(te))le.type="tel",le.tel=re[1];else if(re=oe.match(s)){se=oe.match(T);oe=oe.match(_);le.type="email";var ce=le.email={};ce.address=re[1];se&&(ce.subject=decodeURIComponent(se[1]));oe&&(ce.body=decodeURIComponent(oe[1]))}else oe&&(se=oe.match(P))&&(le.type="url",le.url={},le.url.protocol=se[1],le.url.url=se[2]);if(ie){if(oe=ie.getAttribute("target"))le.target={type:oe.match($)?oe:"frame",name:oe};else if(oe=(oe=ie.data("cke-pa-onclick")||ie.getAttribute("onclick"))&&oe.match(Y))for(le.target={type:"popup",name:oe[1]};re=ee.exec(oe[2]);)"yes"!=re[2]&&"1"!=re[2]||re[1]in{height:1,width:1,top:1,left:1}?isFinite(re[2])&&(le.target[re[1]]=re[2]):le.target[re[1]]=!0;null!==ie.getAttribute("download")&&(le.download=!0);var oe={},de;for(de in ne)(re=ie.getAttribute(de))&&(oe[ne[de]]=re);(de=ie.data("cke-saved-name")||oe.advName)&&(oe.advName=de);CKEDITOR.tools.isEmpty(oe)||(le.advanced=oe)}return le},getLinkAttributes:function(i,o){var s=i.config.emailProtection||"",T={};switch(o.type){case"url":var s=o.url&&void 0!==o.url.protocol?o.url.protocol:"http://",_=o.url&&CKEDITOR.tools.trim(o.url.url)||"";T["data-cke-saved-href"]=0===_.indexOf("/")?_:s+_;break;case"anchor":s=o.anchor&&o.anchor.id;T["data-cke-saved-href"]="#"+(o.anchor&&o.anchor.name||s||"");break;case"email":var S=o.email,_=S.address;switch(s){case"":case"encode":var l=encodeURIComponent(S.subject||""),P=encodeURIComponent(S.body||""),S=[];l&&S.push("subject="+l);P&&S.push("body="+P);S=S.length?"?"+S.join("&"):"";"encode"==s?(s=["javascript:void(location.href='mailto:'+",f(_)],S&&s.push("+'",a(S),"'"),s.push(")")):s=["mailto:",_,S];break;default:s=_.split("@",2),S.name=s[0],S.domain=s[1],s=["javascript:",b(i,S)]}T["data-cke-saved-href"]=s.join("");break;case"tel":T["data-cke-saved-href"]="tel:"+o.tel}if(o.target)if("popup"==o.target.type){for(var s=["window.open(this.href, '",o.target.name||"","', '"],$="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),_=$.length,l=function(i){o.target[i]&&$.push(i+"="+o.target[i])},S=0;S<_;S++)$[S]+=o.target[$[S]]?"=yes":"=no";l("width");l("left");l("height");l("top");s.push($.join(","),"'); return false;");T["data-cke-pa-onclick"]=s.join("")}else"notSet"!=o.target.type&&o.target.name&&(T.target=o.target.name);o.download&&(T.download="");if(o.advanced){for(var V in ne)(s=o.advanced[ne[V]])&&(T[V]=s);T.name&&(T["data-cke-saved-name"]=T.name)}T["data-cke-saved-href"]&&(T.href=T["data-cke-saved-href"]);V={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1,download:1};o.advanced&&CKEDITOR.tools.extend(V,ne);for(var j in T)delete V[j];return{set:T,removed:CKEDITOR.tools.object.keys(V)}},showDisplayTextForElement:function(i,o){var s={img:1,table:1,tbody:1,thead:1,tfoot:1,input:1,select:1,textarea:1},T=o.getSelection();return!(o.widgets&&o.widgets.focused||T&&1<T.getRanges().length)&&(!i||!i.getName||!i.is(s))}};CKEDITOR.unlinkCommand=function(){};CKEDITOR.unlinkCommand.prototype={exec:function(i){if(CKEDITOR.env.ie){var o=i.getSelection().getRanges()[0],s=o.getPreviousEditableNode()&&o.getPreviousEditableNode().getAscendant("a",!0)||o.getNextEditableNode()&&o.getNextEditableNode().getAscendant("a",!0),T;o.collapsed&&s&&(T=o.createBookmark(),o.selectNodeContents(s),o.select())}s=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});i.removeStyle(s);T&&(o.moveToBookmark(T),o.select())},refresh:function(i,o){var s=o.lastElement&&o.lastElement.getAscendant("a",!0);s&&"a"==s.getName()&&s.getAttribute("href")&&s.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]",editorFocus:1};CKEDITOR.removeAnchorCommand=function(){};CKEDITOR.removeAnchorCommand.prototype={exec:function(i){var o=i.getSelection(),s=o.createBookmarks(),T;o&&(T=o.getSelectedElement())&&(T.getChildCount()?T.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(i,T))?T.remove(1):(T=CKEDITOR.plugins.link.getSelectedLink(i))&&(T.hasAttribute("href")?(T.removeAttributes({name:1,"data-cke-saved-name":1}),T.removeClass("cke_anchor")):T.remove(1));o.selectBookmarks(s)},requiredContent:"a[name]"};CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})}(),"use strict",function(){function a(i,o,s){return n(o)&&n(s)&&s.equals(o.getNext((function(i){return!(ge(i)||me(i)||q(i))})))}function f(o){(this||i).upper=o[0];(this||i).lower=o[1];(this||i).set.apply(this||i,o.slice(2))}function b(i){var o=i.element;if(o&&n(o)&&(o=o.getAscendant(i.triggers,!0))&&i.editable.contains(o)){var s=k(o);if("true"==s.getAttribute("contenteditable"))return o;if(s.is(i.triggers))return s}return null}function c(i,o,s){t(i,o);t(i,s);i=o.size.bottom;s=s.size.top;return i&&s?0|(i+s)/2:i||s}function d(i,o,s){return o=o[s?"getPrevious":"getNext"]((function(o){return o&&o.type==CKEDITOR.NODE_TEXT&&!ge(o)||n(o)&&!q(o)&&!e(i,o)}))}function l(i,o,s){return i>o&&i<s}function k(i,o){if(i.data("cke-editable"))return null;for(o||(i=i.getParent());i&&!i.data("cke-editable");){if(i.hasAttribute("contenteditable"))return i;i=i.getParent()}return null}function g(S){var P=S.doc,$=T('<span contenteditable="false" data-cke-magic-line="1" style="'+de+"position:absolute;border-top:1px dashed "+S.boxColor+'"></span>',P),j=CKEDITOR.getUrl((this||i).path+"images/"+(_.hidpi?"hidpi/":"")+"icon"+(S.rtl?"-rtl":"")+".png");o($,{attach:function(){(this||i).wrap.getParent()||(this||i).wrap.appendTo(S.editable,!0);return this||i},lineChildren:[o(T('<span title="'+S.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',P),{base:de+"height:17px;width:17px;"+(S.rtl?"left":"right")+":17px;background:url("+j+") center no-repeat "+S.boxColor+";cursor:pointer;"+(_.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(_.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),o(T(he,P),{base:ue+"left:0px;border-left-color:"+S.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),o(T(he,P),{base:ue+"right:0px;border-right-color:"+S.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){(this||i).wrap.getParent()&&(this||i).wrap.remove();return this||i},mouseNear:function(){t(S,this||i);var o=S.holdDistance,s=(this||i).size;return!!(s&&l(S.mouse.y,s.top-o,s.bottom+o)&&l(S.mouse.x,s.left-o,s.right+o))},place:function(){var o=S.view,s=S.editable,T=S.trigger,_=T.upper,P=T.lower,$=_||P,V=$.getParent(),j={};(this||i).trigger=T;_&&t(S,_,!0);P&&t(S,P,!0);t(S,V,!0);S.inInlineMode&&x(S,!0);V.equals(s)?(j.left=o.scroll.x,j.right=-o.scroll.x,j.width=""):(j.left=$.size.left-$.size.margin.left+o.scroll.x-(S.inInlineMode?o.editable.left+o.editable.border.left:0),j.width=$.size.outerWidth+$.size.margin.left+$.size.margin.right+o.scroll.x,j.right="");_&&P?j.top=_.size.margin.bottom===P.size.margin.top?0|_.size.bottom+_.size.margin.bottom/2:_.size.margin.bottom<P.size.margin.top?_.size.bottom+_.size.margin.bottom:_.size.bottom+_.size.margin.bottom-P.size.margin.top:_?P||(j.top=_.size.bottom+_.size.margin.bottom):j.top=P.size.top-P.size.margin.top;T.is(te)||l(j.top,o.scroll.y-15,o.scroll.y+5)?(j.top=S.inInlineMode?0:o.scroll.y,this.look(te)):T.is(ne)||l(j.top,o.pane.bottom-5,o.pane.bottom+15)?(j.top=S.inInlineMode?o.editable.height+o.editable.padding.top+o.editable.padding.bottom:o.pane.bottom-1,this.look(ne)):(S.inInlineMode&&(j.top-=o.editable.top+o.editable.border.top),this.look(ie));S.inInlineMode&&(j.top--,j.top+=o.editable.scroll.top,j.left+=o.editable.scroll.left);for(var Y in j)j[Y]=CKEDITOR.tools.cssLength(j[Y]);this.setStyles(j)},look:function(o){if((this||i).oldLook!=o){for(var s=(this||i).lineChildren.length,T;s--;)(T=(this||i).lineChildren[s]).setAttribute("style",T.base+T.looks[0|o/2]);(this||i).oldLook=o}},wrap:new s("span",S.doc)});for(P=$.lineChildren.length;P--;)$.lineChildren[P].appendTo($);$.look(ie);$.appendTo($.wrap);$.unselectable();$.lineChildren[0].on("mouseup",(function(i){$.detach();h(S,(function(i){var o=S.line.trigger;i[o.is(V)?"insertBefore":"insertAfter"](o.is(V)?o.lower:o.upper)}),!0);S.editor.focus();_.ie||S.enterMode==CKEDITOR.ENTER_BR||S.hotNode.scrollIntoView();i.data.preventDefault(!0)}));$.on("mousedown",(function(i){i.data.preventDefault(!0)}));S.line=$}function h(i,o,T){var S=new CKEDITOR.dom.range(i.doc),P=i.editor,V;_.ie&&i.enterMode==CKEDITOR.ENTER_BR?V=i.doc.createText(oe):(V=(V=k(i.element,!0))&&V.data("cke-enter-mode")||i.enterMode,V=new s($[V],i.doc),V.is("br")||i.doc.createText(oe).appendTo(V));T&&P.fire("saveSnapshot");o(V);S.moveToPosition(V,CKEDITOR.POSITION_AFTER_START);P.getSelection().selectRanges([S]);i.hotNode=V;T&&P.fire("saveSnapshot")}function m(i,o){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function e(s){var T=_.ie&&9>_.version?" ":oe,S=i.hotNode&&i.hotNode.getText()==T&&i.element.equals(i.hotNode)&&i.lastCmdDirection===!!o;h(i,(function(T){S&&i.hotNode&&i.hotNode.remove();T[o?"insertAfter":"insertBefore"](s);T.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!o});i.lastCmdDirection=!!o}));_.ie||i.enterMode==CKEDITOR.ENTER_BR||i.hotNode.scrollIntoView();i.line.detach()}return function(s){s=s.getSelection().getStartElement();var T;s=s.getAscendant(le,1);if(!p(i,s)&&s&&!s.equals(i.editable)&&!s.contains(i.editable)){(T=k(s))&&"false"==T.getAttribute("contenteditable")&&(s=T);i.element=s;T=d(i,s,!o);var _;n(T)&&T.is(i.triggers)&&T.is(se)&&(!d(i,T,!o)||(_=d(i,T,!o))&&n(_)&&_.is(i.triggers))?e(T):(_=b(i,s),n(_)&&(d(i,_,!o)?(s=d(i,_,!o))&&n(s)&&s.is(i.triggers)&&e(_):e(_)))}}}()}}function e(i,o){if(!o||o.type!=CKEDITOR.NODE_ELEMENT||!o.$)return!1;var s=i.line;return s.wrap.equals(o)||s.wrap.contains(o)}function n(i){return i&&i.type==CKEDITOR.NODE_ELEMENT&&i.$}function q(i){if(!n(i))return!1;var o;(o=y(i))||(n(i)?(o={left:1,right:1,center:1},o=!(!o[i.getComputedStyle("float")]&&!o[i.getAttribute("align")])):o=!1);return o}function y(i){return!!{absolute:1,fixed:1}[i.getComputedStyle("position")]}function u(i,o){return n(o)?o.is(i.triggers):null}function p(i,o){if(!o)return!1;for(var s=o.getParents(1),T=s.length;T--;)for(var _=i.tabuList.length;_--;)if(s[T].hasAttribute(i.tabuList[_]))return!0;return!1}function v(i,o,s){o=o[s?"getLast":"getFirst"]((function(o){return i.isRelevant(o)&&!o.is(re)}));if(!o)return!1;t(i,o);return s?o.size.top>i.mouse.y:o.size.bottom<i.mouse.y}function w(i){var o=i.editable,s=i.mouse,T=i.view,_=i.triggerOffset;x(i);var S=s.y>(i.inInlineMode?T.editable.top+T.editable.height/2:Math.min(T.editable.height,T.pane.height)/2),o=o[S?"getLast":"getFirst"]((function(i){return!(ge(i)||me(i))}));if(!o)return null;e(i,o)&&(o=i.line.wrap[S?"getPrevious":"getNext"]((function(i){return!(ge(i)||me(i))})));if(!n(o)||q(o)||!u(i,o))return null;t(i,o);return!S&&0<=o.size.top&&l(s.y,0,o.size.top+_)?(i=i.inInlineMode||0===T.scroll.y?te:ie,new f([null,o,V,ee,i])):S&&o.size.bottom<=T.pane.height&&l(s.y,o.size.bottom-_,T.pane.height)?(i=i.inInlineMode||l(o.size.bottom,T.pane.height-_,T.pane.height)?ne:ie,new f([o,null,j,ee,i])):null}function r(i){var o=i.mouse,s=i.view,T=i.triggerOffset,_=b(i);if(!_)return null;t(i,_);var T=Math.min(T,0|_.size.outerHeight/2),S=[],P,$;if(l(o.y,_.size.top-1,_.size.top+T))$=!1;else{if(!l(o.y,_.size.bottom-T,_.size.bottom+1))return null;$=!0}if(q(_)||v(i,_,$)||_.getParent().is(ae))return null;var oe=d(i,_,!$);if(oe){if(oe&&oe.type==CKEDITOR.NODE_TEXT)return null;if(n(oe)){if(q(oe)||!u(i,oe)||oe.getParent().is(ae))return null;S=[oe,_][$?"reverse":"concat"]().concat([Y,ee])}}else _.equals(i.editable[$?"getLast":"getFirst"](i.isRelevant))?(x(i),$&&l(o.y,_.size.bottom-T,s.pane.height)&&l(_.size.bottom,s.pane.height-T,s.pane.height)?P=ne:l(o.y,0,_.size.top+T)&&(P=te)):P=ie,S=[null,_][$?"reverse":"concat"]().concat([$?j:V,ee,P,_.equals(i.editable[$?"getLast":"getFirst"](i.isRelevant))?$?ne:te:ie]);return 0 in S?new f(S):null}function z(i,s,T,_){for(var S=s.getDocumentPosition(),P={},$={},V={},j={},Y=pe.length;Y--;)P[pe[Y]]=parseInt(s.getComputedStyle.call(s,"border-"+pe[Y]+"-width"),10)||0,V[pe[Y]]=parseInt(s.getComputedStyle.call(s,"padding-"+pe[Y]),10)||0,$[pe[Y]]=parseInt(s.getComputedStyle.call(s,"margin-"+pe[Y]),10)||0;T&&!_||A(i,_);j.top=S.y-(T?0:i.view.scroll.y);j.left=S.x-(T?0:i.view.scroll.x);j.outerWidth=s.$.offsetWidth;j.outerHeight=s.$.offsetHeight;j.height=j.outerHeight-(V.top+V.bottom+P.top+P.bottom);j.width=j.outerWidth-(V.left+V.right+P.left+P.right);j.bottom=j.top+j.outerHeight;j.right=j.left+j.outerWidth;i.inInlineMode&&(j.scroll={top:s.$.scrollTop,left:s.$.scrollLeft});return o({border:P,padding:V,margin:$,ignoreScroll:T},j,!0)}function t(i,s,T){if(!n(s))return s.size=null;if(s.size){if(s.size.ignoreScroll==T&&s.size.date>new Date-ce)return null}else s.size={};return o(s.size,z(i,s,T),{date:+new Date},!0)}function x(i,o){i.view.editable=z(i,i.editable,o,!0)}function A(i,s){i.view||(i.view={});var T=i.view;if(!(!s&&T&&T.date>new Date-ce)){var _=i.win,T=_.getScrollPosition(),_=_.getViewPaneSize();o(i.view,{scroll:{x:T.x,y:T.y,width:i.doc.$.documentElement.scrollWidth-_.width,height:i.doc.$.documentElement.scrollHeight-_.height},pane:{width:_.width,height:_.height,bottom:_.height+T.y},date:+new Date},!0)}}function B(i,o,s,T){for(var _=T,S=T,P=0,$=!1,V=!1,j=i.view.pane.height,Y=i.mouse;Y.y+P<j&&0<Y.y-P;){$||($=o(_,T));V||(V=o(S,T));!$&&0<Y.y-P&&(_=s(i,{x:Y.x,y:Y.y-P}));!V&&Y.y+P<j&&(S=s(i,{x:Y.x,y:Y.y+P}));if($&&V)break;P+=2}return new f([_,S,null,null])}CKEDITOR.plugins.add("magicline",{init:function(s){var T=s.config,$=T.magicline_triggerOffset||30,V={editor:s,enterMode:T.enterMode,triggerOffset:$,holdDistance:0|$*(T.magicline_holdDistance||.5),boxColor:T.magicline_color||"#ff0000",rtl:"rtl"==T.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(T.magicline_tabuList||[]),triggers:T.magicline_everywhere?le:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}},j,Y,ee;V.isRelevant=function(i){return n(i)&&!e(V,i)&&!q(i)};s.on("contentDom",(function(){var $=s.editable(),te=s.document,ne=s.window;o(V,{editable:$,inInlineMode:$.isInline(),doc:te,win:ne,hotNode:null},!0);V.boundary=V.inInlineMode?V.editable:V.doc.getDocumentElement();$.is(P.$inline)||(V.inInlineMode&&!y($)&&$.setStyles({position:"relative",top:null,left:null}),g.call(this||i,V),A(V),$.attachListener(s,"beforeUndoImage",(function(){V.line.detach()})),$.attachListener(s,"beforeGetData",(function(){V.line.wrap.getParent()&&(V.line.detach(),s.once("getData",(function(){V.line.attach()}),null,null,1e3))}),null,null,0),$.attachListener(V.inInlineMode?te:te.getWindow().getFrame(),"mouseout",(function(i){if("wysiwyg"==s.mode)if(V.inInlineMode){var o=i.data.$.clientX;i=i.data.$.clientY;A(V);x(V,!0);var T=V.view.editable,_=V.view.scroll;o>T.left-_.x&&o<T.right-_.x&&i>T.top-_.y&&i<T.bottom-_.y||(clearTimeout(ee),ee=null,V.line.detach())}else clearTimeout(ee),ee=null,V.line.detach()})),$.attachListener($,"keyup",(function(){V.hiddenMode=0})),$.attachListener($,"keydown",(function(i){if("wysiwyg"==s.mode)switch(i.data.getKeystroke()){case 2228240:case 16:V.hiddenMode=1,V.line.detach()}})),$.attachListener(V.inInlineMode?$:te,"mousemove",(function(i){Y=!0;if("wysiwyg"==s.mode&&!s.readOnly&&!ee){var o={x:i.data.$.clientX,y:i.data.$.clientY};ee=setTimeout((function(){V.mouse=o;ee=V.trigger=null;A(V);Y&&!V.hiddenMode&&s.focusManager.hasFocus&&!V.line.mouseNear()&&(V.element=fe(V,!0))&&((V.trigger=w(V)||r(V)||Ee(V))&&!p(V,V.trigger.upper||V.trigger.lower)?V.line.attach().place():(V.trigger=null,V.line.detach()),Y=!1)}),30)}})),$.attachListener(ne,"scroll",(function(){"wysiwyg"==s.mode&&(V.line.detach(),_.webkit&&(V.hiddenMode=1,clearTimeout(j),j=setTimeout((function(){V.mouseDown||(V.hiddenMode=0)}),50)))})),$.attachListener(S?te:ne,"mousedown",(function(){"wysiwyg"==s.mode&&(V.line.detach(),V.hiddenMode=1,V.mouseDown=1)})),$.attachListener(S?te:ne,"mouseup",(function(){V.hiddenMode=0;V.mouseDown=0})),s.addCommand("accessPreviousSpace",m(V)),s.addCommand("accessNextSpace",m(V,!0)),s.setKeystroke([[T.magicline_keystrokePrevious,"accessPreviousSpace"],[T.magicline_keystrokeNext,"accessNextSpace"]]),s.on("loadSnapshot",(function(){var i,o,T,_;for(_ in{p:1,br:1,div:1})for(i=s.document.getElementsByTag(_),T=i.count();T--;)if((o=i.getItem(T)).data("cke-magicline-hot")){V.hotNode=o;V.lastCmdDirection="true"===o.data("cke-magicline-dir");return}})),s._.magiclineBackdoor={accessFocusSpace:h,boxTrigger:f,isLine:e,getAscendantTrigger:b,getNonEmptyNeighbour:d,getSize:z,that:V,triggerEdge:r,triggerEditable:w,triggerExpand:Ee})}),this||i)}});var o=CKEDITOR.tools.extend,s=CKEDITOR.dom.element,T=s.createFromHtml,_=CKEDITOR.env,S=CKEDITOR.env.ie&&9>CKEDITOR.env.version,P=CKEDITOR.dtd,$={},V=128,j=64,Y=32,ee=16,te=4,ne=2,ie=1,oe=" ",ae=P.$listItem,re=P.$tableContent,se=o({},P.$nonEditable,P.$empty),le=P.$block,ce=100,de="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",ue=de+"border-color:transparent;display:block;border-style:solid;",he="<span>"+oe+"</span>";$[CKEDITOR.ENTER_BR]="br";$[CKEDITOR.ENTER_P]="p";$[CKEDITOR.ENTER_DIV]="div";f.prototype={set:function(o,s,T){(this||i).properties=o+s+(T||ie);return this||i},is:function(o){return((this||i).properties&o)==o}};var fe=function(){function a(i,o){var s=i.$.elementFromPoint(o.x,o.y);return s&&s.nodeType?new CKEDITOR.dom.element(s):null}return function(i,o,s){if(!i.mouse)return null;var T=i.doc,S=i.line.wrap;s=s||i.mouse;var P=a(T,s);o&&e(i,P)&&(S.hide(),P=a(T,s),S.show());return!P||P.type!=CKEDITOR.NODE_ELEMENT||!P.$||_.ie&&9>_.version&&!i.boundary.equals(P)&&!i.boundary.contains(P)?null:P}}(),ge=CKEDITOR.dom.walker.whitespaces(),me=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),Ee=function(){function b(i){var o=i.element,s,T,_;if(!n(o)||o.contains(i.editable)||o.isReadOnly())return null;_=B(i,(function(i,o){return!o.equals(i)}),(function(i,o){return fe(i,!0,o)}),o);s=_.upper;T=_.lower;if(a(i,s,T))return _.set(Y,8);if(s&&o.contains(s))for(;!s.getParent().equals(o);)s=s.getParent();else s=o.getFirst((function(o){return d(i,o)}));if(T&&o.contains(T))for(;!T.getParent().equals(o);)T=T.getParent();else T=o.getLast((function(o){return d(i,o)}));if(!s||!T)return null;t(i,s);t(i,T);if(!l(i.mouse.y,s.size.top,T.size.bottom))return null;for(var o=Number.MAX_VALUE,S,P,$,V;T&&!T.equals(s)&&(P=s.getNext(i.isRelevant));)S=Math.abs(c(i,s,P)-i.mouse.y),S<o&&(o=S,$=s,V=P),s=P,t(i,s);if(!$||!V||!l(i.mouse.y,$.size.top,V.size.bottom))return null;_.upper=$;_.lower=V;return _.set(Y,8)}function d(i,o){return!(o&&o.type==CKEDITOR.NODE_TEXT||me(o)||q(o)||e(i,o)||o.type==CKEDITOR.NODE_ELEMENT&&o.$&&o.is("br"))}return function(i){var o=b(i),s;if(s=o){s=o.upper;var T=o.lower;s=!(!s||!T||q(T)||q(s)||T.equals(s)||s.equals(T)||T.contains(s)||s.contains(T))&&!!(u(i,s)&&u(i,T)&&a(i,s,T))}return s?o:null}}(),pe=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function a(i){if(!i||i.type!=CKEDITOR.NODE_ELEMENT||"form"!=i.getName())return[];for(var o=[],s=["style","className"],T=0;T<s.length;T++){var _=i.$.elements.namedItem(s[T]);_&&(_=new CKEDITOR.dom.element(_),o.push([_,_.nextSibling]),_.remove())}return o}function f(i,o){if(i&&i.type==CKEDITOR.NODE_ELEMENT&&"form"==i.getName()&&0<o.length)for(var s=o.length-1;0<=s;s--){var T=o[s][0],_=o[s][1];_?T.insertBefore(_):T.appendTo(i)}}function b(i,o){var s=a(i),T={},_=i.$;o||(T["class"]=_.className||"",_.className="");T.inline=_.style.cssText||"";o||(_.style.cssText="position: static; overflow: visible");f(s);return T}function c(i,o){var s=a(i),T=i.$;"class"in o&&(T.className=o["class"]);"inline"in o&&(T.style.cssText=o.inline);f(s)}function d(i){if(!i.editable().isInline()){var o=CKEDITOR.instances,s;for(s in o){var T=o[s];"wysiwyg"!=T.mode||T.readOnly||(T=T.document.getBody(),T.setAttribute("contentEditable",!1),T.setAttribute("contentEditable",!0))}i.editable().hasFocus&&(i.toolbox.focus(),i.focus())}}CKEDITOR.plugins.add("maximize",{init:function(o){function f(){var i=_.getViewPaneSize();o.resize(i.width,i.height,null,!0)}if(o.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var s=o.lang,T=CKEDITOR.document,_=T.getWindow(),S,P,$,V=CKEDITOR.TRISTATE_OFF;o.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var j=o.container.getFirst((function(i){return i.type==CKEDITOR.NODE_ELEMENT&&i.hasClass("cke_inner")})),Y=o.ui.space("contents");if("wysiwyg"==o.mode){var ee=o.getSelection();S=ee&&ee.getRanges();P=_.getScrollPosition()}else{var te=o.editable().$;S=!CKEDITOR.env.ie&&[te.selectionStart,te.selectionEnd];P=[te.scrollLeft,te.scrollTop]}if((this||i).state==CKEDITOR.TRISTATE_OFF){_.on("resize",f);$=_.getScrollPosition();for(ee=o.container;ee=ee.getParent();)ee.setCustomData("maximize_saved_styles",b(ee)),ee.setStyle("z-index",o.config.baseFloatZIndex-5);Y.setCustomData("maximize_saved_styles",b(Y,!0));j.setCustomData("maximize_saved_styles",b(j,!0));Y={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0};T.getDocumentElement().setStyles(Y);!CKEDITOR.env.gecko&&T.getDocumentElement().setStyle("position","fixed");CKEDITOR.env.gecko&&CKEDITOR.env.quirks||T.getBody().setStyles(Y);CKEDITOR.env.ie?setTimeout((function(){_.$.scrollTo(0,0)}),0):_.$.scrollTo(0,0);j.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute");j.$.offsetLeft;j.setStyles({"z-index":o.config.baseFloatZIndex-5,left:"0px",top:"0px"});j.addClass("cke_maximized");f();Y=j.getDocumentPosition();j.setStyles({left:-1*Y.x+"px",top:-1*Y.y+"px"});CKEDITOR.env.gecko&&d(o)}else if((this||i).state==CKEDITOR.TRISTATE_ON){_.removeListener("resize",f);for(var ee=[Y,j],ne=0;ne<ee.length;ne++)c(ee[ne],ee[ne].getCustomData("maximize_saved_styles")),ee[ne].removeCustomData("maximize_saved_styles");for(ee=o.container;ee=ee.getParent();)c(ee,ee.getCustomData("maximize_saved_styles")),ee.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout((function(){_.$.scrollTo($.x,$.y)}),0):_.$.scrollTo($.x,$.y);j.removeClass("cke_maximized");CKEDITOR.env.webkit&&(j.setStyle("display","inline"),setTimeout((function(){j.setStyle("display","block")}),0));o.fire("resize",{outerHeight:o.container.$.offsetHeight,contentsHeight:Y.$.offsetHeight,outerWidth:o.container.$.offsetWidth})}this.toggleState();(ee=(this||i).uiItems[0])&&(Y=(this||i).state==CKEDITOR.TRISTATE_OFF?s.maximize.maximize:s.maximize.minimize,ee=CKEDITOR.document.getById(ee._.id),ee.getChild(1).setHtml(Y),ee.setAttribute("title",Y),ee.setAttribute("href",'javascript:void("'+Y+'");'));"wysiwyg"==o.mode?S?(CKEDITOR.env.gecko&&d(o),o.getSelection().selectRanges(S),(te=o.getSelection().getStartElement())&&te.scrollIntoView(!0)):_.$.scrollTo(P.x,P.y):(S&&(te.selectionStart=S[0],te.selectionEnd=S[1]),te.scrollLeft=P[0],te.scrollTop=P[1]);S=P=null;V=(this||i).state;o.fire("maximize",(this||i).state)},canUndo:!1});o.ui.addButton&&o.ui.addButton("Maximize",{label:s.maximize.maximize,command:"maximize",toolbar:"tools,10"});o.on("mode",(function(){var i=o.getCommand("maximize");i.setState(i.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:V)}),null,null,100)}}})}(),function(){function a(i,o,s){var T=CKEDITOR.cleanWord;T?s():(i=CKEDITOR.getUrl(i.config.pasteFromWordCleanupFile||o+"filter/default.js"),CKEDITOR.scriptLoader.load(i,s,null,!0));return!T}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(o){function b(o){var s=CKEDITOR.plugins.pastefromword&&CKEDITOR.plugins.pastefromword.images,T,_=[];if(s&&o.editor.filter.check("img[src]")&&(T=s.extractTagsFromHtml(o.data.dataValue),0!==T.length&&(s=s.extractFromRtf(o.data.dataTransfer["text/rtf"]),0!==s.length&&(CKEDITOR.tools.array.forEach(s,(function(i){_.push(i.type?"data:"+i.type+";base64,"+CKEDITOR.tools.convertBytesToBase64(CKEDITOR.tools.convertHexStringToBytes(i.hex)):null)}),this||i),T.length===_.length))))for(s=0;s<T.length;s++)0===T[s].indexOf("file://")&&_[s]&&(o.data.dataValue=o.data.dataValue.replace(T[s],_[s]))}var s=0,T=(this||i).path,_=void 0===o.config.pasteFromWord_inlineImages||o.config.pasteFromWord_inlineImages;o.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(i,o){s=1;i.execCommand("paste",{type:"html",notification:!o||"undefined"===typeof o.notification||o.notification})}});CKEDITOR.plugins.clipboard.addPasteButton(o,"PasteFromWord",{label:o.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"});o.on("paste",(function(i){var _=i.data,S=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?_.dataTransfer.getData("text/html",!0):null,P=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?_.dataTransfer.getData("text/rtf"):null,S=S||_.dataValue,$={dataValue:S,dataTransfer:{"text/rtf":P}},P=/(class=\"?Mso|style=(?:\"|\')[^\"]*?\bmso\-|w:WordDocument|<o:\w+>|<\/font>)/,P=/<meta\s*name=(?:\"|\')?generator(?:\"|\')?\s*content=(?:\"|\')?microsoft/gi.test(S)||P.test(S);if(S&&(s||P)&&(!1!==o.fire("pasteFromWord",$)||s)){_.dontFilter=!0;var V=a(o,T,(function(){V?o.fire("paste",_):(!o.config.pasteFromWordPromptCleanup||s||confirm(o.lang.pastefromword.confirmCleanup))&&($.dataValue=CKEDITOR.cleanWord($.dataValue,o),o.fire("afterPasteFromWord",$),_.dataValue=$.dataValue,!0===o.config.forcePasteAsPlainText?_.type="text":CKEDITOR.plugins.clipboard.isCustomCopyCutSupported||"allow-word"!==o.config.forcePasteAsPlainText||(_.type="html"));s=0}));V&&i.cancel()}}),null,null,3);CKEDITOR.plugins.clipboard.isCustomDataTypesSupported&&_&&o.on("afterPasteFromWord",b)}})}(),function(){var o={canUndo:!1,async:!0,exec:function(o,s){var T=o.lang,_=CKEDITOR.tools.keystrokeToString(T.common.keyboard,o.getCommandKeystroke(CKEDITOR.env.ie?o.commands.paste:this||i)),S=s&&"undefined"!==typeof s.notification?s.notification:!s||!s.from||"keystrokeHandler"===s.from&&CKEDITOR.env.ie,T=S&&"string"===typeof S?S:T.pastetext.pasteNotification.replace(/%1/,'<kbd aria-label="'+_.aria+'">'+_.display+"</kbd>");o.execCommand("paste",{type:"text",notification:!!S&&T})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(i){var s=CKEDITOR.env.safari?CKEDITOR.CTRL+CKEDITOR.ALT+CKEDITOR.SHIFT+86:CKEDITOR.CTRL+CKEDITOR.SHIFT+86;i.addCommand("pastetext",o);i.setKeystroke(s,"pastetext");CKEDITOR.plugins.clipboard.addPasteButton(i,"PasteText",{label:i.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"});i.config.forcePasteAsPlainText&&i.on("beforePaste",(function(i){"html"!=i.data.type&&(i.data.type="text")}));i.on("pasteState",(function(o){i.getCommand("pastetext").setState(o.data)}))}})}(),CKEDITOR.plugins.add("removeformat",{init:function(i){i.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat);i.ui.addButton&&i.ui.addButton("RemoveFormat",{label:i.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(i){for(var o=i._.removeFormatRegex||(i._.removeFormatRegex=new RegExp("^(?:"+i.config.removeFormatTags.replace(/,/g,"|")+")$","i")),s=i._.removeAttributes||(i._.removeAttributes=i.config.removeFormatAttributes.split(",")),T=CKEDITOR.plugins.removeformat.filter,_=i.getSelection().getRanges().createIterator(),l=function(i){return i.type==CKEDITOR.NODE_ELEMENT},S=[],P;P=_.getNextRange();){var $=P.createBookmark();P=i.createRange();P.setStartBefore($.startNode);$.endNode&&P.setEndAfter($.endNode);P.collapsed||P.enlarge(CKEDITOR.ENLARGE_ELEMENT);var V=P.createBookmark(),j=V.startNode,Y=V.endNode,q=function(s){for(var _=i.elementPath(s),S=_.elements,P=1,$;($=S[P])&&!$.equals(_.block)&&!$.equals(_.blockLimit);P++)o.test($.getName())&&T(i,$)&&s.breakParent($)};q(j);if(Y)for(q(Y),j=j.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);j&&!j.equals(Y);)if(j.isReadOnly()){if(j.getPosition(Y)&CKEDITOR.POSITION_CONTAINS)break;j=j.getNext(l)}else q=j.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==j.getName()&&j.data("cke-realelement")||j.hasAttribute("data-cke-bookmark")||!T(i,j)||(o.test(j.getName())?j.remove(1):(j.removeAttributes(s),i.fire("removeFormatCleanup",j))),j=q;V.startNode.remove();V.endNode&&V.endNode.remove();P.moveToBookmark($);S.push(P)}i.forceNextSelectionCheck();i.getSelection().selectRanges(S)}}},filter:function(i,o){for(var s=i._.removeFormatFilters||[],T=0;T<s.length;T++)if(!1===s[T](o))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(o){(this||i)._.removeFormatFilters||((this||i)._.removeFormatFilters=[]);(this||i)._.removeFormatFilters.push(o)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",CKEDITOR.plugins.add("resize",{init:function(i){function f(s){var _=P.width,j=P.height,Y=_+(s.data.$.screenX-S.x)*("rtl"==T?-1:1);s=j+(s.data.$.screenY-S.y);$&&(_=Math.max(o.resize_minWidth,Math.min(Y,o.resize_maxWidth)));V&&(j=Math.max(o.resize_minHeight,Math.min(s,o.resize_maxHeight)));i.resize($?_:null,j)}function b(){CKEDITOR.document.removeListener("mousemove",f);CKEDITOR.document.removeListener("mouseup",b);i.document&&(i.document.removeListener("mousemove",f),i.document.removeListener("mouseup",b))}var o=i.config,s=i.ui.spaceId("resizer"),T=i.element?i.element.getDirection(1):"ltr";!o.resize_dir&&(o.resize_dir="vertical");void 0===o.resize_maxWidth&&(o.resize_maxWidth=3e3);void 0===o.resize_maxHeight&&(o.resize_maxHeight=3e3);void 0===o.resize_minWidth&&(o.resize_minWidth=750);void 0===o.resize_minHeight&&(o.resize_minHeight=250);if(!1!==o.resize_enabled){var _=null,S,P,$=("both"==o.resize_dir||"horizontal"==o.resize_dir)&&o.resize_minWidth!=o.resize_maxWidth,V=("both"==o.resize_dir||"vertical"==o.resize_dir)&&o.resize_minHeight!=o.resize_maxHeight,j=CKEDITOR.tools.addFunction((function(s){_||(_=i.getResizable());P={width:_.$.offsetWidth||0,height:_.$.offsetHeight||0};S={x:s.screenX,y:s.screenY};o.resize_minWidth>P.width&&(o.resize_minWidth=P.width);o.resize_minHeight>P.height&&(o.resize_minHeight=P.height);CKEDITOR.document.on("mousemove",f);CKEDITOR.document.on("mouseup",b);i.document&&(i.document.on("mousemove",f),i.document.on("mouseup",b));s.preventDefault&&s.preventDefault()}));i.on("destroy",(function(){CKEDITOR.tools.removeFunction(j)}));i.on("uiSpace",(function(o){if("bottom"==o.data.space){var _="";$&&!V&&(_=" cke_resizer_horizontal");!$&&V&&(_=" cke_resizer_vertical");var S='<span id="'+s+'" class="cke_resizer'+_+" cke_resizer_"+T+'" title="'+CKEDITOR.tools.htmlEncode(i.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+j+', event)">'+("ltr"==T?"◢":"◣")+"</span>";"ltr"==T&&"ltr"==_?o.data.html+=S:o.data.html=S+o.data.html}}),i,null,100);i.on("maximize",(function(o){i.ui.space("resizer")[o.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()}))}}}),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var a=function(o){var s=(this||i)._,T=s.menu;s.state!==CKEDITOR.TRISTATE_DISABLED&&(s.on&&T?T.hide():(s.previousState=s.state,T||(T=s.menu=new CKEDITOR.menu(o,{panel:{className:"cke_menu_panel",attributes:{"aria-label":o.lang.common.options}}}),T.onHide=CKEDITOR.tools.bind((function(){var T=(this||i).command?o.getCommand((this||i).command).modes:(this||i).modes;this.setState(!T||T[o.mode]?s.previousState:CKEDITOR.TRISTATE_DISABLED);s.on=0}),this||i),(this||i).onMenu&&T.addListener((this||i).onMenu)),this.setState(CKEDITOR.TRISTATE_ON),s.on=1,setTimeout((function(){T.show(CKEDITOR.document.getById(s.id),4)}),0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(o){delete o.panel;this.base(o);(this||i).hasArrow="menu";(this||i).click=a},statics:{handler:{create:function(i){return new CKEDITOR.ui.menuButton(i)}}}})},beforeInit:function(i){i.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton","use strict",CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",onLoad:function(o){"moono-lisa"==(CKEDITOR.skinName||o.config.skin)&&CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl((this||i).path+"skins/"+CKEDITOR.skin.name+"/scayt.css"));CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl((this||i).path+"dialogs/dialog.css"))},init:function(o){var s=this||i,T=CKEDITOR.plugins.scayt;this.bindEvents(o);this.parseConfig(o);this.addRule(o);CKEDITOR.dialog.add((this||i).dialogName,CKEDITOR.getUrl((this||i).path+"dialogs/options.js"));this.addMenuItems(o);var _=o.lang.scayt,S=CKEDITOR.env;o.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:_.text_title,title:o.plugins.wsc?o.lang.wsc.title:_.text_title,modes:{wysiwyg:!(S.ie&&(8>S.version||S.quirks))},toolbar:"spellchecker,20",refresh:function(){var i=o.ui.instances.Scayt.getState();o.scayt&&(i=T.state.scayt[o.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);o.fire("scaytButtonState",i)},onRender:function(){var s=this||i;o.on("scaytButtonState",(function(i){void 0!==typeof i.data&&s.setState(i.data)}))},onMenu:function(){var i=o.scayt;o.getMenuItem("scaytToggle").label=o.lang.scayt[i&&T.state.scayt[o.name]?"btn_disable":"btn_enable"];var s={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:i?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:i?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:i?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:i?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:o.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};o.config.scayt_uiTabs[0]||delete s.scaytOptions;o.config.scayt_uiTabs[1]||delete s.scaytLangs;o.config.scayt_uiTabs[2]||delete s.scaytDict;i&&!CKEDITOR.plugins.scayt.isNewUdSupported(i)&&(delete s.scaytDict,o.config.scayt_uiTabs[2]=0,CKEDITOR.plugins.scayt.alarmCompatibilityMessage());return s}});o.contextMenu&&o.addMenuItems&&(o.contextMenu.addListener((function(i,T){var _=o.scayt,S,P;_&&(P=_.getSelectionNode())&&(S=s.menuGenerator(o,P),_.showBanner("."+o.contextMenu._.definition.panel.className.split(" ").join(" .")));return S})),o.contextMenu._.onHide=CKEDITOR.tools.override(o.contextMenu._.onHide,(function(s){return function(){var T=o.scayt;T&&T.hideBanner();return s.apply(this||i)}})))},addMenuItems:function(o){var s=this||i,T=CKEDITOR.plugins.scayt;o.addMenuGroup("scaytButton");for(var _=o.config.scayt_contextMenuItemsOrder.split("|"),S=0;S<_.length;S++)_[S]="scayt_"+_[S];if((_=["grayt_description","grayt_suggest","grayt_control"].concat(_))&&_.length)for(S=0;S<_.length;S++)o.addMenuGroup(_[S],S-10);o.addCommand("scaytToggle",{exec:function(i){var o=i.scayt;T.state.scayt[i.name]=!T.state.scayt[i.name];!0===T.state.scayt[i.name]?o||T.createScayt(i):o&&T.destroy(i)}});o.addCommand("scaytAbout",{exec:function(i){i.scayt.tabToOpen="about";T.openDialog(s.dialogName,i)}});o.addCommand("scaytOptions",{exec:function(i){i.scayt.tabToOpen="options";T.openDialog(s.dialogName,i)}});o.addCommand("scaytLangs",{exec:function(i){i.scayt.tabToOpen="langs";T.openDialog(s.dialogName,i)}});o.addCommand("scaytDict",{exec:function(i){i.scayt.tabToOpen="dictionaries";T.openDialog(s.dialogName,i)}});_={scaytToggle:{label:o.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:o.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:o.lang.scayt.btn_options,group:"scaytButton",command:"scaytOptions"},scaytLangs:{label:o.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:o.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}};o.plugins.wsc&&(_.WSC={label:o.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var i=CKEDITOR.plugins.scayt,s=o.scayt,T=o.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?o.container.getText():o.document.getBody().getText();(T=T.replace(/\s/g,""))?(s&&i.state.scayt[o.name]&&s.setMarkupPaused&&s.setMarkupPaused(!0),o.lockSelection(),o.execCommand("checkspell")):alert("Nothing to check!")}});o.addMenuItems(_)},bindEvents:function(o){var s=CKEDITOR.plugins.scayt,T=o.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,c=function(){s.destroy(o)},d=function(){!s.state.scayt[o.name]||o.readOnly||o.scayt||s.createScayt(o)},l=function(){var s=o.editable();s.attachListener(s,"focus",(function(i){CKEDITOR.plugins.scayt&&!o.scayt&&setTimeout(d,0);i=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[o.name]&&o.scayt;var s,_;if((T||i)&&o._.savedSelection){i=o._.savedSelection.getSelectedElement();i=!i&&o._.savedSelection.getRanges();for(var S=0;S<i.length;S++)_=i[S],"string"===typeof _.startContainer.$.nodeValue&&(s=_.startContainer.getText().length,(s<_.startOffset||s<_.endOffset)&&o.unlockSelection(!1))}}),this||i,null,-10)},k=function(){T?o.config.scayt_inlineModeImmediateMarkup?d():(o.on("blur",(function(){setTimeout(c,0)})),o.on("focus",d),o.focusManager.hasFocus&&d()):d();l();var s=o.editable();s.attachListener(s,"mousedown",(function(i){i=i.data.getTarget();var s=o.widgets&&o.widgets.getByElement(i);s&&(s.wrapper=i.getAscendant((function(i){return i.hasAttribute("data-cke-widget-wrapper")}),!0))}),this||i,null,-10)};o.on("contentDom",k);o.on("beforeCommandExec",(function(i){var T=o.scayt,_=!1,S=!1,P=!0;i.data.name in s.options.disablingCommandExec&&"wysiwyg"==o.mode?T&&(s.destroy(o),o.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==i.data.name&&"italic"!==i.data.name&&"underline"!==i.data.name&&"strike"!==i.data.name&&"subscript"!==i.data.name&&"superscript"!==i.data.name&&"enter"!==i.data.name&&"cut"!==i.data.name&&"language"!==i.data.name||!T||("cut"===i.data.name&&(P=!1,S=!0),"language"===i.data.name&&(S=_=!0),o.fire("reloadMarkupScayt",{removeOptions:{removeInside:P,forceBookmark:S,language:_},timeout:0}))}));o.on("beforeSetMode",(function(i){if("source"==i.data){(i=o.scayt)&&(s.destroy(o),o.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED));o.document&&o.document.getBody().removeAttribute("_jquid")}}));o.on("afterCommandExec",(function(i){"wysiwyg"!=o.mode||"undo"!=i.data.name&&"redo"!=i.data.name||setTimeout((function(){s.reloadMarkup(o.scayt)}),250)}));o.on("readOnly",(function(i){var T;i&&(T=o.scayt,!0===i.editor.readOnly?T&&T.fire("removeMarkupInDocument",{}):T?s.reloadMarkup(T):"wysiwyg"==i.editor.mode&&!0===s.state.scayt[i.editor.name]&&(s.createScayt(o),i.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))}));o.on("beforeDestroy",c);o.on("setData",(function(){c();(o.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||o.plugins.divarea)&&k()}),this||i,null,50);o.on("reloadMarkupScayt",(function(i){var T=i.data&&i.data.removeOptions,_=i.data&&i.data.timeout,S=i.data&&i.data.language,P=o.scayt;P&&setTimeout((function(){S&&(T.selectionNode=o.plugins.language.getCurrentLangElement(o),T.selectionNode=T.selectionNode&&T.selectionNode.$||null);P.removeMarkupInSelectionNode(T);s.reloadMarkup(P)}),_||0)}));o.on("insertElement",(function(){o.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})}),this||i,null,50);o.on("insertHtml",(function(){o.scayt&&o.scayt.setFocused&&o.scayt.setFocused(!0);o.fire("reloadMarkupScayt")}),this||i,null,50);o.on("insertText",(function(){o.scayt&&o.scayt.setFocused&&o.scayt.setFocused(!0);o.fire("reloadMarkupScayt")}),this||i,null,50);o.on("scaytDialogShown",(function(i){i.data.selectPage(o.scayt.tabToOpen)}))},parseConfig:function(i){var o=CKEDITOR.plugins.scayt;o.replaceOldOptionsNames(i.config);"boolean"!==typeof i.config.scayt_autoStartup&&(i.config.scayt_autoStartup=!1);o.state.scayt[i.name]=i.config.scayt_autoStartup;"boolean"!==typeof i.config.grayt_autoStartup&&(i.config.grayt_autoStartup=!1);"boolean"!==typeof i.config.scayt_inlineModeImmediateMarkup&&(i.config.scayt_inlineModeImmediateMarkup=!1);o.state.grayt[i.name]=i.config.grayt_autoStartup;i.config.scayt_contextCommands||(i.config.scayt_contextCommands="ignoreall|add");i.config.scayt_contextMenuItemsOrder||(i.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control");i.config.scayt_sLang||(i.config.scayt_sLang="en_US");(void 0===i.config.scayt_maxSuggestions||"number"!=typeof i.config.scayt_maxSuggestions||0>i.config.scayt_maxSuggestions)&&(i.config.scayt_maxSuggestions=3);(void 0===i.config.scayt_minWordLength||"number"!=typeof i.config.scayt_minWordLength||1>i.config.scayt_minWordLength)&&(i.config.scayt_minWordLength=3);void 0!==i.config.scayt_customDictionaryIds&&"string"===typeof i.config.scayt_customDictionaryIds||(i.config.scayt_customDictionaryIds="");void 0!==i.config.scayt_userDictionaryName&&"string"===typeof i.config.scayt_userDictionaryName||(i.config.scayt_userDictionaryName=null);if("string"===typeof i.config.scayt_uiTabs&&3===i.config.scayt_uiTabs.split(",").length){var s=[],T=[];i.config.scayt_uiTabs=i.config.scayt_uiTabs.split(",");CKEDITOR.tools.search(i.config.scayt_uiTabs,(function(i){1===Number(i)||0===Number(i)?(T.push(!0),s.push(Number(i))):T.push(!1)}));null===CKEDITOR.tools.search(T,!1)?i.config.scayt_uiTabs=s:i.config.scayt_uiTabs=[1,1,1]}else i.config.scayt_uiTabs=[1,1,1];"string"!=typeof i.config.scayt_serviceProtocol&&(i.config.scayt_serviceProtocol=null);"string"!=typeof i.config.scayt_serviceHost&&(i.config.scayt_serviceHost=null);"string"!=typeof i.config.scayt_servicePort&&(i.config.scayt_servicePort=null);"string"!=typeof i.config.scayt_servicePath&&(i.config.scayt_servicePath=null);i.config.scayt_moreSuggestions||(i.config.scayt_moreSuggestions="on");"string"!==typeof i.config.scayt_customerId&&(i.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2");"string"!==typeof i.config.scayt_customPunctuation&&(i.config.scayt_customPunctuation="-");"string"!==typeof i.config.scayt_srcUrl&&(o=document.location.protocol,o=-1!=o.search(/https?:/)?o:"http:",i.config.scayt_srcUrl=o+"//svc.webspellchecker.net/spellcheck31/wscbundle/wscbundle.js");"boolean"!==typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0);"boolean"!==typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0);CKEDITOR.config.scayt_handleUndoRedo=!!CKEDITOR.plugins.undo&&CKEDITOR.config.scayt_handleUndoRedo;"boolean"!==typeof i.config.scayt_multiLanguageMode&&(i.config.scayt_multiLanguageMode=!1);"object"!==typeof i.config.scayt_multiLanguageStyles&&(i.config.scayt_multiLanguageStyles={});i.config.scayt_ignoreAllCapsWords&&"boolean"!==typeof i.config.scayt_ignoreAllCapsWords&&(i.config.scayt_ignoreAllCapsWords=!1);i.config.scayt_ignoreDomainNames&&"boolean"!==typeof i.config.scayt_ignoreDomainNames&&(i.config.scayt_ignoreDomainNames=!1);i.config.scayt_ignoreWordsWithMixedCases&&"boolean"!==typeof i.config.scayt_ignoreWordsWithMixedCases&&(i.config.scayt_ignoreWordsWithMixedCases=!1);i.config.scayt_ignoreWordsWithNumbers&&"boolean"!==typeof i.config.scayt_ignoreWordsWithNumbers&&(i.config.scayt_ignoreWordsWithNumbers=!1);if(i.config.scayt_disableOptionsStorage){var o=CKEDITOR.tools.isArray(i.config.scayt_disableOptionsStorage)?i.config.scayt_disableOptionsStorage:"string"===typeof i.config.scayt_disableOptionsStorage?[i.config.scayt_disableOptionsStorage]:void 0,_="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),S=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],P=CKEDITOR.tools.search,$=CKEDITOR.tools.indexOf;i.config.scayt_disableOptionsStorage=function(i){for(var o=[],s=0;s<i.length;s++){var T=i[s],V=!!P(i,"options");if(!P(_,T)||V&&P(S,(function(i){if("lang"===i)return!1})))return;P(S,T)&&S.splice($(S,T),1);if("all"===T||V&&P(i,"lang"))return[];"options"===T&&(S=["lang"])}return o=o.concat(S)}(o)}i.config.scayt_disableCache&&"boolean"!==typeof i.config.scayt_disableCache&&(i.config.scayt_disableCache=!1);(void 0===i.config.scayt_cacheSize||"number"!=typeof i.config.scayt_cacheSize||1>i.config.scayt_cacheSize)&&(i.config.scayt_cacheSize=4e3)},addRule:function(i){var o=CKEDITOR.plugins.scayt,s=i.dataProcessor,T=s&&s.htmlFilter,_=i._.elementsPath&&i._.elementsPath.filters,s=s&&s.dataFilter,S=i.addRemoveFormatFilter,k=function(s){if(i.scayt&&(s.hasAttribute(o.options.data_attribute_name)||s.hasAttribute(o.options.problem_grammar_data_attribute)))return!1},g=function(s){var T=!0;i.scayt&&(s.hasAttribute(o.options.data_attribute_name)||s.hasAttribute(o.options.problem_grammar_data_attribute))&&(T=!1);return T};_&&_.push(k);s&&s.addRules({elements:{span:function(i){var s=i.hasClass(o.options.misspelled_word_class)&&i.attributes[o.options.data_attribute_name],T=i.hasClass(o.options.problem_grammar_class)&&i.attributes[o.options.problem_grammar_data_attribute];o&&(s||T)&&delete i.name;return i}}});T&&T.addRules({elements:{span:function(i){var s=i.hasClass(o.options.misspelled_word_class)&&i.attributes[o.options.data_attribute_name],T=i.hasClass(o.options.problem_grammar_class)&&i.attributes[o.options.problem_grammar_data_attribute];o&&(s||T)&&delete i.name;return i}}});S&&S.call(i,g)},scaytMenuDefinition:function(o){var s=this||i,T=CKEDITOR.plugins.scayt;o=o.scayt;return{scayt:{scayt_ignore:{label:o.getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(i){i.scayt.ignoreWord()}},scayt_ignoreall:{label:o.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(i){i.scayt.ignoreAllWords()}},scayt_add:{label:o.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(i){var o=i.scayt;setTimeout((function(){o.addWordToUserDictionary()}),10)}},scayt_option:{label:o.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(i){i.scayt.tabToOpen="options";T.openDialog(s.dialogName,i)},verification:function(i){return 1==i.config.scayt_uiTabs[0]}},scayt_language:{label:o.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(i){i.scayt.tabToOpen="langs";T.openDialog(s.dialogName,i)},verification:function(i){return 1==i.config.scayt_uiTabs[1]}},scayt_dictionary:{label:o.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(i){i.scayt.tabToOpen="dictionaries";T.openDialog(s.dialogName,i)},verification:function(i){return 1==i.config.scayt_uiTabs[2]}},scayt_about:{label:o.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(i){i.scayt.tabToOpen="about";T.openDialog(s.dialogName,i)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(i){}},grayt_ignore:{label:o.getLocal("btn_ignore"),group:"grayt_control",order:2,exec:function(i){i.scayt.ignorePhrase()}},grayt_ignoreall:{label:o.getLocal("btn_ignoreAll"),group:"grayt_control",order:3,exec:function(i){i.scayt.ignoreAllPhrases()}}}}},buildSuggestionMenuItems:function(i,o,s){var T={},_={},S=s?"word":"phrase",P=s?"startGrammarCheck":"startSpellCheck",$=i.scayt;if(0<o.length&&"no_any_suggestions"!==o[0])if(s)for(s=0;s<o.length;s++){var V="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[s].replace(" ","_");i.addCommand(V,this.createCommand(CKEDITOR.plugins.scayt.suggestions[s],S,P));s<i.config.scayt_maxSuggestions?(i.addMenuItem(V,{label:o[s],command:V,group:"scayt_suggest",order:s+1}),T[V]=CKEDITOR.TRISTATE_OFF):(i.addMenuItem(V,{label:o[s],command:V,group:"scayt_moresuggest",order:s+1}),_[V]=CKEDITOR.TRISTATE_OFF,"on"===i.config.scayt_moreSuggestions&&(i.addMenuItem("scayt_moresuggest",{label:$.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return _}}),T.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else for(s=0;s<o.length;s++)V="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[s].replace(" ","_"),i.addCommand(V,this.createCommand(CKEDITOR.plugins.scayt.suggestions[s],S,P)),i.addMenuItem(V,{label:o[s],command:V,group:"grayt_suggest",order:s+1}),T[V]=CKEDITOR.TRISTATE_OFF;else T.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,i.addCommand("no_scayt_suggest",{exec:function(){}}),i.addMenuItem("no_scayt_suggest",{label:$.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return T},menuGenerator:function(i,o){var s=i.scayt,T=this.scaytMenuDefinition(i),_={},S=i.config.scayt_contextCommands.split("|"),P=o.getAttribute(s.getLangAttribute())||s.getLang(),$,V,j,Y;V=s.isScaytNode(o);j=s.isGraytNode(o);V?(T=T.scayt,$=o.getAttribute(s.getScaytNodeAttributeName()),s.fire("getSuggestionsList",{lang:P,word:$}),_=this.buildSuggestionMenuItems(i,CKEDITOR.plugins.scayt.suggestions,V)):j&&(T=T.grayt,_=o.getAttribute(s.getGraytNodeAttributeName()),s.getGraytNodeRuleAttributeName?($=o.getAttribute(s.getGraytNodeRuleAttributeName()),s.getProblemDescriptionText(_,$,P)):s.getProblemDescriptionText(_,P),Y=s.getProblemDescriptionText(_,$,P),T.grayt_problemdescription&&Y&&(Y=Y.replace(/([.!?])\s/g,"$1<br>"),T.grayt_problemdescription.label=Y),s.fire("getGrammarSuggestionsList",{lang:P,phrase:_,rule:$}),_=this.buildSuggestionMenuItems(i,CKEDITOR.plugins.scayt.suggestions,V));if(V&&"off"==i.config.scayt_contextCommands)return _;for(var ee in T)V&&-1==CKEDITOR.tools.indexOf(S,ee.replace("scayt_",""))&&"all"!=i.config.scayt_contextCommands||j&&"grayt_problemdescription"!==ee&&-1==CKEDITOR.tools.indexOf(S,ee.replace("grayt_",""))&&"all"!=i.config.scayt_contextCommands||(_[ee]="undefined"!=typeof T[ee].state?T[ee].state:CKEDITOR.TRISTATE_OFF,"function"!==typeof T[ee].verification||T[ee].verification(i)||delete _[ee],i.addCommand(ee,{exec:T[ee].exec}),i.addMenuItem(ee,{label:i.lang.scayt[T[ee].label]||T[ee].label,command:ee,group:T[ee].group,order:T[ee].order}));return _},createCommand:function(i,o,s){return{exec:function(T){T=T.scayt;var _={};_[o]=i;T.replaceSelectionNode(_);"startGrammarCheck"===s&&T.removeMarkupInSelectionNode({grammarOnly:!0});T.fire(s)}}}}),CKEDITOR.plugins.scayt={charsToObserve:[{charName:"cke-fillingChar",charCode:function(){var i=CKEDITOR.version.match(/^\d(\.\d*)*/),i=i&&i[0],o;if(i){o="4.5.7";var s,i=i.replace(/\./g,"");o=o.replace(/\./g,"");s=i.length-o.length;s=0<=s?s:0;o=parseInt(i)>=parseInt(o)*Math.pow(10,s)}return o?Array(7).join(String.fromCharCode(8203)):String.fromCharCode(8203)}()}],state:{scayt:{},grayt:{}},warningCounter:0,suggestions:[],options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},openDialog:function(i,o){var s=o.scayt;s.isAllModulesReady&&!1===s.isAllModulesReady()||(o.lockSelection(),o.openDialog(i))},alarmCompatibilityMessage:function(){5>(this||i).warningCounter&&(console.warn("You are using the latest version of SCAYT plugin for CKEditor with the old application version. In order to have access to the newest features, it is recommended to upgrade the application version to latest one as well. Contact us for more details at support@webspellchecker.net."),(this||i).warningCounter+=1)},isNewUdSupported:function(i){return!!i.getUserDictionary},reloadMarkup:function(i){var o;i&&(o=i.getScaytLangList(),i.reloadMarkup?i.reloadMarkup():(this.alarmCompatibilityMessage(),o&&o.ltr&&o.rtl&&i.fire("startSpellCheck, startGrammarCheck")))},replaceOldOptionsNames:function(o){for(var s in o)s in(this||i).backCompatibilityMap&&(o[(this||i).backCompatibilityMap[s]]=o[s],delete o[s])},createScayt:function(o){var s=this||i,T=CKEDITOR.plugins.scayt;this.loadScaytLibrary(o,(function(i){function d(i){return new SCAYT.CKSCAYT(i,(function(){}),(function(){}))}var o;i.window&&(o="BODY"==i.editable().$.nodeName?i.window.getFrame():i.editable());if(o){o={lang:i.config.scayt_sLang,container:o.$,customDictionary:i.config.scayt_customDictionaryIds,userDictionaryName:i.config.scayt_userDictionaryName,localization:i.langCode,customer_id:i.config.scayt_customerId,customPunctuation:i.config.scayt_customPunctuation,debug:i.config.scayt_debug,data_attribute_name:s.options.data_attribute_name,misspelled_word_class:s.options.misspelled_word_class,problem_grammar_data_attribute:s.options.problem_grammar_data_attribute,problem_grammar_class:s.options.problem_grammar_class,"options-to-restore":i.config.scayt_disableOptionsStorage,focused:i.editable().hasFocus,ignoreElementsRegex:i.config.scayt_elementsToIgnore,ignoreGraytElementsRegex:i.config.grayt_elementsToIgnore,minWordLength:i.config.scayt_minWordLength,multiLanguageMode:i.config.scayt_multiLanguageMode,multiLanguageStyles:i.config.scayt_multiLanguageStyles,graytAutoStartup:i.config.grayt_autoStartup,disableCache:i.config.scayt_disableCache,cacheSize:i.config.scayt_cacheSize,charsToObserve:T.charsToObserve};i.config.scayt_serviceProtocol&&(o.service_protocol=i.config.scayt_serviceProtocol);i.config.scayt_serviceHost&&(o.service_host=i.config.scayt_serviceHost);i.config.scayt_servicePort&&(o.service_port=i.config.scayt_servicePort);i.config.scayt_servicePath&&(o.service_path=i.config.scayt_servicePath);"boolean"===typeof i.config.scayt_ignoreAllCapsWords&&(o["ignore-all-caps-words"]=i.config.scayt_ignoreAllCapsWords);"boolean"===typeof i.config.scayt_ignoreDomainNames&&(o["ignore-domain-names"]=i.config.scayt_ignoreDomainNames);"boolean"===typeof i.config.scayt_ignoreWordsWithMixedCases&&(o["ignore-words-with-mixed-cases"]=i.config.scayt_ignoreWordsWithMixedCases);"boolean"===typeof i.config.scayt_ignoreWordsWithNumbers&&(o["ignore-words-with-numbers"]=i.config.scayt_ignoreWordsWithNumbers);var _;try{_=d(o)}catch(i){s.alarmCompatibilityMessage(),delete o.charsToObserve,_=d(o)}_.subscribe("suggestionListSend",(function(i){for(var o={},s=[],T=0;T<i.suggestionList.length;T++)o["word_"+i.suggestionList[T]]||(o["word_"+i.suggestionList[T]]=i.suggestionList[T],s.push(i.suggestionList[T]));CKEDITOR.plugins.scayt.suggestions=s}));_.subscribe("selectionIsChanged",(function(o){i.getSelection().isLocked&&"restoreSelection"!==o.action&&i.lockSelection();"restoreSelection"===o.action&&i.selectionChange(!0)}));_.subscribe("graytStateChanged",(function(o){T.state.grayt[i.name]=o.state}));_.addMarkupHandler&&_.addMarkupHandler((function(o){var s=i.editable(),T=s.getCustomData(o.charName);T&&(T.$=o.node,s.setCustomData(o.charName,T))}));i.scayt=_;i.fire("scaytButtonState",i.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)}else T.state.scayt[i.name]=!1}))},destroy:function(i){i.scayt&&i.scayt.destroy();delete i.scayt;i.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(i,o){var s,c=function(){CKEDITOR.fireOnce("scaytReady");i.scayt||"function"===typeof o&&o(i)};"undefined"===typeof window.SCAYT||"function"!==typeof window.SCAYT.CKSCAYT?(s=i.config.scayt_srcUrl,CKEDITOR.scriptLoader.load(s,(function(i){i&&c()}))):window.SCAYT&&"function"===typeof window.SCAYT.CKSCAYT&&c()}},CKEDITOR.on("dialogDefinition",(function(o){var s=o.data.name;o=o.data.definition.dialog;"scaytDialog"!==s&&"checkspell"!==s&&(o.on("show",(function(i){i=i.sender&&i.sender.getParentEditor();var o=CKEDITOR.plugins.scayt,s=i.scayt;s&&o.state.scayt[i.name]&&s.setMarkupPaused&&s.setMarkupPaused(!0)})),o.on("hide",(function(i){i=i.sender&&i.sender.getParentEditor();var o=CKEDITOR.plugins.scayt,s=i.scayt;s&&o.state.scayt[i.name]&&s.setMarkupPaused&&s.setMarkupPaused(!1)})));"scaytDialog"===s&&o.on("cancel",(function(i){return!1}),this||i,null,-1);"checkspell"===s&&o.on("cancel",(function(i){i=i.sender&&i.sender.getParentEditor();var o=CKEDITOR.plugins.scayt,s=i.scayt;s&&o.state.scayt[i.name]&&s.setMarkupPaused&&s.setMarkupPaused(!1);i.unlockSelection()}),this||i,null,-2);"link"===s&&o.on("ok",(function(i){var o=i.sender&&i.sender.getParentEditor();o&&setTimeout((function(){o.fire("reloadMarkupScayt",{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})}),0)}));"replace"===s&&o.on("hide",(function(i){i=i.sender&&i.sender.getParentEditor();var o=CKEDITOR.plugins.scayt,s=i.scayt;i&&setTimeout((function(){s&&(s.fire("removeMarkupInDocument",{}),o.reloadMarkup(s))}),0)}))})),CKEDITOR.on("scaytReady",(function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty){var o=CKEDITOR.editor.prototype;o.checkDirty=CKEDITOR.tools.override(o.checkDirty,(function(o){return function(){var s=null,T=(this||i).scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[(this||i).name]&&(this||i).scayt){if(s="ready"==(this||i).status)var _=T.removeMarkupFromString(this.getSnapshot()),T=T.removeMarkupFromString((this||i)._.previousValue),s=s&&T!==_}else s=o.call(this||i);return s}}));o.resetDirty=CKEDITOR.tools.override(o.resetDirty,(function(o){return function(){var s=(this||i).scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[(this||i).name]&&(this||i).scayt?(this||i)._.previousValue=s.removeMarkupFromString(this.getSnapshot()):o.call(this||i)}}))}if(!0===CKEDITOR.config.scayt_handleUndoRedo){var o=CKEDITOR.plugins.undo.Image.prototype,s="function"==typeof o.equalsContent?"equalsContent":"equals";o[s]=CKEDITOR.tools.override(o[s],(function(o){return function(s){var T=s.editor.scayt,_=(this||i).contents,S=s.contents,P=null;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[s.editor.name]&&s.editor.scayt&&((this||i).contents=T.removeMarkupFromString(_)||"",s.contents=T.removeMarkupFromString(S)||"");P=o.apply(this||i,arguments);(this||i).contents=_;s.contents=S;return P}}))}})),function(){var o={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(i){this.toggleState();this.refresh(i)},refresh:function(o){if(o.document){var s=(this||i).state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";o.editable()[s]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var i;i=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders ");CKEDITOR.addCss(i)},init:function(i){var s=i.addCommand("showborders",o);s.canUndo=!1;!1!==i.config.startupShowBorders&&s.setState(CKEDITOR.TRISTATE_ON);i.on("mode",(function(){s.state!=CKEDITOR.TRISTATE_DISABLED&&s.refresh(i)}),null,null,100);i.on("contentDom",(function(){s.state!=CKEDITOR.TRISTATE_DISABLED&&s.refresh(i)}));i.on("removeFormatCleanup",(function(o){o=o.data;i.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&o.is("table")&&(!o.hasAttribute("border")||0>=parseInt(o.getAttribute("border"),10))&&o.addClass("cke_show_border")}))},afterInit:function(i){var o=i.dataProcessor;i=o&&o.dataFilter;o=o&&o.htmlFilter;i&&i.addRules({elements:{table:function(i){i=i.attributes;var o=i["class"],s=parseInt(i.border,10);s&&!(0>=s)||o&&-1!=o.indexOf("cke_show_border")||(i["class"]=(o||"")+" cke_show_border")}}});o&&o.addRules({elements:{table:function(i){i=i.attributes;var o=i["class"];o&&(i["class"]=o.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}});CKEDITOR.on("dialogDefinition",(function(o){var s=o.data.name;"table"!=s&&"tableProperties"!=s||(o=o.data.definition,s=o.getContents("info").get("txtBorder"),s.commit=CKEDITOR.tools.override(s.commit,(function(o){return function(s,T){o.apply(this||i,arguments);var _=parseInt(this.getValue(),10);T[!_||0>=_?"addClass":"removeClass"]("cke_show_border")}})),o=(o=o.getContents("advanced"))&&o.get("advCSSClasses"))&&(o.setup=CKEDITOR.tools.override(o.setup,(function(o){return function(){o.apply(this||i,arguments);this.setValue(this.getValue().replace(/cke_show_border/,""))}})),o.commit=CKEDITOR.tools.override(o.commit,(function(o){return function(s,T){o.apply(this||i,arguments);parseInt(T.getAttribute("border"),10)||T.addClass("cke_show_border")}})))}))}(),function(){CKEDITOR.plugins.add("sourcearea",{init:function(s){function b(){var i=_&&this.equals(CKEDITOR.document.getActive());this.hide();this.setStyle("height",this.getParent().$.clientHeight+"px");this.setStyle("width",this.getParent().$.clientWidth+"px");this.show();i&&this.focus()}if(s.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var T=CKEDITOR.plugins.sourcearea;s.addMode("source",(function(T){var _=s.ui.space("contents").getDocument().createElement("textarea");_.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",s.config.sourceAreaTabSize||4)));_.setAttribute("dir","ltr");_.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu");s.ui.space("contents").append(_);_=s.editable(new o(s,_));_.setData(s.getData(1));CKEDITOR.env.ie&&(_.attachListener(s,"resize",b,_),_.attachListener(CKEDITOR.document.getWindow(),"resize",b,_),CKEDITOR.tools.setTimeout(b,0,_));s.fire("ariaWidget",this||i);T()}));s.addCommand("source",T.commands.source);s.ui.addButton&&s.ui.addButton("Source",{label:s.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"});s.on("mode",(function(){s.getCommand("source").setState("source"==s.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}));var _=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var o=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(o){this.setValue(o);(this||i).status="ready";(this||i).editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(i){this[(i?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){o.baseProto.detach.call(this||i);this.clearCustomData();this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(i){"wysiwyg"==i.mode&&i.fire("saveSnapshot");i.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);i.setMode("source"==i.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(o){var s=this||i;CKEDITOR.dialog.add("specialchar",(this||i).path+"dialogs/specialchar.js");o.addCommand("specialchar",{exec:function(){var i=o.langCode,i=s.availableLangs[i]?i:s.availableLangs[i.replace(/-.*/,"")]?i.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(s.path+"dialogs/lang/"+i+".js"),(function(){CKEDITOR.tools.extend(o.lang.specialchar,s.langEntries[i]);o.openDialog("specialchar")}))},modes:{wysiwyg:1},canUndo:!1});o.ui.addButton&&o.ui.addButton("SpecialChar",{label:o.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(o){var s=o.config,T=o.lang.stylescombo,_={},S=[],P=[];o.on("stylesSet",(function(i){if(i=i.data.styles){for(var T,$,V,j=0,Y=i.length;j<Y;j++)(T=i[j],o.blockless&&T.element in CKEDITOR.dtd.$block||"string"==typeof T.type&&!CKEDITOR.style.customHandlers[T.type]||($=T.name,T=new CKEDITOR.style(T),o.filter.customConfig&&!o.filter.check(T)))||(T._name=$,T._.enterMode=s.enterMode,T._.type=V=T.assignedTo||T.type,T._.weight=j+1e3*(V==CKEDITOR.STYLE_OBJECT?1:V==CKEDITOR.STYLE_BLOCK?2:3),_[$]=T,S.push(T),P.push(T));S.sort((function(i,o){return i._.weight-o._.weight}))}}));o.ui.addRichCombo("Styles",{label:T.label,title:T.panelTitle,toolbar:"styles,10",allowedContent:P,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(s.contentsCss),multiSelect:!0,attributes:{"aria-label":T.panelTitle}},init:function(){var i,o,s,_,P,$;P=0;for($=S.length;P<$;P++)i=S[P],o=i._name,_=i._.type,_!=s&&(this.startGroup(T["panelTitle"+String(_)]),s=_),this.add(o,i.type==CKEDITOR.STYLE_OBJECT?o:i.buildPreview(),o);this.commit()},onClick:function(i){o.focus();o.fire("saveSnapshot");i=_[i];var s=o.elementPath();i.group&&i.removeStylesFromSameGroup(o)?o.applyStyle(i):o[i.checkActive(s,o)?"removeStyle":"applyStyle"](i);o.fire("saveSnapshot")},onRender:function(){o.on("selectionChange",(function(i){var s=this.getValue();i=i.data.path.elements;for(var T=0,S=i.length,P;T<S;T++){P=i[T];for(var $ in _)if(_[$].checkElementRemovable(P,!0,o)){$!=s&&this.setValue($);return}}this.setValue("")}),this||i)},onOpen:function(){var i=o.getSelection(),i=i.getSelectedElement()||i.getStartElement()||o.editable(),i=o.elementPath(i),s=[0,0,0,0];this.showAll();this.unmarkAll();for(var S in _){var P=_[S],$=P._.type;P.checkApplicable(i,o,o.activeFilter)?s[$]++:this.hideItem(S);P.checkActive(i,o)&&this.mark(S)}s[CKEDITOR.STYLE_BLOCK]||this.hideGroup(T["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]);s[CKEDITOR.STYLE_INLINE]||this.hideGroup(T["panelTitle"+String(CKEDITOR.STYLE_INLINE)]);s[CKEDITOR.STYLE_OBJECT]||this.hideGroup(T["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var i=o.elementPath();if(i){for(var s in _)if(_[s].checkApplicable(i,o,o.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){_={};S=[]}})}})}(),function(){function a(i){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(o){if(o.editable().hasFocus){var s=o.getSelection(),T;if(T=new CKEDITOR.dom.elementPath(s.getCommonAncestor(),s.root).contains({td:1,th:1},1)){var s=o.createRange(),_=CKEDITOR.tools.tryThese((function(){var o=T.getParent().$.cells[T.$.cellIndex+(i?-1:1)];o.parentNode.parentNode;return o}),(function(){var o=T.getParent(),o=o.getAscendant("table").$.rows[o.$.rowIndex+(i?-1:1)];return o.cells[i?o.cells.length-1:0]}));if(_||i){if(!_)return!0;_=new CKEDITOR.dom.element(_),s.moveToElementEditStart(_),s.checkStartOfBlock()&&s.checkEndOfBlock()||s.selectNodeContents(_)}else{for(var S=T.getAscendant("table").$,_=T.getParent().$.cells,S=new CKEDITOR.dom.element(S.insertRow(-1),o.document),P=0,$=_.length;P<$;P++)S.append(new CKEDITOR.dom.element(_[P],o.document).clone(!1,!1)).appendBogus();s.moveToElementEditStart(S)}s.select(!0);return!0}}return!1}}}var i={editorFocus:!1,modes:{wysiwyg:1,source:1}},o={exec:function(i){i.container.focusNext(!0,i.tabIndex)}},s={exec:function(i){i.container.focusPrevious(!0,i.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(T){for(var _=!1!==T.config.enableTabKeyTools,S=T.config.tabSpaces||0,P="";S--;)P+=" ";P&&T.on("key",(function(i){9==i.data.keyCode&&(T.insertText(P),i.cancel())}));_&&T.on("key",(function(i){(9==i.data.keyCode&&T.execCommand("selectNextCell")||i.data.keyCode==CKEDITOR.SHIFT+9&&T.execCommand("selectPreviousCell"))&&i.cancel()}));T.addCommand("blur",CKEDITOR.tools.extend(o,i));T.addCommand("blurBack",CKEDITOR.tools.extend(s,i));T.addCommand("selectNextCell",a());T.addCommand("selectPreviousCell",a(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(o,s){var T=void 0===s?this.getTabIndex():s,_,S,P,$,V,j;if(0>=T)for(V=this.getNextSourceNode(o,CKEDITOR.NODE_ELEMENT);V;){if(V.isVisible()&&0===V.getTabIndex()){P=V;break}V=V.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(V=this.getDocument().getBody().getFirst();V=V.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!_)if(!S&&V.equals(this||i)){if(S=!0,o){if(!(V=V.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;_=1}}else S&&!this.contains(V)&&(_=1);if(V.isVisible()&&!(0>(j=V.getTabIndex()))){if(_&&j==T){P=V;break}j>T&&(!P||!$||j<$)?(P=V,$=j):P||0!==j||(P=V,$=j)}}P&&P.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(o,s){for(var T=void 0===s?this.getTabIndex():s,_,S,P,$=0,V,j=this.getDocument().getBody().getLast();j=j.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!_)if(!S&&j.equals(this||i)){if(S=!0,o){if(!(j=j.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;_=1}}else S&&!this.contains(j)&&(_=1);if(j.isVisible()&&!(0>(V=j.getTabIndex())))if(0>=T){if(_&&0===V){P=j;break}V>$&&(P=j,$=V)}else{if(_&&V==T){P=j;break}V<T&&(!P||V>$)&&(P=j,$=V)}}P&&P.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(o){function f(i){return CKEDITOR.tools.extend(i||{},{contextSensitive:1,refresh:function(i,o){this.setState(o.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!o.blockless){var s=o.lang.table;o.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height,border-collapse}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];td{border*,background-color,vertical-align,width,height}[colspan,rowspan];"+(o.plugins.dialogadvtab?"table"+o.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"],["td: splitBorderShorthand"],[{element:"table",right:function(i){if(i.styles){var o;if(i.styles.border)o=CKEDITOR.tools.style.parse.border(i.styles.border);else if(CKEDITOR.env.ie&&8===CKEDITOR.env.version){var s=i.styles;s["border-left"]&&s["border-left"]===s["border-right"]&&s["border-right"]===s["border-top"]&&s["border-top"]===s["border-bottom"]&&(o=CKEDITOR.tools.style.parse.border(s["border-top"]))}o&&o.style&&"solid"===o.style&&o.width&&0!==parseFloat(o.width)&&(i.attributes.border=1);"collapse"==i.styles["border-collapse"]&&(i.attributes.cellspacing=0)}}}]]}));o.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",f()));o.addCommand("tableDelete",f({exec:function(i){var o=i.elementPath().contains("table",1);if(o){var s=o.getParent(),T=i.editable();1!=s.getChildCount()||s.is("td","th")||s.equals(T)||(o=s);i=i.createRange();i.moveToPosition(o,CKEDITOR.POSITION_BEFORE_START);o.remove();i.select()}}}));o.ui.addButton&&o.ui.addButton("Table",{label:s.toolbar,command:"table",toolbar:"insert,30"});CKEDITOR.dialog.add("table",(this||i).path+"dialogs/table.js");CKEDITOR.dialog.add("tableProperties",(this||i).path+"dialogs/table.js");o.addMenuItems&&o.addMenuItems({table:{label:s.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:s.deleteTable,command:"tableDelete",group:"table",order:1}});o.on("doubleclick",(function(i){i.data.element.is("table")&&(i.data.dialog="tableProperties")}));o.contextMenu&&o.contextMenu.addListener((function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}}))}}}),function(){function a(i,s){function c(i){return!s||s.contains(i)&&i.getAscendant("table",!0).equals(s)}function d(i){0<T.length||i.type!=CKEDITOR.NODE_ELEMENT||!o.test(i.getName())||i.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(_,i,"selected_cell",!0),T.push(i))}var T=[],_={};if(!i)return T;for(var S=i.getRanges(),P=0;P<S.length;P++){var $=S[P];if($.collapsed)($=$.getCommonAncestor().getAscendant({td:1,th:1},!0))&&c($)&&T.push($);else{var $=new CKEDITOR.dom.walker($),V;for($.guard=d;V=$.next();)V.type==CKEDITOR.NODE_ELEMENT&&V.is(CKEDITOR.dtd.table)||(V=V.getAscendant({td:1,th:1},!0))&&!V.getCustomData("selected_cell")&&c(V)&&(CKEDITOR.dom.element.setMarker(_,V,"selected_cell",!0),T.push(V))}}CKEDITOR.dom.element.clearAllMarkers(_);return T}function f(i,o){for(f=o?f:d;g[k]&&k<d;k++){var s;1<g[k].rowSpan&&h&&g[k]==h[k]?(s=g[k],s.rowSpan+=1):(s=new CKEDITOR.dom.element(g[k]).clone(),s.removeAttribute("rowSpan"),s.appendBogus(),e.append(s),s=s.$);k+=s.colSpan-1}o?e.insertBefore(f):e.insertAfter(f);return e}function b(i){if(i instanceof CKEDITOR.dom.selection){var o=i.getRanges(),s=a(i),T=s[0].getAscendant("table"),_=CKEDITOR.tools.buildTableMap(T),S=s[0].getParent().$.rowIndex,s=s[s.length-1],P=s.getParent().$.rowIndex+s.$.rowSpan-1,s=[];i.reset();for(i=S;i<=P;i++){for(var $=_[i],V=new CKEDITOR.dom.element(T.$.rows[i]),j=0;j<$.length;j++){var Y=new CKEDITOR.dom.element($[j]),ee=Y.getParent().$.rowIndex;1==Y.$.rowSpan?Y.remove():(--Y.$.rowSpan,ee==i&&(ee=_[i+1],ee[j-1]?Y.insertAfter(new CKEDITOR.dom.element(ee[j-1])):new CKEDITOR.dom.element(T.$.rows[i+1]).append(Y,1)));j+=Y.$.colSpan-1}s.push(V)}_=T.$.rows;o[0].moveToPosition(T,CKEDITOR.POSITION_BEFORE_START);S=new CKEDITOR.dom.element(_[P+1]||(0<S?_[S-1]:null)||T.$.parentNode);for(i=s.length;0<=i;i--)b(s[i]);return T.$.parentNode?S:(o[0].select(),null)}i instanceof CKEDITOR.dom.element&&(T=i.getAscendant("table"),1==T.$.rows.length?T.remove():i.remove());return null}function c(i){for(var o=i.getParent().$.cells,s=0,T=0;T<o.length;T++){var _=o[T],s=s+_.colSpan;if(_==i.$)break}return s-1}function d(i,o){for(var s=o?Infinity:0,T=0;T<i.length;T++){var _=c(i[T]);(o?_<s:_>s)&&(s=_)}return s}function l(i,o){for(var T=s(i)?i:a(i),_=T[0].getAscendant("table"),S=d(T,1),T=d(T),P=o?S:T,$=CKEDITOR.tools.buildTableMap(_),_=[],S=[],T=[],V=$.length,j=0;j<V;j++)_.push($[j][P]),S.push(o?$[j][P-1]:$[j][P+1]);for(j=0;j<V;j++)_[j]&&(1<_[j].colSpan&&S[j]==_[j]?($=_[j],$.colSpan+=1):(P=new CKEDITOR.dom.element(_[j]),$=P.clone(),$.removeAttribute("colSpan"),$.appendBogus(),$[o?"insertBefore":"insertAfter"].call($,P),T.push($),$=$.$),j+=$.rowSpan-1);return T}function k(i){function c(i){var o,s,T;o=i.getRanges();if(1!==o.length)return i;o=o[0];if(o.collapsed||0!==o.endOffset)return i;s=o.endContainer;T=s.getName().toLowerCase();if("td"!==T&&"th"!==T)return i;for((T=s.getPrevious())||(T=s.getParent().getPrevious().getLast());T.type!==CKEDITOR.NODE_TEXT&&"br"!==T.getName().toLowerCase();)if(T=T.getLast(),!T)return i;o.setEndAt(T,CKEDITOR.POSITION_BEFORE_END);return o.select()}CKEDITOR.env.webkit&&!i.isFake&&(i=c(i));var o=i.getRanges(),s=a(i),T=s[0],_=s[s.length-1],s=T.getAscendant("table"),S=CKEDITOR.tools.buildTableMap(s),P,$,V=[];i.reset();var j=0;for(i=S.length;j<i;j++)for(var Y=0,ee=S[j].length;Y<ee;Y++)void 0===P&&S[j][Y]==T.$&&(P=Y),S[j][Y]==_.$&&($=Y);for(j=P;j<=$;j++)for(Y=0;Y<S.length;Y++)_=S[Y],T=new CKEDITOR.dom.element(s.$.rows[Y]),_=new CKEDITOR.dom.element(_[j]),_.$&&(1==_.$.colSpan?_.remove():--_.$.colSpan,Y+=_.$.rowSpan-1,T.$.cells.length||V.push(T));P=S[0].length-1>$?new CKEDITOR.dom.element(S[0][$+1]):P&&-1!==S[0][P-1].cellIndex?new CKEDITOR.dom.element(S[0][P-1]):new CKEDITOR.dom.element(s.$.parentNode);V.length==i&&(o[0].moveToPosition(s,CKEDITOR.POSITION_AFTER_END),o[0].select(),s.remove());return P}function g(i,o){var s=i.getStartElement().getAscendant({td:1,th:1},!0);if(s){var T=s.clone();T.appendBogus();o?T.insertBefore(s):T.insertAfter(s)}}function h(i){if(i instanceof CKEDITOR.dom.selection){var o=i.getRanges(),s=a(i),T=s[0]&&s[0].getAscendant("table"),_;e:{var S=0;_=s.length-1;for(var P={},$,V;$=s[S++];)CKEDITOR.dom.element.setMarker(P,$,"delete_cell",!0);for(S=0;$=s[S++];)if((V=$.getPrevious())&&!V.getCustomData("delete_cell")||(V=$.getNext())&&!V.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(P);_=V;break e}CKEDITOR.dom.element.clearAllMarkers(P);S=s[0].getParent();(S=S.getPrevious())?_=S.getLast():(S=s[_].getParent(),_=(S=S.getNext())?S.getChild(0):null)}i.reset();for(i=s.length-1;0<=i;i--)h(s[i]);_?m(_,!0):T&&(o[0].moveToPosition(T,CKEDITOR.POSITION_BEFORE_START),o[0].select(),T.remove())}else i instanceof CKEDITOR.dom.element&&(o=i.getParent(),1==o.getChildCount()?o.remove():i.remove())}function m(i,o){var s=i.getDocument(),T=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(T.focus(),s.focus());s=new CKEDITOR.dom.range(s);s["moveToElementEdit"+(o?"End":"Start")](i)||(s.selectNodeContents(i),s.collapse(!o));s.select(!0)}function e(i,o,s){i=i[o];if("undefined"==typeof s)return i;for(o=0;i&&o<i.length;o++){if(s.is&&i[o]==s.$)return o;if(o==s)return new CKEDITOR.dom.element(i[o])}return s.is?-1:null}function n(i,o,s){var T=a(i),_;if((o?1!=T.length:2>T.length)||(_=i.getCommonAncestor())&&_.type==CKEDITOR.NODE_ELEMENT&&_.is("table"))return!1;var S;i=T[0];_=i.getAscendant("table");var P=CKEDITOR.tools.buildTableMap(_),$=P.length,V=P[0].length,j=i.getParent().$.rowIndex,Y=e(P,j,i);if(o){var ee;try{var te=parseInt(i.getAttribute("rowspan"),10)||1;S=parseInt(i.getAttribute("colspan"),10)||1;ee=P["up"==o?j-te:"down"==o?j+te:j]["left"==o?Y-S:"right"==o?Y+S:Y]}catch(i){return!1}if(!ee||i.$==ee)return!1;T["up"==o||"left"==o?"unshift":"push"](new CKEDITOR.dom.element(ee))}o=i.getDocument();var ne=j,te=ee=0,ie=!s&&new CKEDITOR.dom.documentFragment(o),oe=0;for(o=0;o<T.length;o++){S=T[o];var ae=S.getParent(),re=S.getFirst(),se=S.$.colSpan,le=S.$.rowSpan,ae=ae.$.rowIndex,ce=e(P,ae,S),oe=oe+se*le,te=Math.max(te,ce-Y+se);ee=Math.max(ee,ae-j+le);s||(se=S,(le=se.getBogus())&&le.remove(),se.trim(),S.getChildren().count()&&(ae==ne||!re||re.isBlockBoundary&&re.isBlockBoundary({br:1})||(ne=ie.getLast(CKEDITOR.dom.walker.whitespaces(!0)),!ne||ne.is&&ne.is("br")||ie.append("br")),S.moveChildren(ie)),o?S.remove():S.setHtml(""));ne=ae}if(s)return ee*te==oe;ie.moveChildren(i);i.appendBogus();te>=V?i.removeAttribute("rowSpan"):i.$.rowSpan=ee;ee>=$?i.removeAttribute("colSpan"):i.$.colSpan=te;s=new CKEDITOR.dom.nodeList(_.$.rows);T=s.count();for(o=T-1;0<=o;o--)_=s.getItem(o),_.$.cells.length||(_.remove(),T++);return i}function q(i,o){var s=a(i);if(1<s.length)return!1;if(o)return!0;var s=s[0],T=s.getParent(),_=T.getAscendant("table"),S=CKEDITOR.tools.buildTableMap(_),P=T.$.rowIndex,$=e(S,P,s),V=s.$.rowSpan,j;if(1<V){j=Math.ceil(V/2);for(var V=Math.floor(V/2),T=P+j,_=new CKEDITOR.dom.element(_.$.rows[T]),S=e(S,T),Y,T=s.clone(),P=0;P<S.length;P++){if(Y=S[P],Y.parentNode==_.$&&P>$){T.insertBefore(new CKEDITOR.dom.element(Y));break}Y=null}Y||_.append(T)}else for(V=j=1,_=T.clone(),_.insertAfter(T),_.append(T=s.clone()),Y=e(S,P),$=0;$<Y.length;$++)Y[$].rowSpan++;T.appendBogus();s.$.rowSpan=j;T.$.rowSpan=V;1==j&&s.removeAttribute("rowSpan");1==V&&T.removeAttribute("rowSpan");return T}function y(i,o){var s=a(i);if(1<s.length)return!1;if(o)return!0;var s=s[0],T=s.getParent(),_=T.getAscendant("table"),_=CKEDITOR.tools.buildTableMap(_),S=e(_,T.$.rowIndex,s),P=s.$.colSpan;if(1<P)T=Math.ceil(P/2),P=Math.floor(P/2);else{for(var P=T=1,$=[],V=0;V<_.length;V++){var j=_[V];$.push(j[S]);1<j[S].rowSpan&&(V+=j[S].rowSpan-1)}for(_=0;_<$.length;_++)$[_].colSpan++}_=s.clone();_.insertAfter(s);_.appendBogus();s.$.colSpan=T;_.$.colSpan=P;1==T&&s.removeAttribute("colSpan");1==P&&_.removeAttribute("colSpan");return _}var o=/^(?:td|th)$/,s=CKEDITOR.tools.isArray;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(o){function d(i){return CKEDITOR.tools.extend(i||{},{contextSensitive:1,refresh:function(i,o){this.setState(o.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function e(i,s){var T=o.addCommand(i,s);o.addFeature(T)}var s=o.lang.table,T=CKEDITOR.tools.style.parse,_="td{width} td{height} td{border-color} td{background-color} td{white-space} td{vertical-align} td{text-align} td[colspan] td[rowspan] th".split(" ");e("cellProperties",new CKEDITOR.dialogCommand("cellProperties",d({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:_,contentTransformations:[[{element:"td",left:function(i){return i.styles.background&&T.background(i.styles.background).color},right:function(i){i.styles["background-color"]=T.background(i.styles.background).color}},{element:"td",check:"td{vertical-align}",left:function(i){return i.attributes&&i.attributes.valign},right:function(i){i.styles["vertical-align"]=i.attributes.valign;delete i.attributes.valign}}],[{element:"tr",check:"td{height}",left:function(i){return i.styles&&i.styles.height},right:function(i){CKEDITOR.tools.array.forEach(i.children,(function(o){o.name in{td:1,th:1}&&(o.attributes["cke-row-height"]=i.styles.height)}));delete i.styles.height}}],[{element:"td",check:"td{height}",left:function(i){return(i=i.attributes)&&i["cke-row-height"]},right:function(i){i.styles.height=i.attributes["cke-row-height"];delete i.attributes["cke-row-height"]}}]]})));CKEDITOR.dialog.add("cellProperties",(this||i).path+"dialogs/tableCell.js");e("rowDelete",d({requiredContent:"table",exec:function(i){i=i.getSelection();(i=b(i))&&m(i)}}));e("rowInsertBefore",d({requiredContent:"table",exec:function(i){i=i.getSelection();i=a(i);f(i,!0)}}));e("rowInsertAfter",d({requiredContent:"table",exec:function(i){i=i.getSelection();i=a(i);f(i)}}));e("columnDelete",d({requiredContent:"table",exec:function(i){i=i.getSelection();(i=k(i))&&m(i,!0)}}));e("columnInsertBefore",d({requiredContent:"table",exec:function(i){i=i.getSelection();i=a(i);l(i,!0)}}));e("columnInsertAfter",d({requiredContent:"table",exec:function(i){i=i.getSelection();i=a(i);l(i)}}));e("cellDelete",d({requiredContent:"table",exec:function(i){i=i.getSelection();h(i)}}));e("cellMerge",d({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(i,o){o.cell=n(i.getSelection());m(o.cell,!0)}}));e("cellMergeRight",d({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(i,o){o.cell=n(i.getSelection(),"right");m(o.cell,!0)}}));e("cellMergeDown",d({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(i,o){o.cell=n(i.getSelection(),"down");m(o.cell,!0)}}));e("cellVerticalSplit",d({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(i){m(y(i.getSelection()))}}));e("cellHorizontalSplit",d({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(i){m(q(i.getSelection()))}}));e("cellInsertBefore",d({requiredContent:"table",exec:function(i){i=i.getSelection();g(i,!0)}}));e("cellInsertAfter",d({requiredContent:"table",exec:function(i){i=i.getSelection();g(i)}}));o.addMenuItems&&o.addMenuItems({tablecell:{label:s.cell.menu,group:"tablecell",order:1,getItems:function(){var i=o.getSelection(),s=a(i),i={tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:n(i,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:n(i,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:n(i,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:y(i,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:q(i,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};o.filter.check(_)&&(i.tablecell_properties=0<s.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);return i}},tablecell_insertBefore:{label:s.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:s.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:s.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:s.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:s.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:s.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:s.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:s.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:s.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:s.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:s.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:s.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:s.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:s.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:s.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:s.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:s.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}});o.contextMenu&&o.contextMenu.addListener((function(i,o,s){return(i=s.contains({td:1,th:1},1))&&!i.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null}))},getCellColIndex:c,insertRow:f,insertColumn:l,getSelectedCells:a};CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(i,o,s,T,_){i=i.$.rows;s=s||0;T="number"===typeof T?T:i.length-1;_="number"===typeof _?_:-1;var S=-1,P=[];for(o=o||0;o<=T;o++){S++;!P[S]&&(P[S]=[]);for(var $=-1,V=s;V<=(-1===_?i[o].cells.length-1:_);V++){var j=i[o].cells[V];if(!j)break;for($++;P[S][$];)$++;for(var Y=isNaN(j.colSpan)?1:j.colSpan,j=isNaN(j.rowSpan)?1:j.rowSpan,ee=0;ee<j&&!(o+ee>T);ee++){P[S+ee]||(P[S+ee]=[]);for(var te=0;te<Y;te++)P[S+ee][$+te]=i[o].cells[V]}$+=Y-1;if(-1!==_&&$>=_)break}}return P},function(){function a(i){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(i)}function f(i,o){var s=i.getAscendant("table"),T=o.getAscendant("table"),_=CKEDITOR.tools.buildTableMap(s),S=m(i),P=m(o),$=[],V={},j,Y;s.contains(T)&&(o=o.getAscendant({td:1,th:1}),P=m(o));S>P&&(s=S,S=P,P=s,s=i,i=o,o=s);for(s=0;s<_[S].length;s++)if(i.$===_[S][s]){j=s;break}for(s=0;s<_[P].length;s++)if(o.$===_[P][s]){Y=s;break}j>Y&&(s=j,j=Y,Y=s);for(s=S;s<=P;s++)for(S=j;S<=Y;S++)T=new CKEDITOR.dom.element(_[s][S]),T.$&&!T.getCustomData("selected_cell")&&($.push(T),CKEDITOR.dom.element.setMarker(V,T,"selected_cell",!0));CKEDITOR.dom.element.clearAllMarkers(V);return $}function b(i){if(i)return i=i.clone(),i.enlarge(CKEDITOR.ENLARGE_ELEMENT),(i=i.getEnclosedNode())&&i.is&&i.is(CKEDITOR.dtd.$tableContent)}function c(i){return(i=i.editable().findOne(".cke_table-faked-selection"))&&i.getAscendant("table")}function d(i,s){var T=i.editable().find(".cke_table-faked-selection"),_=i.editable().findOne("[data-cke-table-faked-selection-table]"),S;i.fire("lockSnapshot");i.editable().removeClass("cke_table-faked-selection-editor");for(S=0;S<T.count();S++)T.getItem(S).removeClass("cke_table-faked-selection");_&&_.data("cke-table-faked-selection-table",!1);i.fire("unlockSnapshot");s&&(o={active:!1},i.getSelection().isInTable()&&i.getSelection().reset())}function l(i,o){var s=[],T,_;for(_=0;_<o.length;_++)T=i.createRange(),T.setStartBefore(o[_]),T.setEndAfter(o[_]),s.push(T);i.getSelection().selectRanges(s)}function k(i){var o=i.editable().find(".cke_table-faked-selection");1>o.count()||(o=f(o.getItem(0),o.getItem(o.count()-1)),l(i,o))}function g(i,s,_){var S=T(i.getSelection(!0));s=s.is("table")?null:s;var P;(P=o.active&&!o.first)&&!(P=s)&&(P=i.getSelection().getRanges(),P=!!(1<S.length||P[0]&&!P[0].collapsed));if(P)o.first=s||S[0],o.dirty=!s&&1!==S.length;else if(o.active&&s&&o.first.getAscendant("table").equals(s.getAscendant("table"))){S=f(o.first,s);if(!o.dirty&&1===S.length&&!a(_.data.getTarget()))return d(i,"mouseup"===_.name);o.dirty=!0;o.last=s;l(i,S)}}function h(i){var o=(i=i.editor||i.sender.editor)&&i.getSelection(),s=o&&o.getRanges()||[],_=s&&s[0].getEnclosedNode(),_=_&&_.type==CKEDITOR.NODE_ELEMENT&&_.is("img"),S;if(o&&(d(i),o.isInTable()&&o.isFake))if(_)i.getSelection().reset();else if(!s[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored")){1===s.length&&s[0]._getTableElement()&&s[0]._getTableElement().is("table")&&(S=s[0]._getTableElement());S=T(o,S);i.fire("lockSnapshot");for(o=0;o<S.length;o++)S[o].addClass("cke_table-faked-selection");0<S.length&&(i.editable().addClass("cke_table-faked-selection-editor"),S[0].getAscendant("table").data("cke-table-faked-selection-table",""));i.fire("unlockSnapshot")}}function m(i){return i.getAscendant("tr",!0).$.rowIndex}function e(i){function f(i,o){return!(!i||!o)&&(i.equals(o)||i.contains(o)||o.contains(i)||i.getCommonAncestor(o).is($))}function h(i){return!i.getAscendant("table",!0)&&i.getDocument().equals(s.document)}function l(i,o,s,T){if("mousedown"===i.name&&(CKEDITOR.tools.getMouseButton(i)===CKEDITOR.MOUSE_BUTTON_LEFT||!T))return!0;(o=i.name===(CKEDITOR.env.gecko?"mousedown":"mouseup")&&!h(i.data.getTarget()))&&(i=i.data.getTarget().getAscendant({td:1,th:1},!0),o=!(i&&i.hasClass("cke_table-faked-selection")));return o}if(i.data.getTarget().getName&&("mouseup"===i.name||!a(i.data.getTarget()))){var s=i.editor||i.listenerData.editor,T=s.getSelection(1),_=c(s),S=i.data.getTarget(),P=S&&S.getAscendant({td:1,th:1},!0),S=S&&S.getAscendant("table",!0),$={table:1,thead:1,tbody:1,tfoot:1,tr:1,td:1,th:1};S&&S.hasAttribute("data-cke-tableselection-ignored")||(l(i,T,_,S)&&d(s,!0),!o.active&&"mousedown"===i.name&&CKEDITOR.tools.getMouseButton(i)===CKEDITOR.MOUSE_BUTTON_LEFT&&S&&(o={active:!0},CKEDITOR.document.on("mouseup",e,null,{editor:s})),(P||S)&&g(s,P||S,i),"mouseup"===i.name&&(CKEDITOR.tools.getMouseButton(i)===CKEDITOR.MOUSE_BUTTON_LEFT&&(h(i.data.getTarget())||f(_,S))&&k(s),o={active:!1},CKEDITOR.document.removeListener("mouseup",e)))}}function n(i){var o=i.data.getTarget().getAscendant("table",!0);o&&o.hasAttribute("data-cke-tableselection-ignored")||(o=i.data.getTarget().getAscendant({td:1,th:1},!0))&&!o.hasClass("cke_table-faked-selection")&&(i.cancel(),i.data.preventDefault())}function q(i,o){function c(i){i.cancel()}var s=i.getSelection(),T=s.createBookmarks(),_=i.document,S=i.createRange(),P=_.getDocumentElement().$,$=CKEDITOR.env.ie&&9>CKEDITOR.env.version,V=i.blockless||CKEDITOR.env.ie?"span":"div",j,Y,ee,te;_.getById("cke_table_copybin")||(j=_.createElement(V),Y=_.createElement(V),Y.setAttributes({id:"cke_table_copybin","data-cke-temp":"1"}),j.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),j.setStyle("ltr"==i.config.contentsLangDirection?"left":"right","-5000px"),j.setHtml(i.getSelectedHtml(!0)),i.fire("lockSnapshot"),Y.append(j),i.editable().append(Y),te=i.on("selectionChange",c,null,null,0),$&&(ee=P.scrollTop),S.selectNodeContents(j),S.select(),$&&(P.scrollTop=ee),setTimeout((function(){Y.remove();s.selectBookmarks(T);te.removeListener();i.fire("unlockSnapshot");o&&(i.extractSelectedHtml(),i.fire("saveSnapshot"))}),100))}function y(i){var o=i.editor||i.sender.editor,s=o.getSelection();s.isInTable()&&(s.getRanges()[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored")||q(o,"cut"===i.name))}function u(i){this._reset();i&&this.setSelectedCells(i)}function p(i,o,s){i.on("beforeCommandExec",(function(s){-1!==CKEDITOR.tools.array.indexOf(o,s.data.name)&&(s.data.selectedCells=T(i.getSelection()))}));i.on("afterCommandExec",(function(T){-1!==CKEDITOR.tools.array.indexOf(o,T.data.name)&&s(i,T.data)}))}var o={active:!1},s,T,_,S,P;u.prototype={};u.prototype._reset=function(){(this||i).cells={first:null,last:null,all:[]};(this||i).rows={first:null,last:null}};u.prototype.setSelectedCells=function(o){this._reset();o=o.slice(0);this._arraySortByDOMOrder(o);(this||i).cells.all=o;(this||i).cells.first=o[0];(this||i).cells.last=o[o.length-1];(this||i).rows.first=o[0].getAscendant("tr");(this||i).rows.last=(this||i).cells.last.getAscendant("tr")};u.prototype.getTableMap=function(){var o=_((this||i).cells.first),s;e:{s=(this||i).cells.last;var T=s.getAscendant("table"),S=m(s),T=CKEDITOR.tools.buildTableMap(T),P;for(P=0;P<T[S].length;P++)if(new CKEDITOR.dom.element(T[S][P]).equals(s)){s=P;break e}s=void 0}return CKEDITOR.tools.buildTableMap(this._getTable(),m((this||i).rows.first),o,m((this||i).rows.last),s)};u.prototype._getTable=function(){return(this||i).rows.first.getAscendant("table")};u.prototype.insertRow=function(o,s,T){if("undefined"===typeof o)o=1;else if(0>=o)return;for(var _=(this||i).cells.first.$.cellIndex,P=(this||i).cells.last.$.cellIndex,$=T?[]:(this||i).cells.all,V,j=0;j<o;j++)V=S(T?(this||i).cells.all:$,s),V=CKEDITOR.tools.array.filter(V.find("td, th").toArray(),(function(i){return!!T||i.$.cellIndex>=_&&i.$.cellIndex<=P})),$=s?V.concat($):$.concat(V);this.setSelectedCells($)};u.prototype.insertColumn=function(o){function b(i){i=m(i);return i>=_&&i<=S}if("undefined"===typeof o)o=1;else if(0>=o)return;for(var s=(this||i).cells,T=s.all,_=m(s.first),S=m(s.last),s=0;s<o;s++)T=T.concat(CKEDITOR.tools.array.filter(P(T),b));this.setSelectedCells(T)};u.prototype.emptyCells=function(o){o=o||(this||i).cells.all;for(var s=0;s<o.length;s++)o[s].setHtml("")};u.prototype._arraySortByDOMOrder=function(i){i.sort((function(i,o){return i.getPosition(o)&CKEDITOR.POSITION_PRECEDING?-1:1}))};var $={onPaste:function(i){function c(i){return Math.max.apply(null,CKEDITOR.tools.array.map(i,(function(i){return i.length}),0))}function d(i){var s=o.createRange();s.selectNodeContents(i);s.select()}var o=i.editor,s=o.getSelection(),_=s.getRanges(),_=_.length&&_[0]._getTableElement({table:1});if(!_||!_.hasAttribute("data-cke-tableselection-ignored")){var S=T(s),_=this.findTableInPastedContent(o,i.data.dataValue),P=s.isInTable(!0)&&this.isBoundarySelection(s),$,V;!S.length||1===S.length&&!b(s.getRanges()[0])&&!P||P&&!_||(S=S[0].getAscendant("table"),$=new u(T(s,S)),o.once("afterPaste",(function(){var i;if(V){i=new CKEDITOR.dom.element(V[0][0]);var s=V[V.length-1];i=f(i,new CKEDITOR.dom.element(s[s.length-1]))}else i=$.cells.all;l(o,i)})),_?(i.stop(),P?($.insertRow(1,1===P,!0),s.selectElement($.rows.first)):($.emptyCells(),l(o,$.cells.all)),i=$.getTableMap(),V=CKEDITOR.tools.buildTableMap(_),$.insertRow(V.length-i.length),$.insertColumn(c(V)-c(i)),i=$.getTableMap(),this.pasteTable($,i,V),o.fire("saveSnapshot"),setTimeout((function(){o.fire("afterPaste")}),0)):(d($.cells.first),o.once("afterPaste",(function(){o.fire("lockSnapshot");$.emptyCells($.cells.all.slice(1));l(o,$.cells.all);o.fire("unlockSnapshot")}))))}},isBoundarySelection:function(i){i=i.getRanges()[0];var o=i.endContainer.getAscendant("tr",!0);if(o&&i.collapsed){if(i.checkBoundaryOfElement(o,CKEDITOR.START))return 1;if(i.checkBoundaryOfElement(o,CKEDITOR.END))return 2}return 0},findTableInPastedContent:function(i,o){var s=i.dataProcessor,T=new CKEDITOR.dom.element("body");s||(s=new CKEDITOR.htmlDataProcessor(i));T.setHtml(s.toHtml(o),{fixForBody:!1});return 1<T.getChildCount()?null:T.findOne("table")},pasteTable:function(i,o,s){var T,S=_(i.cells.first),P=i._getTable(),$={},V,j,Y,ee;for(Y=0;Y<s.length;Y++)for(V=new CKEDITOR.dom.element(P.$.rows[i.rows.first.$.rowIndex+Y]),ee=0;ee<s[Y].length;ee++)if(j=new CKEDITOR.dom.element(s[Y][ee]),T=o[Y]&&o[Y][ee]?new CKEDITOR.dom.element(o[Y][ee]):null,j&&!j.getCustomData("processed")){T&&T.getParent()?j.replace(T):(0===ee||s[Y][ee-1])&&((T=0!==ee?new CKEDITOR.dom.element(s[Y][ee-1]):null)&&V.equals(T.getParent())?j.insertAfter(T):0<S?V.$.cells[S]?j.insertAfter(new CKEDITOR.dom.element(V.$.cells[S])):V.append(j):V.append(j,!0));CKEDITOR.dom.element.setMarker($,j,"processed",!0)}else j.getCustomData("processed")&&T&&T.remove();CKEDITOR.dom.element.clearAllMarkers($)}};CKEDITOR.plugins.tableselection={getCellsBetween:f,keyboardIntegration:function(i){function b(i){var o=i.getEnclosedNode();o&&"function"===typeof o.is&&o.is({td:1,th:1})?o.setText(""):i.deleteContents();CKEDITOR.tools.array.forEach(i._find("td"),(function(i){i.appendBogus()}))}var o=i.editable();o.attachListener(o,"keydown",function(i){function c(o,T){if(!T.length)return null;var _=i.createRange(),S=CKEDITOR.dom.range.mergeRanges(T);CKEDITOR.tools.array.forEach(S,(function(i){i.enlarge(CKEDITOR.ENLARGE_ELEMENT)}));var P=S[0].getBoundaryNodes(),$=P.startNode,P=P.endNode;if($&&$.is&&$.is(s)){for(var V=$.getAscendant("table",!0),j=$.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,V),Y=!1,p=function(i){return!$.contains(i)&&i.is&&i.is("td","th")};j&&!p(j);)j=j.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,V);!j&&P&&P.is&&!P.is("table")&&P.getNext()&&(j=P.getNext().findOne("td, th"),Y=!0);j?_["moveToElementEdit"+(Y?"Start":"End")](j):(_.setStartBefore($.getAscendant("table",!0)),_.collapse(!0));S[0].deleteContents();return[_]}return $?(_.moveToElementEditablePosition($),[_]):void 0}var o={37:1,38:1,39:1,40:1,8:1,46:1,13:1},s=CKEDITOR.tools.extend({table:1},CKEDITOR.dtd.$tableContent);delete s.td;delete s.th;return function(s){var T=s.data.getKey(),_=s.data.getKeystroke(),S,P=37===T||38==T,$,V,j;if(o[T]&&!i.readOnly&&(S=i.getSelection())&&S.isInTable()&&S.isFake){$=S.getRanges();V=$[0]._getTableElement();j=$[$.length-1]._getTableElement();(13!==T||i.plugins.enterkey)&&(s.data.preventDefault(),s.cancel());if(36<T&&41>T)$[0].moveToElementEditablePosition(P?V:j,!P),S.selectRanges([$[0]]);else if(13!==T||13===_||_===CKEDITOR.SHIFT+13){for(s=0;s<$.length;s++)b($[s]);(s=c(V,$))?$=s:$[0].moveToElementEditablePosition(V);S.selectRanges($);13===T&&i.plugins.enterkey?(i.fire("lockSnapshot"),13===_?i.execCommand("enter"):i.execCommand("shiftEnter"),i.fire("unlockSnapshot"),i.fire("saveSnapshot")):13!==T&&i.fire("saveSnapshot")}}}}(i),null,null,-1);o.attachListener(o,"keypress",(function(o){var s=i.getSelection(),T=o.data.$.charCode||13===o.data.getKey(),_;if(!i.readOnly&&s&&s.isInTable()&&s.isFake&&T&&!(o.data.getKeystroke()&CKEDITOR.CTRL)){o=s.getRanges();T=o[0].getEnclosedNode().getAscendant({td:1,th:1},!0);for(_=0;_<o.length;_++)b(o[_]);T&&(o[0].moveToElementEditablePosition(T),s.selectRanges([o[0]]))}}),null,null,-1)}};CKEDITOR.plugins.add("tableselection",{requires:"clipboard,tabletools",isSupportedEnvironment:function(){return!(CKEDITOR.env.ie&&11>CKEDITOR.env.version)},onLoad:function(){s=CKEDITOR.plugins.tabletools;T=s.getSelectedCells;_=s.getCellColIndex;S=s.insertRow;P=s.insertColumn;CKEDITOR.document.appendStyleSheet((this||i).path+"styles/tableselection.css")},init:function(o){this.isSupportedEnvironment()&&(o.addContentsCss&&o.addContentsCss((this||i).path+"styles/tableselection.css"),o.on("contentDom",(function(){var i=o.editable(),s=i.isInline()?i:o.document,T={editor:o};i.attachListener(s,"mousedown",e,null,T);i.attachListener(s,"mousemove",e,null,T);i.attachListener(s,"mouseup",e,null,T);i.attachListener(i,"dragstart",n);i.attachListener(o,"selectionCheck",h);CKEDITOR.plugins.tableselection.keyboardIntegration(o);CKEDITOR.plugins.clipboard&&!CKEDITOR.plugins.clipboard.isCustomCopyCutSupported&&(i.attachListener(i,"cut",y),i.attachListener(i,"copy",y))})),o.on("paste",$.onPaste,$),p(o,"rowInsertBefore rowInsertAfter columnInsertBefore columnInsertAfter cellInsertBefore cellInsertAfter".split(" "),(function(i,o){l(i,o.selectedCells)})),p(o,["cellMerge","cellMergeRight","cellMergeDown"],(function(i,o){l(i,[o.commandData.cell])})),p(o,["cellDelete"],(function(i){d(i,!0)})))}})}(),"use strict",function(){var o=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],s={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(i){function d(i){s.enabled&&!1!==i.data.command.canUndo&&s.save()}function f(){s.enabled=!i.readOnly&&"wysiwyg"==i.mode;s.onChange()}var s=i.undoManager=new T(i),_=s.editingHandler=new P(s),S=i.addCommand("undo",{exec:function(){s.undo()&&(i.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),$=i.addCommand("redo",{exec:function(){s.redo()&&(i.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});i.setKeystroke([[o[0],"undo"],[o[1],"redo"],[o[2],"redo"]]);s.onChange=function(){S.setState(s.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);$.setState(s.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)};i.on("beforeCommandExec",d);i.on("afterCommandExec",d);i.on("saveSnapshot",(function(i){s.save(i.data&&i.data.contentOnly)}));i.on("contentDom",_.attachListeners,_);i.on("instanceReady",(function(){i.fire("saveSnapshot")}));i.on("beforeModeUnload",(function(){"wysiwyg"==i.mode&&s.save(!0)}));i.on("mode",f);i.on("readOnly",f);i.ui.addButton&&(i.ui.addButton("Undo",{label:i.lang.undo.undo,command:"undo",toolbar:"undo,10"}),i.ui.addButton("Redo",{label:i.lang.undo.redo,command:"redo",toolbar:"undo,20"}));i.resetUndo=function(){s.reset();i.fire("saveSnapshot")};i.on("updateSnapshot",(function(){s.currentImage&&s.update()}));i.on("lockSnapshot",(function(i){i=i.data;s.lock(i&&i.dontUpdate,i&&i.forceUpdate)}));i.on("unlockSnapshot",s.unlock,s)}});CKEDITOR.plugins.undo={};var T=CKEDITOR.plugins.undo.UndoManager=function(o){(this||i).strokesRecorded=[0,0];(this||i).locked=null;(this||i).previousKeyGroup=-1;(this||i).limit=o.config.undoStackSize||20;(this||i).strokesLimit=25;(this||i).editor=o;this.reset()};T.prototype={type:function(o,s){var _=T.getKeyGroup(o),S=(this||i).strokesRecorded[_]+1;s=s||S>=(this||i).strokesLimit;(this||i).typing||((this||i).hasUndo=(this||i).typing=!0,(this||i).hasRedo=!1,this.onChange());s?(S=0,(this||i).editor.fire("saveSnapshot")):(this||i).editor.fire("change");(this||i).strokesRecorded[_]=S;(this||i).previousKeyGroup=_},keyGroupChanged:function(o){return T.getKeyGroup(o)!=(this||i).previousKeyGroup},reset:function(){(this||i).snapshots=[];(this||i).index=-1;(this||i).currentImage=null;(this||i).hasRedo=(this||i).hasUndo=!1;(this||i).locked=null;this.resetType()},resetType:function(){(this||i).strokesRecorded=[0,0];(this||i).typing=!1;(this||i).previousKeyGroup=-1},refreshState:function(){(this||i).hasUndo=!!this.getNextImage(!0);(this||i).hasRedo=!!this.getNextImage(!1);this.resetType();this.onChange()},save:function(o,s,T){var S=(this||i).editor;if((this||i).locked||"ready"!=S.status||"wysiwyg"!=S.mode)return!1;var P=S.editable();if(!P||"ready"!=P.status)return!1;P=(this||i).snapshots;s||(s=new _(S));if(!1===s.contents)return!1;if((this||i).currentImage)if(s.equalsContent((this||i).currentImage)){if(o||s.equalsSelection((this||i).currentImage))return!1}else!1!==T&&S.fire("change");P.splice((this||i).index+1,P.length-(this||i).index-1);P.length==(this||i).limit&&P.shift();(this||i).index=P.push(s)-1;(this||i).currentImage=s;!1!==T&&this.refreshState();return!0},restoreImage:function(o){var s=(this||i).editor,T;o.bookmarks&&(s.focus(),T=s.getSelection());(this||i).locked={level:999};(this||i).editor.loadSnapshot(o.contents);o.bookmarks?T.selectBookmarks(o.bookmarks):CKEDITOR.env.ie&&(T=(this||i).editor.document.getBody().$.createTextRange(),T.collapse(!0),T.select());(this||i).locked=null;(this||i).index=o.index;(this||i).currentImage=(this||i).snapshots[(this||i).index];this.update();this.refreshState();s.fire("change")},getNextImage:function(o){var s=(this||i).snapshots,T=(this||i).currentImage,_;if(T)if(o){for(_=(this||i).index-1;0<=_;_--)if(o=s[_],!T.equalsContent(o))return o.index=_,o}else for(_=(this||i).index+1;_<s.length;_++)if(o=s[_],!T.equalsContent(o))return o.index=_,o;return null},redoable:function(){return(this||i).enabled&&(this||i).hasRedo},undoable:function(){return(this||i).enabled&&(this||i).hasUndo},undo:function(){if(this.undoable()){this.save(!0);var i=this.getNextImage(!0);if(i)return this.restoreImage(i),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var i=this.getNextImage(!1);if(i)return this.restoreImage(i),!0}return!1},update:function(o){if(!(this||i).locked){o||(o=new _((this||i).editor));for(var s=(this||i).index,T=(this||i).snapshots;0<s&&(this||i).currentImage.equalsContent(T[s-1]);)--s;T.splice(s,(this||i).index-s+1,o);(this||i).index=s;(this||i).currentImage=o}},updateSelection:function(o){if(!(this||i).snapshots.length)return!1;var s=(this||i).snapshots,T=s[s.length-1];return!(!T.equalsContent(o)||T.equalsSelection(o))&&((this||i).currentImage=s[s.length-1]=o,!0)},lock:function(o,s){if((this||i).locked)(this||i).locked.level++;else if(o)(this||i).locked={level:1};else{var T=null;if(s)T=!0;else{var S=new _((this||i).editor,!0);(this||i).currentImage&&(this||i).currentImage.equalsContent(S)&&(T=S)}(this||i).locked={update:T,level:1}}},unlock:function(){if((this||i).locked&&!--(this||i).locked.level){var o=(this||i).locked.update;(this||i).locked=null;if(!0===o)this.update();else if(o){var s=new _((this||i).editor,!0);o.equalsContent(s)||this.update()}}}};T.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1};T.keyGroups={PRINTABLE:0,FUNCTIONAL:1};T.isNavigationKey=function(i){return!!T.navigationKeyCodes[i]};T.getKeyGroup=function(i){var o=T.keyGroups;return s[i]?o.FUNCTIONAL:o.PRINTABLE};T.getOppositeKeyGroup=function(i){var o=T.keyGroups;return i==o.FUNCTIONAL?o.PRINTABLE:o.FUNCTIONAL};T.ieFunctionalKeysBug=function(i){return CKEDITOR.env.ie&&T.getKeyGroup(i)==T.keyGroups.FUNCTIONAL};var _=CKEDITOR.plugins.undo.Image=function(o,s){(this||i).editor=o;o.fire("beforeUndoImage");var T=o.getSnapshot();CKEDITOR.env.ie&&T&&(T=T.replace(/\s+data-cke-expando=".*?"/g,""));(this||i).contents=T;s||((this||i).bookmarks=(T=T&&o.getSelection())&&T.createBookmarks2(!0));o.fire("afterUndoImage")},S=/\b(?:href|src|name)="[^"]*?"/gi;_.prototype={equalsContent:function(o){var s=(this||i).contents;o=o.contents;CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(s=s.replace(S,""),o=o.replace(S,""));return s==o},equalsSelection:function(o){var s=(this||i).bookmarks;o=o.bookmarks;if(s||o){if(!s||!o||s.length!=o.length)return!1;for(var T=0;T<s.length;T++){var _=s[T],S=o[T];if(_.startOffset!=S.startOffset||_.endOffset!=S.endOffset||!CKEDITOR.tools.arrayCompare(_.start,S.start)||!CKEDITOR.tools.arrayCompare(_.end,S.end))return!1}}return!0}};var P=CKEDITOR.plugins.undo.NativeEditingHandler=function(o){(this||i).undoManager=o;(this||i).ignoreInputEvent=!1;(this||i).keyEventsStack=new $;(this||i).lastKeydownImage=null};P.prototype={onKeydown:function(s){var S=s.data.getKey();229!==S&&(-1<CKEDITOR.tools.indexOf(o,s.data.getKeystroke())?s.data.preventDefault():((this||i).keyEventsStack.cleanUp(s),s=(this||i).undoManager,(this||i).keyEventsStack.getLast(S)||(this||i).keyEventsStack.push(S),(this||i).lastKeydownImage=new _(s.editor),T.isNavigationKey(S)||(this||i).undoManager.keyGroupChanged(S))&&(s.strokesRecorded[0]||s.strokesRecorded[1])&&(s.save(!1,(this||i).lastKeydownImage,!1),s.resetType()))},onInput:function(){if((this||i).ignoreInputEvent)(this||i).ignoreInputEvent=!1;else{var o=(this||i).keyEventsStack.getLast();o||(o=(this||i).keyEventsStack.push(0));(this||i).keyEventsStack.increment(o.keyCode);(this||i).keyEventsStack.getTotalInputs()>=(this||i).undoManager.strokesLimit&&((this||i).undoManager.type(o.keyCode,!0),(this||i).keyEventsStack.resetInputs())}},onKeyup:function(o){var s=(this||i).undoManager;o=o.data.getKey();var S=(this||i).keyEventsStack.getTotalInputs();(this||i).keyEventsStack.remove(o);T.ieFunctionalKeysBug(o)&&(this||i).lastKeydownImage&&(this||i).lastKeydownImage.equalsContent(new _(s.editor,!0))||(0<S?s.type(o):T.isNavigationKey(o)&&this.onNavigationKey(!0))},onNavigationKey:function(o){var s=(this||i).undoManager;!o&&s.save(!0,null,!1)||s.updateSelection(new _(s.editor));s.resetType()},ignoreInputEventListener:function(){(this||i).ignoreInputEvent=!0},activateInputEventListener:function(){(this||i).ignoreInputEvent=!1},attachListeners:function(){var o=(this||i).undoManager.editor,s=o.editable(),_=this||i;s.attachListener(s,"keydown",(function(i){_.onKeydown(i);T.ieFunctionalKeysBug(i.data.getKey())&&_.onInput()}),null,null,999);s.attachListener(s,CKEDITOR.env.ie?"keypress":"input",_.onInput,_,null,999);s.attachListener(s,"keyup",_.onKeyup,_,null,999);s.attachListener(s,"paste",_.ignoreInputEventListener,_,null,999);s.attachListener(s,"drop",_.ignoreInputEventListener,_,null,999);o.on("afterPaste",_.activateInputEventListener,_,null,999);s.attachListener(s.isInline()?s:o.document.getDocumentElement(),"click",(function(){_.onNavigationKey()}),null,null,999);s.attachListener((this||i).undoManager.editor,"blur",(function(){_.keyEventsStack.remove(9)}),null,null,999)}};var $=CKEDITOR.plugins.undo.KeyEventsStack=function(){(this||i).stack=[]};$.prototype={push:function(o){o=(this||i).stack.push({keyCode:o,inputs:0});return(this||i).stack[o-1]},getLastIndex:function(o){if("number"!=typeof o)return(this||i).stack.length-1;for(var s=(this||i).stack.length;s--;)if((this||i).stack[s].keyCode==o)return s;return-1},getLast:function(o){o=this.getLastIndex(o);return-1!=o?(this||i).stack[o]:null},increment:function(i){this.getLast(i).inputs++},remove:function(o){o=this.getLastIndex(o);-1!=o&&(this||i).stack.splice(o,1)},resetInputs:function(o){if("number"==typeof o)this.getLast(o).inputs=0;else for(o=(this||i).stack.length;o--;)(this||i).stack[o].inputs=0},getTotalInputs:function(){for(var o=(this||i).stack.length,s=0;o--;)s+=(this||i).stack[o].inputs;return s},cleanUp:function(i){i=i.data.$;i.ctrlKey||i.metaKey||this.remove(17);i.shiftKey||this.remove(16);i.altKey||this.remove(18)}}}(),"use strict",function(){function a(o,s){CKEDITOR.tools.extend(this||i,{editor:o,editable:o.editable(),doc:o.document,win:o.window},s,!0);(this||i).inline=(this||i).editable.isInline();(this||i).inline||((this||i).frame=(this||i).win.getFrame());(this||i).target=(this||i)[(this||i).inline?"editable":"doc"]}function f(o,s){CKEDITOR.tools.extend(this||i,s,{editor:o},!0)}function b(T,_){var S=T.editable();CKEDITOR.tools.extend(this||i,{editor:T,editable:S,inline:S.isInline(),doc:T.document,win:T.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},_,!0);(this||i).hidden={};(this||i).visible={};(this||i).inline||((this||i).frame=(this||i).win.getFrame());this.queryViewport();var P=CKEDITOR.tools.bind((this||i).queryViewport,this||i),$=CKEDITOR.tools.bind((this||i).hideVisible,this||i),V=CKEDITOR.tools.bind((this||i).removeAll,this||i);S.attachListener((this||i).winTop,"resize",P);S.attachListener((this||i).winTop,"scroll",P);S.attachListener((this||i).winTop,"resize",$);S.attachListener((this||i).win,"scroll",$);S.attachListener((this||i).inline?S:(this||i).frame,"mouseout",(function(o){var s=o.data.$.clientX;o=o.data.$.clientY;this.queryViewport();(s<=(this||i).rect.left||s>=(this||i).rect.right||o<=(this||i).rect.top||o>=(this||i).rect.bottom)&&this.hideVisible();(0>=s||s>=(this||i).winTopPane.width||0>=o||o>=(this||i).winTopPane.height)&&this.hideVisible()}),this||i);S.attachListener(T,"resize",P);S.attachListener(T,"mode",V);T.on("destroy",V);(this||i).lineTpl=new CKEDITOR.template('<div data-cke-lineutils-line="1" class="cke_reset_all" style="{lineStyle}"><span style="{tipLeftStyle}">&nbsp;</span><span style="{tipRightStyle}">&nbsp;</span></div>').output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},s,(this||i).lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},o,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},(this||i).tipCss,(this||i).tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},o,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},(this||i).tipCss,(this||i).tipRightStyle,!0))})}function c(i){var o;(o=i&&i.type==CKEDITOR.NODE_ELEMENT)&&(o=!(T[i.getComputedStyle("float")]||T[i.getAttribute("align")]));return o&&!_[i.getComputedStyle("position")]}CKEDITOR.plugins.add("lineutils");CKEDITOR.LINEUTILS_BEFORE=1;CKEDITOR.LINEUTILS_AFTER=2;CKEDITOR.LINEUTILS_INSIDE=4;a.prototype={start:function(o){var s=this||i,T=(this||i).editor,_=(this||i).doc,S,P,$,V,j=CKEDITOR.tools.eventsBuffer(50,(function(){T.readOnly||"wysiwyg"!=T.mode||(s.relations={},(P=_.$.elementFromPoint($,V))&&P.nodeType&&(S=new CKEDITOR.dom.element(P),s.traverseSearch(S),isNaN($+V)||s.pixelSearch(S,$,V),o&&o(s.relations,$,V)))}));(this||i).listener=(this||i).editable.attachListener((this||i).target,"mousemove",(function(i){$=i.data.$.clientX;V=i.data.$.clientY;j.input()}));(this||i).editable.attachListener((this||i).inline?(this||i).editable:(this||i).frame,"mouseout",(function(){j.reset()}))},stop:function(){(this||i).listener&&(this||i).listener.removeListener()},getRange:function(){var o={};o[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START;o[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END;o[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START;return function(s){var T=(this||i).editor.createRange();T.moveToPosition((this||i).relations[s.uid].element,o[s.type]);return T}}(),store:function(){function a(i,o,s){var T=i.getUniqueId();T in s?s[T].type|=o:s[T]={element:i,type:o}}return function(o,s){var T;s&CKEDITOR.LINEUTILS_AFTER&&c(T=o.getNext())&&T.isVisible()&&(a(T,CKEDITOR.LINEUTILS_BEFORE,(this||i).relations),s^=CKEDITOR.LINEUTILS_AFTER);s&CKEDITOR.LINEUTILS_INSIDE&&c(T=o.getFirst())&&T.isVisible()&&(a(T,CKEDITOR.LINEUTILS_BEFORE,(this||i).relations),s^=CKEDITOR.LINEUTILS_INSIDE);a(o,s,(this||i).relations)}}(),traverseSearch:function(o){var s,T,_;do{if(_=o.$["data-cke-expando"],!(_&&_ in(this||i).relations)){if(o.equals((this||i).editable))break;if(c(o))for(s in(this||i).lookups)(T=(this||i).lookups[s](o))&&this.store(o,T)}}while((!o||o.type!=CKEDITOR.NODE_ELEMENT||"true"!=o.getAttribute("contenteditable"))&&(o=o.getParent()))},pixelSearch:function(){function a(s,T,_,S,P){for(var $=0,V;P(_);){_+=S;if(25==++$)break;if(V=(this||i).doc.$.elementFromPoint(T,_))if(V==s)$=0;else if(o(s,V)&&($=0,c(V=new CKEDITOR.dom.element(V))))return V}}var o=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(i,o){return i.contains(o)}:function(i,o){return!!(16&i.compareDocumentPosition(o))};return function(o,s,T){var _=(this||i).win.getViewPaneSize().height,S=a.call(this||i,o.$,s,T,-1,(function(i){return 0<i}));s=a.call(this||i,o.$,s,T,1,(function(i){return i<_}));if(S)for(this.traverseSearch(S);!S.getParent().equals(o);)S=S.getParent();if(s)for(this.traverseSearch(s);!s.getParent().equals(o);)s=s.getParent();for(;S||s;){S&&(S=S.getNext(c));if(!S||S.equals(s))break;this.traverseSearch(S);s&&(s=s.getPrevious(c));if(!s||s.equals(S))break;this.traverseSearch(s)}}}(),greedySearch:function(){(this||i).relations={};for(var o=(this||i).editable.getElementsByTag("*"),s=0,T,_,S;T=o.getItem(s++);)if(!T.equals((this||i).editable)&&T.type==CKEDITOR.NODE_ELEMENT&&(T.hasAttribute("contenteditable")||!T.isReadOnly())&&c(T)&&T.isVisible())for(S in(this||i).lookups)(_=(this||i).lookups[S](T))&&this.store(T,_);return(this||i).relations}};f.prototype={locate:function(){function a(i,o){var s=i.element[o===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();return s&&c(s)?(i.siblingRect=s.getClientRect(),o==CKEDITOR.LINEUTILS_BEFORE?(i.siblingRect.bottom+i.elementRect.top)/2:(i.elementRect.bottom+i.siblingRect.top)/2):o==CKEDITOR.LINEUTILS_BEFORE?i.elementRect.top:i.elementRect.bottom}return function(o){var s;(this||i).locations={};for(var T in o)s=o[T],s.elementRect=s.element.getClientRect(),s.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(T,CKEDITOR.LINEUTILS_BEFORE,a(s,CKEDITOR.LINEUTILS_BEFORE)),s.type&CKEDITOR.LINEUTILS_AFTER&&this.store(T,CKEDITOR.LINEUTILS_AFTER,a(s,CKEDITOR.LINEUTILS_AFTER)),s.type&CKEDITOR.LINEUTILS_INSIDE&&this.store(T,CKEDITOR.LINEUTILS_INSIDE,(s.elementRect.top+s.elementRect.bottom)/2);return(this||i).locations}}(),sort:function(){var o,s,T,_;return function(S,P){o=(this||i).locations;s=[];for(var $ in o)for(var V in o[$])if(T=Math.abs(S-o[$][V]),s.length){for(_=0;_<s.length;_++)if(T<s[_].dist){s.splice(_,0,{uid:+$,type:V,dist:T});break}_==s.length&&s.push({uid:+$,type:V,dist:T})}else s.push({uid:+$,type:V,dist:T});return"undefined"!=typeof P?s.slice(0,P):s}}(),store:function(o,s,T){(this||i).locations[o]||((this||i).locations[o]={});(this||i).locations[o][s]=T}};var o={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},s={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999};b.prototype={removeAll:function(){for(var o in(this||i).hidden)(this||i).hidden[o].remove(),delete(this||i).hidden[o];for(o in(this||i).visible)(this||i).visible[o].remove(),delete(this||i).visible[o]},hideLine:function(o){var s=o.getUniqueId();o.hide();(this||i).hidden[s]=o;delete(this||i).visible[s]},showLine:function(o){var s=o.getUniqueId();o.show();(this||i).visible[s]=o;delete(this||i).hidden[s]},hideVisible:function(){for(var o in(this||i).visible)this.hideLine((this||i).visible[o])},placeLine:function(o,s){var T,_,S;if(T=this.getStyle(o.uid,o.type)){for(S in(this||i).visible)if((this||i).visible[S].getCustomData("hash")!==(this||i).hash){_=(this||i).visible[S];break}if(!_)for(S in(this||i).hidden)if((this||i).hidden[S].getCustomData("hash")!==(this||i).hash){this.showLine(_=(this||i).hidden[S]);break}_||this.showLine(_=this.addLine());_.setCustomData("hash",(this||i).hash);(this||i).visible[_.getUniqueId()]=_;_.setStyles(T);s&&s(_)}},getStyle:function(o,s){var T=(this||i).relations[o],_=(this||i).locations[o][s],S={};S.width=T.siblingRect?Math.max(T.siblingRect.width,T.elementRect.width):T.elementRect.width;S.top=(this||i).inline?_+(this||i).winTopScroll.y-(this||i).rect.relativeY:(this||i).rect.top+(this||i).winTopScroll.y+_;if(S.top-(this||i).winTopScroll.y<(this||i).rect.top||S.top-(this||i).winTopScroll.y>(this||i).rect.bottom)return!1;(this||i).inline?S.left=T.elementRect.left-(this||i).rect.relativeX:(0<T.elementRect.left?S.left=(this||i).rect.left+T.elementRect.left:(S.width+=T.elementRect.left,S.left=(this||i).rect.left),0<(T=S.left+S.width-((this||i).rect.left+(this||i).winPane.width))&&(S.width-=T));S.left+=(this||i).winTopScroll.x;for(var P in S)S[P]=CKEDITOR.tools.cssLength(S[P]);return S},addLine:function(){var o=CKEDITOR.dom.element.createFromHtml((this||i).lineTpl);o.appendTo((this||i).container);return o},prepare:function(o,s){(this||i).relations=o;(this||i).locations=s;(this||i).hash=Math.random()},cleanup:function(){var o,s;for(s in(this||i).visible)o=(this||i).visible[s],o.getCustomData("hash")!==(this||i).hash&&this.hideLine(o)},queryViewport:function(){(this||i).winPane=(this||i).win.getViewPaneSize();(this||i).winTopScroll=(this||i).winTop.getScrollPosition();(this||i).winTopPane=(this||i).winTop.getViewPaneSize();(this||i).rect=this.getClientRect((this||i).inline?(this||i).editable:(this||i).frame)},getClientRect:function(o){o=o.getClientRect();var s=(this||i).container.getDocumentPosition(),T=(this||i).container.getComputedStyle("position");o.relativeX=o.relativeY=0;"static"!=T&&(o.relativeY=s.y,o.relativeX=s.x,o.top-=o.relativeY,o.bottom-=o.relativeY,o.left-=o.relativeX,o.right-=o.relativeX);return o}};var T={left:1,right:1,center:1},_={absolute:1,fixed:1};CKEDITOR.plugins.lineutils={finder:a,locator:f,liner:b}}(),function(){function a(i){return i.getName&&!i.hasAttribute("data-cke-temp")}CKEDITOR.plugins.add("widgetselection",{init:function(i){if(CKEDITOR.env.webkit){var o=CKEDITOR.plugins.widgetselection;i.on("contentDom",(function(i){i=i.editor;var s=i.editable();s.attachListener(s,"keydown",(function(i){i.data.getKeystroke()==CKEDITOR.CTRL+65&&CKEDITOR.tools.setTimeout((function(){o.addFillers(s)||o.removeFillers(s)}),0)}),null,null,-1);i.on("selectionCheck",(function(i){o.removeFillers(i.editor.editable())}));i.on("paste",(function(i){i.data.dataValue=o.cleanPasteData(i.data.dataValue)}));"selectall"in i.plugins&&o.addSelectAllIntegration(i)}))}}});CKEDITOR.plugins.widgetselection={startFiller:null,endFiller:null,fillerAttribute:"data-cke-filler-webkit",fillerContent:"&nbsp;",fillerTagName:"div",addFillers:function(o){var s=o.editor;if(!this.isWholeContentSelected(o)&&0<o.getChildCount()){var T=o.getFirst(a),_=o.getLast(a);T&&T.type==CKEDITOR.NODE_ELEMENT&&!T.isEditable()&&((this||i).startFiller=this.createFiller(),o.append((this||i).startFiller,1));_&&_.type==CKEDITOR.NODE_ELEMENT&&!_.isEditable()&&((this||i).endFiller=this.createFiller(!0),o.append((this||i).endFiller,0));if(this.hasFiller(o))return s=s.createRange(),s.selectNodeContents(o),s.select(),!0}return!1},removeFillers:function(o){if(this.hasFiller(o)&&!this.isWholeContentSelected(o)){var s=o.findOne((this||i).fillerTagName+"["+(this||i).fillerAttribute+"=start]"),T=o.findOne((this||i).fillerTagName+"["+(this||i).fillerAttribute+"=end]");(this||i).startFiller&&s&&(this||i).startFiller.equals(s)?this.removeFiller((this||i).startFiller,o):(this||i).startFiller=s;(this||i).endFiller&&T&&(this||i).endFiller.equals(T)?this.removeFiller((this||i).endFiller,o):(this||i).endFiller=T}},cleanPasteData:function(i){i&&i.length&&(i=i.replace(this.createFillerRegex(),"").replace(this.createFillerRegex(!0),""));return i},isWholeContentSelected:function(i){var o=i.editor.getSelection().getRanges()[0];return!(!o||o&&o.collapsed)&&(o=o.clone(),o.enlarge(CKEDITOR.ENLARGE_ELEMENT),!!(o&&i&&o.startContainer&&o.endContainer&&0===o.startOffset&&o.endOffset===i.getChildCount()&&o.startContainer.equals(i)&&o.endContainer.equals(i)))},hasFiller:function(o){return 0<o.find((this||i).fillerTagName+"["+(this||i).fillerAttribute+"]").count()},createFiller:function(o){var s=new CKEDITOR.dom.element((this||i).fillerTagName);s.setHtml((this||i).fillerContent);s.setAttribute((this||i).fillerAttribute,o?"end":"start");s.setAttribute("data-cke-temp",1);s.setStyles({display:"block",width:0,height:0,padding:0,border:0,margin:0,position:"absolute",top:0,left:"-9999px",opacity:0,overflow:"hidden"});return s},removeFiller:function(o,s){if(o){var T=s.editor,_=s.editor.getSelection().getRanges()[0].startPath(),S=T.createRange(),P,$;_.contains(o)&&(P=o.getHtml(),$=!0);_="start"==o.getAttribute((this||i).fillerAttribute);o.remove();P&&0<P.length&&P!=(this||i).fillerContent?(s.insertHtmlIntoRange(P,T.getSelection().getRanges()[0]),S.setStartAt(s.getChild(s.getChildCount()-1),CKEDITOR.POSITION_BEFORE_END),T.getSelection().selectRanges([S])):$&&(_?S.setStartAt(s.getFirst().getNext(),CKEDITOR.POSITION_AFTER_START):S.setEndAt(s.getLast().getPrevious(),CKEDITOR.POSITION_BEFORE_END),s.editor.getSelection().selectRanges([S]))}},createFillerRegex:function(i){var o=this.createFiller(i).getOuterHtml().replace(/style="[^"]*"/gi,'style="[^"]*"').replace(/>[^<]*</gi,">[^<]*<");return new RegExp((i?"":"^")+o+(i?"$":""))},addSelectAllIntegration:function(o){var s=this||i;o.editable().attachListener(o,"beforeCommandExec",(function(i){var T=o.editable();"selectAll"==i.data.name&&T&&s.addFillers(T)}),null,null,9999)}}}(),"use strict",function(){function a(o){(this||i).editor=o;(this||i).registered={};(this||i).instances={};(this||i).selected=[];(this||i).widgetHoldingFocusedEditable=(this||i).focused=null;(this||i)._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}};H(this||i);C(this||i);this.on("checkWidgets",k);(this||i).editor.on("contentDomInvalidated",(this||i).checkWidgets,this||i);B(this||i);t(this||i);x(this||i);z(this||i);A(this||i)}function f(o,s,T,_,S){var P=o.editor;CKEDITOR.tools.extend(this||i,_,{editor:P,id:s,inline:"span"==T.getParent().getName(),element:T,data:CKEDITOR.tools.extend({},"function"==typeof _.defaults?_.defaults():_.defaults),dataReady:!1,inited:!1,ready:!1,edit:f.prototype.edit,focusedEditable:null,definition:_,repository:o,draggable:!1!==_.draggable,_:{downcastFn:_.downcast&&"string"==typeof _.downcast?_.downcasts[_.downcast]:_.downcast}},!0);o.fire("instanceCreated",this||i);ha(this||i,_);(this||i).init&&this.init();(this||i).inited=!0;(o=(this||i).element.data("cke-widget-data"))&&this.setData(JSON.parse(decodeURIComponent(o)));S&&this.setData(S);(this||i).data.classes||this.setData("classes",this.getClasses());(this||i).dataReady=!0;U(this||i);this.fire("data",(this||i).data);this.isInited()&&P.editable().contains((this||i).wrapper)&&((this||i).ready=!0,this.fire("ready"))}function b(o,s,T){CKEDITOR.dom.element.call(this||i,s.$);(this||i).editor=o;(this||i)._={};s=(this||i).filter=T.filter;CKEDITOR.dtd[this.getName()].p?((this||i).enterMode=s?s.getAllowedEnterMode(o.enterMode):o.enterMode,(this||i).shiftEnterMode=s?s.getAllowedEnterMode(o.shiftEnterMode,!0):o.shiftEnterMode):(this||i).enterMode=(this||i).shiftEnterMode=CKEDITOR.ENTER_BR}function c(i,o){i.addCommand(o.name,{exec:function(i,s){function d(){i.widgets.finalizeCreation(P)}var T=i.widgets.focused;if(T&&T.name==o.name)T.edit();else if(o.insert)o.insert({editor:i,commandData:s});else if(o.template){var T="function"==typeof o.defaults?o.defaults():o.defaults,T=CKEDITOR.dom.element.createFromHtml(o.template.output(T)),_,S=i.widgets.wrapElement(T,o.name),P=new CKEDITOR.dom.documentFragment(S.getDocument());P.append(S);(_=i.widgets.initOn(T,o,s&&s.startupData))?(T=_.once("edit",(function(o){o.data.dialog?_.once("dialog",(function(o){o=o.data;var s,T;s=o.once("ok",d,null,null,20);T=o.once("cancel",(function(o){o.data&&!1===o.data.hide||i.widgets.destroy(_,!0)}));o.once("hide",(function(){s.removeListener();T.removeListener()}))})):d()}),null,null,999),_.edit(),T.removeListener()):d()}},allowedContent:o.allowedContent,requiredContent:o.requiredContent,contentForms:o.contentForms,contentTransformations:o.contentTransformations})}function d(o,s){function c(o,T){var _=s.upcast.split(","),S,P;for(P=0;P<_.length;P++)if(S=_[P],S===o.name)return s.upcasts[S].call(this||i,o,T);return!1}function d(i,s,T){var _=CKEDITOR.tools.getIndex(o._.upcasts,(function(i){return i[2]>T}));0>_&&(_=o._.upcasts.length);o._.upcasts.splice(_,0,[CKEDITOR.tools.bind(i,s),s.name,T])}var T=s.upcast,_=s.upcastPriority||10;T&&d("string"==typeof T?c:T,s,_)}function l(i,o){i.focused=null;if(o.isInited()){var s=o.editor.checkDirty();i.fire("widgetBlurred",{widget:o});o.setFocused(!1);!s&&o.editor.resetDirty()}}function k(o){o=o.data;if("wysiwyg"==(this||i).editor.mode){var s=(this||i).editor.editable(),T=(this||i).instances,_,S,P,$;if(s){for(_ in T)T[_].isReady()&&!s.contains(T[_].wrapper)&&this.destroy(T[_],!0);if(o&&o.initOnlyNew)T=this.initOnAll();else{var V=s.find(".cke_widget_wrapper"),T=[];_=0;for(S=V.count();_<S;_++){P=V.getItem(_);if($=!this.getByElement(P,!0)){e:{$=p;for(var j=P;j=j.getParent();)if($(j)){$=!0;break e}$=!1}$=!$}$&&s.contains(P)&&(P.addClass("cke_widget_new"),T.push(this.initOn(P.getFirst(f.isDomWidgetElement))))}}o&&o.focusInited&&1==T.length&&T[0].focus()}}}function g(i){if("undefined"!=typeof i.attributes&&i.attributes["data-widget"]){var o=h(i),s=m(i),T=!1;o&&o.value&&o.value.match(/^\s/g)&&(o.parent.attributes["data-cke-white-space-first"]=1,o.value=o.value.replace(/^\s/g,"&nbsp;"),T=!0);s&&s.value&&s.value.match(/\s$/g)&&(s.parent.attributes["data-cke-white-space-last"]=1,s.value=s.value.replace(/\s$/g,"&nbsp;"),T=!0);T&&(i.attributes["data-cke-widget-white-space"]=1)}}function h(i){return i.find((function(i){return 3===i.type}),!0).shift()}function m(i){return i.find((function(i){return 3===i.type}),!0).pop()}function e(o,s,T){if(!T.allowedContent&&!T.disallowedContent)return null;var _=(this||i)._.filters[o];_||((this||i)._.filters[o]=_={});o=_[s];o||(o=T.allowedContent?new CKEDITOR.filter(T.allowedContent):(this||i).editor.filter.clone(),_[s]=o,T.disallowedContent&&o.disallow(T.disallowedContent));return o}function n(i){var o=[],s=i._.upcasts,T=i._.upcastCallbacks;return{toBeWrapped:o,iterator:function(i){var _,S,P,$,V;if("data-cke-widget-wrapper"in i.attributes)return(i=i.getFirst(f.isParserWidgetElement))&&o.push([i]),!1;if("data-widget"in i.attributes)return o.push([i]),!1;if(V=s.length){if(i.attributes["data-cke-widget-upcasted"])return!1;$=0;for(_=T.length;$<_;++$)if(!1===T[$](i))return;for($=0;$<V;++$)if(_=s[$],P={},S=_[0](i,P))return S instanceof CKEDITOR.htmlParser.element&&(i=S),i.attributes["data-cke-widget-data"]=encodeURIComponent(JSON.stringify(P)),i.attributes["data-cke-widget-upcasted"]=1,o.push([i,_[1]]),!1}}}}function q(i,o){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off",class:"cke_widget_wrapper cke_widget_new cke_widget_"+(i?"inline":"block")+(o?" cke_widget_"+o:"")}}function y(i,o,s){if(i.type==CKEDITOR.NODE_ELEMENT){var T=CKEDITOR.dtd[i.name];if(T&&!T[s.name]){var T=i.split(o),_=i.parent;o=T.getIndex();i.children.length||(--o,i.remove());T.children.length||T.remove();return y(_,o,s)}}i.add(s,o)}function u(i,o){return"boolean"==typeof i.inline?i.inline:!!CKEDITOR.dtd.$inline[o]}function p(i){return i.hasAttribute("data-cke-temp")}function v(i,o,s,T){var _=i.editor;_.fire("lockSnapshot");s?(T=s.data("cke-widget-editable"),T=o.editables[T],i.widgetHoldingFocusedEditable=o,o.focusedEditable=T,s.addClass("cke_widget_editable_focused"),T.filter&&_.setActiveFilter(T.filter),_.setActiveEnterMode(T.enterMode,T.shiftEnterMode)):(T||o.focusedEditable.removeClass("cke_widget_editable_focused"),o.focusedEditable=null,i.widgetHoldingFocusedEditable=null,_.setActiveFilter(null),_.setActiveEnterMode(null,null));_.fire("unlockSnapshot")}function w(i){i.contextMenu&&i.contextMenu.addListener((function(o){if(o=i.widgets.getByElement(o,!0))return o.fire("contextMenu",{})}))}function r(i,o){return CKEDITOR.tools.trim(o)}function z(i){var o=i.editor,s=CKEDITOR.plugins.lineutils;o.on("dragstart",(function(s){var T=s.data.target;f.isDomDragHandler(T)&&(T=i.getByElement(T),s.data.dataTransfer.setData("cke/widget-id",T.id),o.focus(),T.focus())}));o.on("drop",(function(s){var T=s.data.dataTransfer,_=T.getData("cke/widget-id"),S=T.getTransferType(o),T=o.createRange();""!==_&&S===CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?s.cancel():""!==_&&S==CKEDITOR.DATA_TRANSFER_INTERNAL&&(_=i.instances[_])&&(T.setStartBefore(_.wrapper),T.setEndAfter(_.wrapper),s.data.dragRange=T,delete CKEDITOR.plugins.clipboard.dragStartContainerChildCount,delete CKEDITOR.plugins.clipboard.dragEndContainerChildCount,s.data.dataTransfer.setData("text/html",o.editable().getHtmlFromRange(T).getHtml()),o.widgets.destroy(_,!0))}));o.on("contentDom",(function(){var T=o.editable();CKEDITOR.tools.extend(i,{finder:new s.finder(o,{lookups:{default:function(o){if(!o.is(CKEDITOR.dtd.$listItem)&&o.is(CKEDITOR.dtd.$block)&&!f.isDomNestedEditable(o)&&!i._.draggedWidget.wrapper.contains(o)){var s=f.getNestedEditable(T,o);if(s){o=i._.draggedWidget;if(i.getByElement(s)==o)return;s=CKEDITOR.filter.instances[s.data("cke-filter")];o=o.requiredContent;if(s&&o&&!s.check(o))return}return CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER}}}}),locator:new s.locator(o),liner:new s.liner(o,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)}))}function t(i){var o=i.editor;o.on("contentDom",(function(){var s=o.editable(),T=s.isInline()?s:o.document,_,S;s.attachListener(T,"mousedown",(function(s){var T=s.data.getTarget();_=T instanceof CKEDITOR.dom.element?i.getByElement(T):null;S=0;_&&(_.inline&&T.type==CKEDITOR.NODE_ELEMENT&&T.hasAttribute("data-cke-widget-drag-handler")?(S=1,i.focused!=_&&o.getSelection().removeAllRanges()):f.getNestedEditable(_.wrapper,T)?_=null:(s.data.preventDefault(),CKEDITOR.env.ie||_.focus()))}));s.attachListener(T,"mouseup",(function(){S&&_&&_.wrapper&&(S=0,_.focus())}));CKEDITOR.env.ie&&s.attachListener(T,"mouseup",(function(){setTimeout((function(){_&&_.wrapper&&s.contains(_.wrapper)&&(_.focus(),_=null)}))}))}));o.on("doubleclick",(function(o){var s=i.getByElement(o.data.element);if(s&&!f.getNestedEditable(s.wrapper,o.data.element))return s.fire("doubleclick",{element:o.data.element})}),null,null,1)}function x(i){i.editor.on("key",(function(o){var s=i.focused,T=i.widgetHoldingFocusedEditable,_;s?_=s.fire("key",{keyCode:o.data.keyCode}):T&&(s=o.data.keyCode,o=T.focusedEditable,s==CKEDITOR.CTRL+65?(s=o.getBogus(),T=T.editor.createRange(),T.selectNodeContents(o),s&&T.setEndAt(s,CKEDITOR.POSITION_BEFORE_START),T.select(),_=!1):8==s||46==s?(_=T.editor.getSelection().getRanges(),T=_[0],_=!(1==_.length&&T.collapsed&&T.checkBoundaryOfElement(o,CKEDITOR[8==s?"START":"END"]))):_=void 0);return _}),null,null,1)}function A(i){function b(o){i.focused&&E(i.focused,"cut"==o.name)}var o=i.editor;o.on("contentDom",(function(){var i=o.editable();i.attachListener(i,"copy",b);i.attachListener(i,"cut",b)}))}function B(i){var o=i.editor;o.on("selectionCheck",(function(){i.fire("checkSelection")}));i.on("checkSelection",i.checkSelection,i);o.on("selectionChange",(function(s){var T=(s=f.getNestedEditable(o.editable(),s.data.selection.getStartElement()))&&i.getByElement(s),_=i.widgetHoldingFocusedEditable;_?_===T&&_.focusedEditable.equals(s)||(v(i,_,null),T&&s&&v(i,T,s)):T&&s&&v(i,T,s)}));o.on("dataReady",(function(){F(i).commit()}));o.on("blur",(function(){var o;(o=i.focused)&&l(i,o);(o=i.widgetHoldingFocusedEditable)&&v(i,o,null)}))}function C(i){var o=i.editor,s={};o.on("toDataFormat",(function(o){var T=CKEDITOR.tools.getNextNumber(),_=[];o.data.downcastingSessionId=T;s[T]=_;o.data.dataValue.forEach((function(o){var s=o.attributes,T;if("data-cke-widget-white-space"in s){T=h(o);var S=m(o);T.parent.attributes["data-cke-white-space-first"]&&(T.value=T.value.replace(/^&nbsp;/g," "));S.parent.attributes["data-cke-white-space-last"]&&(S.value=S.value.replace(/&nbsp;$/g," "))}if("data-cke-widget-id"in s)(s=i.instances[s["data-cke-widget-id"]])&&(T=o.getFirst(f.isParserWidgetElement),_.push({wrapper:o,element:T,widget:s,editables:{}}),"1"!=T.attributes["data-cke-widget-keep-attr"]&&delete T.attributes["data-widget"]);else if("data-cke-widget-editable"in s)return 0<_.length&&(_[_.length-1].editables[s["data-cke-widget-editable"]]=o),!1}),CKEDITOR.NODE_ELEMENT,!0)}),null,null,8);o.on("toDataFormat",(function(i){if(i.data.downcastingSessionId){i=s[i.data.downcastingSessionId];for(var o,T,_,S,P,$;o=i.shift();){T=o.widget;_=o.element;S=T._.downcastFn&&T._.downcastFn.call(T,_);for($ in o.editables)P=o.editables[$],delete P.attributes.contenteditable,P.setHtml(T.editables[$].getData());S||(S=_);o.wrapper.replaceWith(S)}}}),null,null,13);o.on("contentDomUnload",(function(){i.destroyAll(!0)}))}function H(i){var s=i.editor,T,_;s.on("toHtml",(function(o){var s=n(i),_;for(o.data.dataValue.forEach(s.iterator,CKEDITOR.NODE_ELEMENT,!0);_=s.toBeWrapped.pop();){var S=_[0],P=S.parent;P.type==CKEDITOR.NODE_ELEMENT&&P.attributes["data-cke-widget-wrapper"]&&P.replaceWith(S);i.wrapElement(_[0],_[1])}T=o.data.protectedWhitespaces?3==o.data.dataValue.children.length&&f.isParserWidgetWrapper(o.data.dataValue.children[1]):1==o.data.dataValue.children.length&&f.isParserWidgetWrapper(o.data.dataValue.children[0])}),null,null,8);s.on("dataReady",(function(){if(_)for(var o=s.editable().find(".cke_widget_wrapper"),T,S,P=0,$=o.count();P<$;++P)T=o.getItem(P),S=T.getFirst(f.isDomWidgetElement),S.type==CKEDITOR.NODE_ELEMENT&&S.data("widget")?(S.replace(T),i.wrapElement(S)):T.remove();_=0;i.destroyAll(!0);i.initOnAll()}));s.on("loadSnapshot",(function(o){/data-cke-widget/.test(o.data)&&(_=1);i.destroyAll(!0)}),null,null,9);s.on("paste",(function(i){i=i.data;i.dataValue=i.dataValue.replace(o,r);i.range&&(i=f.getNestedEditable(s.editable(),i.range.startContainer))&&(i=CKEDITOR.filter.instances[i.data("cke-filter")])&&s.setActiveFilter(i)}));s.on("afterInsertHtml",(function(o){o.data.intoRange?i.checkWidgets({initOnlyNew:!0}):(s.fire("lockSnapshot"),i.checkWidgets({initOnlyNew:!0,focusInited:T}),s.fire("unlockSnapshot"))}))}function F(o){var s=o.selected,T=[],_=s.slice(0),S=null;return{select:function(o){0>CKEDITOR.tools.indexOf(s,o)&&T.push(o);o=CKEDITOR.tools.indexOf(_,o);0<=o&&_.splice(o,1);return this||i},focus:function(o){S=o;return this||i},commit:function(){var i=o.focused!==S,P,$;o.editor.fire("lockSnapshot");for(i&&(P=o.focused)&&l(o,P);P=_.pop();)s.splice(CKEDITOR.tools.indexOf(s,P),1),P.isInited()&&($=P.editor.checkDirty(),P.setSelected(!1),!$&&P.editor.resetDirty());i&&S&&($=o.editor.checkDirty(),o.focused=S,o.fire("widgetFocused",{widget:S}),S.setFocused(!0),!$&&o.editor.resetDirty());for(;P=T.pop();)s.push(P),P.setSelected(!0);o.editor.fire("unlockSnapshot")}}}function I(i,o,s){var T=0;o=L(o);var _=i.data.classes||{},S;if(o){for(_=CKEDITOR.tools.clone(_);S=o.pop();)s?_[S]||(T=_[S]=1):_[S]&&(delete _[S],T=1);T&&i.setData("classes",_)}}function J(i){i.cancel()}function E(i,o){var s=i.editor,T=s.document,_=CKEDITOR.env.edge&&16<=CKEDITOR.env.version;if(!T.getById("cke_copybin")){var S=!s.blockless&&!CKEDITOR.env.ie||_?"div":"span",_=T.createElement(S),P=T.createElement(S),S=CKEDITOR.env.ie&&9>CKEDITOR.env.version;P.setAttributes({id:"cke_copybin","data-cke-temp":"1"});_.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"});_.setStyle("ltr"==s.config.contentsLangDirection?"left":"right","-5000px");var $=s.createRange();$.setStartBefore(i.wrapper);$.setEndAfter(i.wrapper);_.setHtml('<span data-cke-copybin-start="1">​</span>'+s.editable().getHtmlFromRange($).getHtml()+'<span data-cke-copybin-end="1">​</span>');s.fire("saveSnapshot");s.fire("lockSnapshot");P.append(_);s.editable().append(P);var V=s.on("selectionChange",J,null,null,0),j=i.repository.on("checkSelection",J,null,null,0);if(S)var Y=T.getDocumentElement().$,ee=Y.scrollTop;$=s.createRange();$.selectNodeContents(_);$.select();S&&(Y.scrollTop=ee);setTimeout((function(){o||i.focus();P.remove();V.removeListener();j.removeListener();s.fire("unlockSnapshot");o&&!s.readOnly&&(i.repository.del(i),s.fire("saveSnapshot"))}),100)}}function L(i){return(i=(i=i.getDefinition().attributes)&&i["class"])?i.split(/\s+/):null}function G(){var o=CKEDITOR.document.getActive(),s=(this||i).editor,T=s.editable();(T.isInline()?T:s.document.getWindow().getFrame()).equals(o)&&s.focusManager.focus(T)}function D(){CKEDITOR.env.gecko&&(this||i).editor.unlockSelection();CKEDITOR.env.webkit||((this||i).editor.forceNextSelectionCheck(),(this||i).editor.selectionChange(1))}function N(o){var s=null;o.on("data",(function(){var o=(this||i).data.classes,T;if(s!=o){for(T in s)o&&o[T]||this.removeClass(T);for(T in o)this.addClass(T);s=o}}))}function Q(o){o.on("data",(function(){if(o.wrapper){var s=(this||i).getLabel?this.getLabel():(this||i).editor.lang.widget.label.replace(/%1/,(this||i).pathName||(this||i).element.getName());o.wrapper.setAttribute("role","region");o.wrapper.setAttribute("aria-label",s)}}),null,null,9999)}function O(i){if(i.draggable){var o=i.editor,s=i.wrapper.getLast(f.isDomDragHandlerContainer),T;s?T=s.findOne("img"):(s=new CKEDITOR.dom.element("span",o.document),s.setAttributes({class:"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+o.plugins.widget.path+"images/handle.png)"}),T=new CKEDITOR.dom.element("img",o.document),T.setAttributes({class:"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:CKEDITOR.tools.transparentImageData,width:15,title:o.lang.widget.move,height:15,role:"presentation"}),i.inline&&T.setAttribute("draggable","true"),s.append(T),i.wrapper.append(s));i.wrapper.on("dragover",(function(i){i.data.preventDefault()}));i.wrapper.on("mouseenter",i.updateDragHandlerPosition,i);setTimeout((function(){i.on("data",i.updateDragHandlerPosition,i)}),50);!i.inline&&(T.on("mousedown",K,i),CKEDITOR.env.ie&&9>CKEDITOR.env.version)&&T.on("dragstart",(function(i){i.data.preventDefault(!0)}));i.dragHandlerContainer=s}}function K(o){function b(){var s;for(te.reset();s=$.pop();)s.removeListener();var T=V;s=o.sender;var _=(this||i).repository.finder,S=(this||i).repository.liner,P=(this||i).editor,j=(this||i).editor.editable();CKEDITOR.tools.isEmpty(S.visible)||(T=_.getRange(T[0]),this.focus(),P.fire("drop",{dropRange:T,target:T.startContainer}));j.removeClass("cke_widget_dragging");S.hideVisible();P.fire("dragend",{target:s})}if(CKEDITOR.tools.getMouseButton(o)===CKEDITOR.MOUSE_BUTTON_LEFT){var s=(this||i).repository.finder,T=(this||i).repository.locator,_=(this||i).repository.liner,S=(this||i).editor,P=S.editable(),$=[],V=[],j,Y;(this||i).repository._.draggedWidget=this||i;var ee=s.greedySearch(),te=CKEDITOR.tools.eventsBuffer(50,(function(){j=T.locate(ee);V=T.sort(Y,1);V.length&&(_.prepare(ee,j),_.placeLine(V[0]),_.cleanup())}));P.addClass("cke_widget_dragging");$.push(P.on("mousemove",(function(i){Y=i.data.$.clientY;te.input()})));S.fire("dragstart",{target:o.sender});$.push(S.document.once("mouseup",b,this||i));P.isInline()||$.push(CKEDITOR.document.once("mouseup",b,this||i))}}function W(i){var o,s,T=i.editables;i.editables={};if(i.editables)for(o in T)s=T[o],i.initEditable(o,"string"==typeof s?{selector:s}:s)}function R(i){if(i.mask){var o=i.wrapper.findOne(".cke_widget_mask");o||(o=new CKEDITOR.dom.element("img",i.editor.document),o.setAttributes({src:CKEDITOR.tools.transparentImageData,class:"cke_reset cke_widget_mask"}),i.wrapper.append(o));i.mask=o}}function Z(i){if(i.parts){var o={},s,T;for(T in i.parts)s=i.wrapper.findOne(i.parts[T]),o[T]=s;i.parts=o}}function ha(i,o){X(i);Z(i);W(i);R(i);O(i);N(i);Q(i);CKEDITOR.env.ie&&9>CKEDITOR.env.version&&i.wrapper.on("dragstart",(function(o){var s=o.data.getTarget();f.getNestedEditable(i,s)||i.inline&&f.isDomDragHandler(s)||o.data.preventDefault()}));i.wrapper.removeClass("cke_widget_new");i.element.addClass("cke_widget_element");i.on("key",(function(o){o=o.data.keyCode;if(13==o)i.edit();else{if(o==CKEDITOR.CTRL+67||o==CKEDITOR.CTRL+88){E(i,o==CKEDITOR.CTRL+88);return}if(o in s||CKEDITOR.CTRL&o||CKEDITOR.ALT&o)return}return!1}),null,null,999);i.on("doubleclick",(function(o){i.edit()&&o.cancel()}));o.data&&i.on("data",o.data);o.edit&&i.on("edit",o.edit)}function X(i){(i.wrapper=i.element.getParent()).setAttribute("data-cke-widget-id",i.id)}function U(i){i.element.data("cke-widget-data",encodeURIComponent(JSON.stringify(i.data)))}function ba(){function a(){}function b(o,s,T){return!(!T||!this.checkElement(o))&&((o=T.widgets.getByElement(o,!0))&&o.checkStyleActive(this||i))}function c(i){function b(i,o,s){for(var T=i.length,_=0;_<T;){if(o.call(s,i[_],_,i))return i[_];_++}}function e(i){function b(i,o){var s=CKEDITOR.tools.object.keys(i),T=CKEDITOR.tools.object.keys(o);if(s.length!==T.length)return!1;for(var _ in i)if(("object"!==typeof i[_]||"object"!==typeof o[_]||!b(i[_],o[_]))&&i[_]!==o[_])return!1;return!0}return function(o){return b(i.getDefinition(),o.getDefinition())}}var s=i.widget,T;o[s]||(o[s]={});for(var _=0,S=i.group.length;_<S;_++)T=i.group[_],o[s][T]||(o[s][T]=[]),T=o[s][T],b(T,e(i))||T.push(i)}var o={};CKEDITOR.style.addCustomHandler({type:"widget",setup:function(o){(this||i).widget=o.widget;((this||i).group="string"==typeof o.group?[o.group]:o.group)&&c(this||i)},apply:function(o){var s;o instanceof CKEDITOR.editor&&this.checkApplicable(o.elementPath(),o)&&(s=o.widgets.focused,(this||i).group&&this.removeStylesFromSameGroup(o),s.applyStyle(this||i))},remove:function(o){o instanceof CKEDITOR.editor&&this.checkApplicable(o.elementPath(),o)&&o.widgets.focused.removeStyle(this||i)},removeStylesFromSameGroup:function(s){var T,_,S=!1;if(!(s instanceof CKEDITOR.editor))return!1;_=s.elementPath();if(this.checkApplicable(_,s))for(var P=0,$=(this||i).group.length;P<$;P++){T=o[(this||i).widget][(this||i).group[P]];for(var V=0;V<T.length;V++)T[V]!==(this||i)&&T[V].checkActive(_,s)&&(s.widgets.focused.removeStyle(T[V]),S=!0)}return S},checkActive:function(i,o){return this.checkElementMatch(i.lastElement,0,o)},checkApplicable:function(i,o){return o instanceof CKEDITOR.editor&&this.checkElement(i.lastElement)},checkElementMatch:b,checkElementRemovable:b,checkElement:function(o){return!!f.isDomWidgetWrapper(o)&&((o=o.getFirst(f.isDomWidgetElement))&&o.data("widget")==(this||i).widget)},buildPreview:function(o){return o||(this||i)._.definition.name},toAllowedContentRules:function(o){if(!o)return null;o=o.widgets.registered[(this||i).widget];var s,T={};if(!o)return null;if(o.styleableElements){s=this.getClassesArray();if(!s)return null;T[o.styleableElements]={classes:s,propertiesOnly:!0};return T}return o.styleToAllowedContentRules?o.styleToAllowedContentRules(this||i):null},getClassesArray:function(){var o=(this||i)._.definition.attributes&&(this||i)._.definition.attributes["class"];return o?CKEDITOR.tools.trim(o).split(/\s+/):null},applyToRange:a,removeFromRange:a,applyToObject:a})}CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard,widgetselection",onLoad:function(){void 0!==CKEDITOR.document.$.querySelectorAll&&(CKEDITOR.addCss(".cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover>.cke_widget_element{outline:2px solid #ffd25c;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid #ffd25c}.cke_widget_wrapper.cke_widget_focused>.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #47a4f5}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:15px;height:0;display:none;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover>.cke_widget_drag_handler_container{height:15px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}img.cke_widget_drag_handler{cursor:move;width:15px;height:15px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}"),ba())},beforeInit:function(i){void 0!==CKEDITOR.document.$.querySelectorAll&&(i.widgets=new a(i))},afterInit:function(i){if(void 0!==CKEDITOR.document.$.querySelectorAll){var o=i.widgets.registered,s,T,_;for(T in o)s=o[T],(_=s.button)&&i.ui.addButton&&i.ui.addButton(CKEDITOR.tools.capitalize(s.name,!0),{label:_,command:s.name,toolbar:"insert,10"});w(i)}}});a.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(o,s){s=CKEDITOR.tools.prototypedCopy(s);s.name=o;s._=s._||{};(this||i).editor.fire("widgetDefinition",s);s.template&&(s.template=new CKEDITOR.template(s.template));c((this||i).editor,s);d(this||i,s);return(this||i).registered[o]=s},addUpcastCallback:function(o){(this||i)._.upcastCallbacks.push(o)},checkSelection:function(){var o=(this||i).editor.getSelection(),s=o.getSelectedElement(),T=F(this||i),_;if(s&&(_=this.getByElement(s,!0)))return T.focus(_).select(_).commit();o=o.getRanges()[0];if(!o||o.collapsed)return T.commit();o=new CKEDITOR.dom.walker(o);for(o.evaluator=f.isDomWidgetWrapper;s=o.next();)T.select(this.getByElement(s));T.commit()},checkWidgets:function(i){this.fire("checkWidgets",CKEDITOR.tools.copy(i||{}))},del:function(o){if((this||i).focused===o){var s=o.editor,T=s.createRange(),_;(_=T.moveToClosestEditablePosition(o.wrapper,!0))||(_=T.moveToClosestEditablePosition(o.wrapper,!1));_&&s.getSelection().selectRanges([T])}o.wrapper.remove();this.destroy(o,!0)},destroy:function(o,s){(this||i).widgetHoldingFocusedEditable===o&&v(this||i,o,null,s);o.destroy(s);delete(this||i).instances[o.id];this.fire("instanceDestroyed",o)},destroyAll:function(o,s){var T,_,S=(this||i).instances;if(s&&!o){_=s.find(".cke_widget_wrapper");for(var S=_.count(),P=0;P<S;++P)(T=this.getByElement(_.getItem(P),!0))&&this.destroy(T)}else for(_ in S)T=S[_],this.destroy(T,o)},finalizeCreation:function(o){(o=o.getFirst())&&f.isDomWidgetWrapper(o)&&((this||i).editor.insertElement(o),o=this.getByElement(o),o.ready=!0,o.fire("ready"),o.focus())},getByElement:function(){function a(i){return i.is(o)&&i.data("cke-widget-id")}var o={div:1,span:1};return function(o,s){if(!o)return null;var T=a(o);if(!s&&!T){var _=(this||i).editor.editable();do{o=o.getParent()}while(o&&!o.equals(_)&&!(T=a(o)))}return(this||i).instances[T]||null}}(),initOn:function(o,s,T){s?"string"==typeof s&&(s=(this||i).registered[s]):s=(this||i).registered[o.data("widget")];if(!s)return null;var _=this.wrapElement(o,s.name);return _?_.hasClass("cke_widget_new")?(o=new f(this||i,(this||i)._.nextId++,o,s,T),o.isInited()?(this||i).instances[o.id]=o:null):this.getByElement(o):null},initOnAll:function(o){o=(o||(this||i).editor.editable()).find(".cke_widget_new");for(var s=[],T,_=o.count();_--;)(T=this.initOn(o.getItem(_).getFirst(f.isDomWidgetElement)))&&s.push(T);return s},onWidget:function(o){var s=Array.prototype.slice.call(arguments);s.shift();for(var T in(this||i).instances){var _=(this||i).instances[T];_.name==o&&_.on.apply(_,s)}this.on("instanceCreated",(function(i){i=i.data;i.name==o&&i.on.apply(i,s)}))},parseElementClasses:function(i){if(!i)return null;i=CKEDITOR.tools.trim(i).split(/\s+/);for(var o,s={},T=0;o=i.pop();)-1==o.indexOf("cke_")&&(s[o]=T=1);return T?s:null},wrapElement:function(o,s){var T=null,_,S;if(o instanceof CKEDITOR.dom.element){s=s||o.data("widget");_=(this||i).registered[s];if(!_)return null;if((T=o.getParent())&&T.type==CKEDITOR.NODE_ELEMENT&&T.data("cke-widget-wrapper"))return T;o.hasAttribute("data-cke-widget-keep-attr")||o.data("cke-widget-keep-attr",o.data("widget")?1:0);o.data("widget",s);(S=u(_,o.getName()))&&g(o);T=new CKEDITOR.dom.element(S?"span":"div");T.setAttributes(q(S,s));T.data("cke-display-name",_.pathName?_.pathName:o.getName());o.getParent(!0)&&T.replace(o);o.appendTo(T)}else if(o instanceof CKEDITOR.htmlParser.element){s=s||o.attributes["data-widget"];_=(this||i).registered[s];if(!_)return null;if((T=o.parent)&&T.type==CKEDITOR.NODE_ELEMENT&&T.attributes["data-cke-widget-wrapper"])return T;"data-cke-widget-keep-attr"in o.attributes||(o.attributes["data-cke-widget-keep-attr"]=o.attributes["data-widget"]?1:0);s&&(o.attributes["data-widget"]=s);(S=u(_,o.name))&&g(o);T=new CKEDITOR.htmlParser.element(S?"span":"div",q(S,s));T.attributes["data-cke-display-name"]=_.pathName?_.pathName:o.name;_=o.parent;var P;_&&(P=o.getIndex(),o.remove());T.add(o);_&&y(_,P,T)}return T},_tests_createEditableFilter:e};CKEDITOR.event.implementOn(a.prototype);f.prototype={addClass:function(o){(this||i).element.addClass(o);(this||i).wrapper.addClass(f.WRAPPER_CLASS_PREFIX+o)},applyStyle:function(o){I(this||i,o,1)},checkStyleActive:function(i){i=L(i);var o;if(!i)return!1;for(;o=i.pop();)if(!this.hasClass(o))return!1;return!0},destroy:function(o){this.fire("destroy");if((this||i).editables)for(var s in(this||i).editables)this.destroyEditable(s,o);o||("0"==(this||i).element.data("cke-widget-keep-attr")&&(this||i).element.removeAttribute("data-widget"),(this||i).element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),(this||i).element.removeClass("cke_widget_element"),(this||i).element.replace((this||i).wrapper));(this||i).wrapper=null},destroyEditable:function(o,s){var T=(this||i).editables[o],_=!0;T.removeListener("focus",D);T.removeListener("blur",G);(this||i).editor.focusManager.remove(T);if(T.filter){for(var S in(this||i).repository.instances){var P=(this||i).repository.instances[S];P.editables&&(P=P.editables[o])&&P!==T&&T.filter===P.filter&&(_=!1)}_&&(T.filter.destroy(),(_=(this||i).repository._.filters[(this||i).name])&&delete _[o])}s||((this||i).repository.destroyAll(!1,T),T.removeClass("cke_widget_editable"),T.removeClass("cke_widget_editable_focused"),T.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"]));delete(this||i).editables[o]},edit:function(){var o={dialog:(this||i).dialog},s=this||i;if(!1===this.fire("edit",o)||!o.dialog)return!1;(this||i).editor.openDialog(o.dialog,(function(i){var o,T;!1!==s.fire("dialog",i)&&(o=i.on("show",(function(){i.setupContent(s)})),T=i.on("ok",(function(){var o,T=s.on("data",(function(i){o=1;i.cancel()}),null,null,0);s.editor.fire("saveSnapshot");i.commitContent(s);T.removeListener();o&&(s.fire("data",s.data),s.editor.fire("saveSnapshot"))})),i.once("hide",(function(){o.removeListener();T.removeListener()})))}));return!0},getClasses:function(){return(this||i).repository.parseElementClasses((this||i).element.getAttribute("class"))},hasClass:function(o){return(this||i).element.hasClass(o)},initEditable:function(o,s){var T=this._findOneNotNested(s.selector);return!(!T||!T.is(CKEDITOR.dtd.$editable))&&(T=new b((this||i).editor,T,{filter:e.call((this||i).repository,(this||i).name,o,s)}),(this||i).editables[o]=T,T.setAttributes({contenteditable:"true","data-cke-widget-editable":o,"data-cke-enter-mode":T.enterMode}),T.filter&&T.data("cke-filter",T.filter.id),T.addClass("cke_widget_editable"),T.removeClass("cke_widget_editable_focused"),s.pathName&&T.data("cke-display-name",s.pathName),(this||i).editor.focusManager.add(T),T.on("focus",D,this||i),CKEDITOR.env.ie&&T.on("blur",G,this||i),T._.initialSetData=!0,T.setData(T.getHtml()),!0)},_findOneNotNested:function(o){o=(this||i).wrapper.find(o);for(var s,T,_=0;_<o.count();_++)if(s=o.getItem(_),T=s.getAscendant(f.isDomWidgetWrapper),(this||i).wrapper.equals(T))return s;return null},isInited:function(){return!(!(this||i).wrapper||!(this||i).inited)},isReady:function(){return this.isInited()&&(this||i).ready},focus:function(){var o=(this||i).editor.getSelection();if(o){var s=(this||i).editor.checkDirty();o.fake((this||i).wrapper);!s&&(this||i).editor.resetDirty()}(this||i).editor.focus()},removeClass:function(o){(this||i).element.removeClass(o);(this||i).wrapper.removeClass(f.WRAPPER_CLASS_PREFIX+o)},removeStyle:function(o){I(this||i,o,0)},setData:function(o,s){var T=(this||i).data,_=0;if("string"==typeof o)T[o]!==s&&(T[o]=s,_=1);else{var S=o;for(o in S)T[o]!==S[o]&&(_=1,T[o]=S[o])}_&&(this||i).dataReady&&(U(this||i),this.fire("data",T));return this||i},setFocused:function(o){(this||i).wrapper[o?"addClass":"removeClass"]("cke_widget_focused");this.fire(o?"focus":"blur");return this||i},setSelected:function(o){(this||i).wrapper[o?"addClass":"removeClass"]("cke_widget_selected");this.fire(o?"select":"deselect");return this||i},updateDragHandlerPosition:function(){var o=(this||i).editor,s=(this||i).element.$,T=(this||i)._.dragHandlerOffset,s={x:s.offsetLeft,y:s.offsetTop-15};T&&s.x==T.x&&s.y==T.y||(T=o.checkDirty(),o.fire("lockSnapshot"),(this||i).dragHandlerContainer.setStyles({top:s.y+"px",left:s.x+"px",display:"block"}),o.fire("unlockSnapshot"),!T&&o.resetDirty(),(this||i)._.dragHandlerOffset=s)}};CKEDITOR.event.implementOn(f.prototype);f.getNestedEditable=function(i,o){return!o||o.equals(i)?null:f.isDomNestedEditable(o)?o:f.getNestedEditable(i,o.getParent())};f.isDomDragHandler=function(i){return i.type==CKEDITOR.NODE_ELEMENT&&i.hasAttribute("data-cke-widget-drag-handler")};f.isDomDragHandlerContainer=function(i){return i.type==CKEDITOR.NODE_ELEMENT&&i.hasClass("cke_widget_drag_handler_container")};f.isDomNestedEditable=function(i){return i.type==CKEDITOR.NODE_ELEMENT&&i.hasAttribute("data-cke-widget-editable")};f.isDomWidgetElement=function(i){return i.type==CKEDITOR.NODE_ELEMENT&&i.hasAttribute("data-widget")};f.isDomWidgetWrapper=function(i){return i.type==CKEDITOR.NODE_ELEMENT&&i.hasAttribute("data-cke-widget-wrapper")};f.isDomWidget=function(i){return!!i&&(this.isDomWidgetWrapper(i)||this.isDomWidgetElement(i))};f.isParserWidgetElement=function(i){return i.type==CKEDITOR.NODE_ELEMENT&&!!i.attributes["data-widget"]};f.isParserWidgetWrapper=function(i){return i.type==CKEDITOR.NODE_ELEMENT&&!!i.attributes["data-cke-widget-wrapper"]};f.WRAPPER_CLASS_PREFIX="cke_widget_wrapper_";b.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(o){(this||i)._.initialSetData||(this||i).editor.widgets.destroyAll(!1,this||i);(this||i)._.initialSetData=!1;o=(this||i).editor.dataProcessor.toHtml(o,{context:this.getName(),filter:(this||i).filter,enterMode:(this||i).enterMode});this.setHtml(o);(this||i).editor.widgets.initOnAll(this||i)},getData:function(){return(this||i).editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:(this||i).filter,enterMode:(this||i).enterMode})}});var o=/^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?<\/span>([\s\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?<\/span>(?:<\/(?:div|span)>)?(?:<\/(?:div|span)>)?$/i,s={37:1,38:1,39:1,40:1,8:1,46:1};s[CKEDITOR.SHIFT+121]=1;CKEDITOR.plugins.widget=f;f.repository=a;f.nestedEditable=b}(),function(){function a(o,s,T){(this||i).editor=o;(this||i).notification=null;(this||i)._message=new CKEDITOR.template(s);(this||i)._singularMessage=T?new CKEDITOR.template(T):null;(this||i)._tasks=[];(this||i)._doneTasks=(this||i)._doneWeights=(this||i)._totalWeights=0}function f(o){(this||i)._weight=o||1;(this||i)._doneWeight=0;(this||i)._isCanceled=!1}CKEDITOR.plugins.add("notificationaggregator",{requires:"notification"});a.prototype={createTask:function(o){o=o||{};var s=!(this||i).notification,T;s&&((this||i).notification=this._createNotification());T=this._addTask(o);T.on("updated",(this||i)._onTaskUpdate,this||i);T.on("done",(this||i)._onTaskDone,this||i);T.on("canceled",(function(){this._removeTask(T)}),this||i);this.update();s&&(this||i).notification.show();return T},update:function(){this._updateNotification();this.isFinished()&&this.fire("finished")},getPercentage:function(){return 0===this.getTaskCount()?1:(this||i)._doneWeights/(this||i)._totalWeights},isFinished:function(){return this.getDoneTaskCount()===this.getTaskCount()},getTaskCount:function(){return(this||i)._tasks.length},getDoneTaskCount:function(){return(this||i)._doneTasks},_updateNotification:function(){(this||i).notification.update({message:this._getNotificationMessage(),progress:this.getPercentage()})},_getNotificationMessage:function(){var o=this.getTaskCount(),s={current:this.getDoneTaskCount(),max:o,percentage:Math.round(100*this.getPercentage())};return(1==o&&(this||i)._singularMessage?(this||i)._singularMessage:(this||i)._message).output(s)},_createNotification:function(){return new CKEDITOR.plugins.notification((this||i).editor,{type:"progress"})},_addTask:function(o){o=new f(o.weight);(this||i)._tasks.push(o);(this||i)._totalWeights+=o._weight;return o},_removeTask:function(o){var s=CKEDITOR.tools.indexOf((this||i)._tasks,o);-1!==s&&(o._doneWeight&&((this||i)._doneWeights-=o._doneWeight),(this||i)._totalWeights-=o._weight,(this||i)._tasks.splice(s,1),this.update())},_onTaskUpdate:function(o){(this||i)._doneWeights+=o.data;this.update()},_onTaskDone:function(){(this||i)._doneTasks+=1;this.update()}};CKEDITOR.event.implementOn(a.prototype);f.prototype={done:function(){this.update((this||i)._weight)},update:function(o){if(!this.isDone()&&!this.isCanceled()){o=Math.min((this||i)._weight,o);var s=o-(this||i)._doneWeight;(this||i)._doneWeight=o;this.fire("updated",s);this.isDone()&&this.fire("done")}},cancel:function(){this.isDone()||this.isCanceled()||((this||i)._isCanceled=!0,this.fire("canceled"))},isDone:function(){return(this||i)._weight===(this||i)._doneWeight},isCanceled:function(){return(this||i)._isCanceled}};CKEDITOR.event.implementOn(f.prototype);CKEDITOR.plugins.notificationAggregator=a;CKEDITOR.plugins.notificationAggregator.task=f}(),"use strict",function(){CKEDITOR.plugins.add("uploadwidget",{requires:"widget,clipboard,filetools,notificationaggregator",init:function(i){i.filter.allow("*[!data-widget,!data-cke-upload-id]")},isSupportedEnvironment:function(){return CKEDITOR.plugins.clipboard.isFileApiSupported}});CKEDITOR.fileTools||(CKEDITOR.fileTools={});CKEDITOR.tools.extend(CKEDITOR.fileTools,{addUploadWidget:function(o,s,T){var _=CKEDITOR.fileTools,S=o.uploadRepository,P=T.supportedTypes?10:20;T.fileToElement&&o.on("paste",(function(i){i=i.data;var T=o.widgets.registered[s],P=i.dataTransfer,$=P.getFilesCount(),V=T.loadMethod||"loadAndUpload",j,Y;if(!i.dataValue&&$)for(Y=0;Y<$;Y++)if(j=P.getFile(Y),!T.supportedTypes||_.isTypeSupported(j,T.supportedTypes)){var ee=T.fileToElement(j);j=S.create(j,void 0,T.loaderType);ee&&(j[V](T.uploadUrl,T.additionalRequestParameters),CKEDITOR.fileTools.markElement(ee,s,j.id),"loadAndUpload"!=V&&"upload"!=V||T.skipNotifications||CKEDITOR.fileTools.bindNotifications(o,j),i.dataValue+=ee.getOuterHtml())}}),null,null,P);CKEDITOR.tools.extend(T,{downcast:function(){return new CKEDITOR.htmlParser.text("")},init:function(){var s=this||i,T=(this||i).wrapper.findOne("[data-cke-upload-id]").data("cke-upload-id"),_=S.loaders[T],P=CKEDITOR.tools.capitalize,$,V;_.on("update",(function(i){"abort"===_.status&&"function"===typeof s.onAbort&&s.onAbort(_);if(s.wrapper&&s.wrapper.getParent()){o.fire("lockSnapshot");i="on"+P(_.status);"abort"!==_.status&&"function"===typeof s[i]&&!1===s[i](_)||(V="cke_upload_"+_.status,s.wrapper&&V!=$&&($&&s.wrapper.removeClass($),s.wrapper.addClass(V),$=V),"error"!=_.status&&"abort"!=_.status||o.widgets.del(s));o.fire("unlockSnapshot")}else CKEDITOR.instances[o.name]&&o.editable().find('[data-cke-upload-id="'+T+'"]').count()||_.abort(),i.removeListener()}));_.update()},replaceWith:function(s,T){if(""===s.trim())o.widgets.del(this||i);else{var _=(this||i)==o.widgets.focused,S=o.editable(),P=o.createRange(),$,V;_||(V=o.getSelection().createBookmarks());P.setStartBefore((this||i).wrapper);P.setEndAfter((this||i).wrapper);_&&($=P.createBookmark());S.insertHtmlIntoRange(s,P,T);o.widgets.checkWidgets({initOnlyNew:!0});o.widgets.destroy(this||i,!0);_?(P.moveToBookmark($),P.select()):o.getSelection().selectBookmarks(V)}},_getLoader:function(){var o=(this||i).wrapper.findOne("[data-cke-upload-id]");return o?(this||i).editor.uploadRepository.loaders[o.data("cke-upload-id")]:null}});o.widgets.add(s,T)},markElement:function(i,o,s){i.setAttributes({"data-cke-upload-id":s,"data-widget":o})},bindNotifications:function(i,o){function b(){s=i._.uploadWidgetNotificaionAggregator;s&&!s.isFinished()||(s=i._.uploadWidgetNotificaionAggregator=new CKEDITOR.plugins.notificationAggregator(i,i.lang.uploadwidget.uploadMany,i.lang.uploadwidget.uploadOne),s.once("finished",(function(){var o=s.getTaskCount();0===o?s.notification.hide():s.notification.update({message:1==o?i.lang.uploadwidget.doneOne:i.lang.uploadwidget.doneMany.replace("%1",o),type:"success",important:1})})))}var s,T=null;o.on("update",(function(){!T&&o.uploadTotal&&(b(),T=s.createTask({weight:o.uploadTotal}));T&&"uploading"==o.status&&T.update(o.uploaded)}));o.on("uploaded",(function(){T&&T.done()}));o.on("error",(function(){T&&T.cancel();i.showNotification(o.message,"warning")}));o.on("abort",(function(){T&&T.cancel();CKEDITOR.instances[i.name]&&i.showNotification(i.lang.uploadwidget.abort,"info")}))}})}(),"use strict",function(){function a(i){9>=i&&(i="0"+i);return String(i)}function f(i){var s=new Date,s=[s.getFullYear(),s.getMonth()+1,s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds()];o+=1;return"image-"+CKEDITOR.tools.array.map(s,a).join("")+"-"+o+"."+i}var o=0;CKEDITOR.plugins.add("uploadimage",{requires:"uploadwidget",onLoad:function(){CKEDITOR.addCss(".cke_upload_uploading img{opacity: 0.3}")},isSupportedEnvironment:function(){return CKEDITOR.plugins.clipboard.isFileApiSupported},init:function(o){if(this.isSupportedEnvironment()){var s=CKEDITOR.fileTools,T=s.getUploadUrl(o.config,"image");T&&(s.addUploadWidget(o,"uploadimage",{supportedTypes:/image\/(jpeg|png|gif|bmp)/,uploadUrl:T,fileToElement:function(){var i=new CKEDITOR.dom.element("img");i.setAttribute("src","data:image/gif;base64,R0lGODlhDgAOAIAAAAAAAP///yH5BAAAAAAALAAAAAAOAA4AAAIMhI+py+0Po5y02qsKADs=");return i},parts:{img:"img"},onUploading:function(o){(this||i).parts.img.setAttribute("src",o.data)},onUploaded:function(o){var s=(this||i).parts.img.$;this.replaceWith('<img src="'+o.url+'" width="'+(o.responseData.width||s.naturalWidth)+'" height="'+(o.responseData.height||s.naturalHeight)+'">')}}),o.on("paste",(function(i){if(i.data.dataValue.match(/<img[\s\S]+data:/i)){i=i.data;var _=document.implementation.createHTMLDocument(""),_=new CKEDITOR.dom.element(_.body),S,P,$;_.data("cke-editable",1);_.appendHtml(i.dataValue);S=_.find("img");for($=0;$<S.count();$++){P=S.getItem($);var V=P.getAttribute("src"),j=V&&"data:"==V.substring(0,5),Y=null===P.data("cke-realelement");j&&Y&&!P.data("cke-upload-id")&&!P.isReadOnly(1)&&(j=(j=V.match(/image\/([a-z]+?);/i))&&j[1]||"jpg",V=o.uploadRepository.create(V,f(j)),V.upload(T),s.markElement(P,"uploadimage",V.id),s.bindNotifications(o,V))}i.dataValue=_.getHtml()}})))}}})}(),CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(i){i.config.wsc_onFinish="function"===typeof i.config.wsc_onFinish?i.config.wsc_onFinish:function(){};i.config.wsc_onClose="function"===typeof i.config.wsc_onClose?i.config.wsc_onClose:function(){}},parseConfig:function(i){i.config.wsc_customerId=i.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk";i.config.wsc_customDictionaryIds=i.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"";i.config.wsc_userDictionaryName=i.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"";i.config.wsc_customLoaderScript=i.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript;i.config.wsc_interfaceLang=i.config.wsc_interfaceLang;CKEDITOR.config.wsc_cmd=i.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell";CKEDITOR.config.wsc_version="v4.3.0-master-d769233";CKEDITOR.config.wsc_removeGlobalVariable=!0},onLoad:function(o){"moono-lisa"==(CKEDITOR.skinName||o.config.skin)&&CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl((this||i).path+"skins/"+CKEDITOR.skin.name+"/wsc.css"))},init:function(o){var s=CKEDITOR.env;this.parseConfig(o);this.parseApi(o);o.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!CKEDITOR.env.opera&&!CKEDITOR.env.air&&document.domain==window.location.hostname&&!(s.ie&&(8>s.version||s.quirks))};"undefined"==typeof o.plugins.scayt&&o.ui.addButton&&o.ui.addButton("SpellChecker",{label:o.lang.wsc.toolbar,click:function(i){var o=i.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?i.container.getText():i.document.getBody().getText();(o=o.replace(/\s/g,""))?i.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"});CKEDITOR.dialog.add("checkspell",(this||i).path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}}),function(){function a(o){function b(i){var o=!1;P.attachListener(P,"keydown",(function(){var s=T.getBody().getElementsByTag(i);if(!o){for(var _=0;_<s.count();_++)s.getItem(_).setCustomData("retain",!0);o=!0}}),null,null,1);P.attachListener(P,"keyup",(function(){var s=T.getElementsByTag(i);o&&(1==s.count()&&!s.getItem(0).getCustomData("retain")&&CKEDITOR.tools.isEmpty(s.getItem(0).getAttributes())&&s.getItem(0).remove(1),o=!1)}))}var s=(this||i).editor,T=o.document,_=T.body,S=T.getElementById("cke_actscrpt");S&&S.parentNode.removeChild(S);(S=T.getElementById("cke_shimscrpt"))&&S.parentNode.removeChild(S);(S=T.getElementById("cke_basetagscrpt"))&&S.parentNode.removeChild(S);_.contentEditable=!0;CKEDITOR.env.ie&&(_.hideFocus=!0,_.disabled=!0,_.removeAttribute("disabled"));delete(this||i)._.isLoadingData;(this||i).$=_;T=new CKEDITOR.dom.document(T);this.setup();this.fixInitialSelection();var P=this||i;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&T.getDocumentElement().addClass(T.$.compatMode);CKEDITOR.env.ie&&!CKEDITOR.env.edge&&s.enterMode!=CKEDITOR.ENTER_P?b("p"):CKEDITOR.env.edge&&15>CKEDITOR.env.version&&s.enterMode!=CKEDITOR.ENTER_DIV&&b("div");(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&T.getDocumentElement().on("mousedown",(function(i){i.data.getTarget().is("html")&&setTimeout((function(){s.editable().focus()}))}));f(s);try{s.document.$.execCommand("2D-position",!1,!0)}catch(i){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==s.document.$.compatMode)&&this.attachListener(this||i,"keydown",(function(o){var T=o.data.getKeystroke();if(33==T||34==T)if(CKEDITOR.env.ie)setTimeout((function(){s.getSelection().scrollIntoView()}),0);else if(s.window.$.innerHeight>(this||i).$.offsetHeight){var _=s.createRange();_[33==T?"moveToElementEditStart":"moveToElementEditEnd"](this||i);_.select();o.data.preventDefault()}}));CKEDITOR.env.ie&&this.attachListener(T,"blur",(function(){try{T.$.selection.empty()}catch(i){}}));CKEDITOR.env.iOS&&this.attachListener(T,"touchend",(function(){o.focus()}));_=s.document.getElementsByTag("title").getItem(0);_.data("cke-title",_.getText());CKEDITOR.env.ie&&(s.document.$.title=(this||i)._.docTitle);CKEDITOR.tools.setTimeout((function(){"unloaded"==(this||i).status&&((this||i).status="ready");s.fire("contentDom");(this||i)._.isPendingFocus&&(s.focus(),(this||i)._.isPendingFocus=!1);setTimeout((function(){s.fire("dataReady")}),0)}),0,this||i)}function f(i){function b(){var o;i.editable().attachListener(i,"selectionChange",(function(){var s=i.getSelection().getSelectedElement();s&&(o&&(o.detachEvent("onresizestart",c),o=null),s.$.attachEvent("onresizestart",c),o=s.$)}))}function c(i){i.returnValue=!1}if(CKEDITOR.env.gecko)try{var o=i.document.$;o.execCommand("enableObjectResizing",!1,!i.config.disableObjectResizing);o.execCommand("enableInlineTableEditing",!1,!i.config.disableNativeTableHandles)}catch(i){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&i.config.disableObjectResizing&&b(i)}function b(){var i=[];if(8<=CKEDITOR.document.$.documentMode){i.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var o=[],s;for(s in CKEDITOR.dtd.$removeEmpty)o.push("html.CSS1Compat "+s+"[contenteditable=false]");i.push(o.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(i.push("html{height:100% !important}"),i.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));i.push("html{cursor:text;*cursor:auto}");i.push("img,input,textarea{cursor:default}");return i.join("\n")}var o;CKEDITOR.plugins.add("wysiwygarea",{init:function(i){i.config.fullPage&&i.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"});i.addMode("wysiwyg",(function(s){function f(T){T&&T.removeListener();i.editable(new o(i,_.$.contentWindow.document.body));i.setData(i.getData(1),s)}var T="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",T=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(T)+"}())":"",_=CKEDITOR.dom.element.createFromHtml('<iframe src="'+T+'" frameBorder="0"></iframe>');_.setStyles({width:"100%",height:"100%"});_.addClass("cke_wysiwyg_frame").addClass("cke_reset");T=i.ui.space("contents");T.append(_);var S=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;S&&_.on("load",f);var P=i.title,$=i.fire("ariaEditorHelpLabel",{}).label;P&&(CKEDITOR.env.ie&&$&&(P+=", "+$),_.setAttribute("title",P));if($){var P=CKEDITOR.tools.getNextId(),V=CKEDITOR.dom.element.createFromHtml('<span id="'+P+'" class="cke_voice_label">'+$+"</span>");T.append(V,1);_.setAttribute("aria-describedby",P)}i.on("beforeModeUnload",(function(i){i.removeListener();V&&V.remove()}));_.setAttributes({tabIndex:i.tabIndex,allowTransparency:"true"});!S&&f();i.fire("ariaWidget",_)}))}});CKEDITOR.editor.prototype.addContentsCss=function(o){var s=(this||i).config,T=s.contentsCss;CKEDITOR.tools.isArray(T)||(s.contentsCss=T?[T]:[]);s.contentsCss.push(o)};o=CKEDITOR.tools.createClass({$:function(){(this||i).base.apply(this||i,arguments);(this||i)._.frameLoadedHandler=CKEDITOR.tools.addFunction((function(o){CKEDITOR.tools.setTimeout(a,0,this||i,o)}),this||i);(this||i)._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(o,s){var T=(this||i).editor;if(s)this.setHtml(o),this.fixInitialSelection(),T.fire("dataReady");else{(this||i)._.isLoadingData=!0;T._.dataStore={id:1};var _=T.config,S=_.fullPage,P=_.docType,$=CKEDITOR.tools.buildStyleHtml(b()).replace(/<style>/,'<style data-cke-temp="1">');S||($+=CKEDITOR.tools.buildStyleHtml(T.config.contentsCss));var V=_.baseHref?'<base href="'+_.baseHref+'" data-cke-temp="1" />':"";S&&(o=o.replace(/<!DOCTYPE[^>]*>/i,(function(i){T.docType=P=i;return""})).replace(/<\?xml\s[^\?]*\?>/i,(function(i){T.xmlDeclaration=i;return""})));o=T.dataProcessor.toHtml(o);S?(/<body[\s|>]/.test(o)||(o="<body>"+o),/<html[\s|>]/.test(o)||(o="<html>"+o+"</html>"),/<head[\s|>]/.test(o)?/<title[\s|>]/.test(o)||(o=o.replace(/<head[^>]*>/,"$&<title></title>")):o=o.replace(/<html[^>]*>/,"$&<head><title></title></head>"),V&&(o=o.replace(/<head[^>]*?>/,"$&"+V)),o=o.replace(/<\/head\s*>/,$+"$&"),o=P+o):o=_.docType+'<html dir="'+_.contentsLangDirection+'" lang="'+(_.contentsLanguage||T.langCode)+'"><head><title>'+(this||i)._.docTitle+"</title>"+V+$+"</head><body"+(_.bodyId?' id="'+_.bodyId+'"':"")+(_.bodyClass?' class="'+_.bodyClass+'"':"")+">"+o+"</body></html>";CKEDITOR.env.gecko&&(o=o.replace(/<body/,'<body contenteditable="true" '),2e4>CKEDITOR.env.version&&(o=o.replace(/<body[^>]*>/,"$&\x3c!-- cke-content-start --\x3e")));_='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+(this||i)._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"<\/script>";CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(_+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)<\/script>');V&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(_+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;<\/script>');o=o.replace(/(?=\s*<\/(:?head)>)/,_);this.clearCustomData();this.clearListeners();T.fire("contentDomUnload");var j=this.getDocument();try{j.write(o)}catch(i){setTimeout((function(){j.write(o)}),0)}}},getData:function(o){if(o)return this.getHtml();o=(this||i).editor;var s=o.config,T=s.fullPage,_=T&&o.docType,S=T&&o.xmlDeclaration,P=this.getDocument(),T=T?P.getDocumentElement().getOuterHtml():P.getBody().getHtml();CKEDITOR.env.gecko&&s.enterMode!=CKEDITOR.ENTER_BR&&(T=T.replace(/<br>(?=\s*(:?$|<\/body>))/,""));T=o.dataProcessor.toDataFormat(T);S&&(T=S+"\n"+T);_&&(T=_+"\n"+T);return T},focus:function(){(this||i)._.isLoadingData?(this||i)._.isPendingFocus=!0:o.baseProto.focus.call(this||i)},detach:function(){var s=(this||i).editor,T=s.document,_;try{_=s.window.getFrame()}catch(i){}o.baseProto.detach.call(this||i);this.clearCustomData();T.getDocumentElement().clearCustomData();CKEDITOR.tools.removeFunction((this||i)._.frameLoadedHandler);_&&_.getParent()?(_.clearCustomData(),(s=_.removeCustomData("onResize"))&&s.removeListener(),_.remove()):CKEDITOR.warn("editor-destroy-iframe")}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.plugins="dialogui,dialog,a11yhelp,about,basicstyles,blockquote,notification,button,toolbar,clipboard,panel,floatpanel,menu,contextmenu,elementspath,indent,indentlist,list,enterkey,entities,popup,filetools,filebrowser,floatingspace,listblock,richcombo,format,horizontalrule,htmlwriter,image,fakeobjects,link,magicline,maximize,pastefromword,pastetext,removeformat,resize,menubutton,scayt,showborders,sourcearea,specialchar,stylescombo,tab,table,tabletools,tableselection,undo,lineutils,widgetselection,widget,notificationaggregator,uploadwidget,uploadimage,wsc,wysiwygarea",CKEDITOR.config.skin="moono-lisa",function(){var a=function(i,o){var s=CKEDITOR.getUrl("plugins/"+o);i=i.split(",");for(var T=0;T<i.length;T++)CKEDITOR.skin.icons[i[T]]={path:s,offset:-i[++T],bgsize:i[++T]}};CKEDITOR.env.hidpi?a("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,codesnippet,384,,bgcolor,408,,textcolor,432,,copyformatting,456,,creatediv,480,,docprops-rtl,504,,docprops,528,,easyimagealigncenter,552,,easyimagealignleft,576,,easyimagealignright,600,,easyimagealt,624,,easyimagefull,648,,easyimageside,672,,easyimageupload,696,,embed,720,,embedsemantic,744,,emojipanel,768,,find-rtl,792,,find,816,,replace,840,,flash,864,,button,888,,checkbox,912,,form,936,,hiddenfield,960,,imagebutton,984,,radio,1008,,select-rtl,1032,,select,1056,,textarea-rtl,1080,,textarea,1104,,textfield-rtl,1128,,textfield,1152,,horizontalrule,1176,,iframe,1200,,image,1224,,indent-rtl,1248,,indent,1272,,outdent-rtl,1296,,outdent,1320,,justifyblock,1344,,justifycenter,1368,,justifyleft,1392,,justifyright,1416,,language,1440,,anchor-rtl,1464,,anchor,1488,,link,1512,,unlink,1536,,bulletedlist-rtl,1560,,bulletedlist,1584,,numberedlist-rtl,1608,,numberedlist,1632,,mathjax,1656,,maximize,1680,,newpage-rtl,1704,,newpage,1728,,pagebreak-rtl,1752,,pagebreak,1776,,pastefromword-rtl,1800,,pastefromword,1824,,pastetext-rtl,1848,,pastetext,1872,,placeholder,1896,,preview-rtl,1920,,preview,1944,,print,1968,,removeformat,1992,,save,2016,,scayt,2040,,selectall,2064,,showblocks-rtl,2088,,showblocks,2112,,smiley,2136,,source-rtl,2160,,source,2184,,sourcedialog-rtl,2208,,sourcedialog,2232,,specialchar,2256,,table,2280,,templates-rtl,2304,,templates,2328,,uicolor,2352,,redo-rtl,2376,,redo,2400,,undo-rtl,2424,,undo,2448,,simplebox,4944,auto,spellchecker,2496,","icons_hidpi.png"):a("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,codesnippet,384,auto,bgcolor,408,auto,textcolor,432,auto,copyformatting,456,auto,creatediv,480,auto,docprops-rtl,504,auto,docprops,528,auto,easyimagealigncenter,552,auto,easyimagealignleft,576,auto,easyimagealignright,600,auto,easyimagealt,624,auto,easyimagefull,648,auto,easyimageside,672,auto,easyimageupload,696,auto,embed,720,auto,embedsemantic,744,auto,emojipanel,768,auto,find-rtl,792,auto,find,816,auto,replace,840,auto,flash,864,auto,button,888,auto,checkbox,912,auto,form,936,auto,hiddenfield,960,auto,imagebutton,984,auto,radio,1008,auto,select-rtl,1032,auto,select,1056,auto,textarea-rtl,1080,auto,textarea,1104,auto,textfield-rtl,1128,auto,textfield,1152,auto,horizontalrule,1176,auto,iframe,1200,auto,image,1224,auto,indent-rtl,1248,auto,indent,1272,auto,outdent-rtl,1296,auto,outdent,1320,auto,justifyblock,1344,auto,justifycenter,1368,auto,justifyleft,1392,auto,justifyright,1416,auto,language,1440,auto,anchor-rtl,1464,auto,anchor,1488,auto,link,1512,auto,unlink,1536,auto,bulletedlist-rtl,1560,auto,bulletedlist,1584,auto,numberedlist-rtl,1608,auto,numberedlist,1632,auto,mathjax,1656,auto,maximize,1680,auto,newpage-rtl,1704,auto,newpage,1728,auto,pagebreak-rtl,1752,auto,pagebreak,1776,auto,pastefromword-rtl,1800,auto,pastefromword,1824,auto,pastetext-rtl,1848,auto,pastetext,1872,auto,placeholder,1896,auto,preview-rtl,1920,auto,preview,1944,auto,print,1968,auto,removeformat,1992,auto,save,2016,auto,scayt,2040,auto,selectall,2064,auto,showblocks-rtl,2088,auto,showblocks,2112,auto,smiley,2136,auto,source-rtl,2160,auto,source,2184,auto,sourcedialog-rtl,2208,auto,sourcedialog,2232,auto,specialchar,2256,auto,table,2280,auto,templates-rtl,2304,auto,templates,2328,auto,uicolor,2352,auto,redo-rtl,2376,auto,redo,2400,auto,undo-rtl,2424,auto,undo,2448,auto,simplebox,2472,auto,spellchecker,2496,auto","icons.png")}())})();var o={};export default o;

